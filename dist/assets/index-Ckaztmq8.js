const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/react-DwN-bxcz.js","assets/mixin-D3UDm--6.js","assets/hls-7lchh9yT.js","assets/react-ChWG-e-6.js","assets/index-BWz97y3Q.js"])))=>i.map(i=>d[i]);
(function(){const Nt=document.createElement("link").relList;if(Nt&&Nt.supports&&Nt.supports("modulepreload"))return;for(const wt of document.querySelectorAll('link[rel="modulepreload"]'))Ee(wt);new MutationObserver(wt=>{for(const at of wt)if(at.type==="childList")for(const Ft of at.addedNodes)Ft.tagName==="LINK"&&Ft.rel==="modulepreload"&&Ee(Ft)}).observe(document,{childList:!0,subtree:!0});function ct(wt){const at={};return wt.integrity&&(at.integrity=wt.integrity),wt.referrerPolicy&&(at.referrerPolicy=wt.referrerPolicy),wt.crossOrigin==="use-credentials"?at.credentials="include":wt.crossOrigin==="anonymous"?at.credentials="omit":at.credentials="same-origin",at}function Ee(wt){if(wt.ep)return;wt.ep=!0;const at=ct(wt);fetch(wt.href,at)}})();function pf(Ae){return Ae&&Ae.__esModule&&Object.prototype.hasOwnProperty.call(Ae,"default")?Ae.default:Ae}var ap={exports:{}},hu={};var Kh;function _m(){if(Kh)return hu;Kh=1;var Ae=Symbol.for("react.transitional.element"),Nt=Symbol.for("react.fragment");function ct(Ee,wt,at){var Ft=null;if(at!==void 0&&(Ft=""+at),wt.key!==void 0&&(Ft=""+wt.key),"key"in wt){at={};for(var oe in wt)oe!=="key"&&(at[oe]=wt[oe])}else at=wt;return wt=at.ref,{$$typeof:Ae,type:Ee,key:Ft,ref:wt!==void 0?wt:null,props:at}}return hu.Fragment=Nt,hu.jsx=ct,hu.jsxs=ct,hu}var Yh;function bm(){return Yh||(Yh=1,ap.exports=_m()),ap.exports}var je=bm(),np={exports:{}},Qr={};var Qh;function Sm(){if(Qh)return Qr;Qh=1;var Ae=Symbol.for("react.transitional.element"),Nt=Symbol.for("react.portal"),ct=Symbol.for("react.fragment"),Ee=Symbol.for("react.strict_mode"),wt=Symbol.for("react.profiler"),at=Symbol.for("react.consumer"),Ft=Symbol.for("react.context"),oe=Symbol.for("react.forward_ref"),Y=Symbol.for("react.suspense"),S=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),C=Symbol.for("react.activity"),T=Symbol.iterator;function b(G){return G===null||typeof G!="object"?null:(G=T&&G[T]||G["@@iterator"],typeof G=="function"?G:null)}var J={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w=Object.assign,n={};function f(G,ae,Q){this.props=G,this.context=ae,this.refs=n,this.updater=Q||J}f.prototype.isReactComponent={},f.prototype.setState=function(G,ae){if(typeof G!="object"&&typeof G!="function"&&G!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,G,ae,"setState")},f.prototype.forceUpdate=function(G){this.updater.enqueueForceUpdate(this,G,"forceUpdate")};function U(){}U.prototype=f.prototype;function q(G,ae,Q){this.props=G,this.context=ae,this.refs=n,this.updater=Q||J}var g=q.prototype=new U;g.constructor=q,w(g,f.prototype),g.isPureReactComponent=!0;var h=Array.isArray;function k(){}var W={H:null,A:null,T:null,S:null},j=Object.prototype.hasOwnProperty;function y(G,ae,Q){var le=Q.ref;return{$$typeof:Ae,type:G,key:ae,ref:le!==void 0?le:null,props:Q}}function d(G,ae){return y(G.type,ae,G.props)}function R(G){return typeof G=="object"&&G!==null&&G.$$typeof===Ae}function m(G){var ae={"=":"=0",":":"=2"};return"$"+G.replace(/[=:]/g,function(Q){return ae[Q]})}var P=/\/+/g;function H(G,ae){return typeof G=="object"&&G!==null&&G.key!=null?m(""+G.key):ae.toString(36)}function B(G){switch(G.status){case"fulfilled":return G.value;case"rejected":throw G.reason;default:switch(typeof G.status=="string"?G.then(k,k):(G.status="pending",G.then(function(ae){G.status==="pending"&&(G.status="fulfilled",G.value=ae)},function(ae){G.status==="pending"&&(G.status="rejected",G.reason=ae)})),G.status){case"fulfilled":return G.value;case"rejected":throw G.reason}}throw G}function $(G,ae,Q,le,pe){var ue=typeof G;(ue==="undefined"||ue==="boolean")&&(G=null);var ne=!1;if(G===null)ne=!0;else switch(ue){case"bigint":case"string":case"number":ne=!0;break;case"object":switch(G.$$typeof){case Ae:case Nt:ne=!0;break;case x:return ne=G._init,$(ne(G._payload),ae,Q,le,pe)}}if(ne)return pe=pe(G),ne=le===""?"."+H(G,0):le,h(pe)?(Q="",ne!=null&&(Q=ne.replace(P,"$&/")+"/"),$(pe,ae,Q,"",function(_e){return _e})):pe!=null&&(R(pe)&&(pe=d(pe,Q+(pe.key==null||G&&G.key===pe.key?"":(""+pe.key).replace(P,"$&/")+"/")+ne)),ae.push(pe)),1;ne=0;var Oe=le===""?".":le+":";if(h(G))for(var ye=0;ye<G.length;ye++)le=G[ye],ue=Oe+H(le,ye),ne+=$(le,ae,Q,ue,pe);else if(ye=b(G),typeof ye=="function")for(G=ye.call(G),ye=0;!(le=G.next()).done;)le=le.value,ue=Oe+H(le,ye++),ne+=$(le,ae,Q,ue,pe);else if(ue==="object"){if(typeof G.then=="function")return $(B(G),ae,Q,le,pe);throw ae=String(G),Error("Objects are not valid as a React child (found: "+(ae==="[object Object]"?"object with keys {"+Object.keys(G).join(", ")+"}":ae)+"). If you meant to render a collection of children, use an array instead.")}return ne}function L(G,ae,Q){if(G==null)return G;var le=[],pe=0;return $(G,le,"","",function(ue){return ae.call(Q,ue,pe++)}),le}function z(G){if(G._status===-1){var ae=G._result;ae=ae(),ae.then(function(Q){(G._status===0||G._status===-1)&&(G._status=1,G._result=Q)},function(Q){(G._status===0||G._status===-1)&&(G._status=2,G._result=Q)}),G._status===-1&&(G._status=0,G._result=ae)}if(G._status===1)return G._result.default;throw G._result}var V=typeof reportError=="function"?reportError:function(G){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ae=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof G=="object"&&G!==null&&typeof G.message=="string"?String(G.message):String(G),error:G});if(!window.dispatchEvent(ae))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",G);return}console.error(G)},X={map:L,forEach:function(G,ae,Q){L(G,function(){ae.apply(this,arguments)},Q)},count:function(G){var ae=0;return L(G,function(){ae++}),ae},toArray:function(G){return L(G,function(ae){return ae})||[]},only:function(G){if(!R(G))throw Error("React.Children.only expected to receive a single React element child.");return G}};return Qr.Activity=C,Qr.Children=X,Qr.Component=f,Qr.Fragment=ct,Qr.Profiler=wt,Qr.PureComponent=q,Qr.StrictMode=Ee,Qr.Suspense=Y,Qr.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=W,Qr.__COMPILER_RUNTIME={__proto__:null,c:function(G){return W.H.useMemoCache(G)}},Qr.cache=function(G){return function(){return G.apply(null,arguments)}},Qr.cacheSignal=function(){return null},Qr.cloneElement=function(G,ae,Q){if(G==null)throw Error("The argument must be a React element, but you passed "+G+".");var le=w({},G.props),pe=G.key;if(ae!=null)for(ue in ae.key!==void 0&&(pe=""+ae.key),ae)!j.call(ae,ue)||ue==="key"||ue==="__self"||ue==="__source"||ue==="ref"&&ae.ref===void 0||(le[ue]=ae[ue]);var ue=arguments.length-2;if(ue===1)le.children=Q;else if(1<ue){for(var ne=Array(ue),Oe=0;Oe<ue;Oe++)ne[Oe]=arguments[Oe+2];le.children=ne}return y(G.type,pe,le)},Qr.createContext=function(G){return G={$$typeof:Ft,_currentValue:G,_currentValue2:G,_threadCount:0,Provider:null,Consumer:null},G.Provider=G,G.Consumer={$$typeof:at,_context:G},G},Qr.createElement=function(G,ae,Q){var le,pe={},ue=null;if(ae!=null)for(le in ae.key!==void 0&&(ue=""+ae.key),ae)j.call(ae,le)&&le!=="key"&&le!=="__self"&&le!=="__source"&&(pe[le]=ae[le]);var ne=arguments.length-2;if(ne===1)pe.children=Q;else if(1<ne){for(var Oe=Array(ne),ye=0;ye<ne;ye++)Oe[ye]=arguments[ye+2];pe.children=Oe}if(G&&G.defaultProps)for(le in ne=G.defaultProps,ne)pe[le]===void 0&&(pe[le]=ne[le]);return y(G,ue,pe)},Qr.createRef=function(){return{current:null}},Qr.forwardRef=function(G){return{$$typeof:oe,render:G}},Qr.isValidElement=R,Qr.lazy=function(G){return{$$typeof:x,_payload:{_status:-1,_result:G},_init:z}},Qr.memo=function(G,ae){return{$$typeof:S,type:G,compare:ae===void 0?null:ae}},Qr.startTransition=function(G){var ae=W.T,Q={};W.T=Q;try{var le=G(),pe=W.S;pe!==null&&pe(Q,le),typeof le=="object"&&le!==null&&typeof le.then=="function"&&le.then(k,V)}catch(ue){V(ue)}finally{ae!==null&&Q.types!==null&&(ae.types=Q.types),W.T=ae}},Qr.unstable_useCacheRefresh=function(){return W.H.useCacheRefresh()},Qr.use=function(G){return W.H.use(G)},Qr.useActionState=function(G,ae,Q){return W.H.useActionState(G,ae,Q)},Qr.useCallback=function(G,ae){return W.H.useCallback(G,ae)},Qr.useContext=function(G){return W.H.useContext(G)},Qr.useDebugValue=function(){},Qr.useDeferredValue=function(G,ae){return W.H.useDeferredValue(G,ae)},Qr.useEffect=function(G,ae){return W.H.useEffect(G,ae)},Qr.useEffectEvent=function(G){return W.H.useEffectEvent(G)},Qr.useId=function(){return W.H.useId()},Qr.useImperativeHandle=function(G,ae,Q){return W.H.useImperativeHandle(G,ae,Q)},Qr.useInsertionEffect=function(G,ae){return W.H.useInsertionEffect(G,ae)},Qr.useLayoutEffect=function(G,ae){return W.H.useLayoutEffect(G,ae)},Qr.useMemo=function(G,ae){return W.H.useMemo(G,ae)},Qr.useOptimistic=function(G,ae){return W.H.useOptimistic(G,ae)},Qr.useReducer=function(G,ae,Q){return W.H.useReducer(G,ae,Q)},Qr.useRef=function(G){return W.H.useRef(G)},Qr.useState=function(G){return W.H.useState(G)},Qr.useSyncExternalStore=function(G,ae,Q){return W.H.useSyncExternalStore(G,ae,Q)},Qr.useTransition=function(){return W.H.useTransition()},Qr.version="19.2.3",Qr}var Xh;function dp(){return Xh||(Xh=1,np.exports=Sm()),np.exports}var St=dp();const Ks=pf(St);var ip={exports:{}},fu={},sp={exports:{}},op={};var Jh;function Em(){return Jh||(Jh=1,(function(Ae){function Nt($,L){var z=$.length;$.push(L);e:for(;0<z;){var V=z-1>>>1,X=$[V];if(0<wt(X,L))$[V]=L,$[z]=X,z=V;else break e}}function ct($){return $.length===0?null:$[0]}function Ee($){if($.length===0)return null;var L=$[0],z=$.pop();if(z!==L){$[0]=z;e:for(var V=0,X=$.length,G=X>>>1;V<G;){var ae=2*(V+1)-1,Q=$[ae],le=ae+1,pe=$[le];if(0>wt(Q,z))le<X&&0>wt(pe,Q)?($[V]=pe,$[le]=z,V=le):($[V]=Q,$[ae]=z,V=ae);else if(le<X&&0>wt(pe,z))$[V]=pe,$[le]=z,V=le;else break e}}return L}function wt($,L){var z=$.sortIndex-L.sortIndex;return z!==0?z:$.id-L.id}if(Ae.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var at=performance;Ae.unstable_now=function(){return at.now()}}else{var Ft=Date,oe=Ft.now();Ae.unstable_now=function(){return Ft.now()-oe}}var Y=[],S=[],x=1,C=null,T=3,b=!1,J=!1,w=!1,n=!1,f=typeof setTimeout=="function"?setTimeout:null,U=typeof clearTimeout=="function"?clearTimeout:null,q=typeof setImmediate<"u"?setImmediate:null;function g($){for(var L=ct(S);L!==null;){if(L.callback===null)Ee(S);else if(L.startTime<=$)Ee(S),L.sortIndex=L.expirationTime,Nt(Y,L);else break;L=ct(S)}}function h($){if(w=!1,g($),!J)if(ct(Y)!==null)J=!0,k||(k=!0,m());else{var L=ct(S);L!==null&&B(h,L.startTime-$)}}var k=!1,W=-1,j=5,y=-1;function d(){return n?!0:!(Ae.unstable_now()-y<j)}function R(){if(n=!1,k){var $=Ae.unstable_now();y=$;var L=!0;try{e:{J=!1,w&&(w=!1,U(W),W=-1),b=!0;var z=T;try{t:{for(g($),C=ct(Y);C!==null&&!(C.expirationTime>$&&d());){var V=C.callback;if(typeof V=="function"){C.callback=null,T=C.priorityLevel;var X=V(C.expirationTime<=$);if($=Ae.unstable_now(),typeof X=="function"){C.callback=X,g($),L=!0;break t}C===ct(Y)&&Ee(Y),g($)}else Ee(Y);C=ct(Y)}if(C!==null)L=!0;else{var G=ct(S);G!==null&&B(h,G.startTime-$),L=!1}}break e}finally{C=null,T=z,b=!1}L=void 0}}finally{L?m():k=!1}}}var m;if(typeof q=="function")m=function(){q(R)};else if(typeof MessageChannel<"u"){var P=new MessageChannel,H=P.port2;P.port1.onmessage=R,m=function(){H.postMessage(null)}}else m=function(){f(R,0)};function B($,L){W=f(function(){$(Ae.unstable_now())},L)}Ae.unstable_IdlePriority=5,Ae.unstable_ImmediatePriority=1,Ae.unstable_LowPriority=4,Ae.unstable_NormalPriority=3,Ae.unstable_Profiling=null,Ae.unstable_UserBlockingPriority=2,Ae.unstable_cancelCallback=function($){$.callback=null},Ae.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):j=0<$?Math.floor(1e3/$):5},Ae.unstable_getCurrentPriorityLevel=function(){return T},Ae.unstable_next=function($){switch(T){case 1:case 2:case 3:var L=3;break;default:L=T}var z=T;T=L;try{return $()}finally{T=z}},Ae.unstable_requestPaint=function(){n=!0},Ae.unstable_runWithPriority=function($,L){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var z=T;T=$;try{return L()}finally{T=z}},Ae.unstable_scheduleCallback=function($,L,z){var V=Ae.unstable_now();switch(typeof z=="object"&&z!==null?(z=z.delay,z=typeof z=="number"&&0<z?V+z:V):z=V,$){case 1:var X=-1;break;case 2:X=250;break;case 5:X=1073741823;break;case 4:X=1e4;break;default:X=5e3}return X=z+X,$={id:x++,callback:L,priorityLevel:$,startTime:z,expirationTime:X,sortIndex:-1},z>V?($.sortIndex=z,Nt(S,$),ct(Y)===null&&$===ct(S)&&(w?(U(W),W=-1):w=!0,B(h,z-V))):($.sortIndex=X,Nt(Y,$),J||b||(J=!0,k||(k=!0,m()))),$},Ae.unstable_shouldYield=d,Ae.unstable_wrapCallback=function($){var L=T;return function(){var z=T;T=L;try{return $.apply(this,arguments)}finally{T=z}}}})(op)),op}var Zh;function wm(){return Zh||(Zh=1,sp.exports=Em()),sp.exports}var cp={exports:{}},$i={};var ef;function Rm(){if(ef)return $i;ef=1;var Ae=dp();function Nt(Y){var S="https://react.dev/errors/"+Y;if(1<arguments.length){S+="?args[]="+encodeURIComponent(arguments[1]);for(var x=2;x<arguments.length;x++)S+="&args[]="+encodeURIComponent(arguments[x])}return"Minified React error #"+Y+"; visit "+S+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function ct(){}var Ee={d:{f:ct,r:function(){throw Error(Nt(522))},D:ct,C:ct,L:ct,m:ct,X:ct,S:ct,M:ct},p:0,findDOMNode:null},wt=Symbol.for("react.portal");function at(Y,S,x){var C=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:wt,key:C==null?null:""+C,children:Y,containerInfo:S,implementation:x}}var Ft=Ae.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function oe(Y,S){if(Y==="font")return"";if(typeof S=="string")return S==="use-credentials"?S:""}return $i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Ee,$i.createPortal=function(Y,S){var x=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!S||S.nodeType!==1&&S.nodeType!==9&&S.nodeType!==11)throw Error(Nt(299));return at(Y,S,null,x)},$i.flushSync=function(Y){var S=Ft.T,x=Ee.p;try{if(Ft.T=null,Ee.p=2,Y)return Y()}finally{Ft.T=S,Ee.p=x,Ee.d.f()}},$i.preconnect=function(Y,S){typeof Y=="string"&&(S?(S=S.crossOrigin,S=typeof S=="string"?S==="use-credentials"?S:"":void 0):S=null,Ee.d.C(Y,S))},$i.prefetchDNS=function(Y){typeof Y=="string"&&Ee.d.D(Y)},$i.preinit=function(Y,S){if(typeof Y=="string"&&S&&typeof S.as=="string"){var x=S.as,C=oe(x,S.crossOrigin),T=typeof S.integrity=="string"?S.integrity:void 0,b=typeof S.fetchPriority=="string"?S.fetchPriority:void 0;x==="style"?Ee.d.S(Y,typeof S.precedence=="string"?S.precedence:void 0,{crossOrigin:C,integrity:T,fetchPriority:b}):x==="script"&&Ee.d.X(Y,{crossOrigin:C,integrity:T,fetchPriority:b,nonce:typeof S.nonce=="string"?S.nonce:void 0})}},$i.preinitModule=function(Y,S){if(typeof Y=="string")if(typeof S=="object"&&S!==null){if(S.as==null||S.as==="script"){var x=oe(S.as,S.crossOrigin);Ee.d.M(Y,{crossOrigin:x,integrity:typeof S.integrity=="string"?S.integrity:void 0,nonce:typeof S.nonce=="string"?S.nonce:void 0})}}else S==null&&Ee.d.M(Y)},$i.preload=function(Y,S){if(typeof Y=="string"&&typeof S=="object"&&S!==null&&typeof S.as=="string"){var x=S.as,C=oe(x,S.crossOrigin);Ee.d.L(Y,x,{crossOrigin:C,integrity:typeof S.integrity=="string"?S.integrity:void 0,nonce:typeof S.nonce=="string"?S.nonce:void 0,type:typeof S.type=="string"?S.type:void 0,fetchPriority:typeof S.fetchPriority=="string"?S.fetchPriority:void 0,referrerPolicy:typeof S.referrerPolicy=="string"?S.referrerPolicy:void 0,imageSrcSet:typeof S.imageSrcSet=="string"?S.imageSrcSet:void 0,imageSizes:typeof S.imageSizes=="string"?S.imageSizes:void 0,media:typeof S.media=="string"?S.media:void 0})}},$i.preloadModule=function(Y,S){if(typeof Y=="string")if(S){var x=oe(S.as,S.crossOrigin);Ee.d.m(Y,{as:typeof S.as=="string"&&S.as!=="script"?S.as:void 0,crossOrigin:x,integrity:typeof S.integrity=="string"?S.integrity:void 0})}else Ee.d.m(Y)},$i.requestFormReset=function(Y){Ee.d.r(Y)},$i.unstable_batchedUpdates=function(Y,S){return Y(S)},$i.useFormState=function(Y,S,x){return Ft.H.useFormState(Y,S,x)},$i.useFormStatus=function(){return Ft.H.useHostTransitionStatus()},$i.version="19.2.3",$i}var tf;function Tm(){if(tf)return cp.exports;tf=1;function Ae(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Ae)}catch(Nt){console.error(Nt)}}return Ae(),cp.exports=Rm(),cp.exports}var rf;function Cm(){if(rf)return fu;rf=1;var Ae=wm(),Nt=dp(),ct=Tm();function Ee(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var r=2;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function wt(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function at(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function Ft(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function oe(e){if(e.tag===31){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Y(e){if(at(e)!==e)throw Error(Ee(188))}function S(e){var t=e.alternate;if(!t){if(t=at(e),t===null)throw Error(Ee(188));return t!==e?null:e}for(var r=e,a=t;;){var c=r.return;if(c===null)break;var _=c.alternate;if(_===null){if(a=c.return,a!==null){r=a;continue}break}if(c.child===_.child){for(_=c.child;_;){if(_===r)return Y(c),e;if(_===a)return Y(c),t;_=_.sibling}throw Error(Ee(188))}if(r.return!==a.return)r=c,a=_;else{for(var K=!1,ie=c.child;ie;){if(ie===r){K=!0,r=c,a=_;break}if(ie===a){K=!0,a=c,r=_;break}ie=ie.sibling}if(!K){for(ie=_.child;ie;){if(ie===r){K=!0,r=_,a=c;break}if(ie===a){K=!0,a=_,r=c;break}ie=ie.sibling}if(!K)throw Error(Ee(189))}}if(r.alternate!==a)throw Error(Ee(190))}if(r.tag!==3)throw Error(Ee(188));return r.stateNode.current===r?e:t}function x(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=x(e),t!==null)return t;e=e.sibling}return null}var C=Object.assign,T=Symbol.for("react.element"),b=Symbol.for("react.transitional.element"),J=Symbol.for("react.portal"),w=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),f=Symbol.for("react.profiler"),U=Symbol.for("react.consumer"),q=Symbol.for("react.context"),g=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),k=Symbol.for("react.suspense_list"),W=Symbol.for("react.memo"),j=Symbol.for("react.lazy"),y=Symbol.for("react.activity"),d=Symbol.for("react.memo_cache_sentinel"),R=Symbol.iterator;function m(e){return e===null||typeof e!="object"?null:(e=R&&e[R]||e["@@iterator"],typeof e=="function"?e:null)}var P=Symbol.for("react.client.reference");function H(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===P?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case w:return"Fragment";case f:return"Profiler";case n:return"StrictMode";case h:return"Suspense";case k:return"SuspenseList";case y:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case J:return"Portal";case q:return e.displayName||"Context";case U:return(e._context.displayName||"Context")+".Consumer";case g:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case W:return t=e.displayName||null,t!==null?t:H(e.type)||"Memo";case j:t=e._payload,e=e._init;try{return H(e(t))}catch{}}return null}var B=Array.isArray,$=Nt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,L=ct.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,z={pending:!1,data:null,method:null,action:null},V=[],X=-1;function G(e){return{current:e}}function ae(e){0>X||(e.current=V[X],V[X]=null,X--)}function Q(e,t){X++,V[X]=e.current,e.current=t}var le=G(null),pe=G(null),ue=G(null),ne=G(null);function Oe(e,t){switch(Q(ue,t),Q(pe,e),Q(le,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?gh(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=gh(t),e=yh(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}ae(le),Q(le,e)}function ye(){ae(le),ae(pe),ae(ue)}function _e(e){e.memoizedState!==null&&Q(ne,e);var t=le.current,r=yh(t,e.type);t!==r&&(Q(pe,e),Q(le,r))}function Se(e){pe.current===e&&(ae(le),ae(pe)),ne.current===e&&(ae(ne),lu._currentValue=z)}var ze,Vt;function tr(e){if(ze===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);ze=t&&t[1]||"",Vt=-1<r.stack.indexOf(`
    at`)?" (<anonymous>)":-1<r.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ze+e+Vt}var gr=!1;function jt(e,t){if(!e||gr)return"";gr=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var a={DetermineComponentFrameRoot:function(){try{if(t){var ut=function(){throw Error()};if(Object.defineProperty(ut.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ut,[])}catch(Ue){var Ne=Ue}Reflect.construct(e,[],ut)}else{try{ut.call()}catch(Ue){Ne=Ue}e.call(ut.prototype)}}else{try{throw Error()}catch(Ue){Ne=Ue}(ut=e())&&typeof ut.catch=="function"&&ut.catch(function(){})}}catch(Ue){if(Ue&&Ne&&typeof Ue.stack=="string")return[Ue.stack,Ne.stack]}return[null,null]}};a.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var c=Object.getOwnPropertyDescriptor(a.DetermineComponentFrameRoot,"name");c&&c.configurable&&Object.defineProperty(a.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var _=a.DetermineComponentFrameRoot(),K=_[0],ie=_[1];if(K&&ie){var ge=K.split(`
`),Pe=ie.split(`
`);for(c=a=0;a<ge.length&&!ge[a].includes("DetermineComponentFrameRoot");)a++;for(;c<Pe.length&&!Pe[c].includes("DetermineComponentFrameRoot");)c++;if(a===ge.length||c===Pe.length)for(a=ge.length-1,c=Pe.length-1;1<=a&&0<=c&&ge[a]!==Pe[c];)c--;for(;1<=a&&0<=c;a--,c--)if(ge[a]!==Pe[c]){if(a!==1||c!==1)do if(a--,c--,0>c||ge[a]!==Pe[c]){var tt=`
`+ge[a].replace(" at new "," at ");return e.displayName&&tt.includes("<anonymous>")&&(tt=tt.replace("<anonymous>",e.displayName)),tt}while(1<=a&&0<=c);break}}}finally{gr=!1,Error.prepareStackTrace=r}return(r=e?e.displayName||e.name:"")?tr(r):""}function Pr(e,t){switch(e.tag){case 26:case 27:case 5:return tr(e.type);case 16:return tr("Lazy");case 13:return e.child!==t&&t!==null?tr("Suspense Fallback"):tr("Suspense");case 19:return tr("SuspenseList");case 0:case 15:return jt(e.type,!1);case 11:return jt(e.type.render,!1);case 1:return jt(e.type,!0);case 31:return tr("Activity");default:return""}}function qa(e){try{var t="",r=null;do t+=Pr(e,r),r=e,e=e.return;while(e);return t}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}var Ua=Object.prototype.hasOwnProperty,br=Ae.unstable_scheduleCallback,zr=Ae.unstable_cancelCallback,ar=Ae.unstable_shouldYield,Wa=Ae.unstable_requestPaint,Gr=Ae.unstable_now,pn=Ae.unstable_getCurrentPriorityLevel,nt=Ae.unstable_ImmediatePriority,et=Ae.unstable_UserBlockingPriority,ir=Ae.unstable_NormalPriority,Lr=Ae.unstable_LowPriority,pa=Ae.unstable_IdlePriority,za=Ae.log,Za=Ae.unstable_setDisableYieldValue,zt=null,He=null;function yt(e){if(typeof za=="function"&&Za(e),He&&typeof He.setStrictMode=="function")try{He.setStrictMode(zt,e)}catch{}}var Xe=Math.clz32?Math.clz32:Ce,kt=Math.log,Or=Math.LN2;function Ce(e){return e>>>=0,e===0?32:31-(kt(e)/Or|0)|0}var fr=256,Sr=262144,Rt=4194304;function Rr(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function aa(e,t,r){var a=e.pendingLanes;if(a===0)return 0;var c=0,_=e.suspendedLanes,K=e.pingedLanes;e=e.warmLanes;var ie=a&134217727;return ie!==0?(a=ie&~_,a!==0?c=Rr(a):(K&=ie,K!==0?c=Rr(K):r||(r=ie&~e,r!==0&&(c=Rr(r))))):(ie=a&~_,ie!==0?c=Rr(ie):K!==0?c=Rr(K):r||(r=a&~e,r!==0&&(c=Rr(r)))),c===0?0:t!==0&&t!==c&&(t&_)===0&&(_=c&-c,r=t&-t,_>=r||_===32&&(r&4194048)!==0)?t:c}function Ke(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function Xt(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ht(){var e=Rt;return Rt<<=1,(Rt&62914560)===0&&(Rt=4194304),e}function Qt(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function rt(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Tt(e,t,r,a,c,_){var K=e.pendingLanes;e.pendingLanes=r,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=r,e.entangledLanes&=r,e.errorRecoveryDisabledLanes&=r,e.shellSuspendCounter=0;var ie=e.entanglements,ge=e.expirationTimes,Pe=e.hiddenUpdates;for(r=K&~r;0<r;){var tt=31-Xe(r),ut=1<<tt;ie[tt]=0,ge[tt]=-1;var Ne=Pe[tt];if(Ne!==null)for(Pe[tt]=null,tt=0;tt<Ne.length;tt++){var Ue=Ne[tt];Ue!==null&&(Ue.lane&=-536870913)}r&=~ut}a!==0&&yr(e,a,0),_!==0&&c===0&&e.tag!==0&&(e.suspendedLanes|=_&~(K&~t))}function yr(e,t,r){e.pendingLanes|=t,e.suspendedLanes&=~t;var a=31-Xe(t);e.entangledLanes|=t,e.entanglements[a]=e.entanglements[a]|1073741824|r&261930}function ur(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var a=31-Xe(r),c=1<<a;c&t|e[a]&t&&(e[a]|=t),r&=~c}}function wr(e,t){var r=t&-t;return r=(r&42)!==0?1:$r(r),(r&(e.suspendedLanes|t))!==0?0:r}function $r(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Ha(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function nn(){var e=L.p;return e!==0?e:(e=window.event,e===void 0?32:Hh(e.type))}function qn(e,t){var r=L.p;try{return L.p=e,t()}finally{L.p=r}}var hn=Math.random().toString(36).slice(2),ca="__reactFiber$"+hn,Kr="__reactProps$"+hn,Oa="__reactContainer$"+hn,jn="__reactEvents$"+hn,Qn="__reactListeners$"+hn,di="__reactHandles$"+hn,qi="__reactResources$"+hn,sn="__reactMarker$"+hn;function Wi(e){delete e[ca],delete e[Kr],delete e[jn],delete e[Qn],delete e[di]}function Xn(e){var t=e[ca];if(t)return t;for(var r=e.parentNode;r;){if(t=r[Oa]||r[ca]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=Th(e);e!==null;){if(r=e[ca])return r;e=Th(e)}return t}e=r,r=e.parentNode}return null}function Ei(e){if(e=e[ca]||e[Oa]){var t=e.tag;if(t===5||t===6||t===13||t===31||t===26||t===27||t===3)return e}return null}function Pi(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(Ee(33))}function Tr(e){var t=e[qi];return t||(t=e[qi]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function Va(e){e[sn]=!0}var Li=new Set,Jn={};function ha(e,t){Ga(e,t),Ga(e+"Capture",t)}function Ga(e,t){for(Jn[e]=t,e=0;e<t.length;e++)Li.add(t[e])}var ts=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),We={},_t={};function Mt(e){return Ua.call(_t,e)?!0:Ua.call(We,e)?!1:ts.test(e)?_t[e]=!0:(We[e]=!0,!1)}function $t(e,t,r){if(Mt(t))if(r===null)e.removeAttribute(t);else{switch(typeof r){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var a=t.toLowerCase().slice(0,5);if(a!=="data-"&&a!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+r)}}function Br(e,t,r){if(r===null)e.removeAttribute(t);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+r)}}function jr(e,t,r,a){if(a===null)e.removeAttribute(r);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(r);return}e.setAttributeNS(t,r,""+a)}}function Dt(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Xr(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Nr(e,t,r){var a=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var c=a.get,_=a.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return c.call(this)},set:function(K){r=""+K,_.call(this,K)}}),Object.defineProperty(e,t,{enumerable:a.enumerable}),{getValue:function(){return r},setValue:function(K){r=""+K},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Ca(e){if(!e._valueTracker){var t=Xr(e)?"checked":"value";e._valueTracker=Nr(e,t,""+e[t])}}function Ka(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),a="";return e&&(a=Xr(e)?e.checked?"true":"false":e.value),e=a,e!==r?(t.setValue(e),!0):!1}function Un(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var ni=/[\n"\\]/g;function Ln(e){return e.replace(ni,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function pi(e,t,r,a,c,_,K,ie){e.name="",K!=null&&typeof K!="function"&&typeof K!="symbol"&&typeof K!="boolean"?e.type=K:e.removeAttribute("type"),t!=null?K==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+Dt(t)):e.value!==""+Dt(t)&&(e.value=""+Dt(t)):K!=="submit"&&K!=="reset"||e.removeAttribute("value"),t!=null?Gi(e,K,Dt(t)):r!=null?Gi(e,K,Dt(r)):a!=null&&e.removeAttribute("value"),c==null&&_!=null&&(e.defaultChecked=!!_),c!=null&&(e.checked=c&&typeof c!="function"&&typeof c!="symbol"),ie!=null&&typeof ie!="function"&&typeof ie!="symbol"&&typeof ie!="boolean"?e.name=""+Dt(ie):e.removeAttribute("name")}function gs(e,t,r,a,c,_,K,ie){if(_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(e.type=_),t!=null||r!=null){if(!(_!=="submit"&&_!=="reset"||t!=null)){Ca(e);return}r=r!=null?""+Dt(r):"",t=t!=null?""+Dt(t):r,ie||t===e.value||(e.value=t),e.defaultValue=t}a=a??c,a=typeof a!="function"&&typeof a!="symbol"&&!!a,e.checked=ie?e.checked:!!a,e.defaultChecked=!!a,K!=null&&typeof K!="function"&&typeof K!="symbol"&&typeof K!="boolean"&&(e.name=K),Ca(e)}function Gi(e,t,r){t==="number"&&Un(e.ownerDocument)===e||e.defaultValue===""+r||(e.defaultValue=""+r)}function wi(e,t,r,a){if(e=e.options,t){t={};for(var c=0;c<r.length;c++)t["$"+r[c]]=!0;for(r=0;r<e.length;r++)c=t.hasOwnProperty("$"+e[r].value),e[r].selected!==c&&(e[r].selected=c),c&&a&&(e[r].defaultSelected=!0)}else{for(r=""+Dt(r),t=null,c=0;c<e.length;c++){if(e[c].value===r){e[c].selected=!0,a&&(e[c].defaultSelected=!0);return}t!==null||e[c].disabled||(t=e[c])}t!==null&&(t.selected=!0)}}function ys(e,t,r){if(t!=null&&(t=""+Dt(t),t!==e.value&&(e.value=t),r==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=r!=null?""+Dt(r):""}function rs(e,t,r,a){if(t==null){if(a!=null){if(r!=null)throw Error(Ee(92));if(B(a)){if(1<a.length)throw Error(Ee(93));a=a[0]}r=a}r==null&&(r=""),t=r}r=Dt(t),e.defaultValue=r,a=e.textContent,a===r&&a!==""&&a!==null&&(e.value=a),Ca(e)}function Ri(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var as=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function xs(e,t,r){var a=t.indexOf("--")===0;r==null||typeof r=="boolean"||r===""?a?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":a?e.setProperty(t,r):typeof r!="number"||r===0||as.has(t)?t==="float"?e.cssFloat=r:e[t]=(""+r).trim():e[t]=r+"px"}function Zn(e,t,r){if(t!=null&&typeof t!="object")throw Error(Ee(62));if(e=e.style,r!=null){for(var a in r)!r.hasOwnProperty(a)||t!=null&&t.hasOwnProperty(a)||(a.indexOf("--")===0?e.setProperty(a,""):a==="float"?e.cssFloat="":e[a]="");for(var c in t)a=t[c],t.hasOwnProperty(c)&&r[c]!==a&&xs(e,c,a)}else for(var _ in t)t.hasOwnProperty(_)&&xs(e,_,t[_])}function Ys(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var fo=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Qs=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function mo(e){return Qs.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function Ti(){}var vo=null;function xo(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var ns=null,Ni=null;function _s(e){var t=Ei(e);if(t&&(e=t.stateNode)){var r=e[Kr]||null;e:switch(e=t.stateNode,t.type){case"input":if(pi(e,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll('input[name="'+Ln(""+t)+'"][type="radio"]'),t=0;t<r.length;t++){var a=r[t];if(a!==e&&a.form===e.form){var c=a[Kr]||null;if(!c)throw Error(Ee(90));pi(a,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name)}}for(t=0;t<r.length;t++)a=r[t],a.form===e.form&&Ka(a)}break e;case"textarea":ys(e,r.value,r.defaultValue);break e;case"select":t=r.value,t!=null&&wi(e,!!r.multiple,t,!1)}}}var Bs=!1;function js(e,t,r){if(Bs)return e(t,r);Bs=!0;try{var a=e(t);return a}finally{if(Bs=!1,(ns!==null||Ni!==null)&&(xu(),ns&&(t=ns,e=Ni,Ni=ns=null,_s(t),e)))for(t=0;t<e.length;t++)_s(e[t])}}function hi(e,t){var r=e.stateNode;if(r===null)return null;var a=r[Kr]||null;if(a===null)return null;r=a[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(e=e.type,a=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!a;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(Ee(231,t,typeof r));return r}var Nn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Bo=!1;if(Nn)try{var is={};Object.defineProperty(is,"passive",{get:function(){Bo=!0}}),window.addEventListener("test",is,is),window.removeEventListener("test",is,is)}catch{Bo=!1}var Ii=null,Us=null,Xs=null;function go(){if(Xs)return Xs;var e,t=Us,r=t.length,a,c="value"in Ii?Ii.value:Ii.textContent,_=c.length;for(e=0;e<r&&t[e]===c[e];e++);var K=r-e;for(a=1;a<=K&&t[r-a]===c[_-a];a++);return Xs=c.slice(e,1<a?1-a:void 0)}function bs(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Rn(){return!0}function yo(){return!1}function Tn(e){function t(r,a,c,_,K){this._reactName=r,this._targetInst=c,this.type=a,this.nativeEvent=_,this.target=K,this.currentTarget=null;for(var ie in e)e.hasOwnProperty(ie)&&(r=e[ie],this[ie]=r?r(_):_[ie]);return this.isDefaultPrevented=(_.defaultPrevented!=null?_.defaultPrevented:_.returnValue===!1)?Rn:yo,this.isPropagationStopped=yo,this}return C(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Rn)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Rn)},persist:function(){},isPersistent:Rn}),t}var xi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ss=Tn(xi),ss=C({},xi,{view:0,detail:0}),_o=Tn(ss),Js,Zs,Es,Ci=C({},ss,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Bi,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Es&&(Es&&e.type==="mousemove"?(Js=e.screenX-Es.screenX,Zs=e.screenY-Es.screenY):Zs=Js=0,Es=e),Js)},movementY:function(e){return"movementY"in e?e.movementY:Zs}}),bo=Tn(Ci),jo=C({},Ci,{dataTransfer:0}),Uo=Tn(jo),zo=C({},ss,{relatedTarget:0}),zs=Tn(zo),Er=C({},xi,{animationName:0,elapsedTime:0,pseudoElement:0}),So=Tn(Er),Eo=C({},xi,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Hs=Tn(Eo),xe=C({},xi,{data:0}),se=Tn(xe),we={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},nr={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Jr={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function _n(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Jr[e])?!!t[e]:!1}function Bi(){return _n}var oc=C({},ss,{key:function(e){if(e.key){var t=we[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=bs(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?nr[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Bi,charCode:function(e){return e.type==="keypress"?bs(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?bs(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),os=Tn(oc),Gc=C({},Ci,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),wo=Tn(Gc),ws=C({},ss,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Bi}),Kc=Tn(ws),cc=C({},xi,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ro=Tn(cc),Yc=C({},Ci,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),lc=Tn(Yc),eo=C({},xi,{newState:0,oldState:0}),uc=Tn(eo),dc=[9,13,27,32],Rs=Nn&&"CompositionEvent"in window,Ts=null;Nn&&"documentMode"in document&&(Ts=document.documentMode);var pc=Nn&&"TextEvent"in window&&!Ts,hc=Nn&&(!Rs||Ts&&8<Ts&&11>=Ts),Ho=" ",Vo=!1;function to(e,t){switch(e){case"keyup":return dc.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Fo(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Cs=!1;function Qc(e,t){switch(e){case"compositionend":return Fo(t);case"keypress":return t.which!==32?null:(Vo=!0,Ho);case"textInput":return e=t.data,e===Ho&&Vo?null:e;default:return null}}function fc(e,t){if(Cs)return e==="compositionend"||!Rs&&to(e,t)?(e=go(),Xs=Us=Ii=null,Cs=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return hc&&t.locale!=="ko"?null:t.data;default:return null}}var Xc={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function fi(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Xc[e.type]:t==="textarea"}function Wn(e,t,r,a){ns?Ni?Ni.push(a):Ni=[a]:ns=a,t=Fu(t,"onChange"),0<t.length&&(r=new Ss("onChange","change",null,r,a),e.push({event:r,listeners:t}))}var cs=null,To=null;function Bl(e){dh(e,0)}function mc(e){var t=Pi(e);if(Ka(t))return e}function Jc(e,t){if(e==="change")return t}var ea=!1;if(Nn){var vc;if(Nn){var Zc="oninput"in document;if(!Zc){var fl=document.createElement("div");fl.setAttribute("oninput","return;"),Zc=typeof fl.oninput=="function"}vc=Zc}else vc=!1;ea=vc&&(!document.documentMode||9<document.documentMode)}function ml(){cs&&(cs.detachEvent("onpropertychange",gc),To=cs=null)}function gc(e){if(e.propertyName==="value"&&mc(To)){var t=[];Wn(t,To,e,xo(e)),js(Bl,t)}}function el(e,t,r){e==="focusin"?(ml(),cs=t,To=r,cs.attachEvent("onpropertychange",gc)):e==="focusout"&&ml()}function Ai(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return mc(To)}function Vs(e,t){if(e==="click")return mc(t)}function vl(e,t){if(e==="input"||e==="change")return mc(t)}function jl(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Ya=typeof Object.is=="function"?Object.is:jl;function ro(e,t){if(Ya(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),a=Object.keys(t);if(r.length!==a.length)return!1;for(a=0;a<r.length;a++){var c=r[a];if(!Ua.call(t,c)||!Ya(e[c],t[c]))return!1}return!0}function $o(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function yc(e,t){var r=$o(e);e=0;for(var a;r;){if(r.nodeType===3){if(a=e+r.textContent.length,e<=t&&a>=t)return{node:r,offset:t-e};e=a}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=$o(r)}}function Zr(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Zr(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function gl(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=Un(e.document);t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=Un(e.document)}return t}function Co(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var Ul=Nn&&"documentMode"in document&&11>=document.documentMode,As=null,qo=null,Wo=null,tl=!1;function Go(e,t,r){var a=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;tl||As==null||As!==Un(a)||(a=As,"selectionStart"in a&&Co(a)?a={start:a.selectionStart,end:a.selectionEnd}:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection(),a={anchorNode:a.anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset}),Wo&&ro(Wo,a)||(Wo=a,a=Fu(qo,"onSelect"),0<a.length&&(t=new Ss("onSelect","select",null,t,r),e.push({event:t,listeners:a}),t.target=As)))}function Te(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Fe={animationend:Te("Animation","AnimationEnd"),animationiteration:Te("Animation","AnimationIteration"),animationstart:Te("Animation","AnimationStart"),transitionrun:Te("Transition","TransitionRun"),transitionstart:Te("Transition","TransitionStart"),transitioncancel:Te("Transition","TransitionCancel"),transitionend:Te("Transition","TransitionEnd")},Ki={},_c={};Nn&&(_c=document.createElement("div").style,"AnimationEvent"in window||(delete Fe.animationend.animation,delete Fe.animationiteration.animation,delete Fe.animationstart.animation),"TransitionEvent"in window||delete Fe.transitionend.transition);function ao(e){if(Ki[e])return Ki[e];if(!Fe[e])return e;var t=Fe[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in _c)return Ki[e]=t[r];return e}var bc=ao("animationend"),F=ao("animationiteration"),o=ao("animationstart"),u=ao("transitionrun"),v=ao("transitionstart"),s=ao("transitioncancel"),l=ao("transitionend"),A=new Map,O="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");O.push("scrollEnd");function I(e,t){A.set(e,t),ha(t,[e])}var Z=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},ee=[],te=0,fe=0;function Me(){for(var e=te,t=fe=te=0;t<e;){var r=ee[t];ee[t++]=null;var a=ee[t];ee[t++]=null;var c=ee[t];ee[t++]=null;var _=ee[t];if(ee[t++]=null,a!==null&&c!==null){var K=a.pending;K===null?c.next=c:(c.next=K.next,K.next=c),a.pending=c}_!==0&&Je(r,c,_)}}function ke(e,t,r,a){ee[te++]=e,ee[te++]=t,ee[te++]=r,ee[te++]=a,fe|=a,e.lanes|=a,e=e.alternate,e!==null&&(e.lanes|=a)}function $e(e,t,r,a){return ke(e,t,r,a),qe(e)}function ot(e,t){return ke(e,null,null,t),qe(e)}function Je(e,t,r){e.lanes|=r;var a=e.alternate;a!==null&&(a.lanes|=r);for(var c=!1,_=e.return;_!==null;)_.childLanes|=r,a=_.alternate,a!==null&&(a.childLanes|=r),_.tag===22&&(e=_.stateNode,e===null||e._visibility&1||(c=!0)),e=_,_=_.return;return e.tag===3?(_=e.stateNode,c&&t!==null&&(c=31-Xe(r),e=_.hiddenUpdates,a=e[c],a===null?e[c]=[t]:a.push(t),t.lane=r|536870912),_):null}function qe(e){if(50<ru)throw ru=0,Ad=null,Error(Ee(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var Ct={};function gt(e,t,r,a){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Et(e,t,r,a){return new gt(e,t,r,a)}function it(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Pt(e,t){var r=e.alternate;return r===null?(r=Et(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&65011712,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r.refCleanup=e.refCleanup,r}function pt(e,t){e.flags&=65011714;var r=e.alternate;return r===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=r.childLanes,e.lanes=r.lanes,e.child=r.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=r.memoizedProps,e.memoizedState=r.memoizedState,e.updateQueue=r.updateQueue,e.type=r.type,t=r.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Ge(e,t,r,a,c,_){var K=0;if(a=e,typeof e=="function")it(e)&&(K=1);else if(typeof e=="string")K=om(e,r,le.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case y:return e=Et(31,r,t,c),e.elementType=y,e.lanes=_,e;case w:return At(r.children,c,_,t);case n:K=8,c|=24;break;case f:return e=Et(12,r,t,c|2),e.elementType=f,e.lanes=_,e;case h:return e=Et(13,r,t,c),e.elementType=h,e.lanes=_,e;case k:return e=Et(19,r,t,c),e.elementType=k,e.lanes=_,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case q:K=10;break e;case U:K=9;break e;case g:K=11;break e;case W:K=14;break e;case j:K=16,a=null;break e}K=29,r=Error(Ee(130,e===null?"null":typeof e,"")),a=null}return t=Et(K,r,t,c),t.elementType=e,t.type=a,t.lanes=_,t}function At(e,t,r,a){return e=Et(7,e,a,t),e.lanes=r,e}function cr(e,t,r){return e=Et(6,e,null,t),e.lanes=r,e}function qt(e){var t=Et(18,null,null,0);return t.stateNode=e,t}function Jt(e,t,r){return t=Et(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Gt=new WeakMap;function ht(e,t){if(typeof e=="object"&&e!==null){var r=Gt.get(e);return r!==void 0?r:(t={value:e,source:t,stack:qa(t)},Gt.set(e,t),t)}return{value:e,source:t,stack:qa(t)}}var Zt=[],mr=0,rr=null,bt=0,Ze=[],Ie=0,Le=null,Lt=1,Kt="";function Yt(e,t){Zt[mr++]=bt,Zt[mr++]=rr,rr=e,bt=t}function vr(e,t,r){Ze[Ie++]=Lt,Ze[Ie++]=Kt,Ze[Ie++]=Le,Le=e;var a=Lt;e=Kt;var c=32-Xe(a)-1;a&=~(1<<c),r+=1;var _=32-Xe(t)+c;if(30<_){var K=c-c%5;_=(a&(1<<K)-1).toString(32),a>>=K,c-=K,Lt=1<<32-Xe(t)+c|r<<c|a,Kt=_+e}else Lt=1<<_|r<<c|a,Kt=e}function kr(e){e.return!==null&&(Yt(e,1),vr(e,1,0))}function ta(e){for(;e===rr;)rr=Zt[--mr],Zt[mr]=null,bt=Zt[--mr],Zt[mr]=null;for(;e===Le;)Le=Ze[--Ie],Ze[Ie]=null,Kt=Ze[--Ie],Ze[Ie]=null,Lt=Ze[--Ie],Ze[Ie]=null}function Yr(e,t){Ze[Ie++]=Lt,Ze[Ie++]=Kt,Ze[Ie++]=Le,Lt=t.id,Kt=t.overflow,Le=e}var Wt=null,Cr=null,er=!1,Ur=null,Hr=!1,Fa=Error(Ee(519));function fa(e){var t=Error(Ee(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Mr(ht(t,e)),Fa}function on(e){var t=e.stateNode,r=e.type,a=e.memoizedProps;switch(t[ca]=e,t[Kr]=a,r){case"dialog":ba("cancel",t),ba("close",t);break;case"iframe":case"object":case"embed":ba("load",t);break;case"video":case"audio":for(r=0;r<nu.length;r++)ba(nu[r],t);break;case"source":ba("error",t);break;case"img":case"image":case"link":ba("error",t),ba("load",t);break;case"details":ba("toggle",t);break;case"input":ba("invalid",t),gs(t,a.value,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name,!0);break;case"select":ba("invalid",t);break;case"textarea":ba("invalid",t),rs(t,a.value,a.defaultValue,a.children)}r=a.children,typeof r!="string"&&typeof r!="number"&&typeof r!="bigint"||t.textContent===""+r||a.suppressHydrationWarning===!0||mh(t.textContent,r)?(a.popover!=null&&(ba("beforetoggle",t),ba("toggle",t)),a.onScroll!=null&&ba("scroll",t),a.onScrollEnd!=null&&ba("scrollend",t),a.onClick!=null&&(t.onclick=Ti),t=!0):t=!1,t||fa(e,!0)}function Qa(e){for(Wt=e.return;Wt;)switch(Wt.tag){case 5:case 31:case 13:Hr=!1;return;case 27:case 3:Hr=!0;return;default:Wt=Wt.return}}function ma(e){if(e!==Wt)return!1;if(!er)return Qa(e),er=!0,!1;var t=e.tag,r;if((r=t!==3&&t!==27)&&((r=t===5)&&(r=e.type,r=!(r!=="form"&&r!=="button")||Vd(e.type,e.memoizedProps)),r=!r),r&&Cr&&fa(e),Qa(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Ee(317));Cr=Rh(e)}else if(t===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Ee(317));Cr=Rh(e)}else t===27?(t=Cr,Hc(e.type)?(e=Gd,Gd=null,Cr=e):Cr=t):Cr=Wt?Ws(e.stateNode.nextSibling):null;return!0}function la(){Cr=Wt=null,er=!1}function xt(){var e=Ur;return e!==null&&(ms===null?ms=e:ms.push.apply(ms,e),Ur=null),e}function Mr(e){Ur===null?Ur=[e]:Ur.push(e)}var Vr=G(null),ra=null,va=null;function na(e,t,r){Q(Vr,t._currentValue),t._currentValue=r}function ia(e){e._currentValue=Vr.current,ae(Vr)}function en(e,t,r){for(;e!==null;){var a=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,a!==null&&(a.childLanes|=t)):a!==null&&(a.childLanes&t)!==t&&(a.childLanes|=t),e===r)break;e=e.return}}function fn(e,t,r,a){var c=e.child;for(c!==null&&(c.return=e);c!==null;){var _=c.dependencies;if(_!==null){var K=c.child;_=_.firstContext;e:for(;_!==null;){var ie=_;_=c;for(var ge=0;ge<t.length;ge++)if(ie.context===t[ge]){_.lanes|=r,ie=_.alternate,ie!==null&&(ie.lanes|=r),en(_.return,r,e),a||(K=null);break e}_=ie.next}}else if(c.tag===18){if(K=c.return,K===null)throw Error(Ee(341));K.lanes|=r,_=K.alternate,_!==null&&(_.lanes|=r),en(K,r,e),K=null}else K=c.child;if(K!==null)K.return=c;else for(K=c;K!==null;){if(K===e){K=null;break}if(c=K.sibling,c!==null){c.return=K.return,K=c;break}K=K.return}c=K}}function Aa(e,t,r,a){e=null;for(var c=t,_=!1;c!==null;){if(!_){if((c.flags&524288)!==0)_=!0;else if((c.flags&262144)!==0)break}if(c.tag===10){var K=c.alternate;if(K===null)throw Error(Ee(387));if(K=K.memoizedProps,K!==null){var ie=c.type;Ya(c.pendingProps.value,K.value)||(e!==null?e.push(ie):e=[ie])}}else if(c===ne.current){if(K=c.alternate,K===null)throw Error(Ee(387));K.memoizedState.memoizedState!==c.memoizedState.memoizedState&&(e!==null?e.push(lu):e=[lu])}c=c.return}e!==null&&fn(t,e,r,a),t.flags|=262144}function tn(e){for(e=e.firstContext;e!==null;){if(!Ya(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Sa(e){ra=e,va=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function ua(e){return Pa(ra,e)}function vn(e,t){return ra===null&&Sa(e),Pa(e,t)}function Pa(e,t){var r=t._currentValue;if(t={context:t,memoizedValue:r,next:null},va===null){if(e===null)throw Error(Ee(308));va=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else va=va.next=t;return r}var Yi=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(r,a){e.push(a)}};this.abort=function(){t.aborted=!0,e.forEach(function(r){return r()})}},ki=Ae.unstable_scheduleCallback,Qi=Ae.unstable_NormalPriority,ga={$$typeof:q,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function mi(){return{controller:new Yi,data:new Map,refCount:0}}function ei(e){e.refCount--,e.refCount===0&&ki(Qi,function(){e.controller.abort()})}var Ia=null,ti=0,cn=0,ri=null;function ji(e,t){if(Ia===null){var r=Ia=[];ti=0,cn=Ld(),ri={status:"pending",value:void 0,then:function(a){r.push(a)}}}return ti++,t.then(vi,vi),t}function vi(){if(--ti===0&&Ia!==null){ri!==null&&(ri.status="fulfilled");var e=Ia;Ia=null,cn=0,ri=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function Gn(e,t){var r=[],a={status:"pending",value:null,reason:null,then:function(c){r.push(c)}};return e.then(function(){a.status="fulfilled",a.value=t;for(var c=0;c<r.length;c++)(0,r[c])(t)},function(c){for(a.status="rejected",a.reason=c,c=0;c<r.length;c++)(0,r[c])(void 0)}),a}var ii=$.S;$.S=function(e,t){Up=Gr(),typeof t=="object"&&t!==null&&typeof t.then=="function"&&ji(e,t),ii!==null&&ii(e,t)};var zn=G(null);function Cn(){var e=zn.current;return e!==null?e:mn.pooledCache}function La(e,t){t===null?Q(zn,zn.current):Q(zn,t.pool)}function bn(){var e=Cn();return e===null?null:{parent:ga._currentValue,pool:e}}var Sn=Error(Ee(460)),pr=Error(Ee(474)),ka=Error(Ee(542)),sa={then:function(){}};function Kn(e){return e=e.status,e==="fulfilled"||e==="rejected"}function si(e,t,r){switch(r=e[r],r===void 0?e.push(t):r!==t&&(t.then(Ti,Ti),t=r),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,xa(e),e;default:if(typeof t.status=="string")t.then(Ti,Ti);else{if(e=mn,e!==null&&100<e.shellSuspendCounter)throw Error(Ee(482));e=t,e.status="pending",e.then(function(a){if(t.status==="pending"){var c=t;c.status="fulfilled",c.value=a}},function(a){if(t.status==="pending"){var c=t;c.status="rejected",c.reason=a}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,xa(e),e}throw xn=t,Sn}}function In(e){try{var t=e._init;return t(e._payload)}catch(r){throw r!==null&&typeof r=="object"&&typeof r.then=="function"?(xn=r,Sn):r}}var xn=null;function Ui(){if(xn===null)throw Error(Ee(459));var e=xn;return xn=null,e}function xa(e){if(e===Sn||e===ka)throw Error(Ee(483))}var gi=null,yi=0;function ks(e){var t=yi;return yi+=1,gi===null&&(gi=[]),si(gi,e,t)}function zi(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function oi(e,t){throw t.$$typeof===T?Error(Ee(525)):(e=Object.prototype.toString.call(t),Error(Ee(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function ls(e){function t(Re,be){if(e){var De=Re.deletions;De===null?(Re.deletions=[be],Re.flags|=16):De.push(be)}}function r(Re,be){if(!e)return null;for(;be!==null;)t(Re,be),be=be.sibling;return null}function a(Re){for(var be=new Map;Re!==null;)Re.key!==null?be.set(Re.key,Re):be.set(Re.index,Re),Re=Re.sibling;return be}function c(Re,be){return Re=Pt(Re,be),Re.index=0,Re.sibling=null,Re}function _(Re,be,De){return Re.index=De,e?(De=Re.alternate,De!==null?(De=De.index,De<be?(Re.flags|=67108866,be):De):(Re.flags|=67108866,be)):(Re.flags|=1048576,be)}function K(Re){return e&&Re.alternate===null&&(Re.flags|=67108866),Re}function ie(Re,be,De,st){return be===null||be.tag!==6?(be=cr(De,Re.mode,st),be.return=Re,be):(be=c(be,De),be.return=Re,be)}function ge(Re,be,De,st){var Ar=De.type;return Ar===w?tt(Re,be,De.props.children,st,De.key):be!==null&&(be.elementType===Ar||typeof Ar=="object"&&Ar!==null&&Ar.$$typeof===j&&In(Ar)===be.type)?(be=c(be,De.props),zi(be,De),be.return=Re,be):(be=Ge(De.type,De.key,De.props,null,Re.mode,st),zi(be,De),be.return=Re,be)}function Pe(Re,be,De,st){return be===null||be.tag!==4||be.stateNode.containerInfo!==De.containerInfo||be.stateNode.implementation!==De.implementation?(be=Jt(De,Re.mode,st),be.return=Re,be):(be=c(be,De.children||[]),be.return=Re,be)}function tt(Re,be,De,st,Ar){return be===null||be.tag!==7?(be=At(De,Re.mode,st,Ar),be.return=Re,be):(be=c(be,De),be.return=Re,be)}function ut(Re,be,De){if(typeof be=="string"&&be!==""||typeof be=="number"||typeof be=="bigint")return be=cr(""+be,Re.mode,De),be.return=Re,be;if(typeof be=="object"&&be!==null){switch(be.$$typeof){case b:return De=Ge(be.type,be.key,be.props,null,Re.mode,De),zi(De,be),De.return=Re,De;case J:return be=Jt(be,Re.mode,De),be.return=Re,be;case j:return be=In(be),ut(Re,be,De)}if(B(be)||m(be))return be=At(be,Re.mode,De,null),be.return=Re,be;if(typeof be.then=="function")return ut(Re,ks(be),De);if(be.$$typeof===q)return ut(Re,vn(Re,be),De);oi(Re,be)}return null}function Ne(Re,be,De,st){var Ar=be!==null?be.key:null;if(typeof De=="string"&&De!==""||typeof De=="number"||typeof De=="bigint")return Ar!==null?null:ie(Re,be,""+De,st);if(typeof De=="object"&&De!==null){switch(De.$$typeof){case b:return De.key===Ar?ge(Re,be,De,st):null;case J:return De.key===Ar?Pe(Re,be,De,st):null;case j:return De=In(De),Ne(Re,be,De,st)}if(B(De)||m(De))return Ar!==null?null:tt(Re,be,De,st,null);if(typeof De.then=="function")return Ne(Re,be,ks(De),st);if(De.$$typeof===q)return Ne(Re,be,vn(Re,De),st);oi(Re,De)}return null}function Ue(Re,be,De,st,Ar){if(typeof st=="string"&&st!==""||typeof st=="number"||typeof st=="bigint")return Re=Re.get(De)||null,ie(be,Re,""+st,Ar);if(typeof st=="object"&&st!==null){switch(st.$$typeof){case b:return Re=Re.get(st.key===null?De:st.key)||null,ge(be,Re,st,Ar);case J:return Re=Re.get(st.key===null?De:st.key)||null,Pe(be,Re,st,Ar);case j:return st=In(st),Ue(Re,be,De,st,Ar)}if(B(st)||m(st))return Re=Re.get(De)||null,tt(be,Re,st,Ar,null);if(typeof st.then=="function")return Ue(Re,be,De,ks(st),Ar);if(st.$$typeof===q)return Ue(Re,be,De,vn(be,st),Ar);oi(be,st)}return null}function hr(Re,be,De,st){for(var Ar=null,Ba=null,_r=be,oa=be=0,Ta=null;_r!==null&&oa<De.length;oa++){_r.index>oa?(Ta=_r,_r=null):Ta=_r.sibling;var ja=Ne(Re,_r,De[oa],st);if(ja===null){_r===null&&(_r=Ta);break}e&&_r&&ja.alternate===null&&t(Re,_r),be=_(ja,be,oa),Ba===null?Ar=ja:Ba.sibling=ja,Ba=ja,_r=Ta}if(oa===De.length)return r(Re,_r),er&&Yt(Re,oa),Ar;if(_r===null){for(;oa<De.length;oa++)_r=ut(Re,De[oa],st),_r!==null&&(be=_(_r,be,oa),Ba===null?Ar=_r:Ba.sibling=_r,Ba=_r);return er&&Yt(Re,oa),Ar}for(_r=a(_r);oa<De.length;oa++)Ta=Ue(_r,Re,oa,De[oa],st),Ta!==null&&(e&&Ta.alternate!==null&&_r.delete(Ta.key===null?oa:Ta.key),be=_(Ta,be,oa),Ba===null?Ar=Ta:Ba.sibling=Ta,Ba=Ta);return e&&_r.forEach(function(Wc){return t(Re,Wc)}),er&&Yt(Re,oa),Ar}function Dr(Re,be,De,st){if(De==null)throw Error(Ee(151));for(var Ar=null,Ba=null,_r=be,oa=be=0,Ta=null,ja=De.next();_r!==null&&!ja.done;oa++,ja=De.next()){_r.index>oa?(Ta=_r,_r=null):Ta=_r.sibling;var Wc=Ne(Re,_r,ja.value,st);if(Wc===null){_r===null&&(_r=Ta);break}e&&_r&&Wc.alternate===null&&t(Re,_r),be=_(Wc,be,oa),Ba===null?Ar=Wc:Ba.sibling=Wc,Ba=Wc,_r=Ta}if(ja.done)return r(Re,_r),er&&Yt(Re,oa),Ar;if(_r===null){for(;!ja.done;oa++,ja=De.next())ja=ut(Re,ja.value,st),ja!==null&&(be=_(ja,be,oa),Ba===null?Ar=ja:Ba.sibling=ja,Ba=ja);return er&&Yt(Re,oa),Ar}for(_r=a(_r);!ja.done;oa++,ja=De.next())ja=Ue(_r,Re,oa,ja.value,st),ja!==null&&(e&&ja.alternate!==null&&_r.delete(ja.key===null?oa:ja.key),be=_(ja,be,oa),Ba===null?Ar=ja:Ba.sibling=ja,Ba=ja);return e&&_r.forEach(function(ym){return t(Re,ym)}),er&&Yt(Re,oa),Ar}function dn(Re,be,De,st){if(typeof De=="object"&&De!==null&&De.type===w&&De.key===null&&(De=De.props.children),typeof De=="object"&&De!==null){switch(De.$$typeof){case b:e:{for(var Ar=De.key;be!==null;){if(be.key===Ar){if(Ar=De.type,Ar===w){if(be.tag===7){r(Re,be.sibling),st=c(be,De.props.children),st.return=Re,Re=st;break e}}else if(be.elementType===Ar||typeof Ar=="object"&&Ar!==null&&Ar.$$typeof===j&&In(Ar)===be.type){r(Re,be.sibling),st=c(be,De.props),zi(st,De),st.return=Re,Re=st;break e}r(Re,be);break}else t(Re,be);be=be.sibling}De.type===w?(st=At(De.props.children,Re.mode,st,De.key),st.return=Re,Re=st):(st=Ge(De.type,De.key,De.props,null,Re.mode,st),zi(st,De),st.return=Re,Re=st)}return K(Re);case J:e:{for(Ar=De.key;be!==null;){if(be.key===Ar)if(be.tag===4&&be.stateNode.containerInfo===De.containerInfo&&be.stateNode.implementation===De.implementation){r(Re,be.sibling),st=c(be,De.children||[]),st.return=Re,Re=st;break e}else{r(Re,be);break}else t(Re,be);be=be.sibling}st=Jt(De,Re.mode,st),st.return=Re,Re=st}return K(Re);case j:return De=In(De),dn(Re,be,De,st)}if(B(De))return hr(Re,be,De,st);if(m(De)){if(Ar=m(De),typeof Ar!="function")throw Error(Ee(150));return De=Ar.call(De),Dr(Re,be,De,st)}if(typeof De.then=="function")return dn(Re,be,ks(De),st);if(De.$$typeof===q)return dn(Re,be,vn(Re,De),st);oi(Re,De)}return typeof De=="string"&&De!==""||typeof De=="number"||typeof De=="bigint"?(De=""+De,be!==null&&be.tag===6?(r(Re,be.sibling),st=c(be,De),st.return=Re,Re=st):(r(Re,be),st=cr(De,Re.mode,st),st.return=Re,Re=st),K(Re)):r(Re,be)}return function(Re,be,De,st){try{yi=0;var Ar=dn(Re,be,De,st);return gi=null,Ar}catch(_r){if(_r===Sn||_r===ka)throw _r;var Ba=Et(29,_r,null,Re.mode);return Ba.lanes=st,Ba.return=Re,Ba}}}var Hn=ls(!0),gn=ls(!1),Vn=!1;function Hi(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function sr(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function qr(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Na(e,t,r){var a=e.updateQueue;if(a===null)return null;if(a=a.shared,($a&2)!==0){var c=a.pending;return c===null?t.next=t:(t.next=c.next,c.next=t),a.pending=t,t=qe(e),Je(e,null,r),t}return ke(e,a,t,r),qe(e)}function An(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194048)!==0)){var a=t.lanes;a&=e.pendingLanes,r|=a,t.lanes=r,ur(e,r)}}function Os(e,t){var r=e.updateQueue,a=e.alternate;if(a!==null&&(a=a.updateQueue,r===a)){var c=null,_=null;if(r=r.firstBaseUpdate,r!==null){do{var K={lane:r.lane,tag:r.tag,payload:r.payload,callback:null,next:null};_===null?c=_=K:_=_.next=K,r=r.next}while(r!==null);_===null?c=_=t:_=_.next=t}else c=_=t;r={baseState:a.baseState,firstBaseUpdate:c,lastBaseUpdate:_,shared:a.shared,callbacks:a.callbacks},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}var Xi=!1;function no(){if(Xi){var e=ri;if(e!==null)throw e}}function io(e,t,r,a){Xi=!1;var c=e.updateQueue;Vn=!1;var _=c.firstBaseUpdate,K=c.lastBaseUpdate,ie=c.shared.pending;if(ie!==null){c.shared.pending=null;var ge=ie,Pe=ge.next;ge.next=null,K===null?_=Pe:K.next=Pe,K=ge;var tt=e.alternate;tt!==null&&(tt=tt.updateQueue,ie=tt.lastBaseUpdate,ie!==K&&(ie===null?tt.firstBaseUpdate=Pe:ie.next=Pe,tt.lastBaseUpdate=ge))}if(_!==null){var ut=c.baseState;K=0,tt=Pe=ge=null,ie=_;do{var Ne=ie.lane&-536870913,Ue=Ne!==ie.lane;if(Ue?(Ra&Ne)===Ne:(a&Ne)===Ne){Ne!==0&&Ne===cn&&(Xi=!0),tt!==null&&(tt=tt.next={lane:0,tag:ie.tag,payload:ie.payload,callback:null,next:null});e:{var hr=e,Dr=ie;Ne=t;var dn=r;switch(Dr.tag){case 1:if(hr=Dr.payload,typeof hr=="function"){ut=hr.call(dn,ut,Ne);break e}ut=hr;break e;case 3:hr.flags=hr.flags&-65537|128;case 0:if(hr=Dr.payload,Ne=typeof hr=="function"?hr.call(dn,ut,Ne):hr,Ne==null)break e;ut=C({},ut,Ne);break e;case 2:Vn=!0}}Ne=ie.callback,Ne!==null&&(e.flags|=64,Ue&&(e.flags|=8192),Ue=c.callbacks,Ue===null?c.callbacks=[Ne]:Ue.push(Ne))}else Ue={lane:Ne,tag:ie.tag,payload:ie.payload,callback:ie.callback,next:null},tt===null?(Pe=tt=Ue,ge=ut):tt=tt.next=Ue,K|=Ne;if(ie=ie.next,ie===null){if(ie=c.shared.pending,ie===null)break;Ue=ie,ie=Ue.next,Ue.next=null,c.lastBaseUpdate=Ue,c.shared.pending=null}}while(!0);tt===null&&(ge=ut),c.baseState=ge,c.firstBaseUpdate=Pe,c.lastBaseUpdate=tt,_===null&&(c.shared.lanes=0),xc|=K,e.lanes=K,e.memoizedState=ut}}function ci(e,t){if(typeof e!="function")throw Error(Ee(191,e));e.call(t)}function rl(e,t){var r=e.callbacks;if(r!==null)for(e.callbacks=null,e=0;e<r.length;e++)ci(r[e],t)}var Fs=G(null),so=G(0);function al(e,t){e=nc,Q(so,e),Q(Fs,t),nc=e|t.baseLanes}function Ao(){Q(so,nc),Q(Fs,Fs.current)}function us(){nc=so.current,ae(Fs),ae(so)}var Fn=G(null),Oi=null;function Ms(e){var t=e.alternate;Q(Xa,Xa.current&1),Q(Fn,e),Oi===null&&(t===null||Fs.current!==null||t.memoizedState!==null)&&(Oi=e)}function ko(e){Q(Xa,Xa.current),Q(Fn,e),Oi===null&&(Oi=e)}function Ko(e){e.tag===22?(Q(Xa,Xa.current),Q(Fn,e),Oi===null&&(Oi=e)):Vi()}function Vi(){Q(Xa,Xa.current),Q(Fn,Fn.current)}function _i(e){ae(Fn),Oi===e&&(Oi=null),ae(Xa)}var Xa=G(0);function oo(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||qd(r)||Wd(r)))return t}else if(t.tag===19&&(t.memoizedProps.revealOrder==="forwards"||t.memoizedProps.revealOrder==="backwards"||t.memoizedProps.revealOrder==="unstable_legacy-backwards"||t.memoizedProps.revealOrder==="together")){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Fi=0,dr=null,Ma=null,En=null,Oo=!1,co=!1,$s=!1,lo=0,or=0,It=null,Yo=0;function kn(){throw Error(Ee(321))}function zl(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!Ya(e[r],t[r]))return!1;return!0}function Hl(e,t,r,a,c,_){return Fi=_,dr=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,$.H=e===null||e.memoizedState===null?Ea:da,$s=!1,_=r(a,c),$s=!1,co&&(_=yu(t,r,a,c)),gu(e),_}function gu(e){$.H=xr;var t=Ma!==null&&Ma.next!==null;if(Fi=0,En=Ma=dr=null,Oo=!1,or=0,It=null,t)throw Error(Ee(300));e===null||Dn||(e=e.dependencies,e!==null&&tn(e)&&(Dn=!0))}function yu(e,t,r,a){dr=e;var c=0;do{if(co&&(It=null),or=0,co=!1,25<=c)throw Error(Ee(301));if(c+=1,En=Ma=null,e.updateQueue!=null){var _=e.updateQueue;_.lastEffect=null,_.events=null,_.stores=null,_.memoCache!=null&&(_.memoCache.index=0)}$.H=wa,_=t(r,a)}while(co);return _}function sd(){var e=$.H,t=e.useState()[0];return t=typeof t.then=="function"?qs(t):t,e=e.useState()[0],(Ma!==null?Ma.memoizedState:null)!==e&&(dr.flags|=1024),t}function Vl(){var e=lo!==0;return lo=0,e}function Fl(e,t,r){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r}function $l(e){if(Oo){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}Oo=!1}Fi=0,En=Ma=dr=null,co=!1,or=lo=0,It=null}function li(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return En===null?dr.memoizedState=En=e:En=En.next=e,En}function On(){if(Ma===null){var e=dr.alternate;e=e!==null?e.memoizedState:null}else e=Ma.next;var t=En===null?dr.memoizedState:En.next;if(t!==null)En=t,Ma=e;else{if(e===null)throw dr.alternate===null?Error(Ee(467)):Error(Ee(310));Ma=e,e={memoizedState:Ma.memoizedState,baseState:Ma.baseState,baseQueue:Ma.baseQueue,queue:Ma.queue,next:null},En===null?dr.memoizedState=En=e:En=En.next=e}return En}function Sc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function qs(e){var t=or;return or+=1,It===null&&(It=[]),e=si(It,e,t),t=dr,(En===null?t.memoizedState:En.next)===null&&(t=t.alternate,$.H=t===null||t.memoizedState===null?Ea:da),e}function ln(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return qs(e);if(e.$$typeof===q)return ua(e)}throw Error(Ee(438,String(e)))}function Qo(e){var t=null,r=dr.updateQueue;if(r!==null&&(t=r.memoCache),t==null){var a=dr.alternate;a!==null&&(a=a.updateQueue,a!==null&&(a=a.memoCache,a!=null&&(t={data:a.data.map(function(c){return c.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),r===null&&(r=Sc(),dr.updateQueue=r),r.memoCache=t,r=t.data[t.index],r===void 0)for(r=t.data[t.index]=Array(e),a=0;a<e;a++)r[a]=d;return t.index++,r}function ds(e,t){return typeof t=="function"?t(e):t}function Ji(e){var t=On();return Mo(t,Ma,e)}function Mo(e,t,r){var a=e.queue;if(a===null)throw Error(Ee(311));a.lastRenderedReducer=r;var c=e.baseQueue,_=a.pending;if(_!==null){if(c!==null){var K=c.next;c.next=_.next,_.next=K}t.baseQueue=c=_,a.pending=null}if(_=e.baseState,c===null)e.memoizedState=_;else{t=c.next;var ie=K=null,ge=null,Pe=t,tt=!1;do{var ut=Pe.lane&-536870913;if(ut!==Pe.lane?(Ra&ut)===ut:(Fi&ut)===ut){var Ne=Pe.revertLane;if(Ne===0)ge!==null&&(ge=ge.next={lane:0,revertLane:0,gesture:null,action:Pe.action,hasEagerState:Pe.hasEagerState,eagerState:Pe.eagerState,next:null}),ut===cn&&(tt=!0);else if((Fi&Ne)===Ne){Pe=Pe.next,Ne===cn&&(tt=!0);continue}else ut={lane:0,revertLane:Pe.revertLane,gesture:null,action:Pe.action,hasEagerState:Pe.hasEagerState,eagerState:Pe.eagerState,next:null},ge===null?(ie=ge=ut,K=_):ge=ge.next=ut,dr.lanes|=Ne,xc|=Ne;ut=Pe.action,$s&&r(_,ut),_=Pe.hasEagerState?Pe.eagerState:r(_,ut)}else Ne={lane:ut,revertLane:Pe.revertLane,gesture:Pe.gesture,action:Pe.action,hasEagerState:Pe.hasEagerState,eagerState:Pe.eagerState,next:null},ge===null?(ie=ge=Ne,K=_):ge=ge.next=Ne,dr.lanes|=ut,xc|=ut;Pe=Pe.next}while(Pe!==null&&Pe!==t);if(ge===null?K=_:ge.next=ie,!Ya(_,e.memoizedState)&&(Dn=!0,tt&&(r=ri,r!==null)))throw r;e.memoizedState=_,e.baseState=K,e.baseQueue=ge,a.lastRenderedState=_}return c===null&&(a.lanes=0),[e.memoizedState,a.dispatch]}function Ec(e){var t=On(),r=t.queue;if(r===null)throw Error(Ee(311));r.lastRenderedReducer=e;var a=r.dispatch,c=r.pending,_=t.memoizedState;if(c!==null){r.pending=null;var K=c=c.next;do _=e(_,K.action),K=K.next;while(K!==c);Ya(_,t.memoizedState)||(Dn=!0),t.memoizedState=_,t.baseQueue===null&&(t.baseState=_),r.lastRenderedState=_}return[_,a]}function nl(e,t,r){var a=dr,c=On(),_=er;if(_){if(r===void 0)throw Error(Ee(407));r=r()}else r=t();var K=!Ya((Ma||c).memoizedState,r);if(K&&(c.memoizedState=r,Dn=!0),c=c.queue,El(Da.bind(null,a,c,e),[e]),c.getSnapshot!==t||K||En!==null&&En.memoizedState.tag&1){if(a.flags|=2048,Tc(9,{destroy:void 0},il.bind(null,a,c,r,t),null),mn===null)throw Error(Ee(349));_||(Fi&127)!==0||uo(a,t,r)}return r}function uo(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=dr.updateQueue,t===null?(t=Sc(),dr.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function il(e,t,r,a){t.value=r,t.getSnapshot=a,_u(t)&&sl(e)}function Da(e,t,r){return r(function(){_u(t)&&sl(e)})}function _u(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!Ya(e,r)}catch{return!0}}function sl(e){var t=ot(e,2);t!==null&&vs(t,e,2)}function yl(e){var t=li();if(typeof e=="function"){var r=e;if(e=r(),$s){yt(!0);try{r()}finally{yt(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ds,lastRenderedState:e},t}function ol(e,t,r,a){return e.baseState=r,Mo(e,Ma,typeof a=="function"?a:ds)}function wc(e,t,r,a,c){if(Ir(e))throw Error(Ee(485));if(e=t.action,e!==null){var _={payload:c,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(K){_.listeners.push(K)}};$.T!==null?r(!0):_.isTransition=!1,a(_),r=t.pending,r===null?(_.next=t.pending=_,bu(t,_)):(_.next=r.next,t.pending=r.next=_)}}function bu(e,t){var r=t.action,a=t.payload,c=e.state;if(t.isTransition){var _=$.T,K={};$.T=K;try{var ie=r(c,a),ge=$.S;ge!==null&&ge(K,ie),Su(e,t,ie)}catch(Pe){Rc(e,t,Pe)}finally{_!==null&&K.types!==null&&(_.types=K.types),$.T=_}}else try{_=r(c,a),Su(e,t,_)}catch(Pe){Rc(e,t,Pe)}}function Su(e,t,r){r!==null&&typeof r=="object"&&typeof r.then=="function"?r.then(function(a){Zi(e,t,a)},function(a){return Rc(e,t,a)}):Zi(e,t,r)}function Zi(e,t,r){t.status="fulfilled",t.value=r,_l(t),e.state=r,t=e.pending,t!==null&&(r=t.next,r===t?e.pending=null:(r=r.next,t.next=r,bu(e,r)))}function Rc(e,t,r){var a=e.pending;if(e.pending=null,a!==null){a=a.next;do t.status="rejected",t.reason=r,_l(t),t=t.next;while(t!==a)}e.action=null}function _l(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function bl(e,t){return t}function Eu(e,t){if(er){var r=mn.formState;if(r!==null){e:{var a=dr;if(er){if(Cr){t:{for(var c=Cr,_=Hr;c.nodeType!==8;){if(!_){c=null;break t}if(c=Ws(c.nextSibling),c===null){c=null;break t}}_=c.data,c=_==="F!"||_==="F"?c:null}if(c){Cr=Ws(c.nextSibling),a=c.data==="F!";break e}}fa(a)}a=!1}a&&(t=r[0])}}return r=li(),r.memoizedState=r.baseState=t,a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:bl,lastRenderedState:t},r.queue=a,r=lr.bind(null,dr,a),a.dispatch=r,a=yl(!1),_=Bt.bind(null,dr,!1,a.queue),a=li(),c={state:t,dispatch:null,action:e,pending:null},a.queue=c,r=wc.bind(null,dr,c,_,r),c.dispatch=r,a.memoizedState=e,[t,r,!1]}function wu(e){var t=On();return Ru(t,Ma,e)}function Ru(e,t,r){if(t=Mo(e,t,bl)[0],e=Ji(ds)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var a=qs(t)}catch(K){throw K===Sn?ka:K}else a=t;t=On();var c=t.queue,_=c.dispatch;return r!==t.memoizedState&&(dr.flags|=2048,Tc(9,{destroy:void 0},Tu.bind(null,c,r),null)),[a,_,e]}function Tu(e,t){e.action=t}function ql(e){var t=On(),r=Ma;if(r!==null)return Ru(t,r,e);On(),t=t.memoizedState,r=On();var a=r.queue.dispatch;return r.memoizedState=e,[t,a,!1]}function Tc(e,t,r,a){return e={tag:e,create:r,deps:a,inst:t,next:null},t=dr.updateQueue,t===null&&(t=Sc(),dr.updateQueue=t),r=t.lastEffect,r===null?t.lastEffect=e.next=e:(a=r.next,r.next=e,e.next=a,t.lastEffect=e),e}function Wl(){return On().memoizedState}function Sl(e,t,r,a){var c=li();dr.flags|=e,c.memoizedState=Tc(1|t,{destroy:void 0},r,a===void 0?null:a)}function cl(e,t,r,a){var c=On();a=a===void 0?null:a;var _=c.memoizedState.inst;Ma!==null&&a!==null&&zl(a,Ma.memoizedState.deps)?c.memoizedState=Tc(t,_,r,a):(dr.flags|=e,c.memoizedState=Tc(1|t,_,r,a))}function Cc(e,t){Sl(8390656,8,e,t)}function El(e,t){cl(2048,8,e,t)}function ll(e){dr.flags|=4;var t=dr.updateQueue;if(t===null)t=Sc(),dr.updateQueue=t,t.events=[e];else{var r=t.events;r===null?t.events=[e]:r.push(e)}}function Cu(e){var t=On().memoizedState;return ll({ref:t,nextImpl:e}),function(){if(($a&2)!==0)throw Error(Ee(440));return t.impl.apply(void 0,arguments)}}function D(e,t){return cl(4,2,e,t)}function p(e,t){return cl(4,4,e,t)}function i(e,t){if(typeof t=="function"){e=e();var r=t(e);return function(){typeof r=="function"?r():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function E(e,t,r){r=r!=null?r.concat([e]):null,cl(4,4,i.bind(null,t,e),r)}function M(){}function N(e,t){var r=On();t=t===void 0?null:t;var a=r.memoizedState;return t!==null&&zl(t,a[1])?a[0]:(r.memoizedState=[e,t],e)}function re(e,t){var r=On();t=t===void 0?null:t;var a=r.memoizedState;if(t!==null&&zl(t,a[1]))return a[0];if(a=e(),$s){yt(!0);try{e()}finally{yt(!1)}}return r.memoizedState=[a,t],a}function ce(e,t,r){return r===void 0||(Fi&1073741824)!==0&&(Ra&261930)===0?e.memoizedState=t:(e.memoizedState=r,e=Hp(),dr.lanes|=e,xc|=e,r)}function de(e,t,r,a){return Ya(r,t)?r:Fs.current!==null?(e=ce(e,r,a),Ya(e,t)||(Dn=!0),e):(Fi&42)===0||(Fi&1073741824)!==0&&(Ra&261930)===0?(Dn=!0,e.memoizedState=r):(e=Hp(),dr.lanes|=e,xc|=e,t)}function he(e,t,r,a,c){var _=L.p;L.p=_!==0&&8>_?_:8;var K=$.T,ie={};$.T=ie,Bt(e,!1,t,r);try{var ge=c(),Pe=$.S;if(Pe!==null&&Pe(ie,ge),ge!==null&&typeof ge=="object"&&typeof ge.then=="function"){var tt=Gn(ge,a);dt(e,t,tt,Is(e))}else dt(e,t,a,Is(e))}catch(ut){dt(e,t,{then:function(){},status:"rejected",reason:ut},Is())}finally{L.p=_,K!==null&&ie.types!==null&&(K.types=ie.types),$.T=K}}function me(){}function ve(e,t,r,a){if(e.tag!==5)throw Error(Ee(476));var c=Ve(e).queue;he(e,c,t,z,r===null?me:function(){return Be(e),r(a)})}function Ve(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:z,baseState:z,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ds,lastRenderedState:z},next:null};var r={};return t.next={memoizedState:r,baseState:r,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ds,lastRenderedState:r},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function Be(e){var t=Ve(e);t.next===null&&(t=e.alternate.memoizedState),dt(e,t.next.queue,{},Is())}function Ut(){return ua(lu)}function vt(){return On().memoizedState}function lt(){return On().memoizedState}function ft(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var r=Is();e=qr(r);var a=Na(t,e,r);a!==null&&(vs(a,t,r),An(a,t,r)),t={cache:mi()},e.payload=t;return}t=t.return}}function mt(e,t,r){var a=Is();r={lane:a,revertLane:0,gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null},Ir(e)?ya(t,r):(r=$e(e,t,r,a),r!==null&&(vs(r,e,a),Ot(r,t,a)))}function lr(e,t,r){var a=Is();dt(e,t,r,a)}function dt(e,t,r,a){var c={lane:a,revertLane:0,gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null};if(Ir(e))ya(t,c);else{var _=e.alternate;if(e.lanes===0&&(_===null||_.lanes===0)&&(_=t.lastRenderedReducer,_!==null))try{var K=t.lastRenderedState,ie=_(K,r);if(c.hasEagerState=!0,c.eagerState=ie,Ya(ie,K))return ke(e,t,c,0),mn===null&&Me(),!1}catch{}if(r=$e(e,t,c,a),r!==null)return vs(r,e,a),Ot(r,t,a),!0}return!1}function Bt(e,t,r,a){if(a={lane:2,revertLane:Ld(),gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},Ir(e)){if(t)throw Error(Ee(479))}else t=$e(e,r,a,2),t!==null&&vs(t,e,2)}function Ir(e){var t=e.alternate;return e===dr||t!==null&&t===dr}function ya(e,t){co=Oo=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function Ot(e,t,r){if((r&4194048)!==0){var a=t.lanes;a&=e.pendingLanes,r|=a,t.lanes=r,ur(e,r)}}var xr={readContext:ua,use:ln,useCallback:kn,useContext:kn,useEffect:kn,useImperativeHandle:kn,useLayoutEffect:kn,useInsertionEffect:kn,useMemo:kn,useReducer:kn,useRef:kn,useState:kn,useDebugValue:kn,useDeferredValue:kn,useTransition:kn,useSyncExternalStore:kn,useId:kn,useHostTransitionStatus:kn,useFormState:kn,useActionState:kn,useOptimistic:kn,useMemoCache:kn,useCacheRefresh:kn};xr.useEffectEvent=kn;var Ea={readContext:ua,use:ln,useCallback:function(e,t){return li().memoizedState=[e,t===void 0?null:t],e},useContext:ua,useEffect:Cc,useImperativeHandle:function(e,t,r){r=r!=null?r.concat([e]):null,Sl(4194308,4,i.bind(null,t,e),r)},useLayoutEffect:function(e,t){return Sl(4194308,4,e,t)},useInsertionEffect:function(e,t){Sl(4,2,e,t)},useMemo:function(e,t){var r=li();t=t===void 0?null:t;var a=e();if($s){yt(!0);try{e()}finally{yt(!1)}}return r.memoizedState=[a,t],a},useReducer:function(e,t,r){var a=li();if(r!==void 0){var c=r(t);if($s){yt(!0);try{r(t)}finally{yt(!1)}}}else c=t;return a.memoizedState=a.baseState=c,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:c},a.queue=e,e=e.dispatch=mt.bind(null,dr,e),[a.memoizedState,e]},useRef:function(e){var t=li();return e={current:e},t.memoizedState=e},useState:function(e){e=yl(e);var t=e.queue,r=lr.bind(null,dr,t);return t.dispatch=r,[e.memoizedState,r]},useDebugValue:M,useDeferredValue:function(e,t){var r=li();return ce(r,e,t)},useTransition:function(){var e=yl(!1);return e=he.bind(null,dr,e.queue,!0,!1),li().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,r){var a=dr,c=li();if(er){if(r===void 0)throw Error(Ee(407));r=r()}else{if(r=t(),mn===null)throw Error(Ee(349));(Ra&127)!==0||uo(a,t,r)}c.memoizedState=r;var _={value:r,getSnapshot:t};return c.queue=_,Cc(Da.bind(null,a,_,e),[e]),a.flags|=2048,Tc(9,{destroy:void 0},il.bind(null,a,_,r,t),null),r},useId:function(){var e=li(),t=mn.identifierPrefix;if(er){var r=Kt,a=Lt;r=(a&~(1<<32-Xe(a)-1)).toString(32)+r,t="_"+t+"R_"+r,r=lo++,0<r&&(t+="H"+r.toString(32)),t+="_"}else r=Yo++,t="_"+t+"r_"+r.toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:Ut,useFormState:Eu,useActionState:Eu,useOptimistic:function(e){var t=li();t.memoizedState=t.baseState=e;var r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=r,t=Bt.bind(null,dr,!0,r),r.dispatch=t,[e,t]},useMemoCache:Qo,useCacheRefresh:function(){return li().memoizedState=ft.bind(null,dr)},useEffectEvent:function(e){var t=li(),r={impl:e};return t.memoizedState=r,function(){if(($a&2)!==0)throw Error(Ee(440));return r.impl.apply(void 0,arguments)}}},da={readContext:ua,use:ln,useCallback:N,useContext:ua,useEffect:El,useImperativeHandle:E,useInsertionEffect:D,useLayoutEffect:p,useMemo:re,useReducer:Ji,useRef:Wl,useState:function(){return Ji(ds)},useDebugValue:M,useDeferredValue:function(e,t){var r=On();return de(r,Ma.memoizedState,e,t)},useTransition:function(){var e=Ji(ds)[0],t=On().memoizedState;return[typeof e=="boolean"?e:qs(e),t]},useSyncExternalStore:nl,useId:vt,useHostTransitionStatus:Ut,useFormState:wu,useActionState:wu,useOptimistic:function(e,t){var r=On();return ol(r,Ma,e,t)},useMemoCache:Qo,useCacheRefresh:lt};da.useEffectEvent=Cu;var wa={readContext:ua,use:ln,useCallback:N,useContext:ua,useEffect:El,useImperativeHandle:E,useInsertionEffect:D,useLayoutEffect:p,useMemo:re,useReducer:Ec,useRef:Wl,useState:function(){return Ec(ds)},useDebugValue:M,useDeferredValue:function(e,t){var r=On();return Ma===null?ce(r,e,t):de(r,Ma.memoizedState,e,t)},useTransition:function(){var e=Ec(ds)[0],t=On().memoizedState;return[typeof e=="boolean"?e:qs(e),t]},useSyncExternalStore:nl,useId:vt,useHostTransitionStatus:Ut,useFormState:ql,useActionState:ql,useOptimistic:function(e,t){var r=On();return Ma!==null?ol(r,Ma,e,t):(r.baseState=e,[e,r.queue.dispatch])},useMemoCache:Qo,useCacheRefresh:lt};wa.useEffectEvent=Cu;function Wr(e,t,r,a){t=e.memoizedState,r=r(a,t),r=r==null?t:C({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var yn={enqueueSetState:function(e,t,r){e=e._reactInternals;var a=Is(),c=qr(a);c.payload=t,r!=null&&(c.callback=r),t=Na(e,c,a),t!==null&&(vs(t,e,a),An(t,e,a))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var a=Is(),c=qr(a);c.tag=1,c.payload=t,r!=null&&(c.callback=r),t=Na(e,c,a),t!==null&&(vs(t,e,a),An(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=Is(),a=qr(r);a.tag=2,t!=null&&(a.callback=t),t=Na(e,a,r),t!==null&&(vs(t,e,r),An(t,e,r))}};function Mn(e,t,r,a,c,_,K){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(a,_,K):t.prototype&&t.prototype.isPureReactComponent?!ro(r,a)||!ro(c,_):!0}function Bn(e,t,r,a){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,a),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,a),t.state!==e&&yn.enqueueReplaceState(t,t.state,null)}function Ja(e,t){var r=t;if("ref"in t){r={};for(var a in t)a!=="ref"&&(r[a]=t[a])}if(e=e.defaultProps){r===t&&(r=C({},r));for(var c in e)r[c]===void 0&&(r[c]=e[c])}return r}function bi(e){Z(e)}function Mi(e){console.error(e)}function Ds(e){Z(e)}function Ps(e,t){try{var r=e.onUncaughtError;r(t.value,{componentStack:t.stack})}catch(a){setTimeout(function(){throw a})}}function es(e,t,r){try{var a=e.onCaughtError;a(r.value,{componentStack:r.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(c){setTimeout(function(){throw c})}}function Ac(e,t,r){return r=qr(r),r.tag=3,r.payload={element:null},r.callback=function(){Ps(e,t)},r}function ul(e){return e=qr(e),e.tag=3,e}function wl(e,t,r,a){var c=r.type.getDerivedStateFromError;if(typeof c=="function"){var _=a.value;e.payload=function(){return c(_)},e.callback=function(){es(t,r,a)}}var K=r.stateNode;K!==null&&typeof K.componentDidCatch=="function"&&(e.callback=function(){es(t,r,a),typeof c!="function"&&(Bc===null?Bc=new Set([this]):Bc.add(this));var ie=a.stack;this.componentDidCatch(a.value,{componentStack:ie!==null?ie:""})})}function kc(e,t,r,a,c){if(r.flags|=32768,a!==null&&typeof a=="object"&&typeof a.then=="function"){if(t=r.alternate,t!==null&&Aa(t,r,c,!0),r=Fn.current,r!==null){switch(r.tag){case 31:case 13:return Oi===null?Bu():r.alternate===null&&$n===0&&($n=3),r.flags&=-257,r.flags|=65536,r.lanes=c,a===sa?r.flags|=16384:(t=r.updateQueue,t===null?r.updateQueue=new Set([a]):t.add(a),Md(e,a,c)),!1;case 22:return r.flags|=65536,a===sa?r.flags|=16384:(t=r.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([a])},r.updateQueue=t):(r=t.retryQueue,r===null?t.retryQueue=new Set([a]):r.add(a)),Md(e,a,c)),!1}throw Error(Ee(435,r.tag))}return Md(e,a,c),Bu(),!1}if(er)return t=Fn.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=c,a!==Fa&&(e=Error(Ee(422),{cause:a}),Mr(ht(e,r)))):(a!==Fa&&(t=Error(Ee(423),{cause:a}),Mr(ht(t,r))),e=e.current.alternate,e.flags|=65536,c&=-c,e.lanes|=c,a=ht(a,r),c=Ac(e.stateNode,a,c),Os(e,c),$n!==4&&($n=2)),!1;var _=Error(Ee(520),{cause:a});if(_=ht(_,r),tu===null?tu=[_]:tu.push(_),$n!==4&&($n=2),t===null)return!0;a=ht(a,r),r=t;do{switch(r.tag){case 3:return r.flags|=65536,e=c&-c,r.lanes|=e,e=Ac(r.stateNode,a,e),Os(r,e),!1;case 1:if(t=r.type,_=r.stateNode,(r.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(Bc===null||!Bc.has(_))))return r.flags|=65536,c&=-c,r.lanes|=c,c=ul(c),wl(c,e,r,a),Os(r,c),!1}r=r.return}while(r!==null);return!1}var Xo=Error(Ee(461)),Dn=!1;function Yn(e,t,r,a){t.child=e===null?gn(t,null,r,a):Hn(t,e.child,r,a)}function Oc(e,t,r,a,c){r=r.render;var _=t.ref;if("ref"in a){var K={};for(var ie in a)ie!=="ref"&&(K[ie]=a[ie])}else K=a;return Sa(t),a=Hl(e,t,r,K,_,c),ie=Vl(),e!==null&&!Dn?(Fl(e,t,c),Jo(e,t,c)):(er&&ie&&kr(t),t.flags|=1,Yn(e,t,a,c),t.child)}function Mc(e,t,r,a,c){if(e===null){var _=r.type;return typeof _=="function"&&!it(_)&&_.defaultProps===void 0&&r.compare===null?(t.tag=15,t.type=_,Dc(e,t,_,a,c)):(e=Ge(r.type,null,a,t,t.mode,c),e.ref=t.ref,e.return=t,t.child=e)}if(_=e.child,!fd(e,c)){var K=_.memoizedProps;if(r=r.compare,r=r!==null?r:ro,r(K,a)&&e.ref===t.ref)return Jo(e,t,c)}return t.flags|=1,e=Pt(_,a),e.ref=t.ref,e.return=t,t.child=e}function Dc(e,t,r,a,c){if(e!==null){var _=e.memoizedProps;if(ro(_,a)&&e.ref===t.ref)if(Dn=!1,t.pendingProps=a=_,fd(e,c))(e.flags&131072)!==0&&(Dn=!0);else return t.lanes=e.lanes,Jo(e,t,c)}return od(e,t,r,a,c)}function Gl(e,t,r,a){var c=a.children,_=e!==null?e.memoizedState:null;if(e===null&&t.stateNode===null&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),a.mode==="hidden"){if((t.flags&128)!==0){if(_=_!==null?_.baseLanes|r:r,e!==null){for(a=t.child=e.child,c=0;a!==null;)c=c|a.lanes|a.childLanes,a=a.sibling;a=c&~_}else a=0,t.child=null;return Kl(e,t,_,r,a)}if((r&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&La(t,_!==null?_.cachePool:null),_!==null?al(t,_):Ao(),Ko(t);else return a=t.lanes=536870912,Kl(e,t,_!==null?_.baseLanes|r:r,r,a)}else _!==null?(La(t,_.cachePool),al(t,_),Vi(),t.memoizedState=null):(e!==null&&La(t,null),Ao(),Vi());return Yn(e,t,c,r),t.child}function Pc(e,t){return e!==null&&e.tag===22||t.stateNode!==null||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function Kl(e,t,r,a,c){var _=Cn();return _=_===null?null:{parent:ga._currentValue,pool:_},t.memoizedState={baseLanes:r,cachePool:_},e!==null&&La(t,null),Ao(),Ko(t),e!==null&&Aa(e,t,a,!0),t.childLanes=c,null}function Lc(e,t){return t=ku({mode:t.mode,children:t.children},e.mode),t.ref=e.ref,e.child=t,t.return=e,t}function Rl(e,t,r){return Hn(t,e.child,null,r),e=Lc(t,t.pendingProps),e.flags|=2,_i(t),t.memoizedState=null,e}function Do(e,t,r){var a=t.pendingProps,c=(t.flags&128)!==0;if(t.flags&=-129,e===null){if(er){if(a.mode==="hidden")return e=Lc(t,a),t.lanes=536870912,Pc(null,e);if(ko(t),(e=Cr)?(e=wh(e,Hr),e=e!==null&&e.data==="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:Le!==null?{id:Lt,overflow:Kt}:null,retryLane:536870912,hydrationErrors:null},r=qt(e),r.return=t,t.child=r,Wt=t,Cr=null)):e=null,e===null)throw fa(t);return t.lanes=536870912,null}return Lc(t,a)}var _=e.memoizedState;if(_!==null){var K=_.dehydrated;if(ko(t),c)if(t.flags&256)t.flags&=-257,t=Rl(e,t,r);else if(t.memoizedState!==null)t.child=e.child,t.flags|=128,t=null;else throw Error(Ee(558));else if(Dn||Aa(e,t,r,!1),c=(r&e.childLanes)!==0,Dn||c){if(a=mn,a!==null&&(K=wr(a,r),K!==0&&K!==_.retryLane))throw _.retryLane=K,ot(e,K),vs(a,e,K),Xo;Bu(),t=Rl(e,t,r)}else e=_.treeContext,Cr=Ws(K.nextSibling),Wt=t,er=!0,Ur=null,Hr=!1,e!==null&&Yr(t,e),t=Lc(t,a),t.flags|=4096;return t}return e=Pt(e.child,{mode:a.mode,children:a.children}),e.ref=t.ref,t.child=e,e.return=t,e}function Au(e,t){var r=t.ref;if(r===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof r!="function"&&typeof r!="object")throw Error(Ee(284));(e===null||e.ref!==r)&&(t.flags|=4194816)}}function od(e,t,r,a,c){return Sa(t),r=Hl(e,t,r,a,void 0,c),a=Vl(),e!==null&&!Dn?(Fl(e,t,c),Jo(e,t,c)):(er&&a&&kr(t),t.flags|=1,Yn(e,t,r,c),t.child)}function pp(e,t,r,a,c,_){return Sa(t),t.updateQueue=null,r=yu(t,a,r,c),gu(e),a=Vl(),e!==null&&!Dn?(Fl(e,t,_),Jo(e,t,_)):(er&&a&&kr(t),t.flags|=1,Yn(e,t,r,_),t.child)}function hp(e,t,r,a,c){if(Sa(t),t.stateNode===null){var _=Ct,K=r.contextType;typeof K=="object"&&K!==null&&(_=ua(K)),_=new r(a,_),t.memoizedState=_.state!==null&&_.state!==void 0?_.state:null,_.updater=yn,t.stateNode=_,_._reactInternals=t,_=t.stateNode,_.props=a,_.state=t.memoizedState,_.refs={},Hi(t),K=r.contextType,_.context=typeof K=="object"&&K!==null?ua(K):Ct,_.state=t.memoizedState,K=r.getDerivedStateFromProps,typeof K=="function"&&(Wr(t,r,K,a),_.state=t.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof _.getSnapshotBeforeUpdate=="function"||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(K=_.state,typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount(),K!==_.state&&yn.enqueueReplaceState(_,_.state,null),io(t,a,_,c),no(),_.state=t.memoizedState),typeof _.componentDidMount=="function"&&(t.flags|=4194308),a=!0}else if(e===null){_=t.stateNode;var ie=t.memoizedProps,ge=Ja(r,ie);_.props=ge;var Pe=_.context,tt=r.contextType;K=Ct,typeof tt=="object"&&tt!==null&&(K=ua(tt));var ut=r.getDerivedStateFromProps;tt=typeof ut=="function"||typeof _.getSnapshotBeforeUpdate=="function",ie=t.pendingProps!==ie,tt||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(ie||Pe!==K)&&Bn(t,_,a,K),Vn=!1;var Ne=t.memoizedState;_.state=Ne,io(t,a,_,c),no(),Pe=t.memoizedState,ie||Ne!==Pe||Vn?(typeof ut=="function"&&(Wr(t,r,ut,a),Pe=t.memoizedState),(ge=Vn||Mn(t,r,ge,a,Ne,Pe,K))?(tt||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount()),typeof _.componentDidMount=="function"&&(t.flags|=4194308)):(typeof _.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=a,t.memoizedState=Pe),_.props=a,_.state=Pe,_.context=K,a=ge):(typeof _.componentDidMount=="function"&&(t.flags|=4194308),a=!1)}else{_=t.stateNode,sr(e,t),K=t.memoizedProps,tt=Ja(r,K),_.props=tt,ut=t.pendingProps,Ne=_.context,Pe=r.contextType,ge=Ct,typeof Pe=="object"&&Pe!==null&&(ge=ua(Pe)),ie=r.getDerivedStateFromProps,(Pe=typeof ie=="function"||typeof _.getSnapshotBeforeUpdate=="function")||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(K!==ut||Ne!==ge)&&Bn(t,_,a,ge),Vn=!1,Ne=t.memoizedState,_.state=Ne,io(t,a,_,c),no();var Ue=t.memoizedState;K!==ut||Ne!==Ue||Vn||e!==null&&e.dependencies!==null&&tn(e.dependencies)?(typeof ie=="function"&&(Wr(t,r,ie,a),Ue=t.memoizedState),(tt=Vn||Mn(t,r,tt,a,Ne,Ue,ge)||e!==null&&e.dependencies!==null&&tn(e.dependencies))?(Pe||typeof _.UNSAFE_componentWillUpdate!="function"&&typeof _.componentWillUpdate!="function"||(typeof _.componentWillUpdate=="function"&&_.componentWillUpdate(a,Ue,ge),typeof _.UNSAFE_componentWillUpdate=="function"&&_.UNSAFE_componentWillUpdate(a,Ue,ge)),typeof _.componentDidUpdate=="function"&&(t.flags|=4),typeof _.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof _.componentDidUpdate!="function"||K===e.memoizedProps&&Ne===e.memoizedState||(t.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||K===e.memoizedProps&&Ne===e.memoizedState||(t.flags|=1024),t.memoizedProps=a,t.memoizedState=Ue),_.props=a,_.state=Ue,_.context=ge,a=tt):(typeof _.componentDidUpdate!="function"||K===e.memoizedProps&&Ne===e.memoizedState||(t.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||K===e.memoizedProps&&Ne===e.memoizedState||(t.flags|=1024),a=!1)}return _=a,Au(e,t),a=(t.flags&128)!==0,_||a?(_=t.stateNode,r=a&&typeof r.getDerivedStateFromError!="function"?null:_.render(),t.flags|=1,e!==null&&a?(t.child=Hn(t,e.child,null,c),t.child=Hn(t,null,r,c)):Yn(e,t,r,c),t.memoizedState=_.state,e=t.child):e=Jo(e,t,c),e}function fp(e,t,r,a){return la(),t.flags|=256,Yn(e,t,r,a),t.child}var cd={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function ld(e){return{baseLanes:e,cachePool:bn()}}function ud(e,t,r){return e=e!==null?e.childLanes&~r:0,t&&(e|=Ns),e}function mp(e,t,r){var a=t.pendingProps,c=!1,_=(t.flags&128)!==0,K;if((K=_)||(K=e!==null&&e.memoizedState===null?!1:(Xa.current&2)!==0),K&&(c=!0,t.flags&=-129),K=(t.flags&32)!==0,t.flags&=-33,e===null){if(er){if(c?Ms(t):Vi(),(e=Cr)?(e=wh(e,Hr),e=e!==null&&e.data!=="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:Le!==null?{id:Lt,overflow:Kt}:null,retryLane:536870912,hydrationErrors:null},r=qt(e),r.return=t,t.child=r,Wt=t,Cr=null)):e=null,e===null)throw fa(t);return Wd(e)?t.lanes=32:t.lanes=536870912,null}var ie=a.children;return a=a.fallback,c?(Vi(),c=t.mode,ie=ku({mode:"hidden",children:ie},c),a=At(a,c,r,null),ie.return=t,a.return=t,ie.sibling=a,t.child=ie,a=t.child,a.memoizedState=ld(r),a.childLanes=ud(e,K,r),t.memoizedState=cd,Pc(null,a)):(Ms(t),dd(t,ie))}var ge=e.memoizedState;if(ge!==null&&(ie=ge.dehydrated,ie!==null)){if(_)t.flags&256?(Ms(t),t.flags&=-257,t=pd(e,t,r)):t.memoizedState!==null?(Vi(),t.child=e.child,t.flags|=128,t=null):(Vi(),ie=a.fallback,c=t.mode,a=ku({mode:"visible",children:a.children},c),ie=At(ie,c,r,null),ie.flags|=2,a.return=t,ie.return=t,a.sibling=ie,t.child=a,Hn(t,e.child,null,r),a=t.child,a.memoizedState=ld(r),a.childLanes=ud(e,K,r),t.memoizedState=cd,t=Pc(null,a));else if(Ms(t),Wd(ie)){if(K=ie.nextSibling&&ie.nextSibling.dataset,K)var Pe=K.dgst;K=Pe,a=Error(Ee(419)),a.stack="",a.digest=K,Mr({value:a,source:null,stack:null}),t=pd(e,t,r)}else if(Dn||Aa(e,t,r,!1),K=(r&e.childLanes)!==0,Dn||K){if(K=mn,K!==null&&(a=wr(K,r),a!==0&&a!==ge.retryLane))throw ge.retryLane=a,ot(e,a),vs(K,e,a),Xo;qd(ie)||Bu(),t=pd(e,t,r)}else qd(ie)?(t.flags|=192,t.child=e.child,t=null):(e=ge.treeContext,Cr=Ws(ie.nextSibling),Wt=t,er=!0,Ur=null,Hr=!1,e!==null&&Yr(t,e),t=dd(t,a.children),t.flags|=4096);return t}return c?(Vi(),ie=a.fallback,c=t.mode,ge=e.child,Pe=ge.sibling,a=Pt(ge,{mode:"hidden",children:a.children}),a.subtreeFlags=ge.subtreeFlags&65011712,Pe!==null?ie=Pt(Pe,ie):(ie=At(ie,c,r,null),ie.flags|=2),ie.return=t,a.return=t,a.sibling=ie,t.child=a,Pc(null,a),a=t.child,ie=e.child.memoizedState,ie===null?ie=ld(r):(c=ie.cachePool,c!==null?(ge=ga._currentValue,c=c.parent!==ge?{parent:ge,pool:ge}:c):c=bn(),ie={baseLanes:ie.baseLanes|r,cachePool:c}),a.memoizedState=ie,a.childLanes=ud(e,K,r),t.memoizedState=cd,Pc(e.child,a)):(Ms(t),r=e.child,e=r.sibling,r=Pt(r,{mode:"visible",children:a.children}),r.return=t,r.sibling=null,e!==null&&(K=t.deletions,K===null?(t.deletions=[e],t.flags|=16):K.push(e)),t.child=r,t.memoizedState=null,r)}function dd(e,t){return t=ku({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function ku(e,t){return e=Et(22,e,null,t),e.lanes=0,e}function pd(e,t,r){return Hn(t,e.child,null,r),e=dd(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function vp(e,t,r){e.lanes|=t;var a=e.alternate;a!==null&&(a.lanes|=t),en(e.return,t,r)}function hd(e,t,r,a,c,_){var K=e.memoizedState;K===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:a,tail:r,tailMode:c,treeForkCount:_}:(K.isBackwards=t,K.rendering=null,K.renderingStartTime=0,K.last=a,K.tail=r,K.tailMode=c,K.treeForkCount=_)}function gp(e,t,r){var a=t.pendingProps,c=a.revealOrder,_=a.tail;a=a.children;var K=Xa.current,ie=(K&2)!==0;if(ie?(K=K&1|2,t.flags|=128):K&=1,Q(Xa,K),Yn(e,t,a,r),a=er?bt:0,!ie&&e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&vp(e,r,t);else if(e.tag===19)vp(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(c){case"forwards":for(r=t.child,c=null;r!==null;)e=r.alternate,e!==null&&oo(e)===null&&(c=r),r=r.sibling;r=c,r===null?(c=t.child,t.child=null):(c=r.sibling,r.sibling=null),hd(t,!1,c,r,_,a);break;case"backwards":case"unstable_legacy-backwards":for(r=null,c=t.child,t.child=null;c!==null;){if(e=c.alternate,e!==null&&oo(e)===null){t.child=c;break}e=c.sibling,c.sibling=r,r=c,c=e}hd(t,!0,r,null,_,a);break;case"together":hd(t,!1,null,null,void 0,a);break;default:t.memoizedState=null}return t.child}function Jo(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),xc|=t.lanes,(r&t.childLanes)===0)if(e!==null){if(Aa(e,t,r,!1),(r&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(Ee(153));if(t.child!==null){for(e=t.child,r=Pt(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=Pt(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function fd(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&tn(e)))}function yf(e,t,r){switch(t.tag){case 3:Oe(t,t.stateNode.containerInfo),na(t,ga,e.memoizedState.cache),la();break;case 27:case 5:_e(t);break;case 4:Oe(t,t.stateNode.containerInfo);break;case 10:na(t,t.type,t.memoizedProps.value);break;case 31:if(t.memoizedState!==null)return t.flags|=128,ko(t),null;break;case 13:var a=t.memoizedState;if(a!==null)return a.dehydrated!==null?(Ms(t),t.flags|=128,null):(r&t.child.childLanes)!==0?mp(e,t,r):(Ms(t),e=Jo(e,t,r),e!==null?e.sibling:null);Ms(t);break;case 19:var c=(e.flags&128)!==0;if(a=(r&t.childLanes)!==0,a||(Aa(e,t,r,!1),a=(r&t.childLanes)!==0),c){if(a)return gp(e,t,r);t.flags|=128}if(c=t.memoizedState,c!==null&&(c.rendering=null,c.tail=null,c.lastEffect=null),Q(Xa,Xa.current),a)break;return null;case 22:return t.lanes=0,Gl(e,t,r,t.pendingProps);case 24:na(t,ga,e.memoizedState.cache)}return Jo(e,t,r)}function yp(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps)Dn=!0;else{if(!fd(e,r)&&(t.flags&128)===0)return Dn=!1,yf(e,t,r);Dn=(e.flags&131072)!==0}else Dn=!1,er&&(t.flags&1048576)!==0&&vr(t,bt,t.index);switch(t.lanes=0,t.tag){case 16:e:{var a=t.pendingProps;if(e=In(t.elementType),t.type=e,typeof e=="function")it(e)?(a=Ja(e,a),t.tag=1,t=hp(null,t,e,a,r)):(t.tag=0,t=od(null,t,e,a,r));else{if(e!=null){var c=e.$$typeof;if(c===g){t.tag=11,t=Oc(null,t,e,a,r);break e}else if(c===W){t.tag=14,t=Mc(null,t,e,a,r);break e}}throw t=H(e)||e,Error(Ee(306,t,""))}}return t;case 0:return od(e,t,t.type,t.pendingProps,r);case 1:return a=t.type,c=Ja(a,t.pendingProps),hp(e,t,a,c,r);case 3:e:{if(Oe(t,t.stateNode.containerInfo),e===null)throw Error(Ee(387));a=t.pendingProps;var _=t.memoizedState;c=_.element,sr(e,t),io(t,a,null,r);var K=t.memoizedState;if(a=K.cache,na(t,ga,a),a!==_.cache&&fn(t,[ga],r,!0),no(),a=K.element,_.isDehydrated)if(_={element:a,isDehydrated:!1,cache:K.cache},t.updateQueue.baseState=_,t.memoizedState=_,t.flags&256){t=fp(e,t,a,r);break e}else if(a!==c){c=ht(Error(Ee(424)),t),Mr(c),t=fp(e,t,a,r);break e}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(Cr=Ws(e.firstChild),Wt=t,er=!0,Ur=null,Hr=!0,r=gn(t,null,a,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling}else{if(la(),a===c){t=Jo(e,t,r);break e}Yn(e,t,a,r)}t=t.child}return t;case 26:return Au(e,t),e===null?(r=Oh(t.type,null,t.pendingProps,null))?t.memoizedState=r:er||(r=t.type,e=t.pendingProps,a=$u(ue.current).createElement(r),a[ca]=t,a[Kr]=e,Di(a,r,e),Va(a),t.stateNode=a):t.memoizedState=Oh(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return _e(t),e===null&&er&&(a=t.stateNode=Ch(t.type,t.pendingProps,ue.current),Wt=t,Hr=!0,c=Cr,Hc(t.type)?(Gd=c,Cr=Ws(a.firstChild)):Cr=c),Yn(e,t,t.pendingProps.children,r),Au(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&er&&((c=a=Cr)&&(a=Kf(a,t.type,t.pendingProps,Hr),a!==null?(t.stateNode=a,Wt=t,Cr=Ws(a.firstChild),Hr=!1,c=!0):c=!1),c||fa(t)),_e(t),c=t.type,_=t.pendingProps,K=e!==null?e.memoizedProps:null,a=_.children,Vd(c,_)?a=null:K!==null&&Vd(c,K)&&(t.flags|=32),t.memoizedState!==null&&(c=Hl(e,t,sd,null,null,r),lu._currentValue=c),Au(e,t),Yn(e,t,a,r),t.child;case 6:return e===null&&er&&((e=r=Cr)&&(r=Yf(r,t.pendingProps,Hr),r!==null?(t.stateNode=r,Wt=t,Cr=null,e=!0):e=!1),e||fa(t)),null;case 13:return mp(e,t,r);case 4:return Oe(t,t.stateNode.containerInfo),a=t.pendingProps,e===null?t.child=Hn(t,null,a,r):Yn(e,t,a,r),t.child;case 11:return Oc(e,t,t.type,t.pendingProps,r);case 7:return Yn(e,t,t.pendingProps,r),t.child;case 8:return Yn(e,t,t.pendingProps.children,r),t.child;case 12:return Yn(e,t,t.pendingProps.children,r),t.child;case 10:return a=t.pendingProps,na(t,t.type,a.value),Yn(e,t,a.children,r),t.child;case 9:return c=t.type._context,a=t.pendingProps.children,Sa(t),c=ua(c),a=a(c),t.flags|=1,Yn(e,t,a,r),t.child;case 14:return Mc(e,t,t.type,t.pendingProps,r);case 15:return Dc(e,t,t.type,t.pendingProps,r);case 19:return gp(e,t,r);case 31:return Do(e,t,r);case 22:return Gl(e,t,r,t.pendingProps);case 24:return Sa(t),a=ua(ga),e===null?(c=Cn(),c===null&&(c=mn,_=mi(),c.pooledCache=_,_.refCount++,_!==null&&(c.pooledCacheLanes|=r),c=_),t.memoizedState={parent:a,cache:c},Hi(t),na(t,ga,c)):((e.lanes&r)!==0&&(sr(e,t),io(t,null,null,r),no()),c=e.memoizedState,_=t.memoizedState,c.parent!==a?(c={parent:a,cache:a},t.memoizedState=c,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=c),na(t,ga,a)):(a=_.cache,na(t,ga,a),a!==c.cache&&fn(t,[ga],r,!0))),Yn(e,t,t.pendingProps.children,r),t.child;case 29:throw t.pendingProps}throw Error(Ee(156,t.tag))}function Zo(e){e.flags|=4}function md(e,t,r,a,c){if((t=(e.mode&32)!==0)&&(t=!1),t){if(e.flags|=16777216,(c&335544128)===c)if(e.stateNode.complete)e.flags|=8192;else if(qp())e.flags|=8192;else throw xn=sa,pr}else e.flags&=-16777217}function _p(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!Nh(t))if(qp())e.flags|=8192;else throw xn=sa,pr}function Ou(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?Ht():536870912,e.lanes|=t,kl|=t)}function Yl(e,t){if(!er)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var a=null;r!==null;)r.alternate!==null&&(a=r),r=r.sibling;a===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:a.sibling=null}}function wn(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,a=0;if(t)for(var c=e.child;c!==null;)r|=c.lanes|c.childLanes,a|=c.subtreeFlags&65011712,a|=c.flags&65011712,c.return=e,c=c.sibling;else for(c=e.child;c!==null;)r|=c.lanes|c.childLanes,a|=c.subtreeFlags,a|=c.flags,c.return=e,c=c.sibling;return e.subtreeFlags|=a,e.childLanes=r,t}function _f(e,t,r){var a=t.pendingProps;switch(ta(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return wn(t),null;case 1:return wn(t),null;case 3:return r=t.stateNode,a=null,e!==null&&(a=e.memoizedState.cache),t.memoizedState.cache!==a&&(t.flags|=2048),ia(ga),ye(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(ma(t)?Zo(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,xt())),wn(t),null;case 26:var c=t.type,_=t.memoizedState;return e===null?(Zo(t),_!==null?(wn(t),_p(t,_)):(wn(t),md(t,c,null,a,r))):_?_!==e.memoizedState?(Zo(t),wn(t),_p(t,_)):(wn(t),t.flags&=-16777217):(e=e.memoizedProps,e!==a&&Zo(t),wn(t),md(t,c,e,a,r)),null;case 27:if(Se(t),r=ue.current,c=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==a&&Zo(t);else{if(!a){if(t.stateNode===null)throw Error(Ee(166));return wn(t),null}e=le.current,ma(t)?on(t):(e=Ch(c,a,r),t.stateNode=e,Zo(t))}return wn(t),null;case 5:if(Se(t),c=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==a&&Zo(t);else{if(!a){if(t.stateNode===null)throw Error(Ee(166));return wn(t),null}if(_=le.current,ma(t))on(t);else{var K=$u(ue.current);switch(_){case 1:_=K.createElementNS("http://www.w3.org/2000/svg",c);break;case 2:_=K.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;default:switch(c){case"svg":_=K.createElementNS("http://www.w3.org/2000/svg",c);break;case"math":_=K.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;case"script":_=K.createElement("div"),_.innerHTML="<script><\/script>",_=_.removeChild(_.firstChild);break;case"select":_=typeof a.is=="string"?K.createElement("select",{is:a.is}):K.createElement("select"),a.multiple?_.multiple=!0:a.size&&(_.size=a.size);break;default:_=typeof a.is=="string"?K.createElement(c,{is:a.is}):K.createElement(c)}}_[ca]=t,_[Kr]=a;e:for(K=t.child;K!==null;){if(K.tag===5||K.tag===6)_.appendChild(K.stateNode);else if(K.tag!==4&&K.tag!==27&&K.child!==null){K.child.return=K,K=K.child;continue}if(K===t)break e;for(;K.sibling===null;){if(K.return===null||K.return===t)break e;K=K.return}K.sibling.return=K.return,K=K.sibling}t.stateNode=_;e:switch(Di(_,c,a),c){case"button":case"input":case"select":case"textarea":a=!!a.autoFocus;break e;case"img":a=!0;break e;default:a=!1}a&&Zo(t)}}return wn(t),md(t,t.type,e===null?null:e.memoizedProps,t.pendingProps,r),null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==a&&Zo(t);else{if(typeof a!="string"&&t.stateNode===null)throw Error(Ee(166));if(e=ue.current,ma(t)){if(e=t.stateNode,r=t.memoizedProps,a=null,c=Wt,c!==null)switch(c.tag){case 27:case 5:a=c.memoizedProps}e[ca]=t,e=!!(e.nodeValue===r||a!==null&&a.suppressHydrationWarning===!0||mh(e.nodeValue,r)),e||fa(t,!0)}else e=$u(e).createTextNode(a),e[ca]=t,t.stateNode=e}return wn(t),null;case 31:if(r=t.memoizedState,e===null||e.memoizedState!==null){if(a=ma(t),r!==null){if(e===null){if(!a)throw Error(Ee(318));if(e=t.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Ee(557));e[ca]=t}else la(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;wn(t),e=!1}else r=xt(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=r),e=!0;if(!e)return t.flags&256?(_i(t),t):(_i(t),null);if((t.flags&128)!==0)throw Error(Ee(558))}return wn(t),null;case 13:if(a=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(c=ma(t),a!==null&&a.dehydrated!==null){if(e===null){if(!c)throw Error(Ee(318));if(c=t.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(Ee(317));c[ca]=t}else la(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;wn(t),c=!1}else c=xt(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=c),c=!0;if(!c)return t.flags&256?(_i(t),t):(_i(t),null)}return _i(t),(t.flags&128)!==0?(t.lanes=r,t):(r=a!==null,e=e!==null&&e.memoizedState!==null,r&&(a=t.child,c=null,a.alternate!==null&&a.alternate.memoizedState!==null&&a.alternate.memoizedState.cachePool!==null&&(c=a.alternate.memoizedState.cachePool.pool),_=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(_=a.memoizedState.cachePool.pool),_!==c&&(a.flags|=2048)),r!==e&&r&&(t.child.flags|=8192),Ou(t,t.updateQueue),wn(t),null);case 4:return ye(),e===null&&Bd(t.stateNode.containerInfo),wn(t),null;case 10:return ia(t.type),wn(t),null;case 19:if(ae(Xa),a=t.memoizedState,a===null)return wn(t),null;if(c=(t.flags&128)!==0,_=a.rendering,_===null)if(c)Yl(a,!1);else{if($n!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(_=oo(e),_!==null){for(t.flags|=128,Yl(a,!1),e=_.updateQueue,t.updateQueue=e,Ou(t,e),t.subtreeFlags=0,e=r,r=t.child;r!==null;)pt(r,e),r=r.sibling;return Q(Xa,Xa.current&1|2),er&&Yt(t,a.treeForkCount),t.child}e=e.sibling}a.tail!==null&&Gr()>Nu&&(t.flags|=128,c=!0,Yl(a,!1),t.lanes=4194304)}else{if(!c)if(e=oo(_),e!==null){if(t.flags|=128,c=!0,e=e.updateQueue,t.updateQueue=e,Ou(t,e),Yl(a,!0),a.tail===null&&a.tailMode==="hidden"&&!_.alternate&&!er)return wn(t),null}else 2*Gr()-a.renderingStartTime>Nu&&r!==536870912&&(t.flags|=128,c=!0,Yl(a,!1),t.lanes=4194304);a.isBackwards?(_.sibling=t.child,t.child=_):(e=a.last,e!==null?e.sibling=_:t.child=_,a.last=_)}return a.tail!==null?(e=a.tail,a.rendering=e,a.tail=e.sibling,a.renderingStartTime=Gr(),e.sibling=null,r=Xa.current,Q(Xa,c?r&1|2:r&1),er&&Yt(t,a.treeForkCount),e):(wn(t),null);case 22:case 23:return _i(t),us(),a=t.memoizedState!==null,e!==null?e.memoizedState!==null!==a&&(t.flags|=8192):a&&(t.flags|=8192),a?(r&536870912)!==0&&(t.flags&128)===0&&(wn(t),t.subtreeFlags&6&&(t.flags|=8192)):wn(t),r=t.updateQueue,r!==null&&Ou(t,r.retryQueue),r=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(r=e.memoizedState.cachePool.pool),a=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),a!==r&&(t.flags|=2048),e!==null&&ae(zn),null;case 24:return r=null,e!==null&&(r=e.memoizedState.cache),t.memoizedState.cache!==r&&(t.flags|=2048),ia(ga),wn(t),null;case 25:return null;case 30:return null}throw Error(Ee(156,t.tag))}function bf(e,t){switch(ta(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return ia(ga),ye(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return Se(t),null;case 31:if(t.memoizedState!==null){if(_i(t),t.alternate===null)throw Error(Ee(340));la()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 13:if(_i(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(Ee(340));la()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return ae(Xa),null;case 4:return ye(),null;case 10:return ia(t.type),null;case 22:case 23:return _i(t),us(),e!==null&&ae(zn),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return ia(ga),null;case 25:return null;default:return null}}function bp(e,t){switch(ta(t),t.tag){case 3:ia(ga),ye();break;case 26:case 27:case 5:Se(t);break;case 4:ye();break;case 31:t.memoizedState!==null&&_i(t);break;case 13:_i(t);break;case 19:ae(Xa);break;case 10:ia(t.type);break;case 22:case 23:_i(t),us(),e!==null&&ae(zn);break;case 24:ia(ga)}}function Ql(e,t){try{var r=t.updateQueue,a=r!==null?r.lastEffect:null;if(a!==null){var c=a.next;r=c;do{if((r.tag&e)===e){a=void 0;var _=r.create,K=r.inst;a=_(),K.destroy=a}r=r.next}while(r!==c)}}catch(ie){an(t,t.return,ie)}}function Nc(e,t,r){try{var a=t.updateQueue,c=a!==null?a.lastEffect:null;if(c!==null){var _=c.next;a=_;do{if((a.tag&e)===e){var K=a.inst,ie=K.destroy;if(ie!==void 0){K.destroy=void 0,c=t;var ge=r,Pe=ie;try{Pe()}catch(tt){an(c,ge,tt)}}}a=a.next}while(a!==_)}}catch(tt){an(t,t.return,tt)}}function Sp(e){var t=e.updateQueue;if(t!==null){var r=e.stateNode;try{rl(t,r)}catch(a){an(e,e.return,a)}}}function Ep(e,t,r){r.props=Ja(e.type,e.memoizedProps),r.state=e.memoizedState;try{r.componentWillUnmount()}catch(a){an(e,t,a)}}function Xl(e,t){try{var r=e.ref;if(r!==null){switch(e.tag){case 26:case 27:case 5:var a=e.stateNode;break;case 30:a=e.stateNode;break;default:a=e.stateNode}typeof r=="function"?e.refCleanup=r(a):r.current=a}}catch(c){an(e,t,c)}}function Po(e,t){var r=e.ref,a=e.refCleanup;if(r!==null)if(typeof a=="function")try{a()}catch(c){an(e,t,c)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof r=="function")try{r(null)}catch(c){an(e,t,c)}else r.current=null}function wp(e){var t=e.type,r=e.memoizedProps,a=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":r.autoFocus&&a.focus();break e;case"img":r.src?a.src=r.src:r.srcSet&&(a.srcset=r.srcSet)}}catch(c){an(e,e.return,c)}}function vd(e,t,r){try{var a=e.stateNode;Vf(a,e.type,r,t),a[Kr]=t}catch(c){an(e,e.return,c)}}function Rp(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Hc(e.type)||e.tag===4}function gd(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Rp(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Hc(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function yd(e,t,r){var a=e.tag;if(a===5||a===6)e=e.stateNode,t?(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r).insertBefore(e,t):(t=r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,t.appendChild(e),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=Ti));else if(a!==4&&(a===27&&Hc(e.type)&&(r=e.stateNode,t=null),e=e.child,e!==null))for(yd(e,t,r),e=e.sibling;e!==null;)yd(e,t,r),e=e.sibling}function Mu(e,t,r){var a=e.tag;if(a===5||a===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(a!==4&&(a===27&&Hc(e.type)&&(r=e.stateNode),e=e.child,e!==null))for(Mu(e,t,r),e=e.sibling;e!==null;)Mu(e,t,r),e=e.sibling}function Tp(e){var t=e.stateNode,r=e.memoizedProps;try{for(var a=e.type,c=t.attributes;c.length;)t.removeAttributeNode(c[0]);Di(t,a,r),t[ca]=e,t[Kr]=r}catch(_){an(e,e.return,_)}}var ec=!1,ai=!1,_d=!1,Cp=typeof WeakSet=="function"?WeakSet:Set,Si=null;function Sf(e,t){if(e=e.containerInfo,zd=Xu,e=gl(e),Co(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var a=r.getSelection&&r.getSelection();if(a&&a.rangeCount!==0){r=a.anchorNode;var c=a.anchorOffset,_=a.focusNode;a=a.focusOffset;try{r.nodeType,_.nodeType}catch{r=null;break e}var K=0,ie=-1,ge=-1,Pe=0,tt=0,ut=e,Ne=null;t:for(;;){for(var Ue;ut!==r||c!==0&&ut.nodeType!==3||(ie=K+c),ut!==_||a!==0&&ut.nodeType!==3||(ge=K+a),ut.nodeType===3&&(K+=ut.nodeValue.length),(Ue=ut.firstChild)!==null;)Ne=ut,ut=Ue;for(;;){if(ut===e)break t;if(Ne===r&&++Pe===c&&(ie=K),Ne===_&&++tt===a&&(ge=K),(Ue=ut.nextSibling)!==null)break;ut=Ne,Ne=ut.parentNode}ut=Ue}r=ie===-1||ge===-1?null:{start:ie,end:ge}}else r=null}r=r||{start:0,end:0}}else r=null;for(Hd={focusedElem:e,selectionRange:r},Xu=!1,Si=t;Si!==null;)if(t=Si,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Si=e;else for(;Si!==null;){switch(t=Si,_=t.alternate,e=t.flags,t.tag){case 0:if((e&4)!==0&&(e=t.updateQueue,e=e!==null?e.events:null,e!==null))for(r=0;r<e.length;r++)c=e[r],c.ref.impl=c.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&_!==null){e=void 0,r=t,c=_.memoizedProps,_=_.memoizedState,a=r.stateNode;try{var hr=Ja(r.type,c);e=a.getSnapshotBeforeUpdate(hr,_),a.__reactInternalSnapshotBeforeUpdate=e}catch(Dr){an(r,r.return,Dr)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,r=e.nodeType,r===9)$d(e);else if(r===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":$d(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(Ee(163))}if(e=t.sibling,e!==null){e.return=t.return,Si=e;break}Si=t.return}}function Ap(e,t,r){var a=r.flags;switch(r.tag){case 0:case 11:case 15:rc(e,r),a&4&&Ql(5,r);break;case 1:if(rc(e,r),a&4)if(e=r.stateNode,t===null)try{e.componentDidMount()}catch(K){an(r,r.return,K)}else{var c=Ja(r.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(c,t,e.__reactInternalSnapshotBeforeUpdate)}catch(K){an(r,r.return,K)}}a&64&&Sp(r),a&512&&Xl(r,r.return);break;case 3:if(rc(e,r),a&64&&(e=r.updateQueue,e!==null)){if(t=null,r.child!==null)switch(r.child.tag){case 27:case 5:t=r.child.stateNode;break;case 1:t=r.child.stateNode}try{rl(e,t)}catch(K){an(r,r.return,K)}}break;case 27:t===null&&a&4&&Tp(r);case 26:case 5:rc(e,r),t===null&&a&4&&wp(r),a&512&&Xl(r,r.return);break;case 12:rc(e,r);break;case 31:rc(e,r),a&4&&Mp(e,r);break;case 13:rc(e,r),a&4&&Dp(e,r),a&64&&(e=r.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(r=Mf.bind(null,r),Qf(e,r))));break;case 22:if(a=r.memoizedState!==null||ec,!a){t=t!==null&&t.memoizedState!==null||ai,c=ec;var _=ai;ec=a,(ai=t)&&!_?ac(e,r,(r.subtreeFlags&8772)!==0):rc(e,r),ec=c,ai=_}break;case 30:break;default:rc(e,r)}}function kp(e){var t=e.alternate;t!==null&&(e.alternate=null,kp(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&Wi(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Pn=null,ps=!1;function tc(e,t,r){for(r=r.child;r!==null;)Op(e,t,r),r=r.sibling}function Op(e,t,r){if(He&&typeof He.onCommitFiberUnmount=="function")try{He.onCommitFiberUnmount(zt,r)}catch{}switch(r.tag){case 26:ai||Po(r,t),tc(e,t,r),r.memoizedState?r.memoizedState.count--:r.stateNode&&(r=r.stateNode,r.parentNode.removeChild(r));break;case 27:ai||Po(r,t);var a=Pn,c=ps;Hc(r.type)&&(Pn=r.stateNode,ps=!1),tc(e,t,r),su(r.stateNode),Pn=a,ps=c;break;case 5:ai||Po(r,t);case 6:if(a=Pn,c=ps,Pn=null,tc(e,t,r),Pn=a,ps=c,Pn!==null)if(ps)try{(Pn.nodeType===9?Pn.body:Pn.nodeName==="HTML"?Pn.ownerDocument.body:Pn).removeChild(r.stateNode)}catch(_){an(r,t,_)}else try{Pn.removeChild(r.stateNode)}catch(_){an(r,t,_)}break;case 18:Pn!==null&&(ps?(e=Pn,Sh(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,r.stateNode),xl(e)):Sh(Pn,r.stateNode));break;case 4:a=Pn,c=ps,Pn=r.stateNode.containerInfo,ps=!0,tc(e,t,r),Pn=a,ps=c;break;case 0:case 11:case 14:case 15:Nc(2,r,t),ai||Nc(4,r,t),tc(e,t,r);break;case 1:ai||(Po(r,t),a=r.stateNode,typeof a.componentWillUnmount=="function"&&Ep(r,t,a)),tc(e,t,r);break;case 21:tc(e,t,r);break;case 22:ai=(a=ai)||r.memoizedState!==null,tc(e,t,r),ai=a;break;default:tc(e,t,r)}}function Mp(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{xl(e)}catch(r){an(t,t.return,r)}}}function Dp(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{xl(e)}catch(r){an(t,t.return,r)}}function Ef(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new Cp),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new Cp),t;default:throw Error(Ee(435,e.tag))}}function Du(e,t){var r=Ef(e);t.forEach(function(a){if(!r.has(a)){r.add(a);var c=Df.bind(null,e,a);a.then(c,c)}})}function hs(e,t){var r=t.deletions;if(r!==null)for(var a=0;a<r.length;a++){var c=r[a],_=e,K=t,ie=K;e:for(;ie!==null;){switch(ie.tag){case 27:if(Hc(ie.type)){Pn=ie.stateNode,ps=!1;break e}break;case 5:Pn=ie.stateNode,ps=!1;break e;case 3:case 4:Pn=ie.stateNode.containerInfo,ps=!0;break e}ie=ie.return}if(Pn===null)throw Error(Ee(160));Op(_,K,c),Pn=null,ps=!1,_=c.alternate,_!==null&&(_.return=null),c.return=null}if(t.subtreeFlags&13886)for(t=t.child;t!==null;)Pp(t,e),t=t.sibling}var po=null;function Pp(e,t){var r=e.alternate,a=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:hs(t,e),fs(e),a&4&&(Nc(3,e,e.return),Ql(3,e),Nc(5,e,e.return));break;case 1:hs(t,e),fs(e),a&512&&(ai||r===null||Po(r,r.return)),a&64&&ec&&(e=e.updateQueue,e!==null&&(a=e.callbacks,a!==null&&(r=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=r===null?a:r.concat(a))));break;case 26:var c=po;if(hs(t,e),fs(e),a&512&&(ai||r===null||Po(r,r.return)),a&4){var _=r!==null?r.memoizedState:null;if(a=e.memoizedState,r===null)if(a===null)if(e.stateNode===null){e:{a=e.type,r=e.memoizedProps,c=c.ownerDocument||c;t:switch(a){case"title":_=c.getElementsByTagName("title")[0],(!_||_[sn]||_[ca]||_.namespaceURI==="http://www.w3.org/2000/svg"||_.hasAttribute("itemprop"))&&(_=c.createElement(a),c.head.insertBefore(_,c.querySelector("head > title"))),Di(_,a,r),_[ca]=e,Va(_),a=_;break e;case"link":var K=Ph("link","href",c).get(a+(r.href||""));if(K){for(var ie=0;ie<K.length;ie++)if(_=K[ie],_.getAttribute("href")===(r.href==null||r.href===""?null:r.href)&&_.getAttribute("rel")===(r.rel==null?null:r.rel)&&_.getAttribute("title")===(r.title==null?null:r.title)&&_.getAttribute("crossorigin")===(r.crossOrigin==null?null:r.crossOrigin)){K.splice(ie,1);break t}}_=c.createElement(a),Di(_,a,r),c.head.appendChild(_);break;case"meta":if(K=Ph("meta","content",c).get(a+(r.content||""))){for(ie=0;ie<K.length;ie++)if(_=K[ie],_.getAttribute("content")===(r.content==null?null:""+r.content)&&_.getAttribute("name")===(r.name==null?null:r.name)&&_.getAttribute("property")===(r.property==null?null:r.property)&&_.getAttribute("http-equiv")===(r.httpEquiv==null?null:r.httpEquiv)&&_.getAttribute("charset")===(r.charSet==null?null:r.charSet)){K.splice(ie,1);break t}}_=c.createElement(a),Di(_,a,r),c.head.appendChild(_);break;default:throw Error(Ee(468,a))}_[ca]=e,Va(_),a=_}e.stateNode=a}else Lh(c,e.type,e.stateNode);else e.stateNode=Dh(c,a,e.memoizedProps);else _!==a?(_===null?r.stateNode!==null&&(r=r.stateNode,r.parentNode.removeChild(r)):_.count--,a===null?Lh(c,e.type,e.stateNode):Dh(c,a,e.memoizedProps)):a===null&&e.stateNode!==null&&vd(e,e.memoizedProps,r.memoizedProps)}break;case 27:hs(t,e),fs(e),a&512&&(ai||r===null||Po(r,r.return)),r!==null&&a&4&&vd(e,e.memoizedProps,r.memoizedProps);break;case 5:if(hs(t,e),fs(e),a&512&&(ai||r===null||Po(r,r.return)),e.flags&32){c=e.stateNode;try{Ri(c,"")}catch(hr){an(e,e.return,hr)}}a&4&&e.stateNode!=null&&(c=e.memoizedProps,vd(e,c,r!==null?r.memoizedProps:c)),a&1024&&(_d=!0);break;case 6:if(hs(t,e),fs(e),a&4){if(e.stateNode===null)throw Error(Ee(162));a=e.memoizedProps,r=e.stateNode;try{r.nodeValue=a}catch(hr){an(e,e.return,hr)}}break;case 3:if(Gu=null,c=po,po=qu(t.containerInfo),hs(t,e),po=c,fs(e),a&4&&r!==null&&r.memoizedState.isDehydrated)try{xl(t.containerInfo)}catch(hr){an(e,e.return,hr)}_d&&(_d=!1,Lp(e));break;case 4:a=po,po=qu(e.stateNode.containerInfo),hs(t,e),fs(e),po=a;break;case 12:hs(t,e),fs(e);break;case 31:hs(t,e),fs(e),a&4&&(a=e.updateQueue,a!==null&&(e.updateQueue=null,Du(e,a)));break;case 13:hs(t,e),fs(e),e.child.flags&8192&&e.memoizedState!==null!=(r!==null&&r.memoizedState!==null)&&(Lu=Gr()),a&4&&(a=e.updateQueue,a!==null&&(e.updateQueue=null,Du(e,a)));break;case 22:c=e.memoizedState!==null;var ge=r!==null&&r.memoizedState!==null,Pe=ec,tt=ai;if(ec=Pe||c,ai=tt||ge,hs(t,e),ai=tt,ec=Pe,fs(e),a&8192)e:for(t=e.stateNode,t._visibility=c?t._visibility&-2:t._visibility|1,c&&(r===null||ge||ec||ai||dl(e)),r=null,t=e;;){if(t.tag===5||t.tag===26){if(r===null){ge=r=t;try{if(_=ge.stateNode,c)K=_.style,typeof K.setProperty=="function"?K.setProperty("display","none","important"):K.display="none";else{ie=ge.stateNode;var ut=ge.memoizedProps.style,Ne=ut!=null&&ut.hasOwnProperty("display")?ut.display:null;ie.style.display=Ne==null||typeof Ne=="boolean"?"":(""+Ne).trim()}}catch(hr){an(ge,ge.return,hr)}}}else if(t.tag===6){if(r===null){ge=t;try{ge.stateNode.nodeValue=c?"":ge.memoizedProps}catch(hr){an(ge,ge.return,hr)}}}else if(t.tag===18){if(r===null){ge=t;try{var Ue=ge.stateNode;c?Eh(Ue,!0):Eh(ge.stateNode,!1)}catch(hr){an(ge,ge.return,hr)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;r===t&&(r=null),t=t.return}r===t&&(r=null),t.sibling.return=t.return,t=t.sibling}a&4&&(a=e.updateQueue,a!==null&&(r=a.retryQueue,r!==null&&(a.retryQueue=null,Du(e,r))));break;case 19:hs(t,e),fs(e),a&4&&(a=e.updateQueue,a!==null&&(e.updateQueue=null,Du(e,a)));break;case 30:break;case 21:break;default:hs(t,e),fs(e)}}function fs(e){var t=e.flags;if(t&2){try{for(var r,a=e.return;a!==null;){if(Rp(a)){r=a;break}a=a.return}if(r==null)throw Error(Ee(160));switch(r.tag){case 27:var c=r.stateNode,_=gd(e);Mu(e,_,c);break;case 5:var K=r.stateNode;r.flags&32&&(Ri(K,""),r.flags&=-33);var ie=gd(e);Mu(e,ie,K);break;case 3:case 4:var ge=r.stateNode.containerInfo,Pe=gd(e);yd(e,Pe,ge);break;default:throw Error(Ee(161))}}catch(tt){an(e,e.return,tt)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Lp(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;Lp(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function rc(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)Ap(e,t.alternate,t),t=t.sibling}function dl(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:Nc(4,t,t.return),dl(t);break;case 1:Po(t,t.return);var r=t.stateNode;typeof r.componentWillUnmount=="function"&&Ep(t,t.return,r),dl(t);break;case 27:su(t.stateNode);case 26:case 5:Po(t,t.return),dl(t);break;case 22:t.memoizedState===null&&dl(t);break;case 30:dl(t);break;default:dl(t)}e=e.sibling}}function ac(e,t,r){for(r=r&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var a=t.alternate,c=e,_=t,K=_.flags;switch(_.tag){case 0:case 11:case 15:ac(c,_,r),Ql(4,_);break;case 1:if(ac(c,_,r),a=_,c=a.stateNode,typeof c.componentDidMount=="function")try{c.componentDidMount()}catch(Pe){an(a,a.return,Pe)}if(a=_,c=a.updateQueue,c!==null){var ie=a.stateNode;try{var ge=c.shared.hiddenCallbacks;if(ge!==null)for(c.shared.hiddenCallbacks=null,c=0;c<ge.length;c++)ci(ge[c],ie)}catch(Pe){an(a,a.return,Pe)}}r&&K&64&&Sp(_),Xl(_,_.return);break;case 27:Tp(_);case 26:case 5:ac(c,_,r),r&&a===null&&K&4&&wp(_),Xl(_,_.return);break;case 12:ac(c,_,r);break;case 31:ac(c,_,r),r&&K&4&&Mp(c,_);break;case 13:ac(c,_,r),r&&K&4&&Dp(c,_);break;case 22:_.memoizedState===null&&ac(c,_,r),Xl(_,_.return);break;case 30:break;default:ac(c,_,r)}t=t.sibling}}function bd(e,t){var r=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(r=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==r&&(e!=null&&e.refCount++,r!=null&&ei(r))}function Sd(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&ei(e))}function ho(e,t,r,a){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Np(e,t,r,a),t=t.sibling}function Np(e,t,r,a){var c=t.flags;switch(t.tag){case 0:case 11:case 15:ho(e,t,r,a),c&2048&&Ql(9,t);break;case 1:ho(e,t,r,a);break;case 3:ho(e,t,r,a),c&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&ei(e)));break;case 12:if(c&2048){ho(e,t,r,a),e=t.stateNode;try{var _=t.memoizedProps,K=_.id,ie=_.onPostCommit;typeof ie=="function"&&ie(K,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(ge){an(t,t.return,ge)}}else ho(e,t,r,a);break;case 31:ho(e,t,r,a);break;case 13:ho(e,t,r,a);break;case 23:break;case 22:_=t.stateNode,K=t.alternate,t.memoizedState!==null?_._visibility&2?ho(e,t,r,a):Jl(e,t):_._visibility&2?ho(e,t,r,a):(_._visibility|=2,Tl(e,t,r,a,(t.subtreeFlags&10256)!==0||!1)),c&2048&&bd(K,t);break;case 24:ho(e,t,r,a),c&2048&&Sd(t.alternate,t);break;default:ho(e,t,r,a)}}function Tl(e,t,r,a,c){for(c=c&&((t.subtreeFlags&10256)!==0||!1),t=t.child;t!==null;){var _=e,K=t,ie=r,ge=a,Pe=K.flags;switch(K.tag){case 0:case 11:case 15:Tl(_,K,ie,ge,c),Ql(8,K);break;case 23:break;case 22:var tt=K.stateNode;K.memoizedState!==null?tt._visibility&2?Tl(_,K,ie,ge,c):Jl(_,K):(tt._visibility|=2,Tl(_,K,ie,ge,c)),c&&Pe&2048&&bd(K.alternate,K);break;case 24:Tl(_,K,ie,ge,c),c&&Pe&2048&&Sd(K.alternate,K);break;default:Tl(_,K,ie,ge,c)}t=t.sibling}}function Jl(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var r=e,a=t,c=a.flags;switch(a.tag){case 22:Jl(r,a),c&2048&&bd(a.alternate,a);break;case 24:Jl(r,a),c&2048&&Sd(a.alternate,a);break;default:Jl(r,a)}t=t.sibling}}var Zl=8192;function Cl(e,t,r){if(e.subtreeFlags&Zl)for(e=e.child;e!==null;)Ip(e,t,r),e=e.sibling}function Ip(e,t,r){switch(e.tag){case 26:Cl(e,t,r),e.flags&Zl&&e.memoizedState!==null&&cm(r,po,e.memoizedState,e.memoizedProps);break;case 5:Cl(e,t,r);break;case 3:case 4:var a=po;po=qu(e.stateNode.containerInfo),Cl(e,t,r),po=a;break;case 22:e.memoizedState===null&&(a=e.alternate,a!==null&&a.memoizedState!==null?(a=Zl,Zl=16777216,Cl(e,t,r),Zl=a):Cl(e,t,r));break;default:Cl(e,t,r)}}function xp(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function eu(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var r=0;r<t.length;r++){var a=t[r];Si=a,jp(a,e)}xp(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Bp(e),e=e.sibling}function Bp(e){switch(e.tag){case 0:case 11:case 15:eu(e),e.flags&2048&&Nc(9,e,e.return);break;case 3:eu(e);break;case 12:eu(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,Pu(e)):eu(e);break;default:eu(e)}}function Pu(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var r=0;r<t.length;r++){var a=t[r];Si=a,jp(a,e)}xp(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:Nc(8,t,t.return),Pu(t);break;case 22:r=t.stateNode,r._visibility&2&&(r._visibility&=-3,Pu(t));break;default:Pu(t)}e=e.sibling}}function jp(e,t){for(;Si!==null;){var r=Si;switch(r.tag){case 0:case 11:case 15:Nc(8,r,t);break;case 23:case 22:if(r.memoizedState!==null&&r.memoizedState.cachePool!==null){var a=r.memoizedState.cachePool.pool;a!=null&&a.refCount++}break;case 24:ei(r.memoizedState.cache)}if(a=r.child,a!==null)a.return=r,Si=a;else e:for(r=e;Si!==null;){a=Si;var c=a.sibling,_=a.return;if(kp(a),a===r){Si=null;break e}if(c!==null){c.return=_,Si=c;break e}Si=_}}}var wf={getCacheForType:function(e){var t=ua(ga),r=t.data.get(e);return r===void 0&&(r=e(),t.data.set(e,r)),r},cacheSignal:function(){return ua(ga).controller.signal}},Rf=typeof WeakMap=="function"?WeakMap:Map,$a=0,mn=null,_a=null,Ra=0,rn=0,Ls=null,Ic=!1,Al=!1,Ed=!1,nc=0,$n=0,xc=0,pl=0,wd=0,Ns=0,kl=0,tu=null,ms=null,Rd=!1,Lu=0,Up=0,Nu=1/0,Iu=null,Bc=null,ui=0,jc=null,Ol=null,ic=0,Td=0,Cd=null,zp=null,ru=0,Ad=null;function Is(){return($a&2)!==0&&Ra!==0?Ra&-Ra:$.T!==null?Ld():nn()}function Hp(){if(Ns===0)if((Ra&536870912)===0||er){var e=Sr;Sr<<=1,(Sr&3932160)===0&&(Sr=262144),Ns=e}else Ns=536870912;return e=Fn.current,e!==null&&(e.flags|=32),Ns}function vs(e,t,r){(e===mn&&(rn===2||rn===9)||e.cancelPendingCommit!==null)&&(Ml(e,0),Uc(e,Ra,Ns,!1)),rt(e,r),(($a&2)===0||e!==mn)&&(e===mn&&(($a&2)===0&&(pl|=r),$n===4&&Uc(e,Ra,Ns,!1)),Lo(e))}function Vp(e,t,r){if(($a&6)!==0)throw Error(Ee(327));var a=!r&&(t&127)===0&&(t&e.expiredLanes)===0||Ke(e,t),c=a?Af(e,t):Od(e,t,!0),_=a;do{if(c===0){Al&&!a&&Uc(e,t,0,!1);break}else{if(r=e.current.alternate,_&&!Tf(r)){c=Od(e,t,!1),_=!1;continue}if(c===2){if(_=t,e.errorRecoveryDisabledLanes&_)var K=0;else K=e.pendingLanes&-536870913,K=K!==0?K:K&536870912?536870912:0;if(K!==0){t=K;e:{var ie=e;c=tu;var ge=ie.current.memoizedState.isDehydrated;if(ge&&(Ml(ie,K).flags|=256),K=Od(ie,K,!1),K!==2){if(Ed&&!ge){ie.errorRecoveryDisabledLanes|=_,pl|=_,c=4;break e}_=ms,ms=c,_!==null&&(ms===null?ms=_:ms.push.apply(ms,_))}c=K}if(_=!1,c!==2)continue}}if(c===1){Ml(e,0),Uc(e,t,0,!0);break}e:{switch(a=e,_=c,_){case 0:case 1:throw Error(Ee(345));case 4:if((t&4194048)!==t)break;case 6:Uc(a,t,Ns,!Ic);break e;case 2:ms=null;break;case 3:case 5:break;default:throw Error(Ee(329))}if((t&62914560)===t&&(c=Lu+300-Gr(),10<c)){if(Uc(a,t,Ns,!Ic),aa(a,0,!0)!==0)break e;ic=t,a.timeoutHandle=_h(Fp.bind(null,a,r,ms,Iu,Rd,t,Ns,pl,kl,Ic,_,"Throttled",-0,0),c);break e}Fp(a,r,ms,Iu,Rd,t,Ns,pl,kl,Ic,_,null,-0,0)}}break}while(!0);Lo(e)}function Fp(e,t,r,a,c,_,K,ie,ge,Pe,tt,ut,Ne,Ue){if(e.timeoutHandle=-1,ut=t.subtreeFlags,ut&8192||(ut&16785408)===16785408){ut={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Ti},Ip(t,_,ut);var hr=(_&62914560)===_?Lu-Gr():(_&4194048)===_?Up-Gr():0;if(hr=lm(ut,hr),hr!==null){ic=_,e.cancelPendingCommit=hr(Xp.bind(null,e,t,_,r,a,c,K,ie,ge,tt,ut,null,Ne,Ue)),Uc(e,_,K,!Pe);return}}Xp(e,t,_,r,a,c,K,ie,ge)}function Tf(e){for(var t=e;;){var r=t.tag;if((r===0||r===11||r===15)&&t.flags&16384&&(r=t.updateQueue,r!==null&&(r=r.stores,r!==null)))for(var a=0;a<r.length;a++){var c=r[a],_=c.getSnapshot;c=c.value;try{if(!Ya(_(),c))return!1}catch{return!1}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Uc(e,t,r,a){t&=~wd,t&=~pl,e.suspendedLanes|=t,e.pingedLanes&=~t,a&&(e.warmLanes|=t),a=e.expirationTimes;for(var c=t;0<c;){var _=31-Xe(c),K=1<<_;a[_]=-1,c&=~K}r!==0&&yr(e,r,t)}function xu(){return($a&6)===0?(au(0),!1):!0}function kd(){if(_a!==null){if(rn===0)var e=_a.return;else e=_a,va=ra=null,$l(e),gi=null,yi=0,e=_a;for(;e!==null;)bp(e.alternate,e),e=e.return;_a=null}}function Ml(e,t){var r=e.timeoutHandle;r!==-1&&(e.timeoutHandle=-1,qf(r)),r=e.cancelPendingCommit,r!==null&&(e.cancelPendingCommit=null,r()),ic=0,kd(),mn=e,_a=r=Pt(e.current,null),Ra=t,rn=0,Ls=null,Ic=!1,Al=Ke(e,t),Ed=!1,kl=Ns=wd=pl=xc=$n=0,ms=tu=null,Rd=!1,(t&8)!==0&&(t|=t&32);var a=e.entangledLanes;if(a!==0)for(e=e.entanglements,a&=t;0<a;){var c=31-Xe(a),_=1<<c;t|=e[c],a&=~_}return nc=t,Me(),r}function $p(e,t){dr=null,$.H=xr,t===Sn||t===ka?(t=Ui(),rn=3):t===pr?(t=Ui(),rn=4):rn=t===Xo?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,Ls=t,_a===null&&($n=1,Ps(e,ht(t,e.current)))}function qp(){var e=Fn.current;return e===null?!0:(Ra&4194048)===Ra?Oi===null:(Ra&62914560)===Ra||(Ra&536870912)!==0?e===Oi:!1}function Wp(){var e=$.H;return $.H=xr,e===null?xr:e}function Gp(){var e=$.A;return $.A=wf,e}function Bu(){$n=4,Ic||(Ra&4194048)!==Ra&&Fn.current!==null||(Al=!0),(xc&134217727)===0&&(pl&134217727)===0||mn===null||Uc(mn,Ra,Ns,!1)}function Od(e,t,r){var a=$a;$a|=2;var c=Wp(),_=Gp();(mn!==e||Ra!==t)&&(Iu=null,Ml(e,t)),t=!1;var K=$n;e:do try{if(rn!==0&&_a!==null){var ie=_a,ge=Ls;switch(rn){case 8:kd(),K=6;break e;case 3:case 2:case 9:case 6:Fn.current===null&&(t=!0);var Pe=rn;if(rn=0,Ls=null,Dl(e,ie,ge,Pe),r&&Al){K=0;break e}break;default:Pe=rn,rn=0,Ls=null,Dl(e,ie,ge,Pe)}}Cf(),K=$n;break}catch(tt){$p(e,tt)}while(!0);return t&&e.shellSuspendCounter++,va=ra=null,$a=a,$.H=c,$.A=_,_a===null&&(mn=null,Ra=0,Me()),K}function Cf(){for(;_a!==null;)Kp(_a)}function Af(e,t){var r=$a;$a|=2;var a=Wp(),c=Gp();mn!==e||Ra!==t?(Iu=null,Nu=Gr()+500,Ml(e,t)):Al=Ke(e,t);e:do try{if(rn!==0&&_a!==null){t=_a;var _=Ls;t:switch(rn){case 1:rn=0,Ls=null,Dl(e,t,_,1);break;case 2:case 9:if(Kn(_)){rn=0,Ls=null,Yp(t);break}t=function(){rn!==2&&rn!==9||mn!==e||(rn=7),Lo(e)},_.then(t,t);break e;case 3:rn=7;break e;case 4:rn=5;break e;case 7:Kn(_)?(rn=0,Ls=null,Yp(t)):(rn=0,Ls=null,Dl(e,t,_,7));break;case 5:var K=null;switch(_a.tag){case 26:K=_a.memoizedState;case 5:case 27:var ie=_a;if(K?Nh(K):ie.stateNode.complete){rn=0,Ls=null;var ge=ie.sibling;if(ge!==null)_a=ge;else{var Pe=ie.return;Pe!==null?(_a=Pe,ju(Pe)):_a=null}break t}}rn=0,Ls=null,Dl(e,t,_,5);break;case 6:rn=0,Ls=null,Dl(e,t,_,6);break;case 8:kd(),$n=6;break e;default:throw Error(Ee(462))}}kf();break}catch(tt){$p(e,tt)}while(!0);return va=ra=null,$.H=a,$.A=c,$a=r,_a!==null?0:(mn=null,Ra=0,Me(),$n)}function kf(){for(;_a!==null&&!ar();)Kp(_a)}function Kp(e){var t=yp(e.alternate,e,nc);e.memoizedProps=e.pendingProps,t===null?ju(e):_a=t}function Yp(e){var t=e,r=t.alternate;switch(t.tag){case 15:case 0:t=pp(r,t,t.pendingProps,t.type,void 0,Ra);break;case 11:t=pp(r,t,t.pendingProps,t.type.render,t.ref,Ra);break;case 5:$l(t);default:bp(r,t),t=_a=pt(t,nc),t=yp(r,t,nc)}e.memoizedProps=e.pendingProps,t===null?ju(e):_a=t}function Dl(e,t,r,a){va=ra=null,$l(t),gi=null,yi=0;var c=t.return;try{if(kc(e,c,t,r,Ra)){$n=1,Ps(e,ht(r,e.current)),_a=null;return}}catch(_){if(c!==null)throw _a=c,_;$n=1,Ps(e,ht(r,e.current)),_a=null;return}t.flags&32768?(er||a===1?e=!0:Al||(Ra&536870912)!==0?e=!1:(Ic=e=!0,(a===2||a===9||a===3||a===6)&&(a=Fn.current,a!==null&&a.tag===13&&(a.flags|=16384))),Qp(t,e)):ju(t)}function ju(e){var t=e;do{if((t.flags&32768)!==0){Qp(t,Ic);return}e=t.return;var r=_f(t.alternate,t,nc);if(r!==null){_a=r;return}if(t=t.sibling,t!==null){_a=t;return}_a=t=e}while(t!==null);$n===0&&($n=5)}function Qp(e,t){do{var r=bf(e.alternate,e);if(r!==null){r.flags&=32767,_a=r;return}if(r=e.return,r!==null&&(r.flags|=32768,r.subtreeFlags=0,r.deletions=null),!t&&(e=e.sibling,e!==null)){_a=e;return}_a=e=r}while(e!==null);$n=6,_a=null}function Xp(e,t,r,a,c,_,K,ie,ge){e.cancelPendingCommit=null;do Uu();while(ui!==0);if(($a&6)!==0)throw Error(Ee(327));if(t!==null){if(t===e.current)throw Error(Ee(177));if(_=t.lanes|t.childLanes,_|=fe,Tt(e,r,_,K,ie,ge),e===mn&&(_a=mn=null,Ra=0),Ol=t,jc=e,ic=r,Td=_,Cd=c,zp=a,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,Pf(ir,function(){return rh(),null})):(e.callbackNode=null,e.callbackPriority=0),a=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||a){a=$.T,$.T=null,c=L.p,L.p=2,K=$a,$a|=4;try{Sf(e,t,r)}finally{$a=K,L.p=c,$.T=a}}ui=1,Jp(),Zp(),eh()}}function Jp(){if(ui===1){ui=0;var e=jc,t=Ol,r=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||r){r=$.T,$.T=null;var a=L.p;L.p=2;var c=$a;$a|=4;try{Pp(t,e);var _=Hd,K=gl(e.containerInfo),ie=_.focusedElem,ge=_.selectionRange;if(K!==ie&&ie&&ie.ownerDocument&&Zr(ie.ownerDocument.documentElement,ie)){if(ge!==null&&Co(ie)){var Pe=ge.start,tt=ge.end;if(tt===void 0&&(tt=Pe),"selectionStart"in ie)ie.selectionStart=Pe,ie.selectionEnd=Math.min(tt,ie.value.length);else{var ut=ie.ownerDocument||document,Ne=ut&&ut.defaultView||window;if(Ne.getSelection){var Ue=Ne.getSelection(),hr=ie.textContent.length,Dr=Math.min(ge.start,hr),dn=ge.end===void 0?Dr:Math.min(ge.end,hr);!Ue.extend&&Dr>dn&&(K=dn,dn=Dr,Dr=K);var Re=yc(ie,Dr),be=yc(ie,dn);if(Re&&be&&(Ue.rangeCount!==1||Ue.anchorNode!==Re.node||Ue.anchorOffset!==Re.offset||Ue.focusNode!==be.node||Ue.focusOffset!==be.offset)){var De=ut.createRange();De.setStart(Re.node,Re.offset),Ue.removeAllRanges(),Dr>dn?(Ue.addRange(De),Ue.extend(be.node,be.offset)):(De.setEnd(be.node,be.offset),Ue.addRange(De))}}}}for(ut=[],Ue=ie;Ue=Ue.parentNode;)Ue.nodeType===1&&ut.push({element:Ue,left:Ue.scrollLeft,top:Ue.scrollTop});for(typeof ie.focus=="function"&&ie.focus(),ie=0;ie<ut.length;ie++){var st=ut[ie];st.element.scrollLeft=st.left,st.element.scrollTop=st.top}}Xu=!!zd,Hd=zd=null}finally{$a=c,L.p=a,$.T=r}}e.current=t,ui=2}}function Zp(){if(ui===2){ui=0;var e=jc,t=Ol,r=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||r){r=$.T,$.T=null;var a=L.p;L.p=2;var c=$a;$a|=4;try{Ap(e,t.alternate,t)}finally{$a=c,L.p=a,$.T=r}}ui=3}}function eh(){if(ui===4||ui===3){ui=0,Wa();var e=jc,t=Ol,r=ic,a=zp;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?ui=5:(ui=0,Ol=jc=null,th(e,e.pendingLanes));var c=e.pendingLanes;if(c===0&&(Bc=null),Ha(r),t=t.stateNode,He&&typeof He.onCommitFiberRoot=="function")try{He.onCommitFiberRoot(zt,t,void 0,(t.current.flags&128)===128)}catch{}if(a!==null){t=$.T,c=L.p,L.p=2,$.T=null;try{for(var _=e.onRecoverableError,K=0;K<a.length;K++){var ie=a[K];_(ie.value,{componentStack:ie.stack})}}finally{$.T=t,L.p=c}}(ic&3)!==0&&Uu(),Lo(e),c=e.pendingLanes,(r&261930)!==0&&(c&42)!==0?e===Ad?ru++:(ru=0,Ad=e):ru=0,au(0)}}function th(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,ei(t)))}function Uu(){return Jp(),Zp(),eh(),rh()}function rh(){if(ui!==5)return!1;var e=jc,t=Td;Td=0;var r=Ha(ic),a=$.T,c=L.p;try{L.p=32>r?32:r,$.T=null,r=Cd,Cd=null;var _=jc,K=ic;if(ui=0,Ol=jc=null,ic=0,($a&6)!==0)throw Error(Ee(331));var ie=$a;if($a|=4,Bp(_.current),Np(_,_.current,K,r),$a=ie,au(0,!1),He&&typeof He.onPostCommitFiberRoot=="function")try{He.onPostCommitFiberRoot(zt,_)}catch{}return!0}finally{L.p=c,$.T=a,th(e,t)}}function ah(e,t,r){t=ht(r,t),t=Ac(e.stateNode,t,2),e=Na(e,t,2),e!==null&&(rt(e,2),Lo(e))}function an(e,t,r){if(e.tag===3)ah(e,e,r);else for(;t!==null;){if(t.tag===3){ah(t,e,r);break}else if(t.tag===1){var a=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof a.componentDidCatch=="function"&&(Bc===null||!Bc.has(a))){e=ht(r,e),r=ul(2),a=Na(t,r,2),a!==null&&(wl(r,a,t,e),rt(a,2),Lo(a));break}}t=t.return}}function Md(e,t,r){var a=e.pingCache;if(a===null){a=e.pingCache=new Rf;var c=new Set;a.set(t,c)}else c=a.get(t),c===void 0&&(c=new Set,a.set(t,c));c.has(r)||(Ed=!0,c.add(r),e=Of.bind(null,e,t,r),t.then(e,e))}function Of(e,t,r){var a=e.pingCache;a!==null&&a.delete(t),e.pingedLanes|=e.suspendedLanes&r,e.warmLanes&=~r,mn===e&&(Ra&r)===r&&($n===4||$n===3&&(Ra&62914560)===Ra&&300>Gr()-Lu?($a&2)===0&&Ml(e,0):wd|=r,kl===Ra&&(kl=0)),Lo(e)}function nh(e,t){t===0&&(t=Ht()),e=ot(e,t),e!==null&&(rt(e,t),Lo(e))}function Mf(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),nh(e,r)}function Df(e,t){var r=0;switch(e.tag){case 31:case 13:var a=e.stateNode,c=e.memoizedState;c!==null&&(r=c.retryLane);break;case 19:a=e.stateNode;break;case 22:a=e.stateNode._retryCache;break;default:throw Error(Ee(314))}a!==null&&a.delete(t),nh(e,r)}function Pf(e,t){return br(e,t)}var zu=null,Pl=null,Dd=!1,Hu=!1,Pd=!1,zc=0;function Lo(e){e!==Pl&&e.next===null&&(Pl===null?zu=Pl=e:Pl=Pl.next=e),Hu=!0,Dd||(Dd=!0,Nf())}function au(e,t){if(!Pd&&Hu){Pd=!0;do for(var r=!1,a=zu;a!==null;){if(e!==0){var c=a.pendingLanes;if(c===0)var _=0;else{var K=a.suspendedLanes,ie=a.pingedLanes;_=(1<<31-Xe(42|e)+1)-1,_&=c&~(K&~ie),_=_&201326741?_&201326741|1:_?_|2:0}_!==0&&(r=!0,ch(a,_))}else _=Ra,_=aa(a,a===mn?_:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),(_&3)===0||Ke(a,_)||(r=!0,ch(a,_));a=a.next}while(r);Pd=!1}}function Lf(){ih()}function ih(){Hu=Dd=!1;var e=0;zc!==0&&$f()&&(e=zc);for(var t=Gr(),r=null,a=zu;a!==null;){var c=a.next,_=sh(a,t);_===0?(a.next=null,r===null?zu=c:r.next=c,c===null&&(Pl=r)):(r=a,(e!==0||(_&3)!==0)&&(Hu=!0)),a=c}ui!==0&&ui!==5||au(e),zc!==0&&(zc=0)}function sh(e,t){for(var r=e.suspendedLanes,a=e.pingedLanes,c=e.expirationTimes,_=e.pendingLanes&-62914561;0<_;){var K=31-Xe(_),ie=1<<K,ge=c[K];ge===-1?((ie&r)===0||(ie&a)!==0)&&(c[K]=Xt(ie,t)):ge<=t&&(e.expiredLanes|=ie),_&=~ie}if(t=mn,r=Ra,r=aa(e,e===t?r:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),a=e.callbackNode,r===0||e===t&&(rn===2||rn===9)||e.cancelPendingCommit!==null)return a!==null&&a!==null&&zr(a),e.callbackNode=null,e.callbackPriority=0;if((r&3)===0||Ke(e,r)){if(t=r&-r,t===e.callbackPriority)return t;switch(a!==null&&zr(a),Ha(r)){case 2:case 8:r=et;break;case 32:r=ir;break;case 268435456:r=pa;break;default:r=ir}return a=oh.bind(null,e),r=br(r,a),e.callbackPriority=t,e.callbackNode=r,t}return a!==null&&a!==null&&zr(a),e.callbackPriority=2,e.callbackNode=null,2}function oh(e,t){if(ui!==0&&ui!==5)return e.callbackNode=null,e.callbackPriority=0,null;var r=e.callbackNode;if(Uu()&&e.callbackNode!==r)return null;var a=Ra;return a=aa(e,e===mn?a:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),a===0?null:(Vp(e,a,t),sh(e,Gr()),e.callbackNode!=null&&e.callbackNode===r?oh.bind(null,e):null)}function ch(e,t){if(Uu())return null;Vp(e,t,!0)}function Nf(){Wf(function(){($a&6)!==0?br(nt,Lf):ih()})}function Ld(){if(zc===0){var e=cn;e===0&&(e=fr,fr<<=1,(fr&261888)===0&&(fr=256)),zc=e}return zc}function lh(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:mo(""+e)}function uh(e,t){var r=t.ownerDocument.createElement("input");return r.name=t.name,r.value=t.value,e.id&&r.setAttribute("form",e.id),t.parentNode.insertBefore(r,t),e=new FormData(e),r.parentNode.removeChild(r),e}function If(e,t,r,a,c){if(t==="submit"&&r&&r.stateNode===c){var _=lh((c[Kr]||null).action),K=a.submitter;K&&(t=(t=K[Kr]||null)?lh(t.formAction):K.getAttribute("formAction"),t!==null&&(_=t,K=null));var ie=new Ss("action","action",null,a,c);e.push({event:ie,listeners:[{instance:null,listener:function(){if(a.defaultPrevented){if(zc!==0){var ge=K?uh(c,K):new FormData(c);ve(r,{pending:!0,data:ge,method:c.method,action:_},null,ge)}}else typeof _=="function"&&(ie.preventDefault(),ge=K?uh(c,K):new FormData(c),ve(r,{pending:!0,data:ge,method:c.method,action:_},_,ge))},currentTarget:c}]})}}for(var Nd=0;Nd<O.length;Nd++){var Id=O[Nd],xf=Id.toLowerCase(),Bf=Id[0].toUpperCase()+Id.slice(1);I(xf,"on"+Bf)}I(bc,"onAnimationEnd"),I(F,"onAnimationIteration"),I(o,"onAnimationStart"),I("dblclick","onDoubleClick"),I("focusin","onFocus"),I("focusout","onBlur"),I(u,"onTransitionRun"),I(v,"onTransitionStart"),I(s,"onTransitionCancel"),I(l,"onTransitionEnd"),Ga("onMouseEnter",["mouseout","mouseover"]),Ga("onMouseLeave",["mouseout","mouseover"]),Ga("onPointerEnter",["pointerout","pointerover"]),Ga("onPointerLeave",["pointerout","pointerover"]),ha("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ha("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ha("onBeforeInput",["compositionend","keypress","textInput","paste"]),ha("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ha("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ha("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var nu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),jf=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(nu));function dh(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var a=e[r],c=a.event;a=a.listeners;e:{var _=void 0;if(t)for(var K=a.length-1;0<=K;K--){var ie=a[K],ge=ie.instance,Pe=ie.currentTarget;if(ie=ie.listener,ge!==_&&c.isPropagationStopped())break e;_=ie,c.currentTarget=Pe;try{_(c)}catch(tt){Z(tt)}c.currentTarget=null,_=ge}else for(K=0;K<a.length;K++){if(ie=a[K],ge=ie.instance,Pe=ie.currentTarget,ie=ie.listener,ge!==_&&c.isPropagationStopped())break e;_=ie,c.currentTarget=Pe;try{_(c)}catch(tt){Z(tt)}c.currentTarget=null,_=ge}}}}function ba(e,t){var r=t[jn];r===void 0&&(r=t[jn]=new Set);var a=e+"__bubble";r.has(a)||(ph(t,e,2,!1),r.add(a))}function xd(e,t,r){var a=0;t&&(a|=4),ph(r,e,a,t)}var Vu="_reactListening"+Math.random().toString(36).slice(2);function Bd(e){if(!e[Vu]){e[Vu]=!0,Li.forEach(function(r){r!=="selectionchange"&&(jf.has(r)||xd(r,!1,e),xd(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Vu]||(t[Vu]=!0,xd("selectionchange",!1,t))}}function ph(e,t,r,a){switch(Hh(t)){case 2:var c=pm;break;case 8:c=hm;break;default:c=Jd}r=c.bind(null,t,r,e),c=void 0,!Bo||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(c=!0),a?c!==void 0?e.addEventListener(t,r,{capture:!0,passive:c}):e.addEventListener(t,r,!0):c!==void 0?e.addEventListener(t,r,{passive:c}):e.addEventListener(t,r,!1)}function jd(e,t,r,a,c){var _=a;if((t&1)===0&&(t&2)===0&&a!==null)e:for(;;){if(a===null)return;var K=a.tag;if(K===3||K===4){var ie=a.stateNode.containerInfo;if(ie===c)break;if(K===4)for(K=a.return;K!==null;){var ge=K.tag;if((ge===3||ge===4)&&K.stateNode.containerInfo===c)return;K=K.return}for(;ie!==null;){if(K=Xn(ie),K===null)return;if(ge=K.tag,ge===5||ge===6||ge===26||ge===27){a=_=K;continue e}ie=ie.parentNode}}a=a.return}js(function(){var Pe=_,tt=xo(r),ut=[];e:{var Ne=A.get(e);if(Ne!==void 0){var Ue=Ss,hr=e;switch(e){case"keypress":if(bs(r)===0)break e;case"keydown":case"keyup":Ue=os;break;case"focusin":hr="focus",Ue=zs;break;case"focusout":hr="blur",Ue=zs;break;case"beforeblur":case"afterblur":Ue=zs;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ue=bo;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ue=Uo;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ue=Kc;break;case bc:case F:case o:Ue=So;break;case l:Ue=Ro;break;case"scroll":case"scrollend":Ue=_o;break;case"wheel":Ue=lc;break;case"copy":case"cut":case"paste":Ue=Hs;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ue=wo;break;case"toggle":case"beforetoggle":Ue=uc}var Dr=(t&4)!==0,dn=!Dr&&(e==="scroll"||e==="scrollend"),Re=Dr?Ne!==null?Ne+"Capture":null:Ne;Dr=[];for(var be=Pe,De;be!==null;){var st=be;if(De=st.stateNode,st=st.tag,st!==5&&st!==26&&st!==27||De===null||Re===null||(st=hi(be,Re),st!=null&&Dr.push(iu(be,st,De))),dn)break;be=be.return}0<Dr.length&&(Ne=new Ue(Ne,hr,null,r,tt),ut.push({event:Ne,listeners:Dr}))}}if((t&7)===0){e:{if(Ne=e==="mouseover"||e==="pointerover",Ue=e==="mouseout"||e==="pointerout",Ne&&r!==vo&&(hr=r.relatedTarget||r.fromElement)&&(Xn(hr)||hr[Oa]))break e;if((Ue||Ne)&&(Ne=tt.window===tt?tt:(Ne=tt.ownerDocument)?Ne.defaultView||Ne.parentWindow:window,Ue?(hr=r.relatedTarget||r.toElement,Ue=Pe,hr=hr?Xn(hr):null,hr!==null&&(dn=at(hr),Dr=hr.tag,hr!==dn||Dr!==5&&Dr!==27&&Dr!==6)&&(hr=null)):(Ue=null,hr=Pe),Ue!==hr)){if(Dr=bo,st="onMouseLeave",Re="onMouseEnter",be="mouse",(e==="pointerout"||e==="pointerover")&&(Dr=wo,st="onPointerLeave",Re="onPointerEnter",be="pointer"),dn=Ue==null?Ne:Pi(Ue),De=hr==null?Ne:Pi(hr),Ne=new Dr(st,be+"leave",Ue,r,tt),Ne.target=dn,Ne.relatedTarget=De,st=null,Xn(tt)===Pe&&(Dr=new Dr(Re,be+"enter",hr,r,tt),Dr.target=De,Dr.relatedTarget=dn,st=Dr),dn=st,Ue&&hr)t:{for(Dr=Uf,Re=Ue,be=hr,De=0,st=Re;st;st=Dr(st))De++;st=0;for(var Ar=be;Ar;Ar=Dr(Ar))st++;for(;0<De-st;)Re=Dr(Re),De--;for(;0<st-De;)be=Dr(be),st--;for(;De--;){if(Re===be||be!==null&&Re===be.alternate){Dr=Re;break t}Re=Dr(Re),be=Dr(be)}Dr=null}else Dr=null;Ue!==null&&hh(ut,Ne,Ue,Dr,!1),hr!==null&&dn!==null&&hh(ut,dn,hr,Dr,!0)}}e:{if(Ne=Pe?Pi(Pe):window,Ue=Ne.nodeName&&Ne.nodeName.toLowerCase(),Ue==="select"||Ue==="input"&&Ne.type==="file")var Ba=Jc;else if(fi(Ne))if(ea)Ba=vl;else{Ba=Ai;var _r=el}else Ue=Ne.nodeName,!Ue||Ue.toLowerCase()!=="input"||Ne.type!=="checkbox"&&Ne.type!=="radio"?Pe&&Ys(Pe.elementType)&&(Ba=Jc):Ba=Vs;if(Ba&&(Ba=Ba(e,Pe))){Wn(ut,Ba,r,tt);break e}_r&&_r(e,Ne,Pe),e==="focusout"&&Pe&&Ne.type==="number"&&Pe.memoizedProps.value!=null&&Gi(Ne,"number",Ne.value)}switch(_r=Pe?Pi(Pe):window,e){case"focusin":(fi(_r)||_r.contentEditable==="true")&&(As=_r,qo=Pe,Wo=null);break;case"focusout":Wo=qo=As=null;break;case"mousedown":tl=!0;break;case"contextmenu":case"mouseup":case"dragend":tl=!1,Go(ut,r,tt);break;case"selectionchange":if(Ul)break;case"keydown":case"keyup":Go(ut,r,tt)}var oa;if(Rs)e:{switch(e){case"compositionstart":var Ta="onCompositionStart";break e;case"compositionend":Ta="onCompositionEnd";break e;case"compositionupdate":Ta="onCompositionUpdate";break e}Ta=void 0}else Cs?to(e,r)&&(Ta="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(Ta="onCompositionStart");Ta&&(hc&&r.locale!=="ko"&&(Cs||Ta!=="onCompositionStart"?Ta==="onCompositionEnd"&&Cs&&(oa=go()):(Ii=tt,Us="value"in Ii?Ii.value:Ii.textContent,Cs=!0)),_r=Fu(Pe,Ta),0<_r.length&&(Ta=new se(Ta,e,null,r,tt),ut.push({event:Ta,listeners:_r}),oa?Ta.data=oa:(oa=Fo(r),oa!==null&&(Ta.data=oa)))),(oa=pc?Qc(e,r):fc(e,r))&&(Ta=Fu(Pe,"onBeforeInput"),0<Ta.length&&(_r=new se("onBeforeInput","beforeinput",null,r,tt),ut.push({event:_r,listeners:Ta}),_r.data=oa)),If(ut,e,Pe,r,tt)}dh(ut,t)})}function iu(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Fu(e,t){for(var r=t+"Capture",a=[];e!==null;){var c=e,_=c.stateNode;if(c=c.tag,c!==5&&c!==26&&c!==27||_===null||(c=hi(e,r),c!=null&&a.unshift(iu(e,c,_)),c=hi(e,t),c!=null&&a.push(iu(e,c,_))),e.tag===3)return a;e=e.return}return[]}function Uf(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function hh(e,t,r,a,c){for(var _=t._reactName,K=[];r!==null&&r!==a;){var ie=r,ge=ie.alternate,Pe=ie.stateNode;if(ie=ie.tag,ge!==null&&ge===a)break;ie!==5&&ie!==26&&ie!==27||Pe===null||(ge=Pe,c?(Pe=hi(r,_),Pe!=null&&K.unshift(iu(r,Pe,ge))):c||(Pe=hi(r,_),Pe!=null&&K.push(iu(r,Pe,ge)))),r=r.return}K.length!==0&&e.push({event:t,listeners:K})}var zf=/\r\n?/g,Hf=/\u0000|\uFFFD/g;function fh(e){return(typeof e=="string"?e:""+e).replace(zf,`
`).replace(Hf,"")}function mh(e,t){return t=fh(t),fh(e)===t}function un(e,t,r,a,c,_){switch(r){case"children":typeof a=="string"?t==="body"||t==="textarea"&&a===""||Ri(e,a):(typeof a=="number"||typeof a=="bigint")&&t!=="body"&&Ri(e,""+a);break;case"className":Br(e,"class",a);break;case"tabIndex":Br(e,"tabindex",a);break;case"dir":case"role":case"viewBox":case"width":case"height":Br(e,r,a);break;case"style":Zn(e,a,_);break;case"data":if(t!=="object"){Br(e,"data",a);break}case"src":case"href":if(a===""&&(t!=="a"||r!=="href")){e.removeAttribute(r);break}if(a==null||typeof a=="function"||typeof a=="symbol"||typeof a=="boolean"){e.removeAttribute(r);break}a=mo(""+a),e.setAttribute(r,a);break;case"action":case"formAction":if(typeof a=="function"){e.setAttribute(r,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof _=="function"&&(r==="formAction"?(t!=="input"&&un(e,t,"name",c.name,c,null),un(e,t,"formEncType",c.formEncType,c,null),un(e,t,"formMethod",c.formMethod,c,null),un(e,t,"formTarget",c.formTarget,c,null)):(un(e,t,"encType",c.encType,c,null),un(e,t,"method",c.method,c,null),un(e,t,"target",c.target,c,null)));if(a==null||typeof a=="symbol"||typeof a=="boolean"){e.removeAttribute(r);break}a=mo(""+a),e.setAttribute(r,a);break;case"onClick":a!=null&&(e.onclick=Ti);break;case"onScroll":a!=null&&ba("scroll",e);break;case"onScrollEnd":a!=null&&ba("scrollend",e);break;case"dangerouslySetInnerHTML":if(a!=null){if(typeof a!="object"||!("__html"in a))throw Error(Ee(61));if(r=a.__html,r!=null){if(c.children!=null)throw Error(Ee(60));e.innerHTML=r}}break;case"multiple":e.multiple=a&&typeof a!="function"&&typeof a!="symbol";break;case"muted":e.muted=a&&typeof a!="function"&&typeof a!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(a==null||typeof a=="function"||typeof a=="boolean"||typeof a=="symbol"){e.removeAttribute("xlink:href");break}r=mo(""+a),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",r);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":a!=null&&typeof a!="function"&&typeof a!="symbol"?e.setAttribute(r,""+a):e.removeAttribute(r);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":a&&typeof a!="function"&&typeof a!="symbol"?e.setAttribute(r,""):e.removeAttribute(r);break;case"capture":case"download":a===!0?e.setAttribute(r,""):a!==!1&&a!=null&&typeof a!="function"&&typeof a!="symbol"?e.setAttribute(r,a):e.removeAttribute(r);break;case"cols":case"rows":case"size":case"span":a!=null&&typeof a!="function"&&typeof a!="symbol"&&!isNaN(a)&&1<=a?e.setAttribute(r,a):e.removeAttribute(r);break;case"rowSpan":case"start":a==null||typeof a=="function"||typeof a=="symbol"||isNaN(a)?e.removeAttribute(r):e.setAttribute(r,a);break;case"popover":ba("beforetoggle",e),ba("toggle",e),$t(e,"popover",a);break;case"xlinkActuate":jr(e,"http://www.w3.org/1999/xlink","xlink:actuate",a);break;case"xlinkArcrole":jr(e,"http://www.w3.org/1999/xlink","xlink:arcrole",a);break;case"xlinkRole":jr(e,"http://www.w3.org/1999/xlink","xlink:role",a);break;case"xlinkShow":jr(e,"http://www.w3.org/1999/xlink","xlink:show",a);break;case"xlinkTitle":jr(e,"http://www.w3.org/1999/xlink","xlink:title",a);break;case"xlinkType":jr(e,"http://www.w3.org/1999/xlink","xlink:type",a);break;case"xmlBase":jr(e,"http://www.w3.org/XML/1998/namespace","xml:base",a);break;case"xmlLang":jr(e,"http://www.w3.org/XML/1998/namespace","xml:lang",a);break;case"xmlSpace":jr(e,"http://www.w3.org/XML/1998/namespace","xml:space",a);break;case"is":$t(e,"is",a);break;case"innerText":case"textContent":break;default:(!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(r=fo.get(r)||r,$t(e,r,a))}}function Ud(e,t,r,a,c,_){switch(r){case"style":Zn(e,a,_);break;case"dangerouslySetInnerHTML":if(a!=null){if(typeof a!="object"||!("__html"in a))throw Error(Ee(61));if(r=a.__html,r!=null){if(c.children!=null)throw Error(Ee(60));e.innerHTML=r}}break;case"children":typeof a=="string"?Ri(e,a):(typeof a=="number"||typeof a=="bigint")&&Ri(e,""+a);break;case"onScroll":a!=null&&ba("scroll",e);break;case"onScrollEnd":a!=null&&ba("scrollend",e);break;case"onClick":a!=null&&(e.onclick=Ti);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Jn.hasOwnProperty(r))e:{if(r[0]==="o"&&r[1]==="n"&&(c=r.endsWith("Capture"),t=r.slice(2,c?r.length-7:void 0),_=e[Kr]||null,_=_!=null?_[r]:null,typeof _=="function"&&e.removeEventListener(t,_,c),typeof a=="function")){typeof _!="function"&&_!==null&&(r in e?e[r]=null:e.hasAttribute(r)&&e.removeAttribute(r)),e.addEventListener(t,a,c);break e}r in e?e[r]=a:a===!0?e.setAttribute(r,""):$t(e,r,a)}}}function Di(e,t,r){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ba("error",e),ba("load",e);var a=!1,c=!1,_;for(_ in r)if(r.hasOwnProperty(_)){var K=r[_];if(K!=null)switch(_){case"src":a=!0;break;case"srcSet":c=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(Ee(137,t));default:un(e,t,_,K,r,null)}}c&&un(e,t,"srcSet",r.srcSet,r,null),a&&un(e,t,"src",r.src,r,null);return;case"input":ba("invalid",e);var ie=_=K=c=null,ge=null,Pe=null;for(a in r)if(r.hasOwnProperty(a)){var tt=r[a];if(tt!=null)switch(a){case"name":c=tt;break;case"type":K=tt;break;case"checked":ge=tt;break;case"defaultChecked":Pe=tt;break;case"value":_=tt;break;case"defaultValue":ie=tt;break;case"children":case"dangerouslySetInnerHTML":if(tt!=null)throw Error(Ee(137,t));break;default:un(e,t,a,tt,r,null)}}gs(e,_,ie,ge,Pe,K,c,!1);return;case"select":ba("invalid",e),a=K=_=null;for(c in r)if(r.hasOwnProperty(c)&&(ie=r[c],ie!=null))switch(c){case"value":_=ie;break;case"defaultValue":K=ie;break;case"multiple":a=ie;default:un(e,t,c,ie,r,null)}t=_,r=K,e.multiple=!!a,t!=null?wi(e,!!a,t,!1):r!=null&&wi(e,!!a,r,!0);return;case"textarea":ba("invalid",e),_=c=a=null;for(K in r)if(r.hasOwnProperty(K)&&(ie=r[K],ie!=null))switch(K){case"value":a=ie;break;case"defaultValue":c=ie;break;case"children":_=ie;break;case"dangerouslySetInnerHTML":if(ie!=null)throw Error(Ee(91));break;default:un(e,t,K,ie,r,null)}rs(e,a,c,_);return;case"option":for(ge in r)if(r.hasOwnProperty(ge)&&(a=r[ge],a!=null))switch(ge){case"selected":e.selected=a&&typeof a!="function"&&typeof a!="symbol";break;default:un(e,t,ge,a,r,null)}return;case"dialog":ba("beforetoggle",e),ba("toggle",e),ba("cancel",e),ba("close",e);break;case"iframe":case"object":ba("load",e);break;case"video":case"audio":for(a=0;a<nu.length;a++)ba(nu[a],e);break;case"image":ba("error",e),ba("load",e);break;case"details":ba("toggle",e);break;case"embed":case"source":case"link":ba("error",e),ba("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Pe in r)if(r.hasOwnProperty(Pe)&&(a=r[Pe],a!=null))switch(Pe){case"children":case"dangerouslySetInnerHTML":throw Error(Ee(137,t));default:un(e,t,Pe,a,r,null)}return;default:if(Ys(t)){for(tt in r)r.hasOwnProperty(tt)&&(a=r[tt],a!==void 0&&Ud(e,t,tt,a,r,void 0));return}}for(ie in r)r.hasOwnProperty(ie)&&(a=r[ie],a!=null&&un(e,t,ie,a,r,null))}function Vf(e,t,r,a){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var c=null,_=null,K=null,ie=null,ge=null,Pe=null,tt=null;for(Ue in r){var ut=r[Ue];if(r.hasOwnProperty(Ue)&&ut!=null)switch(Ue){case"checked":break;case"value":break;case"defaultValue":ge=ut;default:a.hasOwnProperty(Ue)||un(e,t,Ue,null,a,ut)}}for(var Ne in a){var Ue=a[Ne];if(ut=r[Ne],a.hasOwnProperty(Ne)&&(Ue!=null||ut!=null))switch(Ne){case"type":_=Ue;break;case"name":c=Ue;break;case"checked":Pe=Ue;break;case"defaultChecked":tt=Ue;break;case"value":K=Ue;break;case"defaultValue":ie=Ue;break;case"children":case"dangerouslySetInnerHTML":if(Ue!=null)throw Error(Ee(137,t));break;default:Ue!==ut&&un(e,t,Ne,Ue,a,ut)}}pi(e,K,ie,ge,Pe,tt,_,c);return;case"select":Ue=K=ie=Ne=null;for(_ in r)if(ge=r[_],r.hasOwnProperty(_)&&ge!=null)switch(_){case"value":break;case"multiple":Ue=ge;default:a.hasOwnProperty(_)||un(e,t,_,null,a,ge)}for(c in a)if(_=a[c],ge=r[c],a.hasOwnProperty(c)&&(_!=null||ge!=null))switch(c){case"value":Ne=_;break;case"defaultValue":ie=_;break;case"multiple":K=_;default:_!==ge&&un(e,t,c,_,a,ge)}t=ie,r=K,a=Ue,Ne!=null?wi(e,!!r,Ne,!1):!!a!=!!r&&(t!=null?wi(e,!!r,t,!0):wi(e,!!r,r?[]:"",!1));return;case"textarea":Ue=Ne=null;for(ie in r)if(c=r[ie],r.hasOwnProperty(ie)&&c!=null&&!a.hasOwnProperty(ie))switch(ie){case"value":break;case"children":break;default:un(e,t,ie,null,a,c)}for(K in a)if(c=a[K],_=r[K],a.hasOwnProperty(K)&&(c!=null||_!=null))switch(K){case"value":Ne=c;break;case"defaultValue":Ue=c;break;case"children":break;case"dangerouslySetInnerHTML":if(c!=null)throw Error(Ee(91));break;default:c!==_&&un(e,t,K,c,a,_)}ys(e,Ne,Ue);return;case"option":for(var hr in r)if(Ne=r[hr],r.hasOwnProperty(hr)&&Ne!=null&&!a.hasOwnProperty(hr))switch(hr){case"selected":e.selected=!1;break;default:un(e,t,hr,null,a,Ne)}for(ge in a)if(Ne=a[ge],Ue=r[ge],a.hasOwnProperty(ge)&&Ne!==Ue&&(Ne!=null||Ue!=null))switch(ge){case"selected":e.selected=Ne&&typeof Ne!="function"&&typeof Ne!="symbol";break;default:un(e,t,ge,Ne,a,Ue)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Dr in r)Ne=r[Dr],r.hasOwnProperty(Dr)&&Ne!=null&&!a.hasOwnProperty(Dr)&&un(e,t,Dr,null,a,Ne);for(Pe in a)if(Ne=a[Pe],Ue=r[Pe],a.hasOwnProperty(Pe)&&Ne!==Ue&&(Ne!=null||Ue!=null))switch(Pe){case"children":case"dangerouslySetInnerHTML":if(Ne!=null)throw Error(Ee(137,t));break;default:un(e,t,Pe,Ne,a,Ue)}return;default:if(Ys(t)){for(var dn in r)Ne=r[dn],r.hasOwnProperty(dn)&&Ne!==void 0&&!a.hasOwnProperty(dn)&&Ud(e,t,dn,void 0,a,Ne);for(tt in a)Ne=a[tt],Ue=r[tt],!a.hasOwnProperty(tt)||Ne===Ue||Ne===void 0&&Ue===void 0||Ud(e,t,tt,Ne,a,Ue);return}}for(var Re in r)Ne=r[Re],r.hasOwnProperty(Re)&&Ne!=null&&!a.hasOwnProperty(Re)&&un(e,t,Re,null,a,Ne);for(ut in a)Ne=a[ut],Ue=r[ut],!a.hasOwnProperty(ut)||Ne===Ue||Ne==null&&Ue==null||un(e,t,ut,Ne,a,Ue)}function vh(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Ff(){if(typeof performance.getEntriesByType=="function"){for(var e=0,t=0,r=performance.getEntriesByType("resource"),a=0;a<r.length;a++){var c=r[a],_=c.transferSize,K=c.initiatorType,ie=c.duration;if(_&&ie&&vh(K)){for(K=0,ie=c.responseEnd,a+=1;a<r.length;a++){var ge=r[a],Pe=ge.startTime;if(Pe>ie)break;var tt=ge.transferSize,ut=ge.initiatorType;tt&&vh(ut)&&(ge=ge.responseEnd,K+=tt*(ge<ie?1:(ie-Pe)/(ge-Pe)))}if(--a,t+=8*(_+K)/(c.duration/1e3),e++,10<e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var zd=null,Hd=null;function $u(e){return e.nodeType===9?e:e.ownerDocument}function gh(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function yh(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function Vd(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Fd=null;function $f(){var e=window.event;return e&&e.type==="popstate"?e===Fd?!1:(Fd=e,!0):(Fd=null,!1)}var _h=typeof setTimeout=="function"?setTimeout:void 0,qf=typeof clearTimeout=="function"?clearTimeout:void 0,bh=typeof Promise=="function"?Promise:void 0,Wf=typeof queueMicrotask=="function"?queueMicrotask:typeof bh<"u"?function(e){return bh.resolve(null).then(e).catch(Gf)}:_h;function Gf(e){setTimeout(function(){throw e})}function Hc(e){return e==="head"}function Sh(e,t){var r=t,a=0;do{var c=r.nextSibling;if(e.removeChild(r),c&&c.nodeType===8)if(r=c.data,r==="/$"||r==="/&"){if(a===0){e.removeChild(c),xl(t);return}a--}else if(r==="$"||r==="$?"||r==="$~"||r==="$!"||r==="&")a++;else if(r==="html")su(e.ownerDocument.documentElement);else if(r==="head"){r=e.ownerDocument.head,su(r);for(var _=r.firstChild;_;){var K=_.nextSibling,ie=_.nodeName;_[sn]||ie==="SCRIPT"||ie==="STYLE"||ie==="LINK"&&_.rel.toLowerCase()==="stylesheet"||r.removeChild(_),_=K}}else r==="body"&&su(e.ownerDocument.body);r=c}while(r);xl(t)}function Eh(e,t){var r=e;e=0;do{var a=r.nextSibling;if(r.nodeType===1?t?(r._stashedDisplay=r.style.display,r.style.display="none"):(r.style.display=r._stashedDisplay||"",r.getAttribute("style")===""&&r.removeAttribute("style")):r.nodeType===3&&(t?(r._stashedText=r.nodeValue,r.nodeValue=""):r.nodeValue=r._stashedText||""),a&&a.nodeType===8)if(r=a.data,r==="/$"){if(e===0)break;e--}else r!=="$"&&r!=="$?"&&r!=="$~"&&r!=="$!"||e++;r=a}while(r)}function $d(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var r=t;switch(t=t.nextSibling,r.nodeName){case"HTML":case"HEAD":case"BODY":$d(r),Wi(r);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(r.rel.toLowerCase()==="stylesheet")continue}e.removeChild(r)}}function Kf(e,t,r,a){for(;e.nodeType===1;){var c=r;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!a&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(a){if(!e[sn])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(_=e.getAttribute("rel"),_==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(_!==c.rel||e.getAttribute("href")!==(c.href==null||c.href===""?null:c.href)||e.getAttribute("crossorigin")!==(c.crossOrigin==null?null:c.crossOrigin)||e.getAttribute("title")!==(c.title==null?null:c.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(_=e.getAttribute("src"),(_!==(c.src==null?null:c.src)||e.getAttribute("type")!==(c.type==null?null:c.type)||e.getAttribute("crossorigin")!==(c.crossOrigin==null?null:c.crossOrigin))&&_&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var _=c.name==null?null:""+c.name;if(c.type==="hidden"&&e.getAttribute("name")===_)return e}else return e;if(e=Ws(e.nextSibling),e===null)break}return null}function Yf(e,t,r){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!r||(e=Ws(e.nextSibling),e===null))return null;return e}function wh(e,t){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!t||(e=Ws(e.nextSibling),e===null))return null;return e}function qd(e){return e.data==="$?"||e.data==="$~"}function Wd(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function Qf(e,t){var r=e.ownerDocument;if(e.data==="$~")e._reactRetry=t;else if(e.data!=="$?"||r.readyState!=="loading")t();else{var a=function(){t(),r.removeEventListener("DOMContentLoaded",a)};r.addEventListener("DOMContentLoaded",a),e._reactRetry=a}}function Ws(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="$~"||t==="&"||t==="F!"||t==="F")break;if(t==="/$"||t==="/&")return null}}return e}var Gd=null;function Rh(e){e=e.nextSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"||r==="/&"){if(t===0)return Ws(e.nextSibling);t--}else r!=="$"&&r!=="$!"&&r!=="$?"&&r!=="$~"&&r!=="&"||t++}e=e.nextSibling}return null}function Th(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"){if(t===0)return e;t--}else r!=="/$"&&r!=="/&"||t++}e=e.previousSibling}return null}function Ch(e,t,r){switch(t=$u(r),e){case"html":if(e=t.documentElement,!e)throw Error(Ee(452));return e;case"head":if(e=t.head,!e)throw Error(Ee(453));return e;case"body":if(e=t.body,!e)throw Error(Ee(454));return e;default:throw Error(Ee(451))}}function su(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Wi(e)}var Gs=new Map,Ah=new Set;function qu(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var sc=L.d;L.d={f:Xf,r:Jf,D:Zf,C:em,L:tm,m:rm,X:nm,S:am,M:im};function Xf(){var e=sc.f(),t=xu();return e||t}function Jf(e){var t=Ei(e);t!==null&&t.tag===5&&t.type==="form"?Be(t):sc.r(e)}var Ll=typeof document>"u"?null:document;function kh(e,t,r){var a=Ll;if(a&&typeof t=="string"&&t){var c=Ln(t);c='link[rel="'+e+'"][href="'+c+'"]',typeof r=="string"&&(c+='[crossorigin="'+r+'"]'),Ah.has(c)||(Ah.add(c),e={rel:e,crossOrigin:r,href:t},a.querySelector(c)===null&&(t=a.createElement("link"),Di(t,"link",e),Va(t),a.head.appendChild(t)))}}function Zf(e){sc.D(e),kh("dns-prefetch",e,null)}function em(e,t){sc.C(e,t),kh("preconnect",e,t)}function tm(e,t,r){sc.L(e,t,r);var a=Ll;if(a&&e&&t){var c='link[rel="preload"][as="'+Ln(t)+'"]';t==="image"&&r&&r.imageSrcSet?(c+='[imagesrcset="'+Ln(r.imageSrcSet)+'"]',typeof r.imageSizes=="string"&&(c+='[imagesizes="'+Ln(r.imageSizes)+'"]')):c+='[href="'+Ln(e)+'"]';var _=c;switch(t){case"style":_=Nl(e);break;case"script":_=Il(e)}Gs.has(_)||(e=C({rel:"preload",href:t==="image"&&r&&r.imageSrcSet?void 0:e,as:t},r),Gs.set(_,e),a.querySelector(c)!==null||t==="style"&&a.querySelector(ou(_))||t==="script"&&a.querySelector(cu(_))||(t=a.createElement("link"),Di(t,"link",e),Va(t),a.head.appendChild(t)))}}function rm(e,t){sc.m(e,t);var r=Ll;if(r&&e){var a=t&&typeof t.as=="string"?t.as:"script",c='link[rel="modulepreload"][as="'+Ln(a)+'"][href="'+Ln(e)+'"]',_=c;switch(a){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":_=Il(e)}if(!Gs.has(_)&&(e=C({rel:"modulepreload",href:e},t),Gs.set(_,e),r.querySelector(c)===null)){switch(a){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(r.querySelector(cu(_)))return}a=r.createElement("link"),Di(a,"link",e),Va(a),r.head.appendChild(a)}}}function am(e,t,r){sc.S(e,t,r);var a=Ll;if(a&&e){var c=Tr(a).hoistableStyles,_=Nl(e);t=t||"default";var K=c.get(_);if(!K){var ie={loading:0,preload:null};if(K=a.querySelector(ou(_)))ie.loading=5;else{e=C({rel:"stylesheet",href:e,"data-precedence":t},r),(r=Gs.get(_))&&Kd(e,r);var ge=K=a.createElement("link");Va(ge),Di(ge,"link",e),ge._p=new Promise(function(Pe,tt){ge.onload=Pe,ge.onerror=tt}),ge.addEventListener("load",function(){ie.loading|=1}),ge.addEventListener("error",function(){ie.loading|=2}),ie.loading|=4,Wu(K,t,a)}K={type:"stylesheet",instance:K,count:1,state:ie},c.set(_,K)}}}function nm(e,t){sc.X(e,t);var r=Ll;if(r&&e){var a=Tr(r).hoistableScripts,c=Il(e),_=a.get(c);_||(_=r.querySelector(cu(c)),_||(e=C({src:e,async:!0},t),(t=Gs.get(c))&&Yd(e,t),_=r.createElement("script"),Va(_),Di(_,"link",e),r.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},a.set(c,_))}}function im(e,t){sc.M(e,t);var r=Ll;if(r&&e){var a=Tr(r).hoistableScripts,c=Il(e),_=a.get(c);_||(_=r.querySelector(cu(c)),_||(e=C({src:e,async:!0,type:"module"},t),(t=Gs.get(c))&&Yd(e,t),_=r.createElement("script"),Va(_),Di(_,"link",e),r.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},a.set(c,_))}}function Oh(e,t,r,a){var c=(c=ue.current)?qu(c):null;if(!c)throw Error(Ee(446));switch(e){case"meta":case"title":return null;case"style":return typeof r.precedence=="string"&&typeof r.href=="string"?(t=Nl(r.href),r=Tr(c).hoistableStyles,a=r.get(t),a||(a={type:"style",instance:null,count:0,state:null},r.set(t,a)),a):{type:"void",instance:null,count:0,state:null};case"link":if(r.rel==="stylesheet"&&typeof r.href=="string"&&typeof r.precedence=="string"){e=Nl(r.href);var _=Tr(c).hoistableStyles,K=_.get(e);if(K||(c=c.ownerDocument||c,K={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},_.set(e,K),(_=c.querySelector(ou(e)))&&!_._p&&(K.instance=_,K.state.loading=5),Gs.has(e)||(r={rel:"preload",as:"style",href:r.href,crossOrigin:r.crossOrigin,integrity:r.integrity,media:r.media,hrefLang:r.hrefLang,referrerPolicy:r.referrerPolicy},Gs.set(e,r),_||sm(c,e,r,K.state))),t&&a===null)throw Error(Ee(528,""));return K}if(t&&a!==null)throw Error(Ee(529,""));return null;case"script":return t=r.async,r=r.src,typeof r=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=Il(r),r=Tr(c).hoistableScripts,a=r.get(t),a||(a={type:"script",instance:null,count:0,state:null},r.set(t,a)),a):{type:"void",instance:null,count:0,state:null};default:throw Error(Ee(444,e))}}function Nl(e){return'href="'+Ln(e)+'"'}function ou(e){return'link[rel="stylesheet"]['+e+"]"}function Mh(e){return C({},e,{"data-precedence":e.precedence,precedence:null})}function sm(e,t,r,a){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?a.loading=1:(t=e.createElement("link"),a.preload=t,t.addEventListener("load",function(){return a.loading|=1}),t.addEventListener("error",function(){return a.loading|=2}),Di(t,"link",r),Va(t),e.head.appendChild(t))}function Il(e){return'[src="'+Ln(e)+'"]'}function cu(e){return"script[async]"+e}function Dh(e,t,r){if(t.count++,t.instance===null)switch(t.type){case"style":var a=e.querySelector('style[data-href~="'+Ln(r.href)+'"]');if(a)return t.instance=a,Va(a),a;var c=C({},r,{"data-href":r.href,"data-precedence":r.precedence,href:null,precedence:null});return a=(e.ownerDocument||e).createElement("style"),Va(a),Di(a,"style",c),Wu(a,r.precedence,e),t.instance=a;case"stylesheet":c=Nl(r.href);var _=e.querySelector(ou(c));if(_)return t.state.loading|=4,t.instance=_,Va(_),_;a=Mh(r),(c=Gs.get(c))&&Kd(a,c),_=(e.ownerDocument||e).createElement("link"),Va(_);var K=_;return K._p=new Promise(function(ie,ge){K.onload=ie,K.onerror=ge}),Di(_,"link",a),t.state.loading|=4,Wu(_,r.precedence,e),t.instance=_;case"script":return _=Il(r.src),(c=e.querySelector(cu(_)))?(t.instance=c,Va(c),c):(a=r,(c=Gs.get(_))&&(a=C({},r),Yd(a,c)),e=e.ownerDocument||e,c=e.createElement("script"),Va(c),Di(c,"link",a),e.head.appendChild(c),t.instance=c);case"void":return null;default:throw Error(Ee(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(a=t.instance,t.state.loading|=4,Wu(a,r.precedence,e));return t.instance}function Wu(e,t,r){for(var a=r.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),c=a.length?a[a.length-1]:null,_=c,K=0;K<a.length;K++){var ie=a[K];if(ie.dataset.precedence===t)_=ie;else if(_!==c)break}_?_.parentNode.insertBefore(e,_.nextSibling):(t=r.nodeType===9?r.head:r,t.insertBefore(e,t.firstChild))}function Kd(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function Yd(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var Gu=null;function Ph(e,t,r){if(Gu===null){var a=new Map,c=Gu=new Map;c.set(r,a)}else c=Gu,a=c.get(r),a||(a=new Map,c.set(r,a));if(a.has(e))return a;for(a.set(e,null),r=r.getElementsByTagName(e),c=0;c<r.length;c++){var _=r[c];if(!(_[sn]||_[ca]||e==="link"&&_.getAttribute("rel")==="stylesheet")&&_.namespaceURI!=="http://www.w3.org/2000/svg"){var K=_.getAttribute(t)||"";K=e+K;var ie=a.get(K);ie?ie.push(_):a.set(K,[_])}}return a}function Lh(e,t,r){e=e.ownerDocument||e,e.head.insertBefore(r,t==="title"?e.querySelector("head > title"):null)}function om(e,t,r){if(r===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function Nh(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function cm(e,t,r,a){if(r.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(r.state.loading&4)===0){if(r.instance===null){var c=Nl(a.href),_=t.querySelector(ou(c));if(_){t=_._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(e.count++,e=Ku.bind(e),t.then(e,e)),r.state.loading|=4,r.instance=_,Va(_);return}_=t.ownerDocument||t,a=Mh(a),(c=Gs.get(c))&&Kd(a,c),_=_.createElement("link"),Va(_);var K=_;K._p=new Promise(function(ie,ge){K.onload=ie,K.onerror=ge}),Di(_,"link",a),r.instance=_}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(r,t),(t=r.state.preload)&&(r.state.loading&3)===0&&(e.count++,r=Ku.bind(e),t.addEventListener("load",r),t.addEventListener("error",r))}}var Qd=0;function lm(e,t){return e.stylesheets&&e.count===0&&Qu(e,e.stylesheets),0<e.count||0<e.imgCount?function(r){var a=setTimeout(function(){if(e.stylesheets&&Qu(e,e.stylesheets),e.unsuspend){var _=e.unsuspend;e.unsuspend=null,_()}},6e4+t);0<e.imgBytes&&Qd===0&&(Qd=62500*Ff());var c=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&Qu(e,e.stylesheets),e.unsuspend)){var _=e.unsuspend;e.unsuspend=null,_()}},(e.imgBytes>Qd?50:800)+t);return e.unsuspend=r,function(){e.unsuspend=null,clearTimeout(a),clearTimeout(c)}}:null}function Ku(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Qu(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Yu=null;function Qu(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Yu=new Map,t.forEach(um,e),Yu=null,Ku.call(e))}function um(e,t){if(!(t.state.loading&4)){var r=Yu.get(e);if(r)var a=r.get(null);else{r=new Map,Yu.set(e,r);for(var c=e.querySelectorAll("link[data-precedence],style[data-precedence]"),_=0;_<c.length;_++){var K=c[_];(K.nodeName==="LINK"||K.getAttribute("media")!=="not all")&&(r.set(K.dataset.precedence,K),a=K)}a&&r.set(null,a)}c=t.instance,K=c.getAttribute("data-precedence"),_=r.get(K)||a,_===a&&r.set(null,c),r.set(K,c),this.count++,a=Ku.bind(this),c.addEventListener("load",a),c.addEventListener("error",a),_?_.parentNode.insertBefore(c,_.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(c,e.firstChild)),t.state.loading|=4}}var lu={$$typeof:q,Provider:null,Consumer:null,_currentValue:z,_currentValue2:z,_threadCount:0};function dm(e,t,r,a,c,_,K,ie,ge){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Qt(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Qt(0),this.hiddenUpdates=Qt(null),this.identifierPrefix=a,this.onUncaughtError=c,this.onCaughtError=_,this.onRecoverableError=K,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=ge,this.incompleteTransitions=new Map}function Ih(e,t,r,a,c,_,K,ie,ge,Pe,tt,ut){return e=new dm(e,t,r,K,ge,Pe,tt,ut,ie),t=1,_===!0&&(t|=24),_=Et(3,null,null,t),e.current=_,_.stateNode=e,t=mi(),t.refCount++,e.pooledCache=t,t.refCount++,_.memoizedState={element:a,isDehydrated:r,cache:t},Hi(_),e}function xh(e){return e?(e=Ct,e):Ct}function Bh(e,t,r,a,c,_){c=xh(c),a.context===null?a.context=c:a.pendingContext=c,a=qr(t),a.payload={element:r},_=_===void 0?null:_,_!==null&&(a.callback=_),r=Na(e,a,t),r!==null&&(vs(r,e,t),An(r,e,t))}function jh(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function Xd(e,t){jh(e,t),(e=e.alternate)&&jh(e,t)}function Uh(e){if(e.tag===13||e.tag===31){var t=ot(e,67108864);t!==null&&vs(t,e,67108864),Xd(e,67108864)}}function zh(e){if(e.tag===13||e.tag===31){var t=Is();t=$r(t);var r=ot(e,t);r!==null&&vs(r,e,t),Xd(e,t)}}var Xu=!0;function pm(e,t,r,a){var c=$.T;$.T=null;var _=L.p;try{L.p=2,Jd(e,t,r,a)}finally{L.p=_,$.T=c}}function hm(e,t,r,a){var c=$.T;$.T=null;var _=L.p;try{L.p=8,Jd(e,t,r,a)}finally{L.p=_,$.T=c}}function Jd(e,t,r,a){if(Xu){var c=Zd(a);if(c===null)jd(e,t,a,Ju,r),Vh(e,a);else if(mm(c,e,t,r,a))a.stopPropagation();else if(Vh(e,a),t&4&&-1<fm.indexOf(e)){for(;c!==null;){var _=Ei(c);if(_!==null)switch(_.tag){case 3:if(_=_.stateNode,_.current.memoizedState.isDehydrated){var K=Rr(_.pendingLanes);if(K!==0){var ie=_;for(ie.pendingLanes|=2,ie.entangledLanes|=2;K;){var ge=1<<31-Xe(K);ie.entanglements[1]|=ge,K&=~ge}Lo(_),($a&6)===0&&(Nu=Gr()+500,au(0))}}break;case 31:case 13:ie=ot(_,2),ie!==null&&vs(ie,_,2),xu(),Xd(_,2)}if(_=Zd(a),_===null&&jd(e,t,a,Ju,r),_===c)break;c=_}c!==null&&a.stopPropagation()}else jd(e,t,a,null,r)}}function Zd(e){return e=xo(e),ep(e)}var Ju=null;function ep(e){if(Ju=null,e=Xn(e),e!==null){var t=at(e);if(t===null)e=null;else{var r=t.tag;if(r===13){if(e=Ft(t),e!==null)return e;e=null}else if(r===31){if(e=oe(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return Ju=e,null}function Hh(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(pn()){case nt:return 2;case et:return 8;case ir:case Lr:return 32;case pa:return 268435456;default:return 32}default:return 32}}var tp=!1,Vc=null,Fc=null,$c=null,uu=new Map,du=new Map,qc=[],fm="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Vh(e,t){switch(e){case"focusin":case"focusout":Vc=null;break;case"dragenter":case"dragleave":Fc=null;break;case"mouseover":case"mouseout":$c=null;break;case"pointerover":case"pointerout":uu.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":du.delete(t.pointerId)}}function pu(e,t,r,a,c,_){return e===null||e.nativeEvent!==_?(e={blockedOn:t,domEventName:r,eventSystemFlags:a,nativeEvent:_,targetContainers:[c]},t!==null&&(t=Ei(t),t!==null&&Uh(t)),e):(e.eventSystemFlags|=a,t=e.targetContainers,c!==null&&t.indexOf(c)===-1&&t.push(c),e)}function mm(e,t,r,a,c){switch(t){case"focusin":return Vc=pu(Vc,e,t,r,a,c),!0;case"dragenter":return Fc=pu(Fc,e,t,r,a,c),!0;case"mouseover":return $c=pu($c,e,t,r,a,c),!0;case"pointerover":var _=c.pointerId;return uu.set(_,pu(uu.get(_)||null,e,t,r,a,c)),!0;case"gotpointercapture":return _=c.pointerId,du.set(_,pu(du.get(_)||null,e,t,r,a,c)),!0}return!1}function Fh(e){var t=Xn(e.target);if(t!==null){var r=at(t);if(r!==null){if(t=r.tag,t===13){if(t=Ft(r),t!==null){e.blockedOn=t,qn(e.priority,function(){zh(r)});return}}else if(t===31){if(t=oe(r),t!==null){e.blockedOn=t,qn(e.priority,function(){zh(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Zu(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=Zd(e.nativeEvent);if(r===null){r=e.nativeEvent;var a=new r.constructor(r.type,r);vo=a,r.target.dispatchEvent(a),vo=null}else return t=Ei(r),t!==null&&Uh(t),e.blockedOn=r,!1;t.shift()}return!0}function $h(e,t,r){Zu(e)&&r.delete(t)}function vm(){tp=!1,Vc!==null&&Zu(Vc)&&(Vc=null),Fc!==null&&Zu(Fc)&&(Fc=null),$c!==null&&Zu($c)&&($c=null),uu.forEach($h),du.forEach($h)}function ed(e,t){e.blockedOn===t&&(e.blockedOn=null,tp||(tp=!0,Ae.unstable_scheduleCallback(Ae.unstable_NormalPriority,vm)))}var td=null;function qh(e){td!==e&&(td=e,Ae.unstable_scheduleCallback(Ae.unstable_NormalPriority,function(){td===e&&(td=null);for(var t=0;t<e.length;t+=3){var r=e[t],a=e[t+1],c=e[t+2];if(typeof a!="function"){if(ep(a||r)===null)continue;break}var _=Ei(r);_!==null&&(e.splice(t,3),t-=3,ve(_,{pending:!0,data:c,method:r.method,action:a},a,c))}}))}function xl(e){function t(ge){return ed(ge,e)}Vc!==null&&ed(Vc,e),Fc!==null&&ed(Fc,e),$c!==null&&ed($c,e),uu.forEach(t),du.forEach(t);for(var r=0;r<qc.length;r++){var a=qc[r];a.blockedOn===e&&(a.blockedOn=null)}for(;0<qc.length&&(r=qc[0],r.blockedOn===null);)Fh(r),r.blockedOn===null&&qc.shift();if(r=(e.ownerDocument||e).$$reactFormReplay,r!=null)for(a=0;a<r.length;a+=3){var c=r[a],_=r[a+1],K=c[Kr]||null;if(typeof _=="function")K||qh(r);else if(K){var ie=null;if(_&&_.hasAttribute("formAction")){if(c=_,K=_[Kr]||null)ie=K.formAction;else if(ep(c)!==null)continue}else ie=K.action;typeof ie=="function"?r[a+1]=ie:(r.splice(a,3),a-=3),qh(r)}}}function Wh(){function e(_){_.canIntercept&&_.info==="react-transition"&&_.intercept({handler:function(){return new Promise(function(K){return c=K})},focusReset:"manual",scroll:"manual"})}function t(){c!==null&&(c(),c=null),a||setTimeout(r,20)}function r(){if(!a&&!navigation.transition){var _=navigation.currentEntry;_&&_.url!=null&&navigation.navigate(_.url,{state:_.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var a=!1,c=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(r,100),function(){a=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),c!==null&&(c(),c=null)}}}function rp(e){this._internalRoot=e}rd.prototype.render=rp.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(Ee(409));var r=t.current,a=Is();Bh(r,a,e,t,null,null)},rd.prototype.unmount=rp.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Bh(e.current,2,null,e,null,null),xu(),t[Oa]=null}};function rd(e){this._internalRoot=e}rd.prototype.unstable_scheduleHydration=function(e){if(e){var t=nn();e={blockedOn:null,target:e,priority:t};for(var r=0;r<qc.length&&t!==0&&t<qc[r].priority;r++);qc.splice(r,0,e),r===0&&Fh(e)}};var Gh=Nt.version;if(Gh!=="19.2.3")throw Error(Ee(527,Gh,"19.2.3"));L.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Ee(188)):(e=Object.keys(e).join(","),Error(Ee(268,e)));return e=S(t),e=e!==null?x(e):null,e=e===null?null:e.stateNode,e};var gm={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:$,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ad=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ad.isDisabled&&ad.supportsFiber)try{zt=ad.inject(gm),He=ad}catch{}}return fu.createRoot=function(e,t){if(!wt(e))throw Error(Ee(299));var r=!1,a="",c=bi,_=Mi,K=Ds;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(a=t.identifierPrefix),t.onUncaughtError!==void 0&&(c=t.onUncaughtError),t.onCaughtError!==void 0&&(_=t.onCaughtError),t.onRecoverableError!==void 0&&(K=t.onRecoverableError)),t=Ih(e,1,!1,null,null,r,a,null,c,_,K,Wh),e[Oa]=t.current,Bd(e),new rp(t)},fu.hydrateRoot=function(e,t,r){if(!wt(e))throw Error(Ee(299));var a=!1,c="",_=bi,K=Mi,ie=Ds,ge=null;return r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(c=r.identifierPrefix),r.onUncaughtError!==void 0&&(_=r.onUncaughtError),r.onCaughtError!==void 0&&(K=r.onCaughtError),r.onRecoverableError!==void 0&&(ie=r.onRecoverableError),r.formState!==void 0&&(ge=r.formState)),t=Ih(e,1,!0,t,r??null,a,c,ge,_,K,ie,Wh),t.context=xh(null),r=t.current,a=Is(),a=$r(a),c=qr(a),c.callback=null,Na(r,c,a),r=a,t.current.lanes=r,rt(t,r),Lo(t),e[Oa]=t.current,Bd(e),new rd(t)},fu.version="19.2.3",fu}var af;function Am(){if(af)return ip.exports;af=1;function Ae(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Ae)}catch(Nt){console.error(Nt)}}return Ae(),ip.exports=Cm(),ip.exports}var km=Am(),nd={exports:{}},nf;function Om(){if(nf)return nd.exports;nf=1;var Ae=typeof Reflect=="object"?Reflect:null,Nt=Ae&&typeof Ae.apply=="function"?Ae.apply:function(h,k,W){return Function.prototype.apply.call(h,k,W)},ct;Ae&&typeof Ae.ownKeys=="function"?ct=Ae.ownKeys:Object.getOwnPropertySymbols?ct=function(h){return Object.getOwnPropertyNames(h).concat(Object.getOwnPropertySymbols(h))}:ct=function(h){return Object.getOwnPropertyNames(h)};function Ee(g){console&&console.warn&&console.warn(g)}var wt=Number.isNaN||function(h){return h!==h};function at(){at.init.call(this)}nd.exports=at,nd.exports.once=f,at.EventEmitter=at,at.prototype._events=void 0,at.prototype._eventsCount=0,at.prototype._maxListeners=void 0;var Ft=10;function oe(g){if(typeof g!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof g)}Object.defineProperty(at,"defaultMaxListeners",{enumerable:!0,get:function(){return Ft},set:function(g){if(typeof g!="number"||g<0||wt(g))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+g+".");Ft=g}}),at.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},at.prototype.setMaxListeners=function(h){if(typeof h!="number"||h<0||wt(h))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+h+".");return this._maxListeners=h,this};function Y(g){return g._maxListeners===void 0?at.defaultMaxListeners:g._maxListeners}at.prototype.getMaxListeners=function(){return Y(this)},at.prototype.emit=function(h){for(var k=[],W=1;W<arguments.length;W++)k.push(arguments[W]);var j=h==="error",y=this._events;if(y!==void 0)j=j&&y.error===void 0;else if(!j)return!1;if(j){var d;if(k.length>0&&(d=k[0]),d instanceof Error)throw d;var R=new Error("Unhandled error."+(d?" ("+d.message+")":""));throw R.context=d,R}var m=y[h];if(m===void 0)return!1;if(typeof m=="function")Nt(m,this,k);else for(var P=m.length,H=J(m,P),W=0;W<P;++W)Nt(H[W],this,k);return!0};function S(g,h,k,W){var j,y,d;if(oe(k),y=g._events,y===void 0?(y=g._events=Object.create(null),g._eventsCount=0):(y.newListener!==void 0&&(g.emit("newListener",h,k.listener?k.listener:k),y=g._events),d=y[h]),d===void 0)d=y[h]=k,++g._eventsCount;else if(typeof d=="function"?d=y[h]=W?[k,d]:[d,k]:W?d.unshift(k):d.push(k),j=Y(g),j>0&&d.length>j&&!d.warned){d.warned=!0;var R=new Error("Possible EventEmitter memory leak detected. "+d.length+" "+String(h)+" listeners added. Use emitter.setMaxListeners() to increase limit");R.name="MaxListenersExceededWarning",R.emitter=g,R.type=h,R.count=d.length,Ee(R)}return g}at.prototype.addListener=function(h,k){return S(this,h,k,!1)},at.prototype.on=at.prototype.addListener,at.prototype.prependListener=function(h,k){return S(this,h,k,!0)};function x(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function C(g,h,k){var W={fired:!1,wrapFn:void 0,target:g,type:h,listener:k},j=x.bind(W);return j.listener=k,W.wrapFn=j,j}at.prototype.once=function(h,k){return oe(k),this.on(h,C(this,h,k)),this},at.prototype.prependOnceListener=function(h,k){return oe(k),this.prependListener(h,C(this,h,k)),this},at.prototype.removeListener=function(h,k){var W,j,y,d,R;if(oe(k),j=this._events,j===void 0)return this;if(W=j[h],W===void 0)return this;if(W===k||W.listener===k)--this._eventsCount===0?this._events=Object.create(null):(delete j[h],j.removeListener&&this.emit("removeListener",h,W.listener||k));else if(typeof W!="function"){for(y=-1,d=W.length-1;d>=0;d--)if(W[d]===k||W[d].listener===k){R=W[d].listener,y=d;break}if(y<0)return this;y===0?W.shift():w(W,y),W.length===1&&(j[h]=W[0]),j.removeListener!==void 0&&this.emit("removeListener",h,R||k)}return this},at.prototype.off=at.prototype.removeListener,at.prototype.removeAllListeners=function(h){var k,W,j;if(W=this._events,W===void 0)return this;if(W.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):W[h]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete W[h]),this;if(arguments.length===0){var y=Object.keys(W),d;for(j=0;j<y.length;++j)d=y[j],d!=="removeListener"&&this.removeAllListeners(d);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(k=W[h],typeof k=="function")this.removeListener(h,k);else if(k!==void 0)for(j=k.length-1;j>=0;j--)this.removeListener(h,k[j]);return this};function T(g,h,k){var W=g._events;if(W===void 0)return[];var j=W[h];return j===void 0?[]:typeof j=="function"?k?[j.listener||j]:[j]:k?n(j):J(j,j.length)}at.prototype.listeners=function(h){return T(this,h,!0)},at.prototype.rawListeners=function(h){return T(this,h,!1)},at.listenerCount=function(g,h){return typeof g.listenerCount=="function"?g.listenerCount(h):b.call(g,h)},at.prototype.listenerCount=b;function b(g){var h=this._events;if(h!==void 0){var k=h[g];if(typeof k=="function")return 1;if(k!==void 0)return k.length}return 0}at.prototype.eventNames=function(){return this._eventsCount>0?ct(this._events):[]};function J(g,h){for(var k=new Array(h),W=0;W<h;++W)k[W]=g[W];return k}function w(g,h){for(;h+1<g.length;h++)g[h]=g[h+1];g.pop()}function n(g){for(var h=new Array(g.length),k=0;k<h.length;++k)h[k]=g[k].listener||g[k];return h}function f(g,h){return new Promise(function(k,W){function j(d){g.removeListener(h,y),W(d)}function y(){typeof g.removeListener=="function"&&g.removeListener("error",j),k([].slice.call(arguments))}q(g,h,y,{once:!0}),h!=="error"&&U(g,j,{once:!0})})}function U(g,h,k){typeof g.on=="function"&&q(g,"error",h,k)}function q(g,h,k,W){if(typeof g.on=="function")W.once?g.once(h,k):g.on(h,k);else if(typeof g.addEventListener=="function")g.addEventListener(h,function j(y){W.once&&g.removeEventListener(h,j),k(y)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof g)}return nd.exports}var Mm=Om();const Dm=pf(Mm);var lp={exports:{}},sf;function Pm(){return sf||(sf=1,(function(Ae,Nt){var ct={};(function(wt,at){Ae.exports=at()})(self,()=>(()=>{var Ee={11:((oe,Y,S)=>{Object.defineProperty(Y,"__esModule",{value:!0}),Y.Chrome74=void 0;const x=S(7363),C=S(2994),T=S(3953),b=S(8046),J=S(4893),w=S(3303),n=S(5544),f=S(5938),U=S(4256),q=S(1305),g=new C.Logger("Chrome74"),h="Chrome74",k={OS:1024,MIS:1024};class W extends T.EnhancedEventEmitter{_closed=!1;_direction;_remoteSdp;_getSendExtendedRtpCapabilities;_forcedLocalDtlsRole;_pc;_mapMidTransceiver=new Map;_sendStream=new MediaStream;_hasDataChannelMediaSection=!1;_nextSendSctpStreamId=0;_transportReady=!1;static createFactory(){return{name:h,factory:y=>new W(y),getNativeRtpCapabilities:async()=>{g.debug("getNativeRtpCapabilities()");let y=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require"});try{y.addTransceiver("audio"),y.addTransceiver("video");const d=await y.createOffer();try{y.close()}catch{}y=void 0;const R=x.parse(d.sdp);return W.getLocalRtpCapabilities(R)}catch(d){try{y?.close()}catch{}throw y=void 0,d}},getNativeSctpCapabilities:async()=>(g.debug("getNativeSctpCapabilities()"),{numStreams:k})}}static getLocalRtpCapabilities(y){const d=n.extractRtpCapabilities({sdpObject:y});return b.validateAndNormalizeRtpCapabilities(d),U.addNackSupportForOpus(d),d}constructor({direction:y,iceParameters:d,iceCandidates:R,dtlsParameters:m,sctpParameters:P,iceServers:H,iceTransportPolicy:B,additionalSettings:$,getSendExtendedRtpCapabilities:L}){super(),g.debug("constructor()"),this._direction=y,this._remoteSdp=new q.RemoteSdp({iceParameters:d,iceCandidates:R,dtlsParameters:m,sctpParameters:P}),this._getSendExtendedRtpCapabilities=L,m.role&&m.role!=="auto"&&(this._forcedLocalDtlsRole=m.role==="server"?"client":"server"),this._pc=new RTCPeerConnection({iceServers:H??[],iceTransportPolicy:B??"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",...$}),this._pc.addEventListener("icegatheringstatechange",this.onIceGatheringStateChange),this._pc.addEventListener("icecandidateerror",this.onIceCandidateError),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",this.onConnectionStateChange):(g.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.addEventListener("iceconnectionstatechange",this.onIceConnectionStateChange))}get name(){return h}close(){if(g.debug("close()"),!this._closed){this._closed=!0;try{this._pc.close()}catch{}this._pc.removeEventListener("icegatheringstatechange",this.onIceGatheringStateChange),this._pc.removeEventListener("icecandidateerror",this.onIceCandidateError),this._pc.removeEventListener("connectionstatechange",this.onConnectionStateChange),this._pc.removeEventListener("iceconnectionstatechange",this.onIceConnectionStateChange),this.emit("@close"),super.close()}}async updateIceServers(y){this.assertNotClosed(),g.debug("updateIceServers()");const d=this._pc.getConfiguration();d.iceServers=y,this._pc.setConfiguration(d)}async restartIce(y){if(this.assertNotClosed(),g.debug("restartIce()"),this._remoteSdp.updateIceParameters(y),!!this._transportReady)if(this._direction==="send"){const d=await this._pc.createOffer({iceRestart:!0});g.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",d),await this._pc.setLocalDescription(d);const R={type:"answer",sdp:this._remoteSdp.getSdp()};g.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",R),await this._pc.setRemoteDescription(R)}else{const d={type:"offer",sdp:this._remoteSdp.getSdp()};g.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",d),await this._pc.setRemoteDescription(d);const R=await this._pc.createAnswer();g.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",R),await this._pc.setLocalDescription(R)}}async getTransportStats(){return this.assertNotClosed(),this._pc.getStats()}async send({track:y,encodings:d,codecOptions:R,codec:m}){this.assertNotClosed(),this.assertSendDirection(),g.debug("send() [kind:%s, track.id:%s]",y.kind,y.id),d&&d.length>1&&d.forEach((ue,ne)=>{ue.rid=`r${ne}`});const P=this._remoteSdp.getNextMediaSectionIdx(),H=this._pc.addTransceiver(y,{direction:"sendonly",streams:[this._sendStream],sendEncodings:d});let B=await this._pc.createOffer(),$=x.parse(B.sdp);$.extmapAllowMixed&&this._remoteSdp.setSessionExtmapAllowMixed();const L=W.getLocalRtpCapabilities($),z=this._getSendExtendedRtpCapabilities(L),V=b.getSendingRtpParameters(y.kind,z);V.codecs=b.reduceCodecs(V.codecs,m);const X=b.getSendingRemoteRtpParameters(y.kind,z);X.codecs=b.reduceCodecs(X.codecs,m),this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:$});let G=!1;const ae=(0,w.parse)((d??[{}])[0].scalabilityMode);let Q;d&&d.length===1&&ae.spatialLayers>1&&V.codecs[0].mimeType.toLowerCase()==="video/vp9"&&(g.debug("send() | enabling legacy simulcast for VP9 SVC"),G=!0,$=x.parse(B.sdp),Q=$.media[P.idx],f.addLegacySimulcast({offerMediaObject:Q,numStreams:ae.spatialLayers}),B={type:"offer",sdp:x.write($)}),g.debug("send() | calling pc.setLocalDescription() [offer:%o]",B),await this._pc.setLocalDescription(B);const le=H.mid;if(V.mid=le,$=x.parse(this._pc.localDescription.sdp),Q=$.media[P.idx],V.rtcp.cname=n.getCname({offerMediaObject:Q}),!d)V.encodings=f.getRtpEncodings({offerMediaObject:Q});else if(d.length===1){let ue=f.getRtpEncodings({offerMediaObject:Q});Object.assign(ue[0],d[0]),G&&(ue=[ue[0]]),V.encodings=ue}else V.encodings=d;if(V.encodings.length>1&&(V.codecs[0].mimeType.toLowerCase()==="video/vp8"||V.codecs[0].mimeType.toLowerCase()==="video/h264"))for(const ue of V.encodings)ue.scalabilityMode?ue.scalabilityMode=`L1T${ae.temporalLayers}`:ue.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:Q,reuseMid:P.reuseMid,offerRtpParameters:V,answerRtpParameters:X,codecOptions:R});const pe={type:"answer",sdp:this._remoteSdp.getSdp()};return g.debug("send() | calling pc.setRemoteDescription() [answer:%o]",pe),await this._pc.setRemoteDescription(pe),this._mapMidTransceiver.set(le,H),{localId:le,rtpParameters:V,rtpSender:H.sender}}async stopSending(y){if(this.assertSendDirection(),g.debug("stopSending() [localId:%s]",y),this._closed)return;const d=this._mapMidTransceiver.get(y);if(!d)throw new Error("associated RTCRtpTransceiver not found");if(d.sender.replaceTrack(null),this._pc.removeTrack(d.sender),this._remoteSdp.closeMediaSection(d.mid))try{d.stop()}catch{}const m=await this._pc.createOffer();g.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",m),await this._pc.setLocalDescription(m);const P={type:"answer",sdp:this._remoteSdp.getSdp()};g.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",P),await this._pc.setRemoteDescription(P),this._mapMidTransceiver.delete(y)}async pauseSending(y){this.assertNotClosed(),this.assertSendDirection(),g.debug("pauseSending() [localId:%s]",y);const d=this._mapMidTransceiver.get(y);if(!d)throw new Error("associated RTCRtpTransceiver not found");d.direction="inactive",this._remoteSdp.pauseMediaSection(y);const R=await this._pc.createOffer();g.debug("pauseSending() | calling pc.setLocalDescription() [offer:%o]",R),await this._pc.setLocalDescription(R);const m={type:"answer",sdp:this._remoteSdp.getSdp()};g.debug("pauseSending() | calling pc.setRemoteDescription() [answer:%o]",m),await this._pc.setRemoteDescription(m)}async resumeSending(y){this.assertNotClosed(),this.assertSendDirection(),g.debug("resumeSending() [localId:%s]",y);const d=this._mapMidTransceiver.get(y);if(this._remoteSdp.resumeSendingMediaSection(y),!d)throw new Error("associated RTCRtpTransceiver not found");d.direction="sendonly";const R=await this._pc.createOffer();g.debug("resumeSending() | calling pc.setLocalDescription() [offer:%o]",R),await this._pc.setLocalDescription(R);const m={type:"answer",sdp:this._remoteSdp.getSdp()};g.debug("resumeSending() | calling pc.setRemoteDescription() [answer:%o]",m),await this._pc.setRemoteDescription(m)}async replaceTrack(y,d){this.assertNotClosed(),this.assertSendDirection(),d?g.debug("replaceTrack() [localId:%s, track.id:%s]",y,d.id):g.debug("replaceTrack() [localId:%s, no track]",y);const R=this._mapMidTransceiver.get(y);if(!R)throw new Error("associated RTCRtpTransceiver not found");await R.sender.replaceTrack(d)}async setMaxSpatialLayer(y,d){this.assertNotClosed(),this.assertSendDirection(),g.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",y,d);const R=this._mapMidTransceiver.get(y);if(!R)throw new Error("associated RTCRtpTransceiver not found");const m=R.sender.getParameters();m.encodings.forEach((B,$)=>{$<=d?B.active=!0:B.active=!1}),await R.sender.setParameters(m),this._remoteSdp.muxMediaSectionSimulcast(y,m.encodings);const P=await this._pc.createOffer();g.debug("setMaxSpatialLayer() | calling pc.setLocalDescription() [offer:%o]",P),await this._pc.setLocalDescription(P);const H={type:"answer",sdp:this._remoteSdp.getSdp()};g.debug("setMaxSpatialLayer() | calling pc.setRemoteDescription() [answer:%o]",H),await this._pc.setRemoteDescription(H)}async setRtpEncodingParameters(y,d){this.assertNotClosed(),this.assertSendDirection(),g.debug("setRtpEncodingParameters() [localId:%s, params:%o]",y,d);const R=this._mapMidTransceiver.get(y);if(!R)throw new Error("associated RTCRtpTransceiver not found");const m=R.sender.getParameters();m.encodings.forEach((B,$)=>{m.encodings[$]={...B,...d}}),await R.sender.setParameters(m),this._remoteSdp.muxMediaSectionSimulcast(y,m.encodings);const P=await this._pc.createOffer();g.debug("setRtpEncodingParameters() | calling pc.setLocalDescription() [offer:%o]",P),await this._pc.setLocalDescription(P);const H={type:"answer",sdp:this._remoteSdp.getSdp()};g.debug("setRtpEncodingParameters() | calling pc.setRemoteDescription() [answer:%o]",H),await this._pc.setRemoteDescription(H)}async getSenderStats(y){this.assertNotClosed(),this.assertSendDirection();const d=this._mapMidTransceiver.get(y);if(!d)throw new Error("associated RTCRtpTransceiver not found");return d.sender.getStats()}async sendDataChannel({ordered:y,maxPacketLifeTime:d,maxRetransmits:R,label:m,protocol:P}){this.assertNotClosed(),this.assertSendDirection();const H={negotiated:!0,id:this._nextSendSctpStreamId,ordered:y,maxPacketLifeTime:d,maxRetransmits:R,protocol:P};g.debug("sendDataChannel() [options:%o]",H);const B=this._pc.createDataChannel(m,H);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%k.MIS,!this._hasDataChannelMediaSection){const L=await this._pc.createOffer(),z=x.parse(L.sdp),V=z.media.find(G=>G.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:z}),g.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",L),await this._pc.setLocalDescription(L),this._remoteSdp.sendSctpAssociation({offerMediaObject:V});const X={type:"answer",sdp:this._remoteSdp.getSdp()};g.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",X),await this._pc.setRemoteDescription(X),this._hasDataChannelMediaSection=!0}const $={streamId:H.id,ordered:H.ordered,maxPacketLifeTime:H.maxPacketLifeTime,maxRetransmits:H.maxRetransmits};return{dataChannel:B,sctpStreamParameters:$}}async receive(y){this.assertNotClosed(),this.assertRecvDirection();const d=[],R=new Map;for(const B of y){const{trackId:$,kind:L,rtpParameters:z,streamId:V}=B;g.debug("receive() [trackId:%s, kind:%s]",$,L);const X=z.mid??String(this._mapMidTransceiver.size);R.set($,X),this._remoteSdp.receive({mid:X,kind:L,offerRtpParameters:z,streamId:V??z.rtcp.cname,trackId:$})}const m={type:"offer",sdp:this._remoteSdp.getSdp()};g.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",m),await this._pc.setRemoteDescription(m);let P=await this._pc.createAnswer();const H=x.parse(P.sdp);for(const B of y){const{trackId:$,rtpParameters:L}=B,z=R.get($),V=H.media.find(X=>String(X.mid)===z);n.applyCodecParameters({offerRtpParameters:L,answerMediaObject:V})}P={type:"answer",sdp:x.write(H)},this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:H}),g.debug("receive() | calling pc.setLocalDescription() [answer:%o]",P),await this._pc.setLocalDescription(P);for(const B of y){const{trackId:$}=B,L=R.get($),z=this._pc.getTransceivers().find(V=>V.mid===L);if(z)this._mapMidTransceiver.set(L,z),d.push({localId:L,track:z.receiver.track,rtpReceiver:z.receiver});else throw new Error("new RTCRtpTransceiver not found")}return d}async stopReceiving(y){if(this.assertRecvDirection(),this._closed)return;for(const m of y){g.debug("stopReceiving() [localId:%s]",m);const P=this._mapMidTransceiver.get(m);if(!P)throw new Error("associated RTCRtpTransceiver not found");this._remoteSdp.closeMediaSection(P.mid)}const d={type:"offer",sdp:this._remoteSdp.getSdp()};g.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",d),await this._pc.setRemoteDescription(d);const R=await this._pc.createAnswer();g.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",R),await this._pc.setLocalDescription(R);for(const m of y)this._mapMidTransceiver.delete(m)}async pauseReceiving(y){this.assertNotClosed(),this.assertRecvDirection();for(const m of y){g.debug("pauseReceiving() [localId:%s]",m);const P=this._mapMidTransceiver.get(m);if(!P)throw new Error("associated RTCRtpTransceiver not found");P.direction="inactive",this._remoteSdp.pauseMediaSection(m)}const d={type:"offer",sdp:this._remoteSdp.getSdp()};g.debug("pauseReceiving() | calling pc.setRemoteDescription() [offer:%o]",d),await this._pc.setRemoteDescription(d);const R=await this._pc.createAnswer();g.debug("pauseReceiving() | calling pc.setLocalDescription() [answer:%o]",R),await this._pc.setLocalDescription(R)}async resumeReceiving(y){this.assertNotClosed(),this.assertRecvDirection();for(const m of y){g.debug("resumeReceiving() [localId:%s]",m);const P=this._mapMidTransceiver.get(m);if(!P)throw new Error("associated RTCRtpTransceiver not found");P.direction="recvonly",this._remoteSdp.resumeReceivingMediaSection(m)}const d={type:"offer",sdp:this._remoteSdp.getSdp()};g.debug("resumeReceiving() | calling pc.setRemoteDescription() [offer:%o]",d),await this._pc.setRemoteDescription(d);const R=await this._pc.createAnswer();g.debug("resumeReceiving() | calling pc.setLocalDescription() [answer:%o]",R),await this._pc.setLocalDescription(R)}async getReceiverStats(y){this.assertNotClosed(),this.assertRecvDirection();const d=this._mapMidTransceiver.get(y);if(!d)throw new Error("associated RTCRtpTransceiver not found");return d.receiver.getStats()}async receiveDataChannel({sctpStreamParameters:y,label:d,protocol:R}){this.assertNotClosed(),this.assertRecvDirection();const{streamId:m,ordered:P,maxPacketLifeTime:H,maxRetransmits:B}=y,$={negotiated:!0,id:m,ordered:P,maxPacketLifeTime:H,maxRetransmits:B,protocol:R};g.debug("receiveDataChannel() [options:%o]",$);const L=this._pc.createDataChannel(d,$);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation();const z={type:"offer",sdp:this._remoteSdp.getSdp()};g.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",z),await this._pc.setRemoteDescription(z);const V=await this._pc.createAnswer();if(!this._transportReady){const X=x.parse(V.sdp);await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:X})}g.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",V),await this._pc.setLocalDescription(V),this._hasDataChannelMediaSection=!0}return{dataChannel:L}}async setupTransport({localDtlsRole:y,localSdpObject:d}){d||(d=x.parse(this._pc.localDescription.sdp));const R=n.extractDtlsParameters({sdpObject:d});R.role=y,this._remoteSdp.updateDtlsRole(y==="client"?"server":"client"),await new Promise((m,P)=>{this.safeEmit("@connect",{dtlsParameters:R},m,P)}),this._transportReady=!0}onIceGatheringStateChange=()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)};onIceCandidateError=y=>{this.emit("@icecandidateerror",y)};onConnectionStateChange=()=>{this.emit("@connectionstatechange",this._pc.connectionState)};onIceConnectionStateChange=()=>{switch(this._pc.iceConnectionState){case"checking":{this.emit("@connectionstatechange","connecting");break}case"connected":case"completed":{this.emit("@connectionstatechange","connected");break}case"failed":{this.emit("@connectionstatechange","failed");break}case"disconnected":{this.emit("@connectionstatechange","disconnected");break}case"closed":{this.emit("@connectionstatechange","closed");break}}};assertNotClosed(){if(this._closed)throw new J.InvalidStateError("method called in a closed handler")}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}}Y.Chrome74=W}),19:(function(oe,Y,S){(function(x,C,T){oe.exports=C(S(9021),S(3009),S(1025))})(this,function(x){return(function(){var C=x,T=C.lib,b=T.Base,J=T.WordArray,w=C.algo,n=w.SHA256,f=w.HMAC,U=w.PBKDF2=b.extend({cfg:b.extend({keySize:128/32,hasher:n,iterations:25e4}),init:function(q){this.cfg=this.cfg.extend(q)},compute:function(q,g){for(var h=this.cfg,k=f.create(h.hasher,q),W=J.create(),j=J.create([1]),y=W.words,d=j.words,R=h.keySize,m=h.iterations;y.length<R;){var P=k.update(g).finalize(j);k.reset();for(var H=P.words,B=H.length,$=P,L=1;L<m;L++){$=k.finalize($),k.reset();for(var z=$.words,V=0;V<B;V++)H[V]^=z[V]}W.concat(P),d[0]++}return W.sigBytes=R*4,W}});C.PBKDF2=function(q,g,h){return U.create(h).compute(q,g)}})(),x.PBKDF2})}),25:(function(oe,Y,S){(function(x,C,T){oe.exports=C(S(9021),S(7165))})(this,function(x){return(function(C){var T=x,b=T.lib,J=b.CipherParams,w=T.enc,n=w.Hex,f=T.format;f.Hex={stringify:function(U){return U.ciphertext.toString(n)},parse:function(U){var q=n.parse(U);return J.create({ciphertext:q})}}})(),x.format.Hex})}),76:((oe,Y,S)=>{Y.s$=Y.pF=void 0,S(7833).default,S(8057);var C=S(6004);Object.defineProperty(Y,"pF",{enumerable:!0,get:function(){return C.Device}});var T=S(3303);Object.defineProperty(Y,"s$",{enumerable:!0,get:function(){return T.parse}}),S(8046),S(3953),S(2731),S(5248)}),296:((oe,Y,S)=>{S.d(Y,{A:()=>J});function x(w){if(Array.isArray(w))return w}function C(w,n){var f=w==null?null:typeof Symbol<"u"&&w[Symbol.iterator]||w["@@iterator"];if(f!=null){var U,q,g,h,k=[],W=!0,j=!1;try{if(g=(f=f.call(w)).next,n===0){if(Object(f)!==f)return;W=!1}else for(;!(W=(U=g.call(f)).done)&&(k.push(U.value),k.length!==n);W=!0);}catch(y){j=!0,q=y}finally{try{if(!W&&f.return!=null&&(h=f.return(),Object(h)!==h))return}finally{if(j)throw q}}return k}}var T=S(7800);function b(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function J(w,n){return x(w)||C(w,n)||(0,T.A)(w,n)||b()}}),328:((oe,Y,S)=>{S(8624),oe.exports=self.fetch.bind(self)}),388:((oe,Y,S)=>{S.d(Y,{A:()=>T});var x=S(2284);function C(b){if(b===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b}function T(b,J){if(J&&((0,x.A)(J)=="object"||typeof J=="function"))return J;if(J!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return C(b)}}),467:((oe,Y,S)=>{S.d(Y,{A:()=>C});function x(T,b,J,w,n,f,U){try{var q=T[f](U),g=q.value}catch(h){return void J(h)}q.done?b(g):Promise.resolve(g).then(w,n)}function C(T){return function(){var b=this,J=arguments;return new Promise(function(w,n){var f=T.apply(b,J);function U(g){x(f,w,n,U,q,"next",g)}function q(g){x(f,w,n,U,q,"throw",g)}U(void 0)})}}}),477:(()=>{}),482:(function(oe,Y,S){(function(x,C,T){oe.exports=C(S(9021),S(7165))})(this,function(x){return x.pad.Iso97971={pad:function(C,T){C.concat(x.lib.WordArray.create([2147483648],1)),x.pad.ZeroPadding.pad(C,T)},unpad:function(C){x.pad.ZeroPadding.unpad(C),C.sigBytes--}},x.pad.Iso97971})}),579:((oe,Y,S)=>{var x=S(3738).default;function C(T){if(T!=null){var b=T[typeof Symbol=="function"&&Symbol.iterator||"@@iterator"],J=0;if(b)return b.call(T);if(typeof T.next=="function")return T;if(!isNaN(T.length))return{next:function(){return T&&J>=T.length&&(T=void 0),{value:T&&T[J++],done:!T}}}}throw new TypeError(x(T)+" is not iterable")}oe.exports=C,oe.exports.__esModule=!0,oe.exports.default=oe.exports}),736:((oe,Y,S)=>{function x(C){b.debug=b,b.default=b,b.coerce=q,b.disable=f,b.enable=w,b.enabled=U,b.humanize=S(6585),b.destroy=g,Object.keys(C).forEach(h=>{b[h]=C[h]}),b.names=[],b.skips=[],b.formatters={};function T(h){let k=0;for(let W=0;W<h.length;W++)k=(k<<5)-k+h.charCodeAt(W),k|=0;return b.colors[Math.abs(k)%b.colors.length]}b.selectColor=T;function b(h){let k,W=null,j,y;function d(...R){if(!d.enabled)return;const m=d,P=Number(new Date),H=P-(k||P);m.diff=H,m.prev=k,m.curr=P,k=P,R[0]=b.coerce(R[0]),typeof R[0]!="string"&&R.unshift("%O");let B=0;R[0]=R[0].replace(/%([a-zA-Z%])/g,(L,z)=>{if(L==="%%")return"%";B++;const V=b.formatters[z];if(typeof V=="function"){const X=R[B];L=V.call(m,X),R.splice(B,1),B--}return L}),b.formatArgs.call(m,R),(m.log||b.log).apply(m,R)}return d.namespace=h,d.useColors=b.useColors(),d.color=b.selectColor(h),d.extend=J,d.destroy=b.destroy,Object.defineProperty(d,"enabled",{enumerable:!0,configurable:!1,get:()=>W!==null?W:(j!==b.namespaces&&(j=b.namespaces,y=b.enabled(h)),y),set:R=>{W=R}}),typeof b.init=="function"&&b.init(d),d}function J(h,k){const W=b(this.namespace+(typeof k>"u"?":":k)+h);return W.log=this.log,W}function w(h){b.save(h),b.namespaces=h,b.names=[],b.skips=[];const k=(typeof h=="string"?h:"").trim().replace(/\s+/g,",").split(",").filter(Boolean);for(const W of k)W[0]==="-"?b.skips.push(W.slice(1)):b.names.push(W)}function n(h,k){let W=0,j=0,y=-1,d=0;for(;W<h.length;)if(j<k.length&&(k[j]===h[W]||k[j]==="*"))k[j]==="*"?(y=j,d=W,j++):(W++,j++);else if(y!==-1)j=y+1,d++,W=d;else return!1;for(;j<k.length&&k[j]==="*";)j++;return j===k.length}function f(){const h=[...b.names,...b.skips.map(k=>"-"+k)].join(",");return b.enable(""),h}function U(h){for(const k of b.skips)if(n(h,k))return!1;for(const k of b.names)if(n(h,k))return!0;return!1}function q(h){return h instanceof Error?h.stack||h.message:h}function g(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return b.enable(b.load()),b}oe.exports=x}),754:(function(oe,Y,S){(function(x,C){oe.exports=C(S(9021))})(this,function(x){return(function(){var C=x,T=C.lib,b=T.WordArray,J=C.enc;J.Base64={stringify:function(n){var f=n.words,U=n.sigBytes,q=this._map;n.clamp();for(var g=[],h=0;h<U;h+=3)for(var k=f[h>>>2]>>>24-h%4*8&255,W=f[h+1>>>2]>>>24-(h+1)%4*8&255,j=f[h+2>>>2]>>>24-(h+2)%4*8&255,y=k<<16|W<<8|j,d=0;d<4&&h+d*.75<U;d++)g.push(q.charAt(y>>>6*(3-d)&63));var R=q.charAt(64);if(R)for(;g.length%4;)g.push(R);return g.join("")},parse:function(n){var f=n.length,U=this._map,q=this._reverseMap;if(!q){q=this._reverseMap=[];for(var g=0;g<U.length;g++)q[U.charCodeAt(g)]=g}var h=U.charAt(64);if(h){var k=n.indexOf(h);k!==-1&&(f=k)}return w(n,f,q)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="};function w(n,f,U){for(var q=[],g=0,h=0;h<f;h++)if(h%4){var k=U[n.charCodeAt(h-1)]<<h%4*2,W=U[n.charCodeAt(h)]>>>6-h%4*2,j=k|W;q[g>>>2]|=j<<24-g%4*8,g++}return b.create(q,g)}})(),x.enc.Base64})}),816:((oe,Y,S)=>{S.d(Y,{A:()=>T});var x=S(2284);function C(b,J){if((0,x.A)(b)!="object"||!b)return b;var w=b[Symbol.toPrimitive];if(w!==void 0){var n=w.call(b,J);if((0,x.A)(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(J==="string"?String:Number)(b)}function T(b){var J=C(b,"string");return(0,x.A)(J)=="symbol"?J:J+""}}),867:((oe,Y,S)=>{Object.defineProperty(Y,"__esModule",{value:!0}),Y.ReactNative106=void 0;const x=S(7363),C=S(3953),T=S(2994),b=S(8046),J=S(4893),w=S(3303),n=S(1305),f=S(5544),U=S(5938),q=S(4256),g=new T.Logger("ReactNative106"),h="ReactNative106",k={OS:1024,MIS:1024};class W extends C.EnhancedEventEmitter{_closed=!1;_direction;_remoteSdp;_getSendExtendedRtpCapabilities;_forcedLocalDtlsRole;_pc;_mapMidTransceiver=new Map;_sendStream=new MediaStream;_hasDataChannelMediaSection=!1;_nextSendSctpStreamId=0;_transportReady=!1;static createFactory(){return{name:h,factory:y=>new W(y),getNativeRtpCapabilities:async()=>{g.debug("getNativeRtpCapabilities()");let y=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require"});try{y.addTransceiver("audio"),y.addTransceiver("video");const d=await y.createOffer();try{y.close()}catch{}y=void 0;const R=x.parse(d.sdp);return W.getLocalRtpCapabilities(R)}catch(d){try{y?.close()}catch{}throw y=void 0,d}},getNativeSctpCapabilities:async()=>(g.debug("getNativeSctpCapabilities()"),{numStreams:k})}}static getLocalRtpCapabilities(y){const d=f.extractRtpCapabilities({sdpObject:y});return b.validateAndNormalizeRtpCapabilities(d),q.addNackSupportForOpus(d),d}constructor({direction:y,iceParameters:d,iceCandidates:R,dtlsParameters:m,sctpParameters:P,iceServers:H,iceTransportPolicy:B,additionalSettings:$,getSendExtendedRtpCapabilities:L}){super(),g.debug("constructor()"),this._direction=y,this._remoteSdp=new n.RemoteSdp({iceParameters:d,iceCandidates:R,dtlsParameters:m,sctpParameters:P}),this._getSendExtendedRtpCapabilities=L,m.role&&m.role!=="auto"&&(this._forcedLocalDtlsRole=m.role==="server"?"client":"server"),this._pc=new RTCPeerConnection({iceServers:H??[],iceTransportPolicy:B??"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",...$}),this._pc.addEventListener("icegatheringstatechange",this.onIceGatheringStateChange),this._pc.addEventListener("icecandidateerror",this.onIceCandidateError),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",this.onConnectionStateChange):(g.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.addEventListener("iceconnectionstatechange",this.onIceConnectionStateChange))}get name(){return h}close(){if(g.debug("close()"),!this._closed){this._closed=!0,this._sendStream.release(!1);try{this._pc.close()}catch{}this._pc.removeEventListener("icegatheringstatechange",this.onIceGatheringStateChange),this._pc.removeEventListener("icecandidateerror",this.onIceCandidateError),this._pc.removeEventListener("connectionstatechange",this.onConnectionStateChange),this._pc.removeEventListener("iceconnectionstatechange",this.onIceConnectionStateChange),this.emit("@close"),super.close()}}async updateIceServers(y){this.assertNotClosed(),g.debug("updateIceServers()");const d=this._pc.getConfiguration();d.iceServers=y,this._pc.setConfiguration(d)}async restartIce(y){if(this.assertNotClosed(),g.debug("restartIce()"),this._remoteSdp.updateIceParameters(y),!!this._transportReady)if(this._direction==="send"){const d=await this._pc.createOffer({iceRestart:!0});g.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",d),await this._pc.setLocalDescription(d);const R={type:"answer",sdp:this._remoteSdp.getSdp()};g.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",R),await this._pc.setRemoteDescription(R)}else{const d={type:"offer",sdp:this._remoteSdp.getSdp()};g.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",d),await this._pc.setRemoteDescription(d);const R=await this._pc.createAnswer();g.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",R),await this._pc.setLocalDescription(R)}}async getTransportStats(){return this.assertNotClosed(),this._pc.getStats()}async send({track:y,encodings:d,codecOptions:R,codec:m,onRtpSender:P}){this.assertNotClosed(),this.assertSendDirection(),g.debug("send() [kind:%s, track.id:%s]",y.kind,y.id),d&&d.length>1&&d.forEach((ne,Oe)=>{ne.rid=`r${Oe}`});const H=this._remoteSdp.getNextMediaSectionIdx(),B=this._pc.addTransceiver(y,{direction:"sendonly",streams:[this._sendStream],sendEncodings:d});P&&P(B.sender);let $=await this._pc.createOffer(),L=x.parse($.sdp);L.extmapAllowMixed&&this._remoteSdp.setSessionExtmapAllowMixed();const z=W.getLocalRtpCapabilities(L),V=this._getSendExtendedRtpCapabilities(z),X=b.getSendingRtpParameters(y.kind,V);X.codecs=b.reduceCodecs(X.codecs,m);const G=b.getSendingRemoteRtpParameters(y.kind,V);G.codecs=b.reduceCodecs(G.codecs,m),this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:L});let ae=!1;const Q=(0,w.parse)((d??[{}])[0].scalabilityMode);let le;d&&d.length===1&&Q.spatialLayers>1&&X.codecs[0].mimeType.toLowerCase()==="video/vp9"&&(g.debug("send() | enabling legacy simulcast for VP9 SVC"),ae=!0,L=x.parse($.sdp),le=L.media[H.idx],U.addLegacySimulcast({offerMediaObject:le,numStreams:Q.spatialLayers}),$={type:"offer",sdp:x.write(L)}),g.debug("send() | calling pc.setLocalDescription() [offer:%o]",$),await this._pc.setLocalDescription($);let pe=B.mid??void 0;if(pe||g.warn("send() | missing transceiver.mid (bug in react-native-webrtc, using a workaround"),X.mid=pe,L=x.parse(this._pc.localDescription.sdp),le=L.media[H.idx],X.rtcp.cname=f.getCname({offerMediaObject:le}),!d)X.encodings=U.getRtpEncodings({offerMediaObject:le});else if(d.length===1){let ne=U.getRtpEncodings({offerMediaObject:le});Object.assign(ne[0],d[0]),ae&&(ne=[ne[0]]),X.encodings=ne}else X.encodings=d;if(X.encodings.length>1&&(X.codecs[0].mimeType.toLowerCase()==="video/vp8"||X.codecs[0].mimeType.toLowerCase()==="video/h264"))for(const ne of X.encodings)ne.scalabilityMode?ne.scalabilityMode=`L1T${Q.temporalLayers}`:ne.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:le,reuseMid:H.reuseMid,offerRtpParameters:X,answerRtpParameters:G,codecOptions:R});const ue={type:"answer",sdp:this._remoteSdp.getSdp()};return g.debug("send() | calling pc.setRemoteDescription() [answer:%o]",ue),await this._pc.setRemoteDescription(ue),pe||(pe=B.mid,X.mid=pe),this._mapMidTransceiver.set(pe,B),{localId:pe,rtpParameters:X,rtpSender:B.sender}}async stopSending(y){if(this.assertSendDirection(),this._closed)return;g.debug("stopSending() [localId:%s]",y);const d=this._mapMidTransceiver.get(y);if(!d)throw new Error("associated RTCRtpTransceiver not found");if(d.sender.replaceTrack(null),this._pc.removeTrack(d.sender),this._remoteSdp.closeMediaSection(d.mid))try{d.stop()}catch{}const m=await this._pc.createOffer();g.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",m),await this._pc.setLocalDescription(m);const P={type:"answer",sdp:this._remoteSdp.getSdp()};g.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",P),await this._pc.setRemoteDescription(P),this._mapMidTransceiver.delete(y)}async pauseSending(y){this.assertNotClosed(),this.assertSendDirection(),g.debug("pauseSending() [localId:%s]",y);const d=this._mapMidTransceiver.get(y);if(!d)throw new Error("associated RTCRtpTransceiver not found");d.direction="inactive",this._remoteSdp.pauseMediaSection(y);const R=await this._pc.createOffer();g.debug("pauseSending() | calling pc.setLocalDescription() [offer:%o]",R),await this._pc.setLocalDescription(R);const m={type:"answer",sdp:this._remoteSdp.getSdp()};g.debug("pauseSending() | calling pc.setRemoteDescription() [answer:%o]",m),await this._pc.setRemoteDescription(m)}async resumeSending(y){this.assertNotClosed(),this.assertSendDirection(),g.debug("resumeSending() [localId:%s]",y);const d=this._mapMidTransceiver.get(y);if(this._remoteSdp.resumeSendingMediaSection(y),!d)throw new Error("associated RTCRtpTransceiver not found");d.direction="sendonly";const R=await this._pc.createOffer();g.debug("resumeSending() | calling pc.setLocalDescription() [offer:%o]",R),await this._pc.setLocalDescription(R);const m={type:"answer",sdp:this._remoteSdp.getSdp()};g.debug("resumeSending() | calling pc.setRemoteDescription() [answer:%o]",m),await this._pc.setRemoteDescription(m)}async replaceTrack(y,d){this.assertNotClosed(),this.assertSendDirection(),d?g.debug("replaceTrack() [localId:%s, track.id:%s]",y,d.id):g.debug("replaceTrack() [localId:%s, no track]",y);const R=this._mapMidTransceiver.get(y);if(!R)throw new Error("associated RTCRtpTransceiver not found");await R.sender.replaceTrack(d)}async setMaxSpatialLayer(y,d){this.assertNotClosed(),this.assertSendDirection(),g.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",y,d);const R=this._mapMidTransceiver.get(y);if(!R)throw new Error("associated RTCRtpTransceiver not found");const m=R.sender.getParameters();m.encodings.forEach((B,$)=>{$<=d?B.active=!0:B.active=!1}),await R.sender.setParameters(m),this._remoteSdp.muxMediaSectionSimulcast(y,m.encodings);const P=await this._pc.createOffer();g.debug("setMaxSpatialLayer() | calling pc.setLocalDescription() [offer:%o]",P),await this._pc.setLocalDescription(P);const H={type:"answer",sdp:this._remoteSdp.getSdp()};g.debug("setMaxSpatialLayer() | calling pc.setRemoteDescription() [answer:%o]",H),await this._pc.setRemoteDescription(H)}async setRtpEncodingParameters(y,d){this.assertNotClosed(),this.assertSendDirection(),g.debug("setRtpEncodingParameters() [localId:%s, params:%o]",y,d);const R=this._mapMidTransceiver.get(y);if(!R)throw new Error("associated RTCRtpTransceiver not found");const m=R.sender.getParameters();m.encodings.forEach((B,$)=>{m.encodings[$]={...B,...d}}),await R.sender.setParameters(m),this._remoteSdp.muxMediaSectionSimulcast(y,m.encodings);const P=await this._pc.createOffer();g.debug("setRtpEncodingParameters() | calling pc.setLocalDescription() [offer:%o]",P),await this._pc.setLocalDescription(P);const H={type:"answer",sdp:this._remoteSdp.getSdp()};g.debug("setRtpEncodingParameters() | calling pc.setRemoteDescription() [answer:%o]",H),await this._pc.setRemoteDescription(H)}async getSenderStats(y){this.assertNotClosed(),this.assertSendDirection();const d=this._mapMidTransceiver.get(y);if(!d)throw new Error("associated RTCRtpTransceiver not found");return d.sender.getStats()}async sendDataChannel({ordered:y,maxPacketLifeTime:d,maxRetransmits:R,label:m,protocol:P}){this.assertNotClosed(),this.assertSendDirection();const H={negotiated:!0,id:this._nextSendSctpStreamId,ordered:y,maxPacketLifeTime:d,maxRetransmits:R,protocol:P};g.debug("sendDataChannel() [options:%o]",H);const B=this._pc.createDataChannel(m,H);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%k.MIS,!this._hasDataChannelMediaSection){const L=await this._pc.createOffer(),z=x.parse(L.sdp),V=z.media.find(G=>G.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:z}),g.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",L),await this._pc.setLocalDescription(L),this._remoteSdp.sendSctpAssociation({offerMediaObject:V});const X={type:"answer",sdp:this._remoteSdp.getSdp()};g.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",X),await this._pc.setRemoteDescription(X),this._hasDataChannelMediaSection=!0}const $={streamId:H.id,ordered:H.ordered,maxPacketLifeTime:H.maxPacketLifeTime,maxRetransmits:H.maxRetransmits};return{dataChannel:B,sctpStreamParameters:$}}async receive(y){this.assertNotClosed(),this.assertRecvDirection();const d=[],R=new Map;for(const B of y){const{trackId:$,kind:L,rtpParameters:z,streamId:V}=B;g.debug("receive() [trackId:%s, kind:%s]",$,L);const X=z.mid??String(this._mapMidTransceiver.size);R.set($,X),this._remoteSdp.receive({mid:X,kind:L,offerRtpParameters:z,streamId:V??z.rtcp.cname,trackId:$})}const m={type:"offer",sdp:this._remoteSdp.getSdp()};g.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",m),await this._pc.setRemoteDescription(m);for(const B of y){const{trackId:$,onRtpReceiver:L}=B;if(L){const z=R.get($),V=this._pc.getTransceivers().find(X=>X.mid===z);if(!V)throw new Error("transceiver not found");L(V.receiver)}}let P=await this._pc.createAnswer();const H=x.parse(P.sdp);for(const B of y){const{trackId:$,rtpParameters:L}=B,z=R.get($),V=H.media.find(X=>String(X.mid)===z);f.applyCodecParameters({offerRtpParameters:L,answerMediaObject:V})}P={type:"answer",sdp:x.write(H)},this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:H}),g.debug("receive() | calling pc.setLocalDescription() [answer:%o]",P),await this._pc.setLocalDescription(P);for(const B of y){const{trackId:$}=B,L=R.get($),z=this._pc.getTransceivers().find(V=>V.mid===L);if(z)this._mapMidTransceiver.set(L,z),d.push({localId:L,track:z.receiver.track,rtpReceiver:z.receiver});else throw new Error("new RTCRtpTransceiver not found")}return d}async stopReceiving(y){if(this.assertRecvDirection(),this._closed)return;for(const m of y){g.debug("stopReceiving() [localId:%s]",m);const P=this._mapMidTransceiver.get(m);if(!P)throw new Error("associated RTCRtpTransceiver not found");this._remoteSdp.closeMediaSection(P.mid)}const d={type:"offer",sdp:this._remoteSdp.getSdp()};g.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",d),await this._pc.setRemoteDescription(d);const R=await this._pc.createAnswer();g.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",R),await this._pc.setLocalDescription(R);for(const m of y)this._mapMidTransceiver.delete(m)}async pauseReceiving(y){this.assertNotClosed(),this.assertRecvDirection();for(const m of y){g.debug("pauseReceiving() [localId:%s]",m);const P=this._mapMidTransceiver.get(m);if(!P)throw new Error("associated RTCRtpTransceiver not found");P.direction="inactive",this._remoteSdp.pauseMediaSection(m)}const d={type:"offer",sdp:this._remoteSdp.getSdp()};g.debug("pauseReceiving() | calling pc.setRemoteDescription() [offer:%o]",d),await this._pc.setRemoteDescription(d);const R=await this._pc.createAnswer();g.debug("pauseReceiving() | calling pc.setLocalDescription() [answer:%o]",R),await this._pc.setLocalDescription(R)}async resumeReceiving(y){this.assertNotClosed(),this.assertRecvDirection();for(const m of y){g.debug("resumeReceiving() [localId:%s]",m);const P=this._mapMidTransceiver.get(m);if(!P)throw new Error("associated RTCRtpTransceiver not found");P.direction="recvonly",this._remoteSdp.resumeReceivingMediaSection(m)}const d={type:"offer",sdp:this._remoteSdp.getSdp()};g.debug("resumeReceiving() | calling pc.setRemoteDescription() [offer:%o]",d),await this._pc.setRemoteDescription(d);const R=await this._pc.createAnswer();g.debug("resumeReceiving() | calling pc.setLocalDescription() [answer:%o]",R),await this._pc.setLocalDescription(R)}async getReceiverStats(y){this.assertNotClosed(),this.assertRecvDirection();const d=this._mapMidTransceiver.get(y);if(!d)throw new Error("associated RTCRtpTransceiver not found");return d.receiver.getStats()}async receiveDataChannel({sctpStreamParameters:y,label:d,protocol:R}){this.assertNotClosed(),this.assertRecvDirection();const{streamId:m,ordered:P,maxPacketLifeTime:H,maxRetransmits:B}=y,$={negotiated:!0,id:m,ordered:P,maxPacketLifeTime:H,maxRetransmits:B,protocol:R};g.debug("receiveDataChannel() [options:%o]",$);const L=this._pc.createDataChannel(d,$);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation();const z={type:"offer",sdp:this._remoteSdp.getSdp()};g.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",z),await this._pc.setRemoteDescription(z);const V=await this._pc.createAnswer();if(!this._transportReady){const X=x.parse(V.sdp);await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:X})}g.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",V),await this._pc.setLocalDescription(V),this._hasDataChannelMediaSection=!0}return{dataChannel:L}}async setupTransport({localDtlsRole:y,localSdpObject:d}){d||(d=x.parse(this._pc.localDescription.sdp));const R=f.extractDtlsParameters({sdpObject:d});R.role=y,this._remoteSdp.updateDtlsRole(y==="client"?"server":"client"),await new Promise((m,P)=>{this.safeEmit("@connect",{dtlsParameters:R},m,P)}),this._transportReady=!0}onIceGatheringStateChange=()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)};onIceCandidateError=y=>{this.emit("@icecandidateerror",y)};onConnectionStateChange=()=>{this.emit("@connectionstatechange",this._pc.connectionState)};onIceConnectionStateChange=()=>{switch(this._pc.iceConnectionState){case"checking":{this.emit("@connectionstatechange","connecting");break}case"connected":case"completed":{this.emit("@connectionstatechange","connected");break}case"failed":{this.emit("@connectionstatechange","failed");break}case"disconnected":{this.emit("@connectionstatechange","disconnected");break}case"closed":{this.emit("@connectionstatechange","closed");break}}};assertNotClosed(){if(this._closed)throw new J.InvalidStateError("method called in a closed handler")}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}}Y.ReactNative106=W}),878:((oe,Y)=>{Object.defineProperty(Y,"__esModule",{value:!0}),Y.FakeEvent=void 0;class S{NONE=0;CAPTURING_PHASE=1;AT_TARGET=2;BUBBLING_PHASE=3;type;bubbles;cancelable;defaultPrevented=!1;composed=!1;currentTarget=null;eventPhase=this.NONE;isTrusted=!0;target=null;timeStamp=0;cancelBubble=!1;returnValue=!0;srcElement=null;constructor(C,T={}){this.type=C,this.bubbles=T.bubbles??!1,this.cancelable=T.cancelable??!1}preventDefault(){this.cancelable&&(this.defaultPrevented=!0)}stopPropagation(){}stopImmediatePropagation(){}composedPath(){return[]}initEvent(C,T,b){}}Y.FakeEvent=S}),887:((oe,Y,S)=>{var x=S(6993),C=S(1791);function T(b,J,w,n,f){return new C(x().w(b,J,w,n),f||Promise)}oe.exports=T,oe.exports.__esModule=!0,oe.exports.default=oe.exports}),955:(function(oe,Y,S){(function(x,C,T){oe.exports=C(S(9021),S(754),S(4636),S(9506),S(7165))})(this,function(x){return(function(){var C=x,T=C.lib,b=T.BlockCipher,J=C.algo,w=[],n=[],f=[],U=[],q=[],g=[],h=[],k=[],W=[],j=[];(function(){for(var R=[],m=0;m<256;m++)m<128?R[m]=m<<1:R[m]=m<<1^283;for(var P=0,H=0,m=0;m<256;m++){var B=H^H<<1^H<<2^H<<3^H<<4;B=B>>>8^B&255^99,w[P]=B,n[B]=P;var $=R[P],L=R[$],z=R[L],V=R[B]*257^B*16843008;f[P]=V<<24|V>>>8,U[P]=V<<16|V>>>16,q[P]=V<<8|V>>>24,g[P]=V;var V=z*16843009^L*65537^$*257^P*16843008;h[B]=V<<24|V>>>8,k[B]=V<<16|V>>>16,W[B]=V<<8|V>>>24,j[B]=V,P?(P=$^R[R[R[z^$]]],H^=R[R[H]]):P=H=1}})();var y=[0,1,2,4,8,16,32,64,128,27,54],d=J.AES=b.extend({_doReset:function(){var R;if(!(this._nRounds&&this._keyPriorReset===this._key)){for(var m=this._keyPriorReset=this._key,P=m.words,H=m.sigBytes/4,B=this._nRounds=H+6,$=(B+1)*4,L=this._keySchedule=[],z=0;z<$;z++)z<H?L[z]=P[z]:(R=L[z-1],z%H?H>6&&z%H==4&&(R=w[R>>>24]<<24|w[R>>>16&255]<<16|w[R>>>8&255]<<8|w[R&255]):(R=R<<8|R>>>24,R=w[R>>>24]<<24|w[R>>>16&255]<<16|w[R>>>8&255]<<8|w[R&255],R^=y[z/H|0]<<24),L[z]=L[z-H]^R);for(var V=this._invKeySchedule=[],X=0;X<$;X++){var z=$-X;if(X%4)var R=L[z];else var R=L[z-4];X<4||z<=4?V[X]=R:V[X]=h[w[R>>>24]]^k[w[R>>>16&255]]^W[w[R>>>8&255]]^j[w[R&255]]}}},encryptBlock:function(R,m){this._doCryptBlock(R,m,this._keySchedule,f,U,q,g,w)},decryptBlock:function(R,m){var P=R[m+1];R[m+1]=R[m+3],R[m+3]=P,this._doCryptBlock(R,m,this._invKeySchedule,h,k,W,j,n);var P=R[m+1];R[m+1]=R[m+3],R[m+3]=P},_doCryptBlock:function(R,m,P,H,B,$,L,z){for(var V=this._nRounds,X=R[m]^P[0],G=R[m+1]^P[1],ae=R[m+2]^P[2],Q=R[m+3]^P[3],le=4,pe=1;pe<V;pe++){var ue=H[X>>>24]^B[G>>>16&255]^$[ae>>>8&255]^L[Q&255]^P[le++],ne=H[G>>>24]^B[ae>>>16&255]^$[Q>>>8&255]^L[X&255]^P[le++],Oe=H[ae>>>24]^B[Q>>>16&255]^$[X>>>8&255]^L[G&255]^P[le++],ye=H[Q>>>24]^B[X>>>16&255]^$[G>>>8&255]^L[ae&255]^P[le++];X=ue,G=ne,ae=Oe,Q=ye}var ue=(z[X>>>24]<<24|z[G>>>16&255]<<16|z[ae>>>8&255]<<8|z[Q&255])^P[le++],ne=(z[G>>>24]<<24|z[ae>>>16&255]<<16|z[Q>>>8&255]<<8|z[X&255])^P[le++],Oe=(z[ae>>>24]<<24|z[Q>>>16&255]<<16|z[X>>>8&255]<<8|z[G&255])^P[le++],ye=(z[Q>>>24]<<24|z[X>>>16&255]<<16|z[G>>>8&255]<<8|z[ae&255])^P[le++];R[m]=ue,R[m+1]=ne,R[m+2]=Oe,R[m+3]=ye},keySize:256/32});C.AES=b._createHelper(d)})(),x.AES})}),1025:(function(oe,Y,S){(function(x,C){oe.exports=C(S(9021))})(this,function(x){(function(){var C=x,T=C.lib,b=T.Base,J=C.enc,w=J.Utf8,n=C.algo;n.HMAC=b.extend({init:function(f,U){f=this._hasher=new f.init,typeof U=="string"&&(U=w.parse(U));var q=f.blockSize,g=q*4;U.sigBytes>g&&(U=f.finalize(U)),U.clamp();for(var h=this._oKey=U.clone(),k=this._iKey=U.clone(),W=h.words,j=k.words,y=0;y<q;y++)W[y]^=1549556828,j[y]^=909522486;h.sigBytes=k.sigBytes=g,this.reset()},reset:function(){var f=this._hasher;f.reset(),f.update(this._iKey)},update:function(f){return this._hasher.update(f),this},finalize:function(f){var U=this._hasher,q=U.finalize(f);U.reset();var g=U.finalize(this._oKey.clone().concat(q));return g}})})()})}),1260:((oe,Y,S)=>{S.d(Y,{E:()=>x,t:()=>C});var x={WEBSOCKET_DISCONNECTED:1001,REMOVE_PEER:1002,REMOVE_PEER_VIEWER_MODE_CHANGED:1003,REMOVE_PEER_MEDIA_RELAY_STOP:1004,SWITCH_ROOM:1005,ROOM_CLOSE:1006,UNKNOWN:1007,REMOVE_ALL:1008,MEETING_END_API:1009,REMOVE_PEER_API:1010,DUPLICATE_PARTICIPANT:1011,MANUAL_LEAVE_CALLED:1101,WEBSOCKET_CONNECTION_ATTEMPTS_EXHAUSTED:1102,JOIN_ROOM_FAILED:1103,SWITCH_ROOM_FAILED:1104},C={WEBSOCKET_DISCONNECTED:{code:1001,message:"Socket disconnected"},REMOVE_PEER:{code:1002,message:"Participant was removed from the meeting"},REMOVE_PEER_VIEWER_MODE_CHANGED:{code:1003,message:"Participant Removed because viewer mode was changed"},REMOVE_PEER_MEDIA_RELAY_STOP:{code:1004,message:"Participant Removed because media relay was stopped"},SWITCH_ROOM:{code:1005,message:"Participant switched to a different room"},ROOM_CLOSE:{code:1006,message:"The meeting has been closed"},UNKNOWN:{code:1007,message:"Participant disconnected due to an unknown reason"},REMOVE_ALL:{code:1008,message:"Remove All from the meeting"},DUPLICATE_PARTICIPANT:{code:1011,message:"Leaving meeting, since this participantId joined from another device."},MEETING_END_API:{code:1009,message:"Meeting Ended."},REMOVE_PEER_API:{code:1010,message:"Participant removed from the meeting"},MANUAL_LEAVE_CALLED:{code:1101,message:"Participant manually called the leave() method to exit the meeting"},WEBSOCKET_CONNECTION_ATTEMPTS_EXHAUSTED:{code:1102,message:"Meeting left after multiple failed websocket connection attempts."},JOIN_ROOM_FAILED:{code:1103,message:"Meeting left due to an error while joining the room."},SWITCH_ROOM_FAILED:{code:1104,message:"Meeting left due to an error while switching rooms."}}}),1305:((oe,Y,S)=>{Object.defineProperty(Y,"__esModule",{value:!0}),Y.RemoteSdp=void 0;const x=S(7363),C=S(2994),T=S(3471),b=["av1","h264"],J=new C.Logger("RemoteSdp");class w{_iceParameters;_iceCandidates;_dtlsParameters;_sctpParameters;_plainRtpParameters;_mediaSections=[];_midToIndex=new Map;_firstMid;_sdpObject;constructor({iceParameters:f,iceCandidates:U,dtlsParameters:q,sctpParameters:g,plainRtpParameters:h}){if(this._iceParameters=f,this._iceCandidates=U,this._dtlsParameters=q,this._sctpParameters=g,this._plainRtpParameters=h,this._sdpObject={version:0,origin:{address:"0.0.0.0",ipVer:4,netType:"IN",sessionId:"10000",sessionVersion:0,username:"mediasoup-client"},name:"-",timing:{start:0,stop:0},media:[]},f?.iceLite&&(this._sdpObject.icelite="ice-lite"),q){this._sdpObject.msidSemantic={semantic:"WMS",token:"*"};const k=this._dtlsParameters.fingerprints.length;this._sdpObject.fingerprint={type:q.fingerprints[k-1].algorithm,hash:q.fingerprints[k-1].value},this._sdpObject.groups=[{type:"BUNDLE",mids:""}]}h&&(this._sdpObject.origin.address=h.ip,this._sdpObject.origin.ipVer=h.ipVersion)}updateIceParameters(f){J.debug("updateIceParameters() [iceParameters:%o]",f),this._iceParameters=f,this._sdpObject.icelite=f.iceLite?"ice-lite":void 0;for(const U of this._mediaSections)U.setIceParameters(f)}updateDtlsRole(f){J.debug("updateDtlsRole() [role:%s]",f),this._dtlsParameters.role=f;for(const U of this._mediaSections)U.setDtlsRole(f)}setSessionExtmapAllowMixed(){J.debug("setSessionExtmapAllowMixed()"),this._sdpObject.extmapAllowMixed="extmap-allow-mixed"}getNextMediaSectionIdx(){for(let f=0;f<this._mediaSections.length;++f){const U=this._mediaSections[f];if(U.closed)return{idx:f,reuseMid:U.mid}}return{idx:this._mediaSections.length}}send({offerMediaObject:f,reuseMid:U,offerRtpParameters:q,answerRtpParameters:g,codecOptions:h}){const k=new T.AnswerMediaSection({iceParameters:this._iceParameters,iceCandidates:this._iceCandidates,dtlsParameters:this._dtlsParameters,plainRtpParameters:this._plainRtpParameters,offerMediaObject:f,offerRtpParameters:q,answerRtpParameters:g,codecOptions:h}),W=k.getObject();W.rtp.find(y=>b.includes(y.codec.toLowerCase()))||(W.ext=W.ext?.filter(y=>y.uri!=="https://aomediacodec.github.io/av1-rtp-spec/#dependency-descriptor-rtp-header-extension")),U?this._replaceMediaSection(k,U):this._midToIndex.has(k.mid)?this._replaceMediaSection(k):this._addMediaSection(k)}receive({mid:f,kind:U,offerRtpParameters:q,streamId:g,trackId:h}){this.setSessionExtmapAllowMixed();const k=new T.OfferMediaSection({iceParameters:this._iceParameters,iceCandidates:this._iceCandidates,dtlsParameters:this._dtlsParameters,plainRtpParameters:this._plainRtpParameters,mid:f,kind:U,offerRtpParameters:q,streamId:g,trackId:h}),W=this._mediaSections.find(j=>j.closed);W?this._replaceMediaSection(k,W.mid):this._addMediaSection(k)}pauseMediaSection(f){this._findMediaSection(f).pause()}resumeSendingMediaSection(f){this._findMediaSection(f).resume()}resumeReceivingMediaSection(f){this._findMediaSection(f).resume()}disableMediaSection(f){this._findMediaSection(f).disable()}closeMediaSection(f){const U=this._findMediaSection(f);return f===this._firstMid?(J.debug("closeMediaSection() | cannot close first media section, disabling it instead [mid:%s]",f),this.disableMediaSection(f),!1):(U.close(),this._regenerateBundleMids(),!0)}muxMediaSectionSimulcast(f,U){const q=this._findMediaSection(f);q.muxSimulcastStreams(U),this._replaceMediaSection(q)}sendSctpAssociation({offerMediaObject:f}){const U=new T.AnswerMediaSection({iceParameters:this._iceParameters,iceCandidates:this._iceCandidates,dtlsParameters:this._dtlsParameters,sctpParameters:this._sctpParameters,plainRtpParameters:this._plainRtpParameters,offerMediaObject:f});this._addMediaSection(U)}receiveSctpAssociation(){const f=new T.OfferMediaSection({iceParameters:this._iceParameters,iceCandidates:this._iceCandidates,dtlsParameters:this._dtlsParameters,sctpParameters:this._sctpParameters,plainRtpParameters:this._plainRtpParameters,mid:"datachannel",kind:"application"});this._addMediaSection(f)}getSdp(){return this._sdpObject.origin.sessionVersion++,x.write(this._sdpObject)}_addMediaSection(f){this._firstMid||(this._firstMid=f.mid),this._mediaSections.push(f),this._midToIndex.set(f.mid,this._mediaSections.length-1),this._sdpObject.media.push(f.getObject()),this._regenerateBundleMids()}_replaceMediaSection(f,U){if(typeof U=="string"){const q=this._midToIndex.get(U);if(q===void 0)throw new Error(`no media section found for reuseMid '${U}'`);const g=this._mediaSections[q];this._mediaSections[q]=f,this._midToIndex.delete(g.mid),this._midToIndex.set(f.mid,q),this._sdpObject.media[q]=f.getObject(),this._regenerateBundleMids()}else{const q=this._midToIndex.get(f.mid);if(q===void 0)throw new Error(`no media section found with mid '${f.mid}'`);this._mediaSections[q]=f,this._sdpObject.media[q]=f.getObject()}}_findMediaSection(f){const U=this._midToIndex.get(f);if(U===void 0)throw new Error(`no media section found with mid '${f}'`);return this._mediaSections[U]}_regenerateBundleMids(){this._dtlsParameters&&(this._sdpObject.groups[0].mids=this._mediaSections.filter(f=>!f.closed).map(f=>f.mid).join(" "))}}Y.RemoteSdp=w}),1380:(function(oe,Y,S){(function(x,C,T){oe.exports=C(S(9021),S(3240))})(this,function(x){return(function(){var C=x,T=C.lib,b=T.Hasher,J=C.x64,w=J.Word,n=J.WordArray,f=C.algo;function U(){return w.create.apply(w,arguments)}var q=[U(1116352408,3609767458),U(1899447441,602891725),U(3049323471,3964484399),U(3921009573,2173295548),U(961987163,4081628472),U(1508970993,3053834265),U(2453635748,2937671579),U(2870763221,3664609560),U(3624381080,2734883394),U(310598401,1164996542),U(607225278,1323610764),U(1426881987,3590304994),U(1925078388,4068182383),U(2162078206,991336113),U(2614888103,633803317),U(3248222580,3479774868),U(3835390401,2666613458),U(4022224774,944711139),U(264347078,2341262773),U(604807628,2007800933),U(770255983,1495990901),U(1249150122,1856431235),U(1555081692,3175218132),U(1996064986,2198950837),U(2554220882,3999719339),U(2821834349,766784016),U(2952996808,2566594879),U(3210313671,3203337956),U(3336571891,1034457026),U(3584528711,2466948901),U(113926993,3758326383),U(338241895,168717936),U(666307205,1188179964),U(773529912,1546045734),U(1294757372,1522805485),U(1396182291,2643833823),U(1695183700,2343527390),U(1986661051,1014477480),U(2177026350,1206759142),U(2456956037,344077627),U(2730485921,1290863460),U(2820302411,3158454273),U(3259730800,3505952657),U(3345764771,106217008),U(3516065817,3606008344),U(3600352804,1432725776),U(4094571909,1467031594),U(275423344,851169720),U(430227734,3100823752),U(506948616,1363258195),U(659060556,3750685593),U(883997877,3785050280),U(958139571,3318307427),U(1322822218,3812723403),U(1537002063,2003034995),U(1747873779,3602036899),U(1955562222,1575990012),U(2024104815,1125592928),U(2227730452,2716904306),U(2361852424,442776044),U(2428436474,593698344),U(2756734187,3733110249),U(3204031479,2999351573),U(3329325298,3815920427),U(3391569614,3928383900),U(3515267271,566280711),U(3940187606,3454069534),U(4118630271,4000239992),U(116418474,1914138554),U(174292421,2731055270),U(289380356,3203993006),U(460393269,320620315),U(685471733,587496836),U(852142971,1086792851),U(1017036298,365543100),U(1126000580,2618297676),U(1288033470,3409855158),U(1501505948,4234509866),U(1607167915,987167468),U(1816402316,1246189591)],g=[];(function(){for(var k=0;k<80;k++)g[k]=U()})();var h=f.SHA512=b.extend({_doReset:function(){this._hash=new n.init([new w.init(1779033703,4089235720),new w.init(3144134277,2227873595),new w.init(1013904242,4271175723),new w.init(2773480762,1595750129),new w.init(1359893119,2917565137),new w.init(2600822924,725511199),new w.init(528734635,4215389547),new w.init(1541459225,327033209)])},_doProcessBlock:function(k,W){for(var j=this._hash.words,y=j[0],d=j[1],R=j[2],m=j[3],P=j[4],H=j[5],B=j[6],$=j[7],L=y.high,z=y.low,V=d.high,X=d.low,G=R.high,ae=R.low,Q=m.high,le=m.low,pe=P.high,ue=P.low,ne=H.high,Oe=H.low,ye=B.high,_e=B.low,Se=$.high,ze=$.low,Vt=L,tr=z,gr=V,jt=X,Pr=G,qa=ae,Ua=Q,br=le,zr=pe,ar=ue,Wa=ne,Gr=Oe,pn=ye,nt=_e,et=Se,ir=ze,Lr=0;Lr<80;Lr++){var pa,za,Za=g[Lr];if(Lr<16)za=Za.high=k[W+Lr*2]|0,pa=Za.low=k[W+Lr*2+1]|0;else{var zt=g[Lr-15],He=zt.high,yt=zt.low,Xe=(He>>>1|yt<<31)^(He>>>8|yt<<24)^He>>>7,kt=(yt>>>1|He<<31)^(yt>>>8|He<<24)^(yt>>>7|He<<25),Or=g[Lr-2],Ce=Or.high,fr=Or.low,Sr=(Ce>>>19|fr<<13)^(Ce<<3|fr>>>29)^Ce>>>6,Rt=(fr>>>19|Ce<<13)^(fr<<3|Ce>>>29)^(fr>>>6|Ce<<26),Rr=g[Lr-7],aa=Rr.high,Ke=Rr.low,Xt=g[Lr-16],Ht=Xt.high,Qt=Xt.low;pa=kt+Ke,za=Xe+aa+(pa>>>0<kt>>>0?1:0),pa=pa+Rt,za=za+Sr+(pa>>>0<Rt>>>0?1:0),pa=pa+Qt,za=za+Ht+(pa>>>0<Qt>>>0?1:0),Za.high=za,Za.low=pa}var rt=zr&Wa^~zr&pn,Tt=ar&Gr^~ar&nt,yr=Vt&gr^Vt&Pr^gr&Pr,ur=tr&jt^tr&qa^jt&qa,wr=(Vt>>>28|tr<<4)^(Vt<<30|tr>>>2)^(Vt<<25|tr>>>7),$r=(tr>>>28|Vt<<4)^(tr<<30|Vt>>>2)^(tr<<25|Vt>>>7),Ha=(zr>>>14|ar<<18)^(zr>>>18|ar<<14)^(zr<<23|ar>>>9),nn=(ar>>>14|zr<<18)^(ar>>>18|zr<<14)^(ar<<23|zr>>>9),qn=q[Lr],hn=qn.high,ca=qn.low,Kr=ir+nn,Oa=et+Ha+(Kr>>>0<ir>>>0?1:0),Kr=Kr+Tt,Oa=Oa+rt+(Kr>>>0<Tt>>>0?1:0),Kr=Kr+ca,Oa=Oa+hn+(Kr>>>0<ca>>>0?1:0),Kr=Kr+pa,Oa=Oa+za+(Kr>>>0<pa>>>0?1:0),jn=$r+ur,Qn=wr+yr+(jn>>>0<$r>>>0?1:0);et=pn,ir=nt,pn=Wa,nt=Gr,Wa=zr,Gr=ar,ar=br+Kr|0,zr=Ua+Oa+(ar>>>0<br>>>0?1:0)|0,Ua=Pr,br=qa,Pr=gr,qa=jt,gr=Vt,jt=tr,tr=Kr+jn|0,Vt=Oa+Qn+(tr>>>0<Kr>>>0?1:0)|0}z=y.low=z+tr,y.high=L+Vt+(z>>>0<tr>>>0?1:0),X=d.low=X+jt,d.high=V+gr+(X>>>0<jt>>>0?1:0),ae=R.low=ae+qa,R.high=G+Pr+(ae>>>0<qa>>>0?1:0),le=m.low=le+br,m.high=Q+Ua+(le>>>0<br>>>0?1:0),ue=P.low=ue+ar,P.high=pe+zr+(ue>>>0<ar>>>0?1:0),Oe=H.low=Oe+Gr,H.high=ne+Wa+(Oe>>>0<Gr>>>0?1:0),_e=B.low=_e+nt,B.high=ye+pn+(_e>>>0<nt>>>0?1:0),ze=$.low=ze+ir,$.high=Se+et+(ze>>>0<ir>>>0?1:0)},_doFinalize:function(){var k=this._data,W=k.words,j=this._nDataBytes*8,y=k.sigBytes*8;W[y>>>5]|=128<<24-y%32,W[(y+128>>>10<<5)+30]=Math.floor(j/4294967296),W[(y+128>>>10<<5)+31]=j,k.sigBytes=W.length*4,this._process();var d=this._hash.toX32();return d},clone:function(){var k=b.clone.call(this);return k._hash=this._hash.clone(),k},blockSize:1024/32});C.SHA512=b._createHelper(h),C.HmacSHA512=b._createHmacHelper(h)})(),x.SHA512})}),1396:(function(oe,Y,S){(function(x,C,T){oe.exports=C(S(9021),S(3240),S(6440),S(5503),S(754),S(4725),S(4636),S(5471),S(3009),S(6308),S(1380),S(9557),S(5953),S(8056),S(1025),S(19),S(9506),S(7165),S(2169),S(6939),S(6372),S(3797),S(8454),S(2073),S(4905),S(482),S(2155),S(8124),S(25),S(955),S(7628),S(7193),S(6298),S(2696),S(3128))})(this,function(x){return x})}),1765:((oe,Y)=>{Object.defineProperty(Y,"__esModule",{value:!0}),Y.clone=S,Y.generateRandomNumber=x,Y.deepFreeze=C;function S(T){if(T!==void 0)return Number.isNaN(T)?NaN:typeof structuredClone=="function"?structuredClone(T):JSON.parse(JSON.stringify(T))}function x(){return Math.round(Math.random()*1e7)}function C(T){const b=Reflect.ownKeys(T);for(const J of b){const w=T[J];(w&&typeof w=="object"||typeof w=="function")&&C(w)}return Object.freeze(T)}}),1791:((oe,Y,S)=>{var x=S(5172),C=S(5546);function T(b,J){function w(f,U,q,g){try{var h=b[f](U),k=h.value;return k instanceof x?J.resolve(k.v).then(function(W){w("next",W,q,g)},function(W){w("throw",W,q,g)}):J.resolve(k).then(function(W){h.value=W,q(h)},function(W){return w("throw",W,q,g)})}catch(W){g(W)}}var n;this.next||(C(T.prototype),C(T.prototype,typeof Symbol=="function"&&Symbol.asyncIterator||"@asyncIterator",function(){return this})),C(this,"_invoke",function(f,U,q){function g(){return new J(function(h,k){w(f,q,h,k)})}return n=n?n.then(g,g):g()},!0)}oe.exports=T,oe.exports.__esModule=!0,oe.exports.default=oe.exports}),1803:((oe,Y,S)=>{S.d(Y,{ed:()=>z,sg:()=>V,v7:()=>R});var x=S(4467),C=S(296),T=S(9027),b=S(6565);function J(X,G){var ae=Object.keys(X);if(Object.getOwnPropertySymbols){var Q=Object.getOwnPropertySymbols(X);G&&(Q=Q.filter(function(le){return Object.getOwnPropertyDescriptor(X,le).enumerable})),ae.push.apply(ae,Q)}return ae}function w(X){for(var G=1;G<arguments.length;G++){var ae=arguments[G]!=null?arguments[G]:{};G%2?J(Object(ae),!0).forEach(function(Q){(0,x.A)(X,Q,ae[Q])}):Object.getOwnPropertyDescriptors?Object.defineProperties(X,Object.getOwnPropertyDescriptors(ae)):J(Object(ae)).forEach(function(Q){Object.defineProperty(X,Q,Object.getOwnPropertyDescriptor(ae,Q))})}return X}var n={},f={},U={};for(var q in T.$.videoProfiles)T.$.videoProfiles[q].aspectRatio=="oneSixNine"&&(n[q]=T.$.videoProfiles[q],n[q].encoding={bitrates:n[q].bitrates,maxFramerate:n[q].frameRate}),T.$.videoProfiles[q].aspectRatio=="fourThree"&&(f[q]=T.$.videoProfiles[q],f[q].encoding={bitrates:f[q].bitrates,maxFramerate:f[q].frameRate});for(var q in T.$.screenShareProfiles)U[q]=T.$.screenShareProfiles[q],U[q].encoding={maxBitrate:U[q].bitRate,maxFramerate:U[q].frameRate};var g=Object.values(n),h=Object.values(f),k=Object.values(U),W={web:{default:[n.h180p_w320p,n.h360p_w640p],1080:[n.h360p_w640p,n.h540p_w960p],1440:[n.h360p_w640p,n.h720p_w1280p],2160:[n.h540p_w960p,n.h1080p_w1920p]},"react-native":{default:[n.h90p_w160p,n.h360p_w640p],1080:[n.h360p_w640p,n.h540p_w960p],1440:[n.h360p_w640p,n.h720p_w1280p],2160:[n.h540p_w960p,n.h1080p_w1920p]}},j={web:{default:[f.h180p_w240p,f.h360p_w480p],1080:[f.h360p_w480p,f.h540p_w720p],1440:[f.h360p_w480p,f.h720p_w960p]},"react-native":{default:[f.h240p_w320p,f.h480p_w640p],1080:[f.h480p_w640p,f.h720p_w960p],1440:[f.h360p_w480p,f.h720p_w960p]}},y=function(G){var ae=[{scaleResolutionDownBy:2,fps:3}];return ae.map(function(Q){var le;return{width:Math.floor(G.width/Q.scaleResolutionDownBy),height:Math.floor(G.height/Q.scaleResolutionDownBy),encodings:{maxBitrate:Math.max(15e4,Math.floor(G.encoding.maxBitrate/(Math.pow(Q.scaleResolutionDownBy,2)*(((le=G.encoding.maxFramerate)!==null&&le!==void 0?le:30)/Q.fps)))),maxFramerate:Q.fps}}})},d=["q","h","f"];function R(X,G,ae,Q,le,pe,ue,ne,Oe){var ye=le&&le.videoEncoding;X&&(ye=le&&le.screenShareEncoding);var _e=le?.simulcast;if(Oe===1&&(_e=!1),ye||(ye=m(X,G,ae,Q,ue,ne)),!_e)return[ye];var Se=T.$.videoProfiles[Q],ze=G||Se?.width,Vt=ae||Se?.height,tr={width:ze,height:Vt,encoding:{maxBitrate:ye.maxBitrate,maxFramerate:ye.maxFramerate,bitrates:ye.bitrates}},gr=[];gr=B(X,tr,ue);var jt,Pr=gr[0];if(gr.length>1&&Oe>=3){var qa=gr,Ua=(0,C.A)(qa,2);jt=Ua[1]}var br=Math.max(ze,Vt);return br>=960&&jt?$(ze,Vt,[Pr,jt,tr],pe):br>=480?$(ze,Vt,[Pr,tr],pe):$(ze,Vt,[tr],pe)}function m(X,G,ae,Q,le,pe){for(var ue=T.$.videoProfiles[Q],ne=P(X,G||ue?.width,ae||ue?.height),Oe=ne[0].encoding,ye=Math.max(G,ae),_e=0;_e<ne.length;_e+=1){var Se=ne[_e];if(Oe=Se.encoding,X||(pe=pe||b.x.BALANCED,Oe.maxBitrate=Oe.bitrates[le][pe]),ue){if(Se.width==ue.width&&Se.height==ue.height)break}else if(Se.width>=ye)break}return Oe}function P(X,G,ae){if(X)return k;var Q=G>ae?G/ae:ae/G;return Math.abs(Q-1.7777777777777777)<Math.abs(Q-1.3333333333333333)?g:h}function H(X,G,ae){return G===169?X>=2160?W[ae][2160]:X>=1440?W[ae][1440]:X>=1080?W[ae][1080]:W[ae].default:X>=1440?j[ae][1440]:X>=1080?j[ae][1080]:j[ae].default}function B(X,G,ae){X&&y(G);var Q=G.width,le=G.height,pe=Q>le?Q/le:le/Q;return Math.abs(pe-1.7777777777777777)<Math.abs(pe-1.3333333333333333)?H(le,169,ae):H(le,43,ae)}function $(X,G,ae,Q){var le=[];return ae.forEach(function(pe,ue){if(!(ue>=d.length)){var ne=Q?null:{maxFramerate:pe.encoding.maxFramerate},Oe=Math.min(X,G),ye=d[ue],_e=w({rid:ye,scaleResolutionDownBy:Oe/Math.min(pe.width,pe.height),maxBitrate:pe.encoding.maxBitrate,bitrates:pe.encoding.bitrates},ne);le.push(_e)}}),le}function L(X){var G=[];if(!(!X||X.length==0)){if(X.length===1){for(var ae=3,Q=0;Q<ae;Q++)G.push(Math.pow(2,ae-Q-1));return G}var le=!1;return X.forEach(function(pe){pe.scaleResolutionDownBy!==void 0?(le=!0,G.push(Math.max(1,pe.scaleResolutionDownBy))):G.push(1)}),le||X.forEach(function(pe,ue){G[ue]=Math.pow(2,X.length-ue-1)}),G}}function z(X,G,ae){if(!X)return{};var Q=X.id,le=X.appData,pe=le.width,ue=le.height,ne=le.encodings;try{var Oe=L(ne);if(!Oe)return{};var ye=Oe.map(function(gr){return{width:pe/gr,height:ue/gr}}),_e=ye.sort(function(gr,jt){return gr.width-jt.width}),Se=_e.findIndex(function(gr){return gr.width>=G&&gr.height>=ae});Se===-1&&(Se=_e.length-1);var ze=X.temporalLayers?X.temporalLayers:2;if(Se===0&&ze>0){var Vt=pe/Oe[0],tr=ue/Oe[0];G<Vt*.5&&ae<tr*.5&&(ze-=1),ze>0&&G<Vt*.25&&ae<tr*.25&&(ze-=1)}return{consumerId:Q,newPreferredSpatialLayer:Math.max(0,Se),newPreferredTemporalLayer:Math.max(0,ze)}}catch{return{}}}function V(X,G){var ae;return function(){for(var Q=this,le=arguments.length,pe=new Array(le),ue=0;ue<le;ue++)pe[ue]=arguments[ue];clearTimeout(ae),ae=setTimeout(function(){return X.apply(Q,pe)},G)}}}),1806:((oe,Y,S)=>{S.d(Y,{$Q:()=>C,T4:()=>b,Ts:()=>w,ue:()=>J});var x=10,C="vk_e2ee",T="VideoSDKEncryptionRatchetSalt",b={sharedKey:!1,ratchetSalt:T,ratchetWindowSize:0,failureTolerance:x,keyringSize:16,discardFrameWhenCryptorNotReady:!1},J=["vp8","vp9","h264","av1"],w=["opus"]}),2067:((oe,Y,S)=>{S.d(Y,{y:()=>x});var x={RELIABLE:"RELIABLE",UNRELIABLE:"UNRELIABLE"}}),2073:(function(oe,Y,S){(function(x,C,T){oe.exports=C(S(9021),S(7165))})(this,function(x){return x.pad.AnsiX923={pad:function(C,T){var b=C.sigBytes,J=T*4,w=J-b%J,n=b+w-1;C.clamp(),C.words[n>>>2]|=w<<24-n%4*8,C.sigBytes+=w},unpad:function(C){var T=C.words[C.sigBytes-1>>>2]&255;C.sigBytes-=T}},x.pad.Ansix923})}),2107:((oe,Y,S)=>{S.d(Y,{kR:()=>C,nI:()=>x,wZ:()=>T});var x={CONFERENCE:"CONFERENCE",VIEWER:"VIEWER",SEND_AND_RECV:"SEND_AND_RECV",SIGNALLING_ONLY:"SIGNALLING_ONLY",RECV_ONLY:"RECV_ONLY"};function C(b){return b===x.CONFERENCE||b===x.SEND_AND_RECV}function T(b){return b===x.VIEWER||b===x.SIGNALLING_ONLY}}),2109:(function(oe,Y,S){var x;(function(C,T){var b="2.0.7",J=500,w="user-agent",n="",f="?",U={FUNCTION:"function",OBJECT:"object",STRING:"string",UNDEFINED:"undefined"},q="browser",g="cpu",h="device",k="engine",W="os",j="result",y="name",d="type",R="vendor",m="version",P="architecture",H="major",B="model",$="console",L="mobile",z="tablet",V="smarttv",X="wearable",G="xr",ae="embedded",Q="inapp",le="brands",pe="formFactors",ue="fullVersionList",ne="platform",Oe="platformVersion",ye="bitness",_e="sec-ch-ua",Se=_e+"-full-version-list",ze=_e+"-arch",Vt=_e+"-"+ye,tr=_e+"-form-factors",gr=_e+"-"+L,jt=_e+"-"+B,Pr=_e+"-"+ne,qa=Pr+"-version",Ua=[le,ue,L,B,ne,Oe,P,pe,ye],br="Amazon",zr="Apple",ar="ASUS",Wa="BlackBerry",Gr="Google",pn="Huawei",nt="Lenovo",et="Honor",ir="LG",Lr="Microsoft",pa="Motorola",za="Nvidia",Za="OnePlus",zt="OPPO",He="Samsung",yt="Sharp",Xe="Sony",kt="Xiaomi",Or="Zebra",Ce="Chrome",fr="Chromium",Sr="Chromecast",Rt="Edge",Rr="Firefox",aa="Opera",Ke="Facebook",Xt="Sogou",Ht="Mobile ",Qt=" Browser",rt="Windows",Tt=typeof C!==U.UNDEFINED,yr=Tt&&C.navigator?C.navigator:T,ur=yr&&yr.userAgentData?yr.userAgentData:T,wr=function(We,_t){var Mt={},$t=_t;if(!nn(_t)){$t={};for(var Br in _t)for(var jr in _t[Br])$t[jr]=_t[Br][jr].concat($t[jr]?$t[jr]:[])}for(var Dt in We)Mt[Dt]=$t[Dt]&&$t[Dt].length%2===0?$t[Dt].concat(We[Dt]):We[Dt];return Mt},$r=function(We){for(var _t={},Mt=0;Mt<We.length;Mt++)_t[We[Mt].toUpperCase()]=We[Mt];return _t},Ha=function(We,_t){if(typeof We===U.OBJECT&&We.length>0){for(var Mt in We)if(ca(_t)==ca(We[Mt]))return!0;return!1}return qn(We)?ca(_t)==ca(We):!1},nn=function(We,_t){for(var Mt in We)return/^(browser|cpu|device|engine|os)$/.test(Mt)||(_t?nn(We[Mt]):!1)},qn=function(We){return typeof We===U.STRING},hn=function(We){if(!We)return T;for(var _t=[],Mt=jn(/\\?\"/g,We).split(","),$t=0;$t<Mt.length;$t++)if(Mt[$t].indexOf(";")>-1){var Br=di(Mt[$t]).split(";v=");_t[$t]={brand:Br[0],version:Br[1]}}else _t[$t]=di(Mt[$t]);return _t},ca=function(We){return qn(We)?We.toLowerCase():We},Kr=function(We){return qn(We)?jn(/[^\d\.]/g,We).split(".")[0]:T},Oa=function(We){for(var _t in We)if(We.hasOwnProperty(_t)){var Mt=We[_t];typeof Mt==U.OBJECT&&Mt.length==2?this[Mt[0]]=Mt[1]:this[Mt]=T}return this},jn=function(We,_t){return qn(_t)?_t.replace(We,n):_t},Qn=function(We){return jn(/\\?\"/g,We)},di=function(We,_t){return We=jn(/^\s\s*/,String(We)),typeof _t===U.UNDEFINED?We:We.substring(0,_t)},qi=function(We,_t){if(!(!We||!_t))for(var Mt=0,$t,Br,jr,Dt,Xr,Nr;Mt<_t.length&&!Xr;){var Ca=_t[Mt],Ka=_t[Mt+1];for($t=Br=0;$t<Ca.length&&!Xr&&Ca[$t];)if(Xr=Ca[$t++].exec(We),Xr)for(jr=0;jr<Ka.length;jr++)Nr=Xr[++Br],Dt=Ka[jr],typeof Dt===U.OBJECT&&Dt.length>0?Dt.length===2?typeof Dt[1]==U.FUNCTION?this[Dt[0]]=Dt[1].call(this,Nr):this[Dt[0]]=Dt[1]:Dt.length>=3&&(typeof Dt[1]===U.FUNCTION&&!(Dt[1].exec&&Dt[1].test)?Dt.length>3?this[Dt[0]]=Nr?Dt[1].apply(this,Dt.slice(2)):T:this[Dt[0]]=Nr?Dt[1].call(this,Nr,Dt[2]):T:Dt.length==3?this[Dt[0]]=Nr?Nr.replace(Dt[1],Dt[2]):T:Dt.length==4?this[Dt[0]]=Nr?Dt[3].call(this,Nr.replace(Dt[1],Dt[2])):T:Dt.length>4&&(this[Dt[0]]=Nr?Dt[3].apply(this,[Nr.replace(Dt[1],Dt[2])].concat(Dt.slice(4))):T)):this[Dt]=Nr||T;Mt+=2}},sn=function(We,_t){for(var Mt in _t)if(typeof _t[Mt]===U.OBJECT&&_t[Mt].length>0){for(var $t=0;$t<_t[Mt].length;$t++)if(Ha(_t[Mt][$t],We))return Mt===f?T:Mt}else if(Ha(_t[Mt],We))return Mt===f?T:Mt;return _t.hasOwnProperty("*")?_t["*"]:We},Wi={ME:"4.90","NT 3.51":"3.51","NT 4.0":"4.0",2e3:["5.0","5.01"],XP:["5.1","5.2"],Vista:"6.0",7:"6.1",8:"6.2","8.1":"6.3",10:["6.4","10.0"],NT:""},Xn={embedded:"Automotive",mobile:"Mobile",tablet:["Tablet","EInk"],smarttv:"TV",wearable:"Watch",xr:["VR","XR"],"?":["Desktop","Unknown"],"*":T},Ei={Chrome:"Google Chrome",Edge:"Microsoft Edge","Edge WebView2":"Microsoft Edge WebView2","Chrome WebView":"Android WebView","Chrome Headless":"HeadlessChrome","Huawei Browser":"HuaweiBrowser","MIUI Browser":"Miui Browser","Opera Mobi":"OperaMobile",Yandex:"YaBrowser"},Pi={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[m,[y,Ht+"Chrome"]],[/webview.+edge\/([\w\.]+)/i],[m,[y,Rt+" WebView"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[m,[y,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[y,m],[/opios[\/ ]+([\w\.]+)/i],[m,[y,aa+" Mini"]],[/\bop(?:rg)?x\/([\w\.]+)/i],[m,[y,aa+" GX"]],[/\bopr\/([\w\.]+)/i],[m,[y,aa]],[/\bb[ai]*d(?:uhd|[ub]*[aekoprswx]{5,6})[\/ ]?([\w\.]+)/i],[m,[y,"Baidu"]],[/\b(?:mxbrowser|mxios|myie2)\/?([-\w\.]*)\b/i],[m,[y,"Maxthon"]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer|sleipnir)[\/ ]?([\w\.]*)/i,/(avant|iemobile|slim(?:browser|boat|jet))[\/ ]?([\d\.]*)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(atlas|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|duckduckgo|klar|helio|(?=comodo_)?dragon|otter|dooble|(?:lg |qute)browser|palemoon)\/([-\w\.]+)/i,/(heytap|ovi|115|surf|qwant)browser\/([\d\.]+)/i,/(qwant)(?:ios|mobile)\/([\d\.]+)/i,/(ecosia|weibo)(?:__| \w+@)([\d\.]+)/i],[y,m],[/quark(?:pc)?\/([-\w\.]+)/i],[m,[y,"Quark"]],[/\bddg\/([\w\.]+)/i],[m,[y,"DuckDuckGo"]],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[m,[y,"UCBrowser"]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i,/micromessenger\/([\w\.]+)/i],[m,[y,"WeChat"]],[/konqueror\/([\w\.]+)/i],[m,[y,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[m,[y,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[m,[y,"Yandex"]],[/slbrowser\/([\w\.]+)/i],[m,[y,"Smart "+nt+Qt]],[/(avast|avg)\/([\w\.]+)/i],[[y,/(.+)/,"$1 Secure"+Qt],m],[/\bfocus\/([\w\.]+)/i],[m,[y,Rr+" Focus"]],[/\bopt\/([\w\.]+)/i],[m,[y,aa+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[m,[y,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[m,[y,"Dolphin"]],[/coast\/([\w\.]+)/i],[m,[y,aa+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[m,[y,"MIUI"+Qt]],[/fxios\/([\w\.-]+)/i],[m,[y,Ht+Rr]],[/\bqihoobrowser\/?([\w\.]*)/i],[m,[y,"360"]],[/\b(qq)\/([\w\.]+)/i],[[y,/(.+)/,"$1Browser"],m],[/(oculus|sailfish|huawei|vivo|pico)browser\/([\w\.]+)/i],[[y,/(.+)/,"$1"+Qt],m],[/samsungbrowser\/([\w\.]+)/i],[m,[y,He+" Internet"]],[/metasr[\/ ]?([\d\.]+)/i],[m,[y,Xt+" Explorer"]],[/(sogou)mo\w+\/([\d\.]+)/i],[[y,Xt+" Mobile"],m],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|2345(?=browser|chrome|explorer))\w*[\/ ]?v?([\w\.]+)/i],[y,m],[/(lbbrowser|rekonq|steam(?= (clie|tenf|gameo)))/i],[y],[/ome\/([\w\.]+) \w* ?(iron) saf/i,/ome\/([\w\.]+).+qihu (360)[es]e/i],[m,y],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[y,Ke],m,[d,Q]],[/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/(daum)apps[\/ ]([\w\.]+)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(alipay)client\/([\w\.]+)/i,/(twitter)(?:and| f.+e\/([\w\.]+))/i,/(bing)(?:web|sapphire)\/([\w\.]+)/i,/(instagram|snapchat|klarna)[\/ ]([-\w\.]+)/i],[y,m,[d,Q]],[/\bgsa\/([\w\.]+) .*safari\//i],[m,[y,"GSA"],[d,Q]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[m,[y,"TikTok"],[d,Q]],[/\[(linkedin)app\]/i],[y,[d,Q]],[/(zalo(?:app)?)[\/\sa-z]*([\w\.-]+)/i],[[y,/(.+)/,"Zalo"],m,[d,Q]],[/(chromium)[\/ ]([-\w\.]+)/i],[y,m],[/headlesschrome(?:\/([\w\.]+)| )/i],[m,[y,Ce+" Headless"]],[/wv\).+chrome\/([\w\.]+).+edgw\//i],[m,[y,Rt+" WebView2"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[y,Ce+" WebView"],m],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[m,[y,"Android"+Qt]],[/chrome\/([\w\.]+) mobile/i],[m,[y,Ht+"Chrome"]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[y,m],[/version\/([\w\.\,]+) .*mobile(?:\/\w+ | ?)safari/i],[m,[y,Ht+"Safari"]],[/iphone .*mobile(?:\/\w+ | ?)safari/i],[[y,Ht+"Safari"]],[/version\/([\w\.\,]+) .*(safari)/i],[m,y],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[y,[m,"1"]],[/(webkit|khtml)\/([\w\.]+)/i],[y,m],[/(?:mobile|tablet);.*(firefox)\/([\w\.-]+)/i],[[y,Ht+Rr],m],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[y,"Netscape"],m],[/(wolvic|librewolf)\/([\w\.]+)/i],[y,m],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[m,[y,Rr+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+(?= .+rv\:.+gecko\/\d+)|[0-4][\w\.]+(?!.+compatible))/i,/(amaya|dillo|doris|icab|ladybird|lynx|mosaic|netsurf|obigo|polaris|w3m|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/\b(links) \(([\w\.]+)/i],[y,[m,/_/g,"."]],[/(cobalt)\/([\w\.]+)/i],[y,[m,/[^\d\.]+./,n]]],cpu:[[/\b((amd|x|x86[-_]?|wow|win)64)\b/i],[[P,"amd64"]],[/(ia32(?=;))/i,/\b((i[346]|x)86)(pc)?\b/i],[[P,"ia32"]],[/\b(aarch64|arm(v?[89]e?l?|_?64))\b/i],[[P,"arm64"]],[/\b(arm(v[67])?ht?n?[fl]p?)\b/i],[[P,"armhf"]],[/( (ce|mobile); ppc;|\/[\w\.]+arm\b)/i],[[P,"arm"]],[/ sun4\w[;\)]/i],[[P,"sparc"]],[/\b(avr32|ia64(?=;)|68k(?=\))|\barm(?=v([1-7]|[5-7]1)l?|;|eabi)|(irix|mips|sparc)(64)?\b|pa-risc)/i,/((ppc|powerpc)(64)?)( mac|;|\))/i,/(?:osf1|[freopnt]{3,4}bsd) (alpha)/i],[[P,/ower/,n,ca]],[/mc680.0/i],[[P,"68k"]],[/winnt.+\[axp/i],[[P,"alpha"]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[B,[R,He],[d,z]],[/\b((?:s[cgp]h|gt|sm)-(?![lr])\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]((?!sm-[lr]|browser)[-\w]+)/i,/sec-(sgh\w+)/i],[B,[R,He],[d,L]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)[\/\);]/i],[B,[R,zr],[d,L]],[/\b(?:ios|apple\w+)\/.+[\(\/](ipad)/i,/\b(ipad)[\d,]*[;\] ].+(mac |i(pad)?)os/i],[B,[R,zr],[d,z]],[/(macintosh);/i],[B,[R,zr]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[B,[R,yt],[d,L]],[/\b((?:brt|eln|hey2?|gdi|jdn)-a?[lnw]09|(?:ag[rm]3?|jdn2|kob2)-a?[lw]0[09]hn)(?: bui|\)|;)/i],[B,[R,et],[d,z]],[/honor([-\w ]+)[;\)]/i],[B,[R,et],[d,L]],[/\b((?:ag[rs][2356]?k?|bah[234]?|bg[2o]|bt[kv]|cmr|cpn|db[ry]2?|jdn2|got|kob2?k?|mon|pce|scm|sht?|[tw]gr|vrd)-[ad]?[lw][0125][09]b?|605hw|bg2-u03|(?:gem|fdr|m2|ple|t1)-[7a]0[1-4][lu]|t1-a2[13][lw]|mediapad[\w\. ]*(?= bui|\)))\b(?!.+d\/s)/i],[B,[R,pn],[d,z]],[/(?:huawei) ?([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][\dc][adnt]?)\b(?!.+d\/s)/i],[B,[R,pn],[d,L]],[/oid[^\)]+; (2[\dbc]{4}(182|283|rp\w{2})[cgl]|m2105k81a?c)(?: bui|\))/i,/\b(?:xiao)?((?:red)?mi[-_ ]?pad[\w- ]*)(?: bui|\))/i],[[B,/_/g," "],[R,kt],[d,z]],[/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/oid[^\)]+; (redmi[\-_ ]?(?:note|k)?[\w_ ]+|m?[12]\d[01]\d\w{3,6}|poco[\w ]+|(shark )?\w{3}-[ah]0|qin ?[1-3](s\+|ultra| pro)?)( bui|; wv|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note|max|cc)?[_ ]?(?:\d{0,2}\w?)[_ ]?(?:plus|se|lite|pro)?( 5g|lte)?)(?: bui|\))/i,/ ([\w ]+) miui\/v?\d/i],[[B,/_/g," "],[R,kt],[d,L]],[/droid.+; (cph2[3-6]\d[13579]|((gm|hd)19|(ac|be|in|kb)20|(d[en]|eb|le|mt)21|ne22)[0-2]\d|p[g-k]\w[1m]10)\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[B,[R,Za],[d,L]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[B,[R,zt],[d,L]],[/\b(opd2(\d{3}a?))(?: bui|\))/i],[B,[R,sn,{OnePlus:["203","304","403","404","413","415"],"*":zt}],[d,z]],[/(vivo (5r?|6|8l?|go|one|s|x[il]?[2-4]?)[\w\+ ]*)(?: bui|\))/i],[B,[R,"BLU"],[d,L]],[/; vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[B,[R,"Vivo"],[d,L]],[/\b(rmx[1-3]\d{3})(?: bui|;|\))/i],[B,[R,"Realme"],[d,L]],[/(ideatab[-\w ]+|602lv|d-42a|a101lv|a2109a|a3500-hv|s[56]000|pb-6505[my]|tb-?x?\d{3,4}(?:f[cu]|xu|[av])|yt\d?-[jx]?\d+[lfmx])( bui|;|\)|\/)/i,/lenovo ?(b[68]0[08]0-?[hf]?|tab(?:[\w- ]+?)|tb[\w-]{6,7})( bui|;|\)|\/)/i],[B,[R,nt],[d,z]],[/lenovo[-_ ]?([-\w ]+?)(?: bui|\)|\/)/i],[B,[R,nt],[d,L]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ]([\w\s]+)(\)| bui)/i,/((?:moto(?! 360)[-\w\(\) ]+|xt\d{3,4}[cgkosw\+]?[-\d]*|nexus 6)(?= bui|\)))/i],[B,[R,pa],[d,L]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[B,[R,pa],[d,z]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[B,[R,ir],[d,z]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+(?!.*(?:browser|netcast|android tv|watch|webos))(\w+)/i,/\blg-?([\d\w]+) bui/i],[B,[R,ir],[d,L]],[/(nokia) (t[12][01])/i],[R,B,[d,z]],[/(?:maemo|nokia).*(n900|lumia \d+|rm-\d+)/i,/nokia[-_ ]?(([-\w\. ]*?))( bui|\)|;|\/)/i],[[B,/_/g," "],[d,L],[R,"Nokia"]],[/(pixel (c|tablet))\b/i],[B,[R,Gr],[d,z]],[/droid.+;(?: google)? (g(01[13]a|020[aem]|025[jn]|1b60|1f8f|2ybb|4s1m|576d|5nz6|8hhn|8vou|a02099|c15s|d1yq|e2ae|ec77|gh2x|kv4x|p4bc|pj41|r83y|tt9q|ur25|wvk6)|pixel[\d ]*a?( pro)?( xl)?( fold)?( \(5g\))?)( bui|\))/i],[B,[R,Gr],[d,L]],[/(google) (pixelbook( go)?)/i],[R,B],[/droid.+; (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-\w\w\d\d)(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[B,[R,Xe],[d,L]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[B,"Xperia Tablet"],[R,Xe],[d,z]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo(?!bc)\w\w)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[B,[R,br],[d,z]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[B,/(.+)/g,"Fire Phone $1"],[R,br],[d,L]],[/(playbook);[-\w\),; ]+(rim)/i],[B,R,[d,z]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/(?:blackberry|\(bb10;) (\w+)/i],[B,[R,Wa],[d,L]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[B,[R,ar],[d,z]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[B,[R,ar],[d,L]],[/(nexus 9)/i],[B,[R,"HTC"],[d,z]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[R,[B,/_/g," "],[d,L]],[/tcl (xess p17aa)/i,/droid [\w\.]+; ((?:8[14]9[16]|9(?:0(?:48|60|8[01])|1(?:3[27]|66)|2(?:6[69]|9[56])|466))[gqswx])(_\w(\w|\w\w))?(\)| bui)/i],[B,[R,"TCL"],[d,z]],[/droid [\w\.]+; (418(?:7d|8v)|5087z|5102l|61(?:02[dh]|25[adfh]|27[ai]|56[dh]|59k|65[ah])|a509dl|t(?:43(?:0w|1[adepqu])|50(?:6d|7[adju])|6(?:09dl|10k|12b|71[efho]|76[hjk])|7(?:66[ahju]|67[hw]|7[045][bh]|71[hk]|73o|76[ho]|79w|81[hks]?|82h|90[bhsy]|99b)|810[hs]))(_\w(\w|\w\w))?(\)| bui)/i],[B,[R,"TCL"],[d,L]],[/(itel) ((\w+))/i],[[R,ca],B,[d,sn,{tablet:["p10001l","w7001"],"*":"mobile"}]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[B,[R,"Acer"],[d,z]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[B,[R,"Meizu"],[d,L]],[/; ((?:power )?armor(?:[\w ]{0,8}))(?: bui|\))/i],[B,[R,"Ulefone"],[d,L]],[/; (energy ?\w+)(?: bui|\))/i,/; energizer ([\w ]+)(?: bui|\))/i],[B,[R,"Energizer"],[d,L]],[/; cat (b35);/i,/; (b15q?|s22 flip|s48c|s62 pro)(?: bui|\))/i],[B,[R,"Cat"],[d,L]],[/((?:new )?andromax[\w- ]+)(?: bui|\))/i],[B,[R,"Smartfren"],[d,L]],[/droid.+; (a(in)?(0(15|59|6[35])|142)p?)/i],[B,[R,"Nothing"],[d,L]],[/; (x67 5g|tikeasy \w+|ac[1789]\d\w+)( b|\))/i,/archos ?(5|gamepad2?|([\w ]*[t1789]|hello) ?\d+[\w ]*)( b|\))/i],[B,[R,"Archos"],[d,z]],[/archos ([\w ]+)( b|\))/i,/; (ac[3-6]\d\w{2,8})( b|\))/i],[B,[R,"Archos"],[d,L]],[/; (n159v)/i],[B,[R,"HMD"],[d,L]],[/(imo) (tab \w+)/i,/(infinix|tecno) (x1101b?|p904|dp(7c|8d|10a)( pro)?|p70[1-3]a?|p904|t1101)/i],[R,B,[d,z]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus(?! zenw)|dell|jolla|meizu|motorola|polytron|tecno|micromax|advan)[-_ ]?([-\w]*)/i,/; (blu|hmd|imo|infinix|lava|oneplus|tcl|wiko)[_ ]([\w\+ ]+?)(?: bui|\)|; r)/i,/(hp) ([\w ]+\w)/i,/(microsoft); (lumia[\w ]+)/i,/(oppo) ?([\w ]+) bui/i,/(hisense) ([ehv][\w ]+)\)/i,/droid[^;]+; (philips)[_ ]([sv-x][\d]{3,4}[xz]?)/i],[R,B,[d,L]],[/(kobo)\s(ereader|touch)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i],[R,B,[d,z]],[/(surface duo)/i],[B,[R,Lr],[d,z]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[B,[R,"Fairphone"],[d,L]],[/((?:tegranote|shield t(?!.+d tv))[\w- ]*?)(?: b|\))/i],[B,[R,za],[d,z]],[/(sprint) (\w+)/i],[R,B,[d,L]],[/(kin\.[onetw]{3})/i],[[B,/\./g," "],[R,Lr],[d,L]],[/droid.+; ([c6]+|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[B,[R,Or],[d,z]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[B,[R,Or],[d,L]],[/(philips)[\w ]+tv/i,/smart-tv.+(samsung)/i],[R,[d,V]],[/hbbtv.+maple;(\d+)/i],[[B,/^/,"SmartTV"],[R,He],[d,V]],[/(vizio)(?: |.+model\/)(\w+-\w+)/i,/tcast.+(lg)e?. ([-\w]+)/i],[R,B,[d,V]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[R,ir],[d,V]],[/(apple) ?tv/i],[R,[B,zr+" TV"],[d,V]],[/crkey.*devicetype\/chromecast/i],[[B,Sr+" Third Generation"],[R,Gr],[d,V]],[/crkey.*devicetype\/([^/]*)/i],[[B,/^/,"Chromecast "],[R,Gr],[d,V]],[/fuchsia.*crkey/i],[[B,Sr+" Nest Hub"],[R,Gr],[d,V]],[/crkey/i],[[B,Sr],[R,Gr],[d,V]],[/(portaltv)/i],[B,[R,Ke],[d,V]],[/droid.+aft(\w+)( bui|\))/i],[B,[R,br],[d,V]],[/(shield \w+ tv)/i],[B,[R,za],[d,V]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[B,[R,yt],[d,V]],[/(bravia[\w ]+)( bui|\))/i],[B,[R,Xe],[d,V]],[/(mi(tv|box)-?\w+) bui/i],[B,[R,kt],[d,V]],[/Hbbtv.*(technisat) (.*);/i],[R,B,[d,V]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[R,/.+\/(\w+)/,"$1",sn,{LG:"lge"}],[B,di],[d,V]],[/(playstation \w+)/i],[B,[R,Xe],[d,$]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[B,[R,Lr],[d,$]],[/(ouya)/i,/(nintendo) (\w+)/i,/(retroid) (pocket ([^\)]+))/i,/(valve).+(steam deck)/i,/droid.+; ((shield|rgcube|gr0006))( bui|\))/i],[[R,sn,{Nvidia:"Shield",Anbernic:"RGCUBE",Logitech:"GR0006"}],B,[d,$]],[/\b(sm-[lr]\d\d[0156][fnuw]?s?|gear live)\b/i],[B,[R,He],[d,X]],[/((pebble))app/i,/(asus|google|lg|oppo|xiaomi) ((pixel |zen)?watch[\w ]*)( bui|\))/i],[R,B,[d,X]],[/(ow(?:19|20)?we?[1-3]{1,3})/i],[B,[R,zt],[d,X]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[B,[R,zr],[d,X]],[/(opwwe\d{3})/i],[B,[R,Za],[d,X]],[/(moto 360)/i],[B,[R,pa],[d,X]],[/(smartwatch 3)/i],[B,[R,Xe],[d,X]],[/(g watch r)/i],[B,[R,ir],[d,X]],[/droid.+; (wt63?0{2,3})\)/i],[B,[R,Or],[d,X]],[/droid.+; (glass) \d/i],[B,[R,Gr],[d,G]],[/(pico) ([\w ]+) os\d/i],[R,B,[d,G]],[/(quest( \d| pro)?s?).+vr/i],[B,[R,Ke],[d,G]],[/mobile vr; rv.+firefox/i],[[d,G]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[R,[d,ae]],[/(aeobc)\b/i],[B,[R,br],[d,ae]],[/(homepod).+mac os/i],[B,[R,zr],[d,ae]],[/windows iot/i],[[d,ae]],[/droid.+; ([\w- ]+) (4k|android|smart|google)[- ]?tv/i],[B,[d,V]],[/\b((4k|android|smart|opera)[- ]?tv|tv; rv:|large screen[\w ]+safari)\b/i],[[d,V]],[/droid .+?; ([^;]+?)(?: bui|; wv\)|\) applew|; hmsc).+?(mobile|vr|\d) safari/i],[B,[d,sn,{mobile:"Mobile",xr:"VR","*":z}]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[d,z]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[d,L]],[/droid .+?; ([\w\. -]+)( bui|\))/i],[B,[R,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[m,[y,Rt+"HTML"]],[/(arkweb)\/([\w\.]+)/i],[y,m],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[m,[y,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna|servo)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[y,m],[/ladybird\//i],[[y,"LibWeb"]],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[m,y]],os:[[/(windows nt) (6\.[23]); arm/i],[[y,/N/,"R"],[m,sn,Wi]],[/(windows (?:phone|mobile|iot))(?: os)?[\/ ]?([\d\.]*( se)?)/i,/(windows)[\/ ](1[01]|2000|3\.1|7|8(\.1)?|9[58]|me|server 20\d\d( r2)?|vista|xp)/i],[y,m],[/windows nt ?([\d\.\)]*)(?!.+xbox)/i,/\bwin(?=3| ?9|n)(?:nt| 9x )?([\d\.;]*)/i],[[m,/(;|\))/g,"",sn,Wi],[y,rt]],[/(windows ce)\/?([\d\.]*)/i],[y,m],[/[adehimnop]{4,7}\b(?:.*os ([\w]+) like mac|; opera)/i,/(?:ios;fbsv|ios(?=.+ip(?:ad|hone)|.+apple ?tv)|ip(?:ad|hone)(?: |.+i(?:pad)?)os|apple ?tv.+ios)[\/ ]([\w\.]+)/i,/\btvos ?([\w\.]+)/i,/cfnetwork\/.+darwin/i],[[m,/_/g,"."],[y,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+(haiku|morphos))/i],[[y,"macOS"],[m,/_/g,"."]],[/android ([\d\.]+).*crkey/i],[m,[y,Sr+" Android"]],[/fuchsia.*crkey\/([\d\.]+)/i],[m,[y,Sr+" Fuchsia"]],[/crkey\/([\d\.]+).*devicetype\/smartspeaker/i],[m,[y,Sr+" SmartSpeaker"]],[/linux.*crkey\/([\d\.]+)/i],[m,[y,Sr+" Linux"]],[/crkey\/([\d\.]+)/i],[m,[y,Sr]],[/droid ([\w\.]+)\b.+(android[- ]x86)/i],[m,y],[/(ubuntu) ([\w\.]+) like android/i],[[y,/(.+)/,"$1 Touch"],m],[/(harmonyos)[\/ ]?([\d\.]*)/i,/(android|bada|blackberry|kaios|maemo|meego|openharmony|qnx|rim tablet os|sailfish|series40|symbian|tizen)\w*[-\/\.; ]?([\d\.]*)/i],[y,m],[/\(bb(10);/i],[m,[y,Wa]],[/(?:symbian ?os|symbos|s60(?=;)|series ?60)[-\/ ]?([\w\.]*)/i],[m,[y,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[m,[y,Rr+" OS"]],[/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i,/webos(?:[ \/]?|\.tv-20(?=2[2-9]))(\d[\d\.]*)/i],[m,[y,"webOS"]],[/web0s;.+?(?:chr[o0]me|safari)\/(\d+)/i],[[m,sn,{25:"120",24:"108",23:"94",22:"87",6:"79",5:"68",4:"53",3:"38",2:"538",1:"537","*":"TV"}],[y,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[m,[y,"watchOS"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[y,"Chrome OS"],m],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) (\w+)/i,/(xbox); +xbox ([^\);]+)/i,/(pico) .+os([\w\.]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/linux.+(mint)[\/\(\) ]?([\w\.]*)/i,/(mageia|vectorlinux|fuchsia|arcaos|arch(?= ?linux))[;l ]([\d\.]*)/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire|knoppix)(?: gnu[\/ ]linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/\b(aix)[; ]([1-9\.]{0,4})/i,/(hurd|linux|morphos)(?: (?:arm|x86|ppc)\w*| ?)([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) ?(r\d)?/i],[y,m],[/(sunos) ?([\d\.]*)/i],[[y,"Solaris"],m],[/\b(beos|os\/2|amigaos|openvms|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[y,m]]},Tr=(function(){var We={init:{},isIgnore:{},isIgnoreRgx:{},toString:{}};return Oa.call(We.init,[[q,[y,m,H,d]],[g,[P]],[h,[d,B,R]],[k,[y,m]],[W,[y,m]]]),Oa.call(We.isIgnore,[[q,[m,H]],[k,[m]],[W,[m]]]),Oa.call(We.isIgnoreRgx,[[q,/ ?browser$/i],[W,/ ?os$/i]]),Oa.call(We.toString,[[q,[y,m]],[g,[P]],[h,[R,B]],[k,[y,m]],[W,[y,m]]]),We})(),Va=function(We,_t){var Mt=Tr.init[_t],$t=Tr.isIgnore[_t]||0,Br=Tr.isIgnoreRgx[_t]||0,jr=Tr.toString[_t]||0;function Dt(){Oa.call(this,Mt)}return Dt.prototype.getItem=function(){return We},Dt.prototype.withClientHints=function(){return ur?ur.getHighEntropyValues(Ua).then(function(Xr){return We.setCH(new Li(Xr,!1)).parseCH().get()}):We.parseCH().get()},Dt.prototype.withFeatureCheck=function(){return We.detectFeature().get()},_t!=j&&(Dt.prototype.is=function(Xr){var Nr=!1;for(var Ca in this)if(this.hasOwnProperty(Ca)&&!Ha($t,Ca)&&ca(Br?jn(Br,this[Ca]):this[Ca])==ca(Br?jn(Br,Xr):Xr)){if(Nr=!0,Xr!=U.UNDEFINED)break}else if(Xr==U.UNDEFINED&&Nr){Nr=!Nr;break}return Nr},Dt.prototype.toString=function(){var Xr=n;for(var Nr in jr)typeof this[jr[Nr]]!==U.UNDEFINED&&(Xr+=(Xr?" ":n)+this[jr[Nr]]);return Xr||U.UNDEFINED}),Dt.prototype.then=function(Xr){var Nr=this,Ca=function(){for(var Un in Nr)Nr.hasOwnProperty(Un)&&(this[Un]=Nr[Un])};Ca.prototype={is:Dt.prototype.is,toString:Dt.prototype.toString,withClientHints:Dt.prototype.withClientHints,withFeatureCheck:Dt.prototype.withFeatureCheck};var Ka=new Ca;return Xr(Ka),Ka},new Dt};function Li(We,_t){if(We=We||{},Oa.call(this,Ua),_t)Oa.call(this,[[le,hn(We[_e])],[ue,hn(We[Se])],[L,/\?1/.test(We[gr])],[B,Qn(We[jt])],[ne,Qn(We[Pr])],[Oe,Qn(We[qa])],[P,Qn(We[ze])],[pe,hn(We[tr])],[ye,Qn(We[Vt])]]);else for(var Mt in We)this.hasOwnProperty(Mt)&&typeof We[Mt]!==U.UNDEFINED&&(this[Mt]=We[Mt])}function Jn(We,_t,Mt,$t){return Oa.call(this,[["itemType",We],["ua",_t],["uaCH",$t],["rgxMap",Mt],["data",Va(this,We)]]),this}Jn.prototype.get=function(We){return We?this.data.hasOwnProperty(We)?this.data[We]:T:this.data},Jn.prototype.set=function(We,_t){return this.data[We]=_t,this},Jn.prototype.setCH=function(We){return this.uaCH=We,this},Jn.prototype.detectFeature=function(){if(yr&&yr.userAgent==this.ua)switch(this.itemType){case q:yr.brave&&typeof yr.brave.isBrave==U.FUNCTION&&this.set(y,"Brave");break;case h:!this.get(d)&&ur&&ur[L]&&this.set(d,L),this.get(B)=="Macintosh"&&yr&&typeof yr.standalone!==U.UNDEFINED&&yr.maxTouchPoints&&yr.maxTouchPoints>2&&this.set(B,"iPad").set(d,z);break;case W:!this.get(y)&&ur&&ur[ne]&&this.set(y,ur[ne]);break;case j:var We=this.data,_t=function(Mt){return We[Mt].getItem().detectFeature().get()};this.set(q,_t(q)).set(g,_t(g)).set(h,_t(h)).set(k,_t(k)).set(W,_t(W))}return this},Jn.prototype.parseUA=function(){switch(this.itemType!=j&&qi.call(this.data,this.ua,this.rgxMap),this.itemType){case q:this.set(H,Kr(this.get(m)));break;case W:if(this.get(y)=="iOS"&&this.get(m)=="18.6"){var We=/\) Version\/([\d\.]+)/.exec(this.ua);We&&parseInt(We[1].substring(0,2),10)>=26&&this.set(m,We[1])}break}return this},Jn.prototype.parseCH=function(){var We=this.uaCH,_t=this.rgxMap;switch(this.itemType){case q:case k:var Mt=We[ue]||We[le],$t;if(Mt)for(var Br=0;Br<Mt.length;Br++){var jr=Mt[Br].brand||Mt[Br],Dt=Mt[Br].version;this.itemType==q&&!/not.a.brand/i.test(jr)&&(!$t||/Chrom/.test($t)&&jr!=fr||$t==Rt&&/WebView2/.test(jr))&&(jr=sn(jr,Ei),$t=this.get(y),$t&&!/Chrom/.test($t)&&/Chrom/.test(jr)||this.set(y,jr).set(m,Dt).set(H,Kr(Dt)),$t=jr),this.itemType==k&&jr==fr&&this.set(m,Dt)}break;case g:var Xr=We[P];Xr&&(Xr&&We[ye]=="64"&&(Xr+="64"),qi.call(this.data,Xr+";",_t));break;case h:if(We[L]&&this.set(d,L),We[B]&&(this.set(B,We[B]),!this.get(d)||!this.get(R))){var Nr={};qi.call(Nr,"droid 9; "+We[B]+")",_t),!this.get(d)&&Nr.type&&this.set(d,Nr.type),!this.get(R)&&Nr.vendor&&this.set(R,Nr.vendor)}if(We[pe]){var Ca;if(typeof We[pe]!="string")for(var Ka=0;!Ca&&Ka<We[pe].length;)Ca=sn(We[pe][Ka++],Xn);else Ca=sn(We[pe],Xn);this.set(d,Ca)}break;case W:var Un=We[ne];if(Un){var ni=We[Oe];Un==rt&&(ni=parseInt(Kr(ni),10)>=13?"11":"10"),this.set(y,Un).set(m,ni)}this.get(y)==rt&&We[B]=="Xbox"&&this.set(y,"Xbox").set(m,T);break;case j:var Ln=this.data,pi=function(gs){return Ln[gs].getItem().setCH(We).parseCH().get()};this.set(q,pi(q)).set(g,pi(g)).set(h,pi(h)).set(k,pi(k)).set(W,pi(W))}return this};function ha(We,_t,Mt){if(typeof We===U.OBJECT?(nn(We,!0)?(typeof _t===U.OBJECT&&(Mt=_t),_t=We):(Mt=We,_t=T),We=T):typeof We===U.STRING&&!nn(_t,!0)&&(Mt=_t,_t=T),Mt)if(typeof Mt.append===U.FUNCTION){var $t={};Mt.forEach(function(Ka,Un){$t[String(Un).toLowerCase()]=Ka}),Mt=$t}else{var Br={};for(var jr in Mt)Mt.hasOwnProperty(jr)&&(Br[String(jr).toLowerCase()]=Mt[jr]);Mt=Br}if(!(this instanceof ha))return new ha(We,_t,Mt).getResult();var Dt=typeof We===U.STRING?We:Mt&&Mt[w]?Mt[w]:yr&&yr.userAgent?yr.userAgent:n,Xr=new Li(Mt,!0),Nr=_t?wr(Pi,_t):Pi,Ca=function(Ka){return Ka==j?function(){return new Jn(Ka,Dt,Nr,Xr).set("ua",Dt).set(q,this.getBrowser()).set(g,this.getCPU()).set(h,this.getDevice()).set(k,this.getEngine()).set(W,this.getOS()).get()}:function(){return new Jn(Ka,Dt,Nr[Ka],Xr).parseUA().get()}};return Oa.call(this,[["getBrowser",Ca(q)],["getCPU",Ca(g)],["getDevice",Ca(h)],["getEngine",Ca(k)],["getOS",Ca(W)],["getResult",Ca(j)],["getUA",function(){return Dt}],["setUA",function(Ka){return qn(Ka)&&(Dt=di(Ka,J)),this}]]).setUA(Dt),this}ha.VERSION=b,ha.BROWSER=$r([y,m,H,d]),ha.CPU=$r([P]),ha.DEVICE=$r([B,R,d,$,L,V,z,X,ae]),ha.ENGINE=ha.OS=$r([y,m]),typeof Y!==U.UNDEFINED?(oe.exports&&(Y=oe.exports=ha),Y.UAParser=ha):S.amdO?(x=(function(){return ha}).call(Y,S,Y,oe),x!==T&&(oe.exports=x)):Tt&&(C.UAParser=ha);var Ga=Tt&&(C.jQuery||C.Zepto);if(Ga&&!Ga.ua){var ts=new ha;Ga.ua=ts.getResult(),Ga.ua.get=function(){return ts.getUA()},Ga.ua.set=function(We){ts.setUA(We);var _t=ts.getResult();for(var Mt in _t)Ga.ua[Mt]=_t[Mt]}}})(typeof window=="object"?window:this)}),2155:(function(oe,Y,S){(function(x,C,T){oe.exports=C(S(9021),S(7165))})(this,function(x){return x.pad.ZeroPadding={pad:function(C,T){var b=T*4;C.clamp(),C.sigBytes+=b-(C.sigBytes%b||b)},unpad:function(C){for(var T=C.words,b=C.sigBytes-1,b=C.sigBytes-1;b>=0;b--)if(T[b>>>2]>>>24-b%4*8&255){C.sigBytes=b+1;break}}},x.pad.ZeroPadding})}),2169:(function(oe,Y,S){(function(x,C,T){oe.exports=C(S(9021),S(7165))})(this,function(x){return x.mode.CFB=(function(){var C=x.lib.BlockCipherMode.extend();C.Encryptor=C.extend({processBlock:function(b,J){var w=this._cipher,n=w.blockSize;T.call(this,b,J,n,w),this._prevBlock=b.slice(J,J+n)}}),C.Decryptor=C.extend({processBlock:function(b,J){var w=this._cipher,n=w.blockSize,f=b.slice(J,J+n);T.call(this,b,J,n,w),this._prevBlock=f}});function T(b,J,w,n){var f,U=this._iv;U?(f=U.slice(0),this._iv=void 0):f=this._prevBlock,n.encryptBlock(f,0);for(var q=0;q<w;q++)b[J+q]^=f[q]}return C})(),x.mode.CFB})}),2183:((oe,Y,S)=>{Object.defineProperty(Y,"__esModule",{value:!0}),Y.Chrome111=void 0;const x=S(7363),C=S(3953),T=S(2994),b=S(8046),J=S(4893),w=S(3303),n=S(5544),f=S(5938),U=S(4256),q=S(1305),g=new T.Logger("Chrome111"),h="Chrome111",k={OS:1024,MIS:1024};class W extends C.EnhancedEventEmitter{_closed=!1;_direction;_remoteSdp;_getSendExtendedRtpCapabilities;_forcedLocalDtlsRole;_pc;_mapMidTransceiver=new Map;_sendStream=new MediaStream;_hasDataChannelMediaSection=!1;_nextSendSctpStreamId=0;_transportReady=!1;static createFactory(){return{name:h,factory:y=>new W(y),getNativeRtpCapabilities:async()=>{g.debug("getNativeRtpCapabilities()");let y=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require"});try{y.addTransceiver("audio"),y.addTransceiver("video",{sendEncodings:[{scalabilityMode:"L3T3"}]});const d=await y.createOffer();try{y.close()}catch{}y=void 0;const R=x.parse(d.sdp);return W.getLocalRtpCapabilities(R)}catch(d){try{y?.close()}catch{}throw y=void 0,d}},getNativeSctpCapabilities:async()=>(g.debug("getNativeSctpCapabilities()"),{numStreams:k})}}static getLocalRtpCapabilities(y){const d=n.extractRtpCapabilities({sdpObject:y});return b.validateAndNormalizeRtpCapabilities(d),U.addNackSupportForOpus(d),d}constructor({direction:y,iceParameters:d,iceCandidates:R,dtlsParameters:m,sctpParameters:P,iceServers:H,iceTransportPolicy:B,additionalSettings:$,getSendExtendedRtpCapabilities:L}){super(),g.debug("constructor()"),this._direction=y,this._remoteSdp=new q.RemoteSdp({iceParameters:d,iceCandidates:R,dtlsParameters:m,sctpParameters:P}),this._getSendExtendedRtpCapabilities=L,m.role&&m.role!=="auto"&&(this._forcedLocalDtlsRole=m.role==="server"?"client":"server"),this._pc=new RTCPeerConnection({iceServers:H??[],iceTransportPolicy:B??"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",...$}),this._pc.addEventListener("icegatheringstatechange",this.onIceGatheringStateChange),this._pc.addEventListener("icecandidateerror",this.onIceCandidateError),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",this.onConnectionStateChange):(g.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.addEventListener("iceconnectionstatechange",this.onIceConnectionStateChange))}get name(){return h}close(){if(g.debug("close()"),!this._closed){this._closed=!0;try{this._pc.close()}catch{}this._pc.removeEventListener("icegatheringstatechange",this.onIceGatheringStateChange),this._pc.removeEventListener("icecandidateerror",this.onIceCandidateError),this._pc.removeEventListener("connectionstatechange",this.onConnectionStateChange),this._pc.removeEventListener("iceconnectionstatechange",this.onIceConnectionStateChange),this.emit("@close"),super.close()}}async updateIceServers(y){this.assertNotClosed(),g.debug("updateIceServers()");const d=this._pc.getConfiguration();d.iceServers=y,this._pc.setConfiguration(d)}async restartIce(y){if(this.assertNotClosed(),g.debug("restartIce()"),this._remoteSdp.updateIceParameters(y),!!this._transportReady)if(this._direction==="send"){const d=await this._pc.createOffer({iceRestart:!0});g.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",d),await this._pc.setLocalDescription(d);const R={type:"answer",sdp:this._remoteSdp.getSdp()};g.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",R),await this._pc.setRemoteDescription(R)}else{const d={type:"offer",sdp:this._remoteSdp.getSdp()};g.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",d),await this._pc.setRemoteDescription(d);const R=await this._pc.createAnswer();g.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",R),await this._pc.setLocalDescription(R)}}async getTransportStats(){return this.assertNotClosed(),this._pc.getStats()}async send({track:y,encodings:d,codecOptions:R,codec:m,onRtpSender:P}){if(this.assertNotClosed(),this.assertSendDirection(),g.debug("send() [kind:%s, track.id:%s]",y.kind,y.id),d&&d.length>1){let pe=1;for(const ue of d){const ne=ue.scalabilityMode?(0,w.parse)(ue.scalabilityMode).temporalLayers:3;ne>pe&&(pe=ne)}d.forEach((ue,ne)=>{ue.rid=`r${ne}`,ue.scalabilityMode=`L1T${pe}`})}const H=this._remoteSdp.getNextMediaSectionIdx(),B=this._pc.addTransceiver(y,{direction:"sendonly",streams:[this._sendStream],sendEncodings:d});P&&P(B.sender);const $=await this._pc.createOffer();let L=x.parse($.sdp);L.extmapAllowMixed&&this._remoteSdp.setSessionExtmapAllowMixed();const z=W.getLocalRtpCapabilities(L),V=this._getSendExtendedRtpCapabilities(z),X=b.getSendingRtpParameters(y.kind,V);X.codecs=b.reduceCodecs(X.codecs,m);const G=b.getSendingRemoteRtpParameters(y.kind,V);G.codecs=b.reduceCodecs(G.codecs,m),this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:L}),g.debug("send() | calling pc.setLocalDescription() [offer:%o]",$),await this._pc.setLocalDescription($);const ae=B.mid;X.mid=ae,L=x.parse(this._pc.localDescription.sdp);const Q=L.media[H.idx];if(X.rtcp.cname=n.getCname({offerMediaObject:Q}),!d)X.encodings=f.getRtpEncodings({offerMediaObject:Q});else if(d.length===1){const pe=f.getRtpEncodings({offerMediaObject:Q});Object.assign(pe[0],d[0]),X.encodings=pe}else X.encodings=d;this._remoteSdp.send({offerMediaObject:Q,reuseMid:H.reuseMid,offerRtpParameters:X,answerRtpParameters:G,codecOptions:R});const le={type:"answer",sdp:this._remoteSdp.getSdp()};return g.debug("send() | calling pc.setRemoteDescription() [answer:%o]",le),await this._pc.setRemoteDescription(le),this._mapMidTransceiver.set(ae,B),{localId:ae,rtpParameters:X,rtpSender:B.sender}}async stopSending(y){if(this.assertSendDirection(),g.debug("stopSending() [localId:%s]",y),this._closed)return;const d=this._mapMidTransceiver.get(y);if(!d)throw new Error("associated RTCRtpTransceiver not found");if(d.sender.replaceTrack(null),this._pc.removeTrack(d.sender),this._remoteSdp.closeMediaSection(d.mid))try{d.stop()}catch{}const m=await this._pc.createOffer();g.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",m),await this._pc.setLocalDescription(m);const P={type:"answer",sdp:this._remoteSdp.getSdp()};g.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",P),await this._pc.setRemoteDescription(P),this._mapMidTransceiver.delete(y)}async pauseSending(y){this.assertNotClosed(),this.assertSendDirection(),g.debug("pauseSending() [localId:%s]",y);const d=this._mapMidTransceiver.get(y);if(!d)throw new Error("associated RTCRtpTransceiver not found");d.direction="inactive",this._remoteSdp.pauseMediaSection(y);const R=await this._pc.createOffer();g.debug("pauseSending() | calling pc.setLocalDescription() [offer:%o]",R),await this._pc.setLocalDescription(R);const m={type:"answer",sdp:this._remoteSdp.getSdp()};g.debug("pauseSending() | calling pc.setRemoteDescription() [answer:%o]",m),await this._pc.setRemoteDescription(m)}async resumeSending(y){this.assertNotClosed(),this.assertSendDirection(),g.debug("resumeSending() [localId:%s]",y);const d=this._mapMidTransceiver.get(y);if(this._remoteSdp.resumeSendingMediaSection(y),!d)throw new Error("associated RTCRtpTransceiver not found");d.direction="sendonly";const R=await this._pc.createOffer();g.debug("resumeSending() | calling pc.setLocalDescription() [offer:%o]",R),await this._pc.setLocalDescription(R);const m={type:"answer",sdp:this._remoteSdp.getSdp()};g.debug("resumeSending() | calling pc.setRemoteDescription() [answer:%o]",m),await this._pc.setRemoteDescription(m)}async replaceTrack(y,d){this.assertNotClosed(),this.assertSendDirection(),d?g.debug("replaceTrack() [localId:%s, track.id:%s]",y,d.id):g.debug("replaceTrack() [localId:%s, no track]",y);const R=this._mapMidTransceiver.get(y);if(!R)throw new Error("associated RTCRtpTransceiver not found");await R.sender.replaceTrack(d)}async setMaxSpatialLayer(y,d){this.assertNotClosed(),this.assertSendDirection(),g.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",y,d);const R=this._mapMidTransceiver.get(y);if(!R)throw new Error("associated RTCRtpTransceiver not found");const m=R.sender.getParameters();m.encodings.forEach((B,$)=>{$<=d?B.active=!0:B.active=!1}),await R.sender.setParameters(m),this._remoteSdp.muxMediaSectionSimulcast(y,m.encodings);const P=await this._pc.createOffer();g.debug("setMaxSpatialLayer() | calling pc.setLocalDescription() [offer:%o]",P),await this._pc.setLocalDescription(P);const H={type:"answer",sdp:this._remoteSdp.getSdp()};g.debug("setMaxSpatialLayer() | calling pc.setRemoteDescription() [answer:%o]",H),await this._pc.setRemoteDescription(H)}async setRtpEncodingParameters(y,d){this.assertNotClosed(),this.assertSendDirection(),g.debug("setRtpEncodingParameters() [localId:%s, params:%o]",y,d);const R=this._mapMidTransceiver.get(y);if(!R)throw new Error("associated RTCRtpTransceiver not found");const m=R.sender.getParameters();m.encodings.forEach((B,$)=>{m.encodings[$]={...B,...d}}),await R.sender.setParameters(m),this._remoteSdp.muxMediaSectionSimulcast(y,m.encodings);const P=await this._pc.createOffer();g.debug("setRtpEncodingParameters() | calling pc.setLocalDescription() [offer:%o]",P),await this._pc.setLocalDescription(P);const H={type:"answer",sdp:this._remoteSdp.getSdp()};g.debug("setRtpEncodingParameters() | calling pc.setRemoteDescription() [answer:%o]",H),await this._pc.setRemoteDescription(H)}async getSenderStats(y){this.assertNotClosed(),this.assertSendDirection();const d=this._mapMidTransceiver.get(y);if(!d)throw new Error("associated RTCRtpTransceiver not found");return d.sender.getStats()}async sendDataChannel({ordered:y,maxPacketLifeTime:d,maxRetransmits:R,label:m,protocol:P}){this.assertNotClosed(),this.assertSendDirection();const H={negotiated:!0,id:this._nextSendSctpStreamId,ordered:y,maxPacketLifeTime:d,maxRetransmits:R,protocol:P};g.debug("sendDataChannel() [options:%o]",H);const B=this._pc.createDataChannel(m,H);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%k.MIS,!this._hasDataChannelMediaSection){const L=await this._pc.createOffer(),z=x.parse(L.sdp),V=z.media.find(G=>G.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:z}),g.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",L),await this._pc.setLocalDescription(L),this._remoteSdp.sendSctpAssociation({offerMediaObject:V});const X={type:"answer",sdp:this._remoteSdp.getSdp()};g.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",X),await this._pc.setRemoteDescription(X),this._hasDataChannelMediaSection=!0}const $={streamId:H.id,ordered:H.ordered,maxPacketLifeTime:H.maxPacketLifeTime,maxRetransmits:H.maxRetransmits};return{dataChannel:B,sctpStreamParameters:$}}async receive(y){this.assertNotClosed(),this.assertRecvDirection();const d=[],R=new Map;for(const B of y){const{trackId:$,kind:L,rtpParameters:z,streamId:V}=B;g.debug("receive() [trackId:%s, kind:%s]",$,L);const X=z.mid??String(this._mapMidTransceiver.size);R.set($,X),this._remoteSdp.receive({mid:X,kind:L,offerRtpParameters:z,streamId:V??z.rtcp.cname,trackId:$})}const m={type:"offer",sdp:this._remoteSdp.getSdp()};g.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",m),await this._pc.setRemoteDescription(m);for(const B of y){const{trackId:$,onRtpReceiver:L}=B;if(L){const z=R.get($),V=this._pc.getTransceivers().find(X=>X.mid===z);if(!V)throw new Error("transceiver not found");L(V.receiver)}}let P=await this._pc.createAnswer();const H=x.parse(P.sdp);for(const B of y){const{trackId:$,rtpParameters:L}=B,z=R.get($),V=H.media.find(X=>String(X.mid)===z);n.applyCodecParameters({offerRtpParameters:L,answerMediaObject:V})}P={type:"answer",sdp:x.write(H)},this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:H}),g.debug("receive() | calling pc.setLocalDescription() [answer:%o]",P),await this._pc.setLocalDescription(P);for(const B of y){const{trackId:$}=B,L=R.get($),z=this._pc.getTransceivers().find(V=>V.mid===L);if(z)this._mapMidTransceiver.set(L,z),d.push({localId:L,track:z.receiver.track,rtpReceiver:z.receiver});else throw new Error("new RTCRtpTransceiver not found")}return d}async stopReceiving(y){if(this.assertRecvDirection(),this._closed)return;for(const m of y){g.debug("stopReceiving() [localId:%s]",m);const P=this._mapMidTransceiver.get(m);if(!P)throw new Error("associated RTCRtpTransceiver not found");this._remoteSdp.closeMediaSection(P.mid)}const d={type:"offer",sdp:this._remoteSdp.getSdp()};g.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",d),await this._pc.setRemoteDescription(d);const R=await this._pc.createAnswer();g.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",R),await this._pc.setLocalDescription(R);for(const m of y)this._mapMidTransceiver.delete(m)}async pauseReceiving(y){this.assertNotClosed(),this.assertRecvDirection();for(const m of y){g.debug("pauseReceiving() [localId:%s]",m);const P=this._mapMidTransceiver.get(m);if(!P)throw new Error("associated RTCRtpTransceiver not found");P.direction="inactive",this._remoteSdp.pauseMediaSection(m)}const d={type:"offer",sdp:this._remoteSdp.getSdp()};g.debug("pauseReceiving() | calling pc.setRemoteDescription() [offer:%o]",d),await this._pc.setRemoteDescription(d);const R=await this._pc.createAnswer();g.debug("pauseReceiving() | calling pc.setLocalDescription() [answer:%o]",R),await this._pc.setLocalDescription(R)}async resumeReceiving(y){this.assertNotClosed(),this.assertRecvDirection();for(const m of y){g.debug("resumeReceiving() [localId:%s]",m);const P=this._mapMidTransceiver.get(m);if(!P)throw new Error("associated RTCRtpTransceiver not found");P.direction="recvonly",this._remoteSdp.resumeReceivingMediaSection(m)}const d={type:"offer",sdp:this._remoteSdp.getSdp()};g.debug("resumeReceiving() | calling pc.setRemoteDescription() [offer:%o]",d),await this._pc.setRemoteDescription(d);const R=await this._pc.createAnswer();g.debug("resumeReceiving() | calling pc.setLocalDescription() [answer:%o]",R),await this._pc.setLocalDescription(R)}async getReceiverStats(y){this.assertNotClosed(),this.assertRecvDirection();const d=this._mapMidTransceiver.get(y);if(!d)throw new Error("associated RTCRtpTransceiver not found");return d.receiver.getStats()}async receiveDataChannel({sctpStreamParameters:y,label:d,protocol:R}){this.assertNotClosed(),this.assertRecvDirection();const{streamId:m,ordered:P,maxPacketLifeTime:H,maxRetransmits:B}=y,$={negotiated:!0,id:m,ordered:P,maxPacketLifeTime:H,maxRetransmits:B,protocol:R};g.debug("receiveDataChannel() [options:%o]",$);const L=this._pc.createDataChannel(d,$);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation();const z={type:"offer",sdp:this._remoteSdp.getSdp()};g.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",z),await this._pc.setRemoteDescription(z);const V=await this._pc.createAnswer();if(!this._transportReady){const X=x.parse(V.sdp);await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:X})}g.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",V),await this._pc.setLocalDescription(V),this._hasDataChannelMediaSection=!0}return{dataChannel:L}}async setupTransport({localDtlsRole:y,localSdpObject:d}){d||(d=x.parse(this._pc.localDescription.sdp));const R=n.extractDtlsParameters({sdpObject:d});R.role=y,this._remoteSdp.updateDtlsRole(y==="client"?"server":"client"),await new Promise((m,P)=>{this.safeEmit("@connect",{dtlsParameters:R},m,P)}),this._transportReady=!0}onIceGatheringStateChange=()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)};onIceCandidateError=y=>{this.emit("@icecandidateerror",y)};onConnectionStateChange=()=>{this.emit("@connectionstatechange",this._pc.connectionState)};onIceConnectionStateChange=()=>{switch(this._pc.iceConnectionState){case"checking":{this.emit("@connectionstatechange","connecting");break}case"connected":case"completed":{this.emit("@connectionstatechange","connected");break}case"failed":{this.emit("@connectionstatechange","failed");break}case"disconnected":{this.emit("@connectionstatechange","disconnected");break}case"closed":{this.emit("@connectionstatechange","closed");break}}};assertNotClosed(){if(this._closed)throw new J.InvalidStateError("method called in a closed handler")}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}}Y.Chrome111=W}),2211:(oe=>{var Y="0123456789",S="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",x="!$%^&*()_+|~-=`{}[]:;<>?,./";function C(b){return b||(b={}),{length:b.length||8,numeric:typeof b.numeric=="boolean"?b.numeric:!0,letters:typeof b.letters=="boolean"?b.letters:!0,special:typeof b.special=="boolean"?b.special:!1,exclude:Array.isArray(b.exclude)?b.exclude:[]}}function T(b){var J="";b.numeric&&(J+=Y),b.letters&&(J+=S),b.special&&(J+=x);for(var w=0;w<=b.exclude.length;w++)J=J.replace(b.exclude[w],"");return J}oe.exports=function(J){J=C(J);var w,n,f="",U=J.length;J.exclude;var q=T(J);for(w=1;w<=U;w++)f+=q.substring(n=Math.floor(Math.random()*q.length),n+1);return f}}),2215:((oe,Y,S)=>{var x,C;(function(T){var b;if(x=T,C=typeof x=="function"?x.call(Y,S,Y,oe):x,C!==void 0&&(oe.exports=C),b=!0,oe.exports=T(),b=!0,!b){var J=window.Cookies,w=window.Cookies=T();w.noConflict=function(){return window.Cookies=J,w}}})(function(){function T(){for(var w=0,n={};w<arguments.length;w++){var f=arguments[w];for(var U in f)n[U]=f[U]}return n}function b(w){return w.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}function J(w){function n(){}function f(q,g,h){if(!(typeof document>"u")){h=T({path:"/"},n.defaults,h),typeof h.expires=="number"&&(h.expires=new Date(new Date*1+h.expires*864e5)),h.expires=h.expires?h.expires.toUTCString():"";try{var k=JSON.stringify(g);/^[\{\[]/.test(k)&&(g=k)}catch{}g=w.write?w.write(g,q):encodeURIComponent(String(g)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),q=encodeURIComponent(String(q)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var W="";for(var j in h)h[j]&&(W+="; "+j,h[j]!==!0&&(W+="="+h[j].split(";")[0]));return document.cookie=q+"="+g+W}}function U(q,g){if(!(typeof document>"u")){for(var h={},k=document.cookie?document.cookie.split("; "):[],W=0;W<k.length;W++){var j=k[W].split("="),y=j.slice(1).join("=");!g&&y.charAt(0)==='"'&&(y=y.slice(1,-1));try{var d=b(j[0]);if(y=(w.read||w)(y,d)||b(y),g)try{y=JSON.parse(y)}catch{}if(h[d]=y,q===d)break}catch{}}return q?h[q]:h}}return n.set=f,n.get=function(q){return U(q,!1)},n.getJSON=function(q){return U(q,!0)},n.remove=function(q,g){f(q,"",T(g,{expires:-1}))},n.defaults={},n.withConverter=J,n}return J(function(){})})}),2284:((oe,Y,S)=>{S.d(Y,{A:()=>x});function x(C){"@babel/helpers - typeof";return x=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(T){return typeof T}:function(T){return T&&typeof Symbol=="function"&&T.constructor===Symbol&&T!==Symbol.prototype?"symbol":typeof T},x(C)}}),2292:((oe,Y,S)=>{Object.defineProperty(Y,"__esModule",{value:!0}),Y.Firefox120=void 0;const x=S(7363),C=S(3953),T=S(2994),b=S(4893),J=S(8046),w=S(3303),n=S(5544),f=S(5938),U=S(1305),q=new T.Logger("Firefox120"),g="Firefox120",h={OS:16,MIS:2048};class k extends C.EnhancedEventEmitter{_closed=!1;_direction;_remoteSdp;_getSendExtendedRtpCapabilities;_pc;_mapMidTransceiver=new Map;_sendStream=new MediaStream;_hasDataChannelMediaSection=!1;_nextSendSctpStreamId=0;_transportReady=!1;static createFactory(){return{name:g,factory:j=>new k(j),getNativeRtpCapabilities:async()=>{q.debug("getNativeRtpCapabilities()");let j=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require"});const y=document.createElement("canvas");y.getContext("2d");const R=y.captureStream().getVideoTracks()[0];try{j.addTransceiver("audio",{direction:"sendrecv"}),j.addTransceiver(R,{direction:"sendrecv",sendEncodings:[{rid:"r0",maxBitrate:1e5},{rid:"r1",maxBitrate:5e5}]});const m=await j.createOffer();try{y.remove()}catch{}try{R.stop()}catch{}try{j.close()}catch{}j=void 0;const P=x.parse(m.sdp);return k.getLocalRtpCapabilities(P)}catch(m){try{y.remove()}catch{}try{R.stop()}catch{}try{j?.close()}catch{}throw j=void 0,m}},getNativeSctpCapabilities:async()=>(q.debug("getNativeSctpCapabilities()"),{numStreams:h})}}static getLocalRtpCapabilities(j){const y=n.extractRtpCapabilities({sdpObject:j});return J.validateAndNormalizeRtpCapabilities(y),y}constructor({direction:j,iceParameters:y,iceCandidates:d,dtlsParameters:R,sctpParameters:m,iceServers:P,iceTransportPolicy:H,additionalSettings:B,getSendExtendedRtpCapabilities:$}){super(),q.debug("constructor()"),this._direction=j,this._remoteSdp=new U.RemoteSdp({iceParameters:y,iceCandidates:d,dtlsParameters:R,sctpParameters:m}),this._getSendExtendedRtpCapabilities=$,this._pc=new RTCPeerConnection({iceServers:P??[],iceTransportPolicy:H??"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",...B}),this._pc.addEventListener("icegatheringstatechange",this.onIceGatheringStateChange),this._pc.addEventListener("icecandidateerror",this.onIceCandidateError),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",this.onConnectionStateChange):(q.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.addEventListener("iceconnectionstatechange",this.onIceConnectionStateChange))}get name(){return g}close(){if(q.debug("close()"),!this._closed){this._closed=!0;try{this._pc.close()}catch{}this._pc.removeEventListener("icegatheringstatechange",this.onIceGatheringStateChange),this._pc.removeEventListener("icecandidateerror",this.onIceCandidateError),this._pc.removeEventListener("connectionstatechange",this.onConnectionStateChange),this._pc.removeEventListener("iceconnectionstatechange",this.onIceConnectionStateChange),this.emit("@close"),super.close()}}async updateIceServers(j){throw this.assertNotClosed(),new b.UnsupportedError("not supported")}async restartIce(j){if(this.assertNotClosed(),q.debug("restartIce()"),this._remoteSdp.updateIceParameters(j),!!this._transportReady)if(this._direction==="send"){const y=await this._pc.createOffer({iceRestart:!0});q.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",y),await this._pc.setLocalDescription(y);const d={type:"answer",sdp:this._remoteSdp.getSdp()};q.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",d),await this._pc.setRemoteDescription(d)}else{const y={type:"offer",sdp:this._remoteSdp.getSdp()};q.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",y),await this._pc.setRemoteDescription(y);const d=await this._pc.createAnswer();q.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",d),await this._pc.setLocalDescription(d)}}async getTransportStats(){return this.assertNotClosed(),this._pc.getStats()}async send({track:j,encodings:y,codecOptions:d,codec:R,onRtpSender:m}){this.assertNotClosed(),this.assertSendDirection(),q.debug("send() [kind:%s, track.id:%s]",j.kind,j.id),y&&y.length>1&&y.forEach((le,pe)=>{le.rid=`r${pe}`});const P=this._pc.addTransceiver(j,{direction:"sendonly",streams:[this._sendStream],sendEncodings:y});m&&m(P.sender);const H=await this._pc.createOffer();let B=x.parse(H.sdp);B.extmapAllowMixed&&this._remoteSdp.setSessionExtmapAllowMixed();const $=k.getLocalRtpCapabilities(B),L=this._getSendExtendedRtpCapabilities($),z=J.getSendingRtpParameters(j.kind,L);z.codecs=J.reduceCodecs(z.codecs,R);const V=J.getSendingRemoteRtpParameters(j.kind,L);V.codecs=J.reduceCodecs(V.codecs,R),this._transportReady||await this.setupTransport({localDtlsRole:"client",localSdpObject:B});const X=(0,w.parse)((y??[{}])[0].scalabilityMode);q.debug("send() | calling pc.setLocalDescription() [offer:%o]",H),await this._pc.setLocalDescription(H);const G=P.mid;z.mid=G,B=x.parse(this._pc.localDescription.sdp);const ae=B.media[B.media.length-1];if(z.rtcp.cname=n.getCname({offerMediaObject:ae}),!y)z.encodings=f.getRtpEncodings({offerMediaObject:ae});else if(y.length===1){const le=f.getRtpEncodings({offerMediaObject:ae});Object.assign(le[0],y[0]),z.encodings=le}else z.encodings=y;if(z.encodings.length>1&&(z.codecs[0].mimeType.toLowerCase()==="video/vp8"||z.codecs[0].mimeType.toLowerCase()==="video/h264"))for(const le of z.encodings)le.scalabilityMode?le.scalabilityMode=`L1T${X.temporalLayers}`:le.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:ae,offerRtpParameters:z,answerRtpParameters:V,codecOptions:d});const Q={type:"answer",sdp:this._remoteSdp.getSdp()};return q.debug("send() | calling pc.setRemoteDescription() [answer:%o]",Q),await this._pc.setRemoteDescription(Q),this._mapMidTransceiver.set(G,P),{localId:G,rtpParameters:z,rtpSender:P.sender}}async stopSending(j){if(this.assertSendDirection(),q.debug("stopSending() [localId:%s]",j),this._closed)return;const y=this._mapMidTransceiver.get(j);if(!y)throw new Error("associated transceiver not found");y.sender.replaceTrack(null),this._pc.removeTrack(y.sender),this._remoteSdp.disableMediaSection(y.mid);const d=await this._pc.createOffer();q.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",d),await this._pc.setLocalDescription(d);const R={type:"answer",sdp:this._remoteSdp.getSdp()};q.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",R),await this._pc.setRemoteDescription(R),this._mapMidTransceiver.delete(j)}async pauseSending(j){this.assertNotClosed(),this.assertSendDirection(),q.debug("pauseSending() [localId:%s]",j);const y=this._mapMidTransceiver.get(j);if(!y)throw new Error("associated RTCRtpTransceiver not found");y.direction="inactive",this._remoteSdp.pauseMediaSection(j);const d=await this._pc.createOffer();q.debug("pauseSending() | calling pc.setLocalDescription() [offer:%o]",d),await this._pc.setLocalDescription(d);const R={type:"answer",sdp:this._remoteSdp.getSdp()};q.debug("pauseSending() | calling pc.setRemoteDescription() [answer:%o]",R),await this._pc.setRemoteDescription(R)}async resumeSending(j){this.assertNotClosed(),this.assertSendDirection(),q.debug("resumeSending() [localId:%s]",j);const y=this._mapMidTransceiver.get(j);if(!y)throw new Error("associated RTCRtpTransceiver not found");y.direction="sendonly",this._remoteSdp.resumeSendingMediaSection(j);const d=await this._pc.createOffer();q.debug("resumeSending() | calling pc.setLocalDescription() [offer:%o]",d),await this._pc.setLocalDescription(d);const R={type:"answer",sdp:this._remoteSdp.getSdp()};q.debug("resumeSending() | calling pc.setRemoteDescription() [answer:%o]",R),await this._pc.setRemoteDescription(R)}async replaceTrack(j,y){this.assertNotClosed(),this.assertSendDirection(),y?q.debug("replaceTrack() [localId:%s, track.id:%s]",j,y.id):q.debug("replaceTrack() [localId:%s, no track]",j);const d=this._mapMidTransceiver.get(j);if(!d)throw new Error("associated RTCRtpTransceiver not found");await d.sender.replaceTrack(y)}async setMaxSpatialLayer(j,y){this.assertNotClosed(),this.assertSendDirection(),q.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",j,y);const d=this._mapMidTransceiver.get(j);if(!d)throw new Error("associated transceiver not found");const R=d.sender.getParameters();R.encodings.forEach((H,B)=>{B<=y?H.active=!0:H.active=!1}),await d.sender.setParameters(R),this._remoteSdp.muxMediaSectionSimulcast(j,R.encodings);const m=await this._pc.createOffer();q.debug("setMaxSpatialLayer() | calling pc.setLocalDescription() [offer:%o]",m),await this._pc.setLocalDescription(m);const P={type:"answer",sdp:this._remoteSdp.getSdp()};q.debug("setMaxSpatialLayer() | calling pc.setRemoteDescription() [answer:%o]",P),await this._pc.setRemoteDescription(P)}async setRtpEncodingParameters(j,y){this.assertNotClosed(),this.assertSendDirection(),q.debug("setRtpEncodingParameters() [localId:%s, params:%o]",j,y);const d=this._mapMidTransceiver.get(j);if(!d)throw new Error("associated RTCRtpTransceiver not found");const R=d.sender.getParameters();R.encodings.forEach((H,B)=>{R.encodings[B]={...H,...y}}),await d.sender.setParameters(R),this._remoteSdp.muxMediaSectionSimulcast(j,R.encodings);const m=await this._pc.createOffer();q.debug("setRtpEncodingParameters() | calling pc.setLocalDescription() [offer:%o]",m),await this._pc.setLocalDescription(m);const P={type:"answer",sdp:this._remoteSdp.getSdp()};q.debug("setRtpEncodingParameters() | calling pc.setRemoteDescription() [answer:%o]",P),await this._pc.setRemoteDescription(P)}async getSenderStats(j){this.assertNotClosed(),this.assertSendDirection();const y=this._mapMidTransceiver.get(j);if(!y)throw new Error("associated RTCRtpTransceiver not found");return y.sender.getStats()}async sendDataChannel({ordered:j,maxPacketLifeTime:y,maxRetransmits:d,label:R,protocol:m}){this.assertNotClosed(),this.assertSendDirection();const P={negotiated:!0,id:this._nextSendSctpStreamId,ordered:j,maxPacketLifeTime:y,maxRetransmits:d,protocol:m};q.debug("sendDataChannel() [options:%o]",P);const H=this._pc.createDataChannel(R,P);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%h.MIS,!this._hasDataChannelMediaSection){const $=await this._pc.createOffer(),L=x.parse($.sdp),z=L.media.find(X=>X.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:"client",localSdpObject:L}),q.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",$),await this._pc.setLocalDescription($),this._remoteSdp.sendSctpAssociation({offerMediaObject:z});const V={type:"answer",sdp:this._remoteSdp.getSdp()};q.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",V),await this._pc.setRemoteDescription(V),this._hasDataChannelMediaSection=!0}const B={streamId:P.id,ordered:P.ordered,maxPacketLifeTime:P.maxPacketLifeTime,maxRetransmits:P.maxRetransmits};return{dataChannel:H,sctpStreamParameters:B}}async receive(j){this.assertNotClosed(),this.assertRecvDirection();const y=[],d=new Map;for(const H of j){const{trackId:B,kind:$,rtpParameters:L,streamId:z}=H;q.debug("receive() [trackId:%s, kind:%s]",B,$);const V=L.mid??String(this._mapMidTransceiver.size);d.set(B,V),this._remoteSdp.receive({mid:V,kind:$,offerRtpParameters:L,streamId:z??L.rtcp.cname,trackId:B})}const R={type:"offer",sdp:this._remoteSdp.getSdp()};q.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",R),await this._pc.setRemoteDescription(R);for(const H of j){const{trackId:B,onRtpReceiver:$}=H;if($){const L=d.get(B),z=this._pc.getTransceivers().find(V=>V.mid===L);if(!z)throw new Error("transceiver not found");$(z.receiver)}}let m=await this._pc.createAnswer();const P=x.parse(m.sdp);for(const H of j){const{trackId:B,rtpParameters:$}=H,L=d.get(B),z=P.media.find(V=>String(V.mid)===L);n.applyCodecParameters({offerRtpParameters:$,answerMediaObject:z}),m={type:"answer",sdp:x.write(P)}}this._transportReady||await this.setupTransport({localDtlsRole:"client",localSdpObject:P}),q.debug("receive() | calling pc.setLocalDescription() [answer:%o]",m),await this._pc.setLocalDescription(m);for(const H of j){const{trackId:B}=H,$=d.get(B),L=this._pc.getTransceivers().find(z=>z.mid===$);if(!L)throw new Error("new RTCRtpTransceiver not found");this._mapMidTransceiver.set($,L),y.push({localId:$,track:L.receiver.track,rtpReceiver:L.receiver})}return y}async stopReceiving(j){if(this.assertRecvDirection(),this._closed)return;for(const R of j){q.debug("stopReceiving() [localId:%s]",R);const m=this._mapMidTransceiver.get(R);if(!m)throw new Error("associated RTCRtpTransceiver not found");this._remoteSdp.closeMediaSection(m.mid)}const y={type:"offer",sdp:this._remoteSdp.getSdp()};q.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",y),await this._pc.setRemoteDescription(y);const d=await this._pc.createAnswer();q.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",d),await this._pc.setLocalDescription(d);for(const R of j)this._mapMidTransceiver.delete(R)}async pauseReceiving(j){this.assertNotClosed(),this.assertRecvDirection();for(const R of j){q.debug("pauseReceiving() [localId:%s]",R);const m=this._mapMidTransceiver.get(R);if(!m)throw new Error("associated RTCRtpTransceiver not found");m.direction="inactive",this._remoteSdp.pauseMediaSection(R)}const y={type:"offer",sdp:this._remoteSdp.getSdp()};q.debug("pauseReceiving() | calling pc.setRemoteDescription() [offer:%o]",y),await this._pc.setRemoteDescription(y);const d=await this._pc.createAnswer();q.debug("pauseReceiving() | calling pc.setLocalDescription() [answer:%o]",d),await this._pc.setLocalDescription(d)}async resumeReceiving(j){this.assertNotClosed(),this.assertRecvDirection();for(const R of j){q.debug("resumeReceiving() [localId:%s]",R);const m=this._mapMidTransceiver.get(R);if(!m)throw new Error("associated RTCRtpTransceiver not found");m.direction="recvonly",this._remoteSdp.resumeReceivingMediaSection(R)}const y={type:"offer",sdp:this._remoteSdp.getSdp()};q.debug("resumeReceiving() | calling pc.setRemoteDescription() [offer:%o]",y),await this._pc.setRemoteDescription(y);const d=await this._pc.createAnswer();q.debug("resumeReceiving() | calling pc.setLocalDescription() [answer:%o]",d),await this._pc.setLocalDescription(d)}async getReceiverStats(j){this.assertRecvDirection();const y=this._mapMidTransceiver.get(j);if(!y)throw new Error("associated RTCRtpTransceiver not found");return y.receiver.getStats()}async receiveDataChannel({sctpStreamParameters:j,label:y,protocol:d}){this.assertNotClosed(),this.assertRecvDirection();const{streamId:R,ordered:m,maxPacketLifeTime:P,maxRetransmits:H}=j,B={negotiated:!0,id:R,ordered:m,maxPacketLifeTime:P,maxRetransmits:H,protocol:d};q.debug("receiveDataChannel() [options:%o]",B);const $=this._pc.createDataChannel(y,B);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation();const L={type:"offer",sdp:this._remoteSdp.getSdp()};q.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",L),await this._pc.setRemoteDescription(L);const z=await this._pc.createAnswer();if(!this._transportReady){const V=x.parse(z.sdp);await this.setupTransport({localDtlsRole:"client",localSdpObject:V})}q.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",z),await this._pc.setLocalDescription(z),this._hasDataChannelMediaSection=!0}return{dataChannel:$}}async setupTransport({localDtlsRole:j,localSdpObject:y}){y||(y=x.parse(this._pc.localDescription.sdp));const d=n.extractDtlsParameters({sdpObject:y});d.role=j,this._remoteSdp.updateDtlsRole(j==="client"?"server":"client"),await new Promise((R,m)=>{this.safeEmit("@connect",{dtlsParameters:d},R,m)}),this._transportReady=!0}onIceGatheringStateChange=()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)};onIceCandidateError=j=>{this.emit("@icecandidateerror",j)};onConnectionStateChange=()=>{this.emit("@connectionstatechange",this._pc.connectionState)};onIceConnectionStateChange=()=>{switch(this._pc.iceConnectionState){case"checking":{this.emit("@connectionstatechange","connecting");break}case"connected":case"completed":{this.emit("@connectionstatechange","connected");break}case"failed":{this.emit("@connectionstatechange","failed");break}case"disconnected":{this.emit("@connectionstatechange","disconnected");break}case"closed":{this.emit("@connectionstatechange","closed");break}}};assertNotClosed(){if(this._closed)throw new b.InvalidStateError("method called in a closed handler")}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}}Y.Firefox120=k}),2614:((oe,Y)=>{for(var S=256,x=[],C;S--;)x[S]=(S+256).toString(16).substring(1);function T(){var b=0,J,w="";if(!C||S+16>256){for(C=Array(b=256);b--;)C[b]=256*Math.random()|0;b=S=0}for(;b<16;b++)J=C[S+b],b==6?w+=x[J&15|64]:b==8?w+=x[J&63|128]:w+=x[J],b&1&&b>1&&b<11&&(w+="-");return S++,w}Y.v4=T}),2696:(function(oe,Y,S){(function(x,C,T){oe.exports=C(S(9021),S(754),S(4636),S(9506),S(7165))})(this,function(x){return(function(){var C=x,T=C.lib,b=T.StreamCipher,J=C.algo,w=[],n=[],f=[],U=J.RabbitLegacy=b.extend({_doReset:function(){var g=this._key.words,h=this.cfg.iv,k=this._X=[g[0],g[3]<<16|g[2]>>>16,g[1],g[0]<<16|g[3]>>>16,g[2],g[1]<<16|g[0]>>>16,g[3],g[2]<<16|g[1]>>>16],W=this._C=[g[2]<<16|g[2]>>>16,g[0]&4294901760|g[1]&65535,g[3]<<16|g[3]>>>16,g[1]&4294901760|g[2]&65535,g[0]<<16|g[0]>>>16,g[2]&4294901760|g[3]&65535,g[1]<<16|g[1]>>>16,g[3]&4294901760|g[0]&65535];this._b=0;for(var j=0;j<4;j++)q.call(this);for(var j=0;j<8;j++)W[j]^=k[j+4&7];if(h){var y=h.words,d=y[0],R=y[1],m=(d<<8|d>>>24)&16711935|(d<<24|d>>>8)&4278255360,P=(R<<8|R>>>24)&16711935|(R<<24|R>>>8)&4278255360,H=m>>>16|P&4294901760,B=P<<16|m&65535;W[0]^=m,W[1]^=H,W[2]^=P,W[3]^=B,W[4]^=m,W[5]^=H,W[6]^=P,W[7]^=B;for(var j=0;j<4;j++)q.call(this)}},_doProcessBlock:function(g,h){var k=this._X;q.call(this),w[0]=k[0]^k[5]>>>16^k[3]<<16,w[1]=k[2]^k[7]>>>16^k[5]<<16,w[2]=k[4]^k[1]>>>16^k[7]<<16,w[3]=k[6]^k[3]>>>16^k[1]<<16;for(var W=0;W<4;W++)w[W]=(w[W]<<8|w[W]>>>24)&16711935|(w[W]<<24|w[W]>>>8)&4278255360,g[h+W]^=w[W]},blockSize:128/32,ivSize:64/32});function q(){for(var g=this._X,h=this._C,k=0;k<8;k++)n[k]=h[k];h[0]=h[0]+1295307597+this._b|0,h[1]=h[1]+3545052371+(h[0]>>>0<n[0]>>>0?1:0)|0,h[2]=h[2]+886263092+(h[1]>>>0<n[1]>>>0?1:0)|0,h[3]=h[3]+1295307597+(h[2]>>>0<n[2]>>>0?1:0)|0,h[4]=h[4]+3545052371+(h[3]>>>0<n[3]>>>0?1:0)|0,h[5]=h[5]+886263092+(h[4]>>>0<n[4]>>>0?1:0)|0,h[6]=h[6]+1295307597+(h[5]>>>0<n[5]>>>0?1:0)|0,h[7]=h[7]+3545052371+(h[6]>>>0<n[6]>>>0?1:0)|0,this._b=h[7]>>>0<n[7]>>>0?1:0;for(var k=0;k<8;k++){var W=g[k]+h[k],j=W&65535,y=W>>>16,d=((j*j>>>17)+j*y>>>15)+y*y,R=((W&4294901760)*W|0)+((W&65535)*W|0);f[k]=d^R}g[0]=f[0]+(f[7]<<16|f[7]>>>16)+(f[6]<<16|f[6]>>>16)|0,g[1]=f[1]+(f[0]<<8|f[0]>>>24)+f[7]|0,g[2]=f[2]+(f[1]<<16|f[1]>>>16)+(f[0]<<16|f[0]>>>16)|0,g[3]=f[3]+(f[2]<<8|f[2]>>>24)+f[1]|0,g[4]=f[4]+(f[3]<<16|f[3]>>>16)+(f[2]<<16|f[2]>>>16)|0,g[5]=f[5]+(f[4]<<8|f[4]>>>24)+f[3]|0,g[6]=f[6]+(f[5]<<16|f[5]>>>16)+(f[4]<<16|f[4]>>>16)|0,g[7]=f[7]+(f[6]<<8|f[6]>>>24)+f[5]|0}C.RabbitLegacy=b._createHelper(U)})(),x.RabbitLegacy})}),2731:((oe,Y,S)=>{Object.defineProperty(Y,"__esModule",{value:!0}),Y.FakeHandler=void 0;const x=S(5328),C=S(3953),T=S(2994),b=S(1765),J=S(8046),w=S(4893),n=S(3051),f=new T.Logger("FakeHandler"),U="FakeHandler";class q extends C.EnhancedEventEmitter{_closed=!1;_fakeParameters;_getSendExtendedRtpCapabilities;_cname=`CNAME-${b.generateRandomNumber()}`;_transportReady=!1;_nextLocalId=1;_tracks=new Map;_nextSctpStreamId=0;static createFactory(k){return{name:U,factory:W=>new q(W,k),getNativeRtpCapabilities:async()=>(f.debug("getNativeRtpCapabilities()"),q.getLocalRtpCapabilities(k)),getNativeSctpCapabilities:async()=>(f.debug("getNativeSctpCapabilities()"),k.generateNativeSctpCapabilities())}}static getLocalRtpCapabilities(k){const W=k.generateNativeRtpCapabilities();return J.validateAndNormalizeRtpCapabilities(W),W}constructor({getSendExtendedRtpCapabilities:k},W){super(),f.debug("constructor()"),this._getSendExtendedRtpCapabilities=k,this._fakeParameters=W}get name(){return U}close(){f.debug("close()"),!this._closed&&(this._closed=!0,super.close())}setIceGatheringState(k){this.emit("@icegatheringstatechange",k)}setConnectionState(k){this.emit("@connectionstatechange",k)}async updateIceServers(k){this.assertNotClosed(),f.debug("updateIceServers()")}async restartIce(k){this.assertNotClosed(),f.debug("restartIce()")}async getTransportStats(){return this.assertNotClosed(),new Map}async send({track:k,encodings:W,codecOptions:j,codec:y}){this.assertNotClosed(),f.debug("send() [kind:%s, track.id:%s]",k.kind,k.id),this._transportReady||await this.setupTransport({localDtlsRole:"server"});const d=q.getLocalRtpCapabilities(this._fakeParameters),R=this._getSendExtendedRtpCapabilities(d),m=J.getSendingRtpParameters(k.kind,R);m.codecs=J.reduceCodecs(m.codecs,y);const P=m.codecs.some(B=>/.+\/rtx$/i.test(B.mimeType));m.mid=`mid-${b.generateRandomNumber()}`,W||(W=[{}]);for(const B of W)B.ssrc=b.generateRandomNumber(),P&&(B.rtx={ssrc:b.generateRandomNumber()});m.encodings=W,m.rtcp={cname:this._cname,reducedSize:!0,mux:!0};const H=this._nextLocalId++;return this._tracks.set(H,k),{localId:String(H),rtpParameters:m}}async stopSending(k){if(f.debug("stopSending() [localId:%s]",k),!this._closed){if(!this._tracks.has(Number(k)))throw new Error("local track not found");this._tracks.delete(Number(k))}}async pauseSending(k){this.assertNotClosed()}async resumeSending(k){this.assertNotClosed()}async replaceTrack(k,W){this.assertNotClosed(),W?f.debug("replaceTrack() [localId:%s, track.id:%s]",k,W.id):f.debug("replaceTrack() [localId:%s, no track]",k),this._tracks.delete(Number(k)),this._tracks.set(Number(k),W)}async setMaxSpatialLayer(k,W){this.assertNotClosed(),f.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",k,W)}async setRtpEncodingParameters(k,W){this.assertNotClosed(),f.debug("setRtpEncodingParameters() [localId:%s, params:%o]",k,W)}async getSenderStats(k){return this.assertNotClosed(),new Map}async sendDataChannel({ordered:k,maxPacketLifeTime:W,maxRetransmits:j,label:y,protocol:d}){this.assertNotClosed(),this._transportReady||await this.setupTransport({localDtlsRole:"server"}),f.debug("sendDataChannel()");const R=new g({id:this._nextSctpStreamId++,ordered:k,maxPacketLifeTime:W,maxRetransmits:j,label:y,protocol:d}),m={streamId:this._nextSctpStreamId,ordered:k,maxPacketLifeTime:W,maxRetransmits:j};return{dataChannel:R,sctpStreamParameters:m}}async receive(k){this.assertNotClosed();const W=[];for(const j of k){const{trackId:y,kind:d}=j;this._transportReady||await this.setupTransport({localDtlsRole:"client"}),f.debug("receive() [trackId:%s, kind:%s]",y,d);const R=this._nextLocalId++,m=new x.FakeMediaStreamTrack({kind:d});this._tracks.set(R,m),W.push({localId:String(R),track:m})}return W}async stopReceiving(k){if(!this._closed)for(const W of k)f.debug("stopReceiving() [localId:%s]",W),this._tracks.delete(Number(W))}async pauseReceiving(k){this.assertNotClosed()}async resumeReceiving(k){this.assertNotClosed()}async getReceiverStats(k){return this.assertNotClosed(),new Map}async receiveDataChannel({sctpStreamParameters:k,label:W,protocol:j}){return this.assertNotClosed(),this._transportReady||await this.setupTransport({localDtlsRole:"client"}),f.debug("receiveDataChannel()"),{dataChannel:new g({id:k.streamId,ordered:k.ordered,maxPacketLifeTime:k.maxPacketLifeTime,maxRetransmits:k.maxRetransmits,label:W,protocol:j})}}async setupTransport({localDtlsRole:k,localSdpObject:W}){const j=b.clone(this._fakeParameters.generateLocalDtlsParameters());k&&(j.role=k),this.emit("@connectionstatechange","connecting"),await new Promise((y,d)=>this.emit("@connect",{dtlsParameters:j},y,d)),this._transportReady=!0}assertNotClosed(){if(this._closed)throw new w.InvalidStateError("method called in a closed handler")}}Y.FakeHandler=q;class g extends n.FakeEventTarget{_id;_negotiated=!0;_ordered;_maxPacketLifeTime;_maxRetransmits;_label;_protocol;_readyState="connecting";_bufferedAmount=0;_bufferedAmountLowThreshold=0;_binaryType="arraybuffer";_onopen=null;_onclosing=null;_onclose=null;_onmessage=null;_onbufferedamountlow=null;_onerror=null;constructor({id:k,ordered:W=!0,maxPacketLifeTime:j=null,maxRetransmits:y=null,label:d="",protocol:R=""}){super(),f.debug(`constructor() [id:${k}, ordered:${W}, maxPacketLifeTime:${j}, maxRetransmits:${y}, label:${d}, protocol:${R}`),this._id=k,this._ordered=W,this._maxPacketLifeTime=j,this._maxRetransmits=y,this._label=d,this._protocol=R}get id(){return this._id}get negotiated(){return this._negotiated}get ordered(){return this._ordered}get maxPacketLifeTime(){return this._maxPacketLifeTime}get maxRetransmits(){return this._maxRetransmits}get label(){return this._label}get protocol(){return this._protocol}get readyState(){return this._readyState}get bufferedAmount(){return this._bufferedAmount}get bufferedAmountLowThreshold(){return this._bufferedAmountLowThreshold}set bufferedAmountLowThreshold(k){this._bufferedAmountLowThreshold=k}get binaryType(){return this._binaryType}set binaryType(k){this._binaryType=k}get onopen(){return this._onopen}set onopen(k){this._onopen&&this.removeEventListener("open",this._onopen),this._onopen=k,k&&this.addEventListener("open",k)}get onclosing(){return this._onclosing}set onclosing(k){this._onclosing&&this.removeEventListener("closing",this._onclosing),this._onclosing=k,k&&this.addEventListener("closing",k)}get onclose(){return this._onclose}set onclose(k){this._onclose&&this.removeEventListener("close",this._onclose),this._onclose=k,k&&this.addEventListener("close",k)}get onmessage(){return this._onmessage}set onmessage(k){this._onmessage&&this.removeEventListener("message",this._onmessage),this._onmessage=k,k&&this.addEventListener("message",k)}get onbufferedamountlow(){return this._onbufferedamountlow}set onbufferedamountlow(k){this._onbufferedamountlow&&this.removeEventListener("bufferedamountlow",this._onbufferedamountlow),this._onbufferedamountlow=k,k&&this.addEventListener("bufferedamountlow",k)}get onerror(){return this._onerror}set onerror(k){this._onerror&&this.removeEventListener("error",this._onerror),this._onerror=k,k&&this.addEventListener("error",k)}addEventListener(k,W,j){super.addEventListener(k,W,j)}removeEventListener(k,W,j){super.removeEventListener(k,W,j)}close(){["closing","closed"].includes(this._readyState)||(this._readyState="closed")}send(k){if(this._readyState!=="open")throw new w.InvalidStateError("not open")}}}),2901:((oe,Y,S)=>{S.d(Y,{A:()=>T});var x=S(816);function C(b,J){for(var w=0;w<J.length;w++){var n=J[w];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(b,(0,x.A)(n.key),n)}}function T(b,J,w){return J&&C(b.prototype,J),w&&C(b,w),Object.defineProperty(b,"prototype",{writable:!1}),b}}),2994:((oe,Y,S)=>{Object.defineProperty(Y,"__esModule",{value:!0}),Y.Logger=void 0;const x=S(7833),C="mediasoup-client";class T{_debug;_warn;_error;constructor(J){J?(this._debug=(0,x.default)(`${C}:${J}`),this._warn=(0,x.default)(`${C}:WARN:${J}`),this._error=(0,x.default)(`${C}:ERROR:${J}`)):(this._debug=(0,x.default)(C),this._warn=(0,x.default)(`${C}:WARN`),this._error=(0,x.default)(`${C}:ERROR`)),this._debug.log=console.info.bind(console),this._warn.log=console.warn.bind(console),this._error.log=console.error.bind(console)}get debug(){return this._debug}get warn(){return this._warn}get error(){return this._error}}Y.Logger=T}),3009:(function(oe,Y,S){(function(x,C){oe.exports=C(S(9021))})(this,function(x){return(function(C){var T=x,b=T.lib,J=b.WordArray,w=b.Hasher,n=T.algo,f=[],U=[];(function(){function h(y){for(var d=C.sqrt(y),R=2;R<=d;R++)if(!(y%R))return!1;return!0}function k(y){return(y-(y|0))*4294967296|0}for(var W=2,j=0;j<64;)h(W)&&(j<8&&(f[j]=k(C.pow(W,.5))),U[j]=k(C.pow(W,.3333333333333333)),j++),W++})();var q=[],g=n.SHA256=w.extend({_doReset:function(){this._hash=new J.init(f.slice(0))},_doProcessBlock:function(h,k){for(var W=this._hash.words,j=W[0],y=W[1],d=W[2],R=W[3],m=W[4],P=W[5],H=W[6],B=W[7],$=0;$<64;$++){if($<16)q[$]=h[k+$]|0;else{var L=q[$-15],z=(L<<25|L>>>7)^(L<<14|L>>>18)^L>>>3,V=q[$-2],X=(V<<15|V>>>17)^(V<<13|V>>>19)^V>>>10;q[$]=z+q[$-7]+X+q[$-16]}var G=m&P^~m&H,ae=j&y^j&d^y&d,Q=(j<<30|j>>>2)^(j<<19|j>>>13)^(j<<10|j>>>22),le=(m<<26|m>>>6)^(m<<21|m>>>11)^(m<<7|m>>>25),pe=B+le+G+U[$]+q[$],ue=Q+ae;B=H,H=P,P=m,m=R+pe|0,R=d,d=y,y=j,j=pe+ue|0}W[0]=W[0]+j|0,W[1]=W[1]+y|0,W[2]=W[2]+d|0,W[3]=W[3]+R|0,W[4]=W[4]+m|0,W[5]=W[5]+P|0,W[6]=W[6]+H|0,W[7]=W[7]+B|0},_doFinalize:function(){var h=this._data,k=h.words,W=this._nDataBytes*8,j=h.sigBytes*8;return k[j>>>5]|=128<<24-j%32,k[(j+64>>>9<<4)+14]=C.floor(W/4294967296),k[(j+64>>>9<<4)+15]=W,h.sigBytes=k.length*4,this._process(),this._hash},clone:function(){var h=w.clone.call(this);return h._hash=this._hash.clone(),h}});T.SHA256=w._createHelper(g),T.HmacSHA256=w._createHmacHelper(g)})(Math),x.SHA256})}),3029:((oe,Y,S)=>{S.d(Y,{A:()=>x});function x(C,T){if(!(C instanceof T))throw new TypeError("Cannot call a class as a function")}}),3051:((oe,Y)=>{Object.defineProperty(Y,"__esModule",{value:!0}),Y.FakeEventTarget=void 0;class S{listeners={};addEventListener(C,T,b){T&&(this.listeners[C]??=[],this.listeners[C].push({callback:typeof T=="function"?T:T.handleEvent,once:typeof b=="object"&&b.once===!0}))}removeEventListener(C,T,b){this.listeners[C]&&T&&(this.listeners[C]=this.listeners[C].filter(J=>J.callback!==(typeof T=="function"?T:T.handleEvent)))}dispatchEvent(C){if(!C||typeof C.type!="string")throw new Error("invalid event object");const T=this.listeners[C.type];if(!T)return!0;for(const b of[...T]){try{b.callback.call(this,C)}catch(J){setTimeout(()=>{throw J},0)}b.once&&this.removeEventListener(C.type,b.callback)}return!C.defaultPrevented}}Y.FakeEventTarget=S}),3115:((oe,Y,S)=>{S.r(Y),S.d(Y,{CameraDeviceInfo:()=>ro,DeviceInfo:()=>Ya,ExternalE2EEKeyProvider:()=>wu.l,MicrophoneDeviceInfo:()=>$o,VideoSDK:()=>Cc,ZujoSDK:()=>Cu});var x=S(2284),C=S(467),T=S(3029),b=S(2901),J=S(4467),w=S(4756),n=S.n(w),f=S(6880),U=S.n(f);function q(D,p){var i=Object.keys(D);if(Object.getOwnPropertySymbols){var E=Object.getOwnPropertySymbols(D);p&&(E=E.filter(function(M){return Object.getOwnPropertyDescriptor(D,M).enumerable})),i.push.apply(i,E)}return i}function g(D){for(var p=1;p<arguments.length;p++){var i=arguments[p]!=null?arguments[p]:{};p%2?q(Object(i),!0).forEach(function(E){(0,J.A)(D,E,i[E])}):Object.getOwnPropertyDescriptors?Object.defineProperties(D,Object.getOwnPropertyDescriptors(i)):q(Object(i)).forEach(function(E){Object.defineProperty(D,E,Object.getOwnPropertyDescriptor(i,E))})}return D}function h(D){return"Minified Redux error #"+D+"; visit https://redux.js.org/Errors?code="+D+" for the full message or use the non-minified dev environment for full errors. "}var k=(function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"})(),W=function(){return Math.random().toString(36).substring(7).split("").join(".")},j={INIT:"@@redux/INIT"+W(),REPLACE:"@@redux/REPLACE"+W(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+W()}};function y(D){if(typeof D!="object"||D===null)return!1;for(var p=D;Object.getPrototypeOf(p)!==null;)p=Object.getPrototypeOf(p);return Object.getPrototypeOf(D)===p}function d(D,p,i){var E;if(typeof p=="function"&&typeof i=="function"||typeof i=="function"&&typeof arguments[3]=="function")throw new Error(h(0));if(typeof p=="function"&&typeof i>"u"&&(i=p,p=void 0),typeof i<"u"){if(typeof i!="function")throw new Error(h(1));return i(d)(D,p)}if(typeof D!="function")throw new Error(h(2));var M=D,N=p,re=[],ce=re,de=!1;function he(){ce===re&&(ce=re.slice())}function me(){if(de)throw new Error(h(3));return N}function ve(vt){if(typeof vt!="function")throw new Error(h(4));if(de)throw new Error(h(5));var lt=!0;return he(),ce.push(vt),function(){if(lt){if(de)throw new Error(h(6));lt=!1,he();var mt=ce.indexOf(vt);ce.splice(mt,1),re=null}}}function Ve(vt){if(!y(vt))throw new Error(h(7));if(typeof vt.type>"u")throw new Error(h(8));if(de)throw new Error(h(9));try{de=!0,N=M(N,vt)}finally{de=!1}for(var lt=re=ce,ft=0;ft<lt.length;ft++){var mt=lt[ft];mt()}return vt}function Be(vt){if(typeof vt!="function")throw new Error(h(10));M=vt,Ve({type:j.REPLACE})}function Ut(){var vt,lt=ve;return vt={subscribe:function(mt){if(typeof mt!="object"||mt===null)throw new Error(h(11));function lr(){mt.next&&mt.next(me())}lr();var dt=lt(lr);return{unsubscribe:dt}}},vt[k]=function(){return this},vt}return Ve({type:j.INIT}),E={dispatch:Ve,subscribe:ve,getState:me,replaceReducer:Be},E[k]=Ut,E}function R(D){Object.keys(D).forEach(function(p){var i=D[p],E=i(void 0,{type:j.INIT});if(typeof E>"u")throw new Error(h(12));if(typeof i(void 0,{type:j.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(h(13))})}function m(D){for(var p=Object.keys(D),i={},E=0;E<p.length;E++){var M=p[E];typeof D[M]=="function"&&(i[M]=D[M])}var N=Object.keys(i),re;try{R(i)}catch(ce){re=ce}return function(de,he){if(de===void 0&&(de={}),re)throw re;for(var me=!1,ve={},Ve=0;Ve<N.length;Ve++){var Be=N[Ve],Ut=i[Be],vt=de[Be],lt=Ut(vt,he);if(typeof lt>"u")throw he&&he.type,new Error(h(14));ve[Be]=lt,me=me||lt!==vt}return me=me||N.length!==Object.keys(de).length,me?ve:de}}function P(){for(var D=arguments.length,p=new Array(D),i=0;i<D;i++)p[i]=arguments[i];return p.length===0?function(E){return E}:p.length===1?p[0]:p.reduce(function(E,M){return function(){return E(M.apply(void 0,arguments))}})}function H(){for(var D=arguments.length,p=new Array(D),i=0;i<D;i++)p[i]=arguments[i];return function(E){return function(){var M=E.apply(void 0,arguments),N=function(){throw new Error(h(15))},re={getState:M.getState,dispatch:function(){return N.apply(void 0,arguments)}},ce=p.map(function(de){return de(re)});return N=P.apply(void 0,ce)(M.dispatch),g(g({},M),{},{dispatch:N})}}}function B(D){var p=function(E){var M=E.dispatch,N=E.getState;return function(re){return function(ce){return typeof ce=="function"?ce(M,N,D):re(ce)}}};return p}var $=B();$.withExtraArgument=B;const L=$;var z=S(2211),V=S.n(z);function X(D,p){var i=Object.keys(D);if(Object.getOwnPropertySymbols){var E=Object.getOwnPropertySymbols(D);p&&(E=E.filter(function(M){return Object.getOwnPropertyDescriptor(D,M).enumerable})),i.push.apply(i,E)}return i}function G(D){for(var p=1;p<arguments.length;p++){var i=arguments[p]!=null?arguments[p]:{};p%2?X(Object(i),!0).forEach(function(E){(0,J.A)(D,E,i[E])}):Object.getOwnPropertyDescriptors?Object.defineProperties(D,Object.getOwnPropertyDescriptors(i)):X(Object(i)).forEach(function(E){Object.defineProperty(D,E,Object.getOwnPropertyDescriptor(i,E))})}return D}var ae={url:null,state:"new",activeSpeakerId:null,statsPeerId:null,faceDetection:!1},Q=function(){var p=arguments.length>0&&arguments[0]!==void 0?arguments[0]:ae,i=arguments.length>1?arguments[1]:void 0;switch(i.type){case"SET_ROOM_URL":{var E=i.payload.url;return G(G({},p),{},{url:E})}case"SET_ROOM_STATE":{var M=i.payload.state;return M==="connected"?G(G({},p),{},{state:M}):G(G({},p),{},{state:M,activeSpeakerId:null,statsPeerId:null})}case"SET_ROOM_ACTIVE_SPEAKER":{var N=i.payload.peerId;return G(G({},p),{},{activeSpeakerId:N})}case"SET_ROOM_STATS_PEER_ID":{var re=i.payload.peerId;return p.statsPeerId===re?G(G({},p),{},{statsPeerId:null}):G(G({},p),{},{statsPeerId:re})}case"SET_FACE_DETECTION":{var ce=i.payload;return G(G({},p),{},{faceDetection:ce})}case"REMOVE_PEER":{var de=i.payload.peerId,he=G({},p);return de&&de===p.activeSpeakerId&&(he.activeSpeakerId=null),de&&de===p.statsPeerId&&(he.statsPeerId=null),he}default:return p}};const le=Q;function pe(D,p){var i=Object.keys(D);if(Object.getOwnPropertySymbols){var E=Object.getOwnPropertySymbols(D);p&&(E=E.filter(function(M){return Object.getOwnPropertyDescriptor(D,M).enumerable})),i.push.apply(i,E)}return i}function ue(D){for(var p=1;p<arguments.length;p++){var i=arguments[p]!=null?arguments[p]:{};p%2?pe(Object(i),!0).forEach(function(E){(0,J.A)(D,E,i[E])}):Object.getOwnPropertyDescriptors?Object.defineProperties(D,Object.getOwnPropertyDescriptors(i)):pe(Object(i)).forEach(function(E){Object.defineProperty(D,E,Object.getOwnPropertyDescriptor(i,E))})}return D}var ne={id:null,displayName:null,displayNameSet:!1,device:null,canSendMic:!1,canSendWebcam:!1,canChangeWebcam:!1,webcamInProgress:!1,shareInProgress:!1,audioOnly:!1,audioOnlyInProgress:!1,audioMuted:!1,restartIceInProgress:!1},Oe=function(){var p=arguments.length>0&&arguments[0]!==void 0?arguments[0]:ne,i=arguments.length>1?arguments[1]:void 0;switch(i.type){case"SET_ROOM_STATE":{var E=i.payload.state;return E==="closed"?ue(ue({},p),{},{webcamInProgress:!1,shareInProgress:!1,audioOnly:!1,audioOnlyInProgress:!1,audioMuted:!1,restartIceInProgress:!1}):p}case"SET_ME":{var M=i.payload,N=M.peerId,re=M.displayName,ce=M.displayNameSet,de=M.device;return ue(ue({},p),{},{id:N,displayName:re,displayNameSet:ce,device:de})}case"SET_MEDIA_CAPABILITIES":{var he=i.payload,me=he.canSendMic,ve=he.canSendWebcam;return ue(ue({},p),{},{canSendMic:me,canSendWebcam:ve})}case"SET_CAN_CHANGE_WEBCAM":{var Ve=i.payload;return ue(ue({},p),{},{canChangeWebcam:Ve})}case"SET_WEBCAM_IN_PROGRESS":{var Be=i.payload.flag;return ue(ue({},p),{},{webcamInProgress:Be})}case"SET_SHARE_IN_PROGRESS":{var Ut=i.payload.flag;return ue(ue({},p),{},{shareInProgress:Ut})}case"SET_DISPLAY_NAME":{var vt=i.payload.displayName;return vt||(vt=p.displayName),ue(ue({},p),{},{displayName:vt,displayNameSet:!0})}case"SET_AUDIO_ONLY_STATE":{var lt=i.payload.enabled;return ue(ue({},p),{},{audioOnly:lt})}case"SET_AUDIO_ONLY_IN_PROGRESS":{var ft=i.payload.flag;return ue(ue({},p),{},{audioOnlyInProgress:ft})}case"SET_AUDIO_MUTED_STATE":{var mt=i.payload.enabled;return ue(ue({},p),{},{audioMuted:mt})}case"SET_RESTART_ICE_IN_PROGRESS":{var lr=i.payload.flag;return ue(ue({},p),{},{restartIceInProgress:lr})}default:return p}};const ye=Oe;function _e(D,p){var i=Object.keys(D);if(Object.getOwnPropertySymbols){var E=Object.getOwnPropertySymbols(D);p&&(E=E.filter(function(M){return Object.getOwnPropertyDescriptor(D,M).enumerable})),i.push.apply(i,E)}return i}function Se(D){for(var p=1;p<arguments.length;p++){var i=arguments[p]!=null?arguments[p]:{};p%2?_e(Object(i),!0).forEach(function(E){(0,J.A)(D,E,i[E])}):Object.getOwnPropertyDescriptors?Object.defineProperties(D,Object.getOwnPropertyDescriptors(i)):_e(Object(i)).forEach(function(E){Object.defineProperty(D,E,Object.getOwnPropertyDescriptor(i,E))})}return D}var ze={},Vt=function(){var p=arguments.length>0&&arguments[0]!==void 0?arguments[0]:ze,i=arguments.length>1?arguments[1]:void 0;switch(i.type){case"SET_ROOM_STATE":{var E=i.payload.state;return E==="closed"?{}:p}case"ADD_PRODUCER":{var M=i.payload.producer;return Se(Se({},p),{},(0,J.A)({},M.id,M))}case"REMOVE_PRODUCER":{var N=i.payload.producerId,re=Se({},p);return delete re[N],re}case"SET_PRODUCER_PAUSED":{var ce=i.payload.producerId,de=p[ce],he=Se(Se({},de),{},{paused:!0});return Se(Se({},p),{},(0,J.A)({},ce,he))}case"SET_PRODUCER_RESUMED":{var me=i.payload.producerId,ve=p[me],Ve=Se(Se({},ve),{},{paused:!1});return Se(Se({},p),{},(0,J.A)({},me,Ve))}case"SET_PRODUCER_TRACK":{var Be=i.payload,Ut=Be.producerId,vt=Be.track,lt=p[Ut],ft=Se(Se({},lt),{},{track:vt});return Se(Se({},p),{},(0,J.A)({},Ut,ft))}case"SET_PRODUCER_SCORE":{var mt=i.payload,lr=mt.producerId,dt=mt.score,Bt=p[lr];if(!Bt)return p;var Ir=Se(Se({},Bt),{},{score:dt});return Se(Se({},p),{},(0,J.A)({},lr,Ir))}default:return p}};const tr=Vt;function gr(D,p){var i=Object.keys(D);if(Object.getOwnPropertySymbols){var E=Object.getOwnPropertySymbols(D);p&&(E=E.filter(function(M){return Object.getOwnPropertyDescriptor(D,M).enumerable})),i.push.apply(i,E)}return i}function jt(D){for(var p=1;p<arguments.length;p++){var i=arguments[p]!=null?arguments[p]:{};p%2?gr(Object(i),!0).forEach(function(E){(0,J.A)(D,E,i[E])}):Object.getOwnPropertyDescriptors?Object.defineProperties(D,Object.getOwnPropertyDescriptors(i)):gr(Object(i)).forEach(function(E){Object.defineProperty(D,E,Object.getOwnPropertyDescriptor(i,E))})}return D}var Pr={},qa=function(){var p=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Pr,i=arguments.length>1?arguments[1]:void 0;switch(i.type){case"SET_ROOM_STATE":{var E=i.payload.state;return E==="closed"?{}:p}case"ADD_DATA_PRODUCER":{var M=i.payload.dataProducer;return jt(jt({},p),{},(0,J.A)({},M.id,M))}case"REMOVE_DATA_PRODUCER":{var N=i.payload.dataProducerId,re=jt({},p);return delete re[N],re}default:return p}};const Ua=qa;var br=S(5458);function zr(D,p){var i=Object.keys(D);if(Object.getOwnPropertySymbols){var E=Object.getOwnPropertySymbols(D);p&&(E=E.filter(function(M){return Object.getOwnPropertyDescriptor(D,M).enumerable})),i.push.apply(i,E)}return i}function ar(D){for(var p=1;p<arguments.length;p++){var i=arguments[p]!=null?arguments[p]:{};p%2?zr(Object(i),!0).forEach(function(E){(0,J.A)(D,E,i[E])}):Object.getOwnPropertyDescriptors?Object.defineProperties(D,Object.getOwnPropertyDescriptors(i)):zr(Object(i)).forEach(function(E){Object.defineProperty(D,E,Object.getOwnPropertyDescriptor(i,E))})}return D}var Wa={},Gr=function(){var p=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Wa,i=arguments.length>1?arguments[1]:void 0;switch(i.type){case"SET_ROOM_STATE":{var E=i.payload.state;return E==="closed"?{}:p}case"ADD_PEER":{var M=i.payload.peer;return ar(ar({},p),{},(0,J.A)({},M.id,M))}case"REMOVE_PEER":{var N=i.payload.peerId,re=ar({},p);return delete re[N],re}case"SET_PEER_DISPLAY_NAME":{var ce=i.payload,de=ce.displayName,he=ce.peerId,me=p[he];if(!me)throw new Error("no Peer found");var ve=ar(ar({},me),{},{displayName:de});return ar(ar({},p),{},(0,J.A)({},ve.id,ve))}case"ADD_CONSUMER":{var Ve=i.payload,Be=Ve.consumer,Ut=Ve.peerId,vt=p[Ut];if(!vt)return ar({},p);var lt=[].concat((0,br.A)(vt.consumers),[Be.id]),ft=ar(ar({},vt),{},{consumers:lt});return ar(ar({},p),{},(0,J.A)({},ft.id,ft))}case"REMOVE_CONSUMER":{var mt=i.payload,lr=mt.consumerId,dt=mt.peerId,Bt=p[dt];if(!Bt)return p;var Ir=Bt.consumers.indexOf(lr);if(Ir===-1)return ar({},p);var ya=Bt.consumers.slice();ya.splice(Ir,1);var Ot=ar(ar({},Bt),{},{consumers:ya});return ar(ar({},p),{},(0,J.A)({},Ot.id,Ot))}case"ADD_DATA_CONSUMER":{var xr=i.payload,Ea=xr.dataConsumer,da=xr.peerId;if(!da)return p;var wa=p[da];if(!wa)return ar({},p);var Wr=[].concat((0,br.A)(wa.dataConsumers),[Ea.id]),yn=ar(ar({},wa),{},{dataConsumers:Wr});return ar(ar({},p),{},(0,J.A)({},yn.id,yn))}case"REMOVE_DATA_CONSUMER":{var Mn=i.payload,Bn=Mn.dataConsumerId,Ja=Mn.peerId;if(!Ja)return p;var bi=p[Ja];if(!bi)return p;var Mi=bi.dataConsumers.indexOf(Bn);if(Mi===-1)return ar({},p);var Ds=bi.dataConsumers.slice();Ds.splice(Mi,1);var Ps=ar(ar({},bi),{},{dataConsumers:Ds});return ar(ar({},p),{},(0,J.A)({},Ps.id,Ps))}default:return p}};const pn=Gr;function nt(D,p){var i=Object.keys(D);if(Object.getOwnPropertySymbols){var E=Object.getOwnPropertySymbols(D);p&&(E=E.filter(function(M){return Object.getOwnPropertyDescriptor(D,M).enumerable})),i.push.apply(i,E)}return i}function et(D){for(var p=1;p<arguments.length;p++){var i=arguments[p]!=null?arguments[p]:{};p%2?nt(Object(i),!0).forEach(function(E){(0,J.A)(D,E,i[E])}):Object.getOwnPropertyDescriptors?Object.defineProperties(D,Object.getOwnPropertyDescriptors(i)):nt(Object(i)).forEach(function(E){Object.defineProperty(D,E,Object.getOwnPropertyDescriptor(i,E))})}return D}var ir={},Lr=function(){var p=arguments.length>0&&arguments[0]!==void 0?arguments[0]:ir,i=arguments.length>1?arguments[1]:void 0;switch(i.type){case"SET_ROOM_STATE":{var E=i.payload.state;return E==="closed"?{}:p}case"ADD_CONSUMER":{var M=i.payload.consumer;return et(et({},p),{},(0,J.A)({},M.id,M))}case"REMOVE_CONSUMER":{var N=i.payload.consumerId,re=et({},p);return delete re[N],re}case"SET_CONSUMER_PAUSED":{var ce=i.payload,de=ce.consumerId,he=ce.originator,me=p[de],ve;return he==="local"?ve=et(et({},me),{},{locallyPaused:!0,paused:!0}):ve=et(et({},me),{},{remotelyPaused:!0,paused:!0}),et(et({},p),{},(0,J.A)({},de,ve))}case"SET_CONSUMER_RESUMED":{var Ve=i.payload,Be=Ve.consumerId,Ut=Ve.originator,vt=p[Be],lt;return Ut==="local"?lt=et(et({},vt),{},{locallyPaused:!1,paused:!1}):lt=et(et({},vt),{},{remotelyPaused:!1,paused:!1}),et(et({},p),{},(0,J.A)({},Be,lt))}case"SET_CONSUMER_CURRENT_LAYERS":{var ft=i.payload,mt=ft.consumerId,lr=ft.spatialLayer,dt=ft.temporalLayer,Bt=p[mt],Ir=et(et({},Bt),{},{currentSpatialLayer:lr,currentTemporalLayer:dt});return et(et({},p),{},(0,J.A)({},mt,Ir))}case"SET_CONSUMER_PREFERRED_LAYERS":{var ya=i.payload,Ot=ya.consumerId,xr=ya.spatialLayer,Ea=ya.temporalLayer,da=p[Ot],wa=et(et({},da),{},{preferredSpatialLayer:xr,preferredTemporalLayer:Ea});return et(et({},p),{},(0,J.A)({},Ot,wa))}case"SET_CONSUMER_PRIORITY":{var Wr=i.payload,yn=Wr.consumerId,Mn=Wr.priority,Bn=p[yn],Ja=et(et({},Bn),{},{priority:Mn});return et(et({},p),{},(0,J.A)({},yn,Ja))}case"SET_CONSUMER_TRACK":{var bi=i.payload,Mi=bi.consumerId,Ds=bi.track,Ps=p[Mi],es=et(et({},Ps),{},{track:Ds});return et(et({},p),{},(0,J.A)({},Mi,es))}case"SET_CONSUMER_SCORE":{var Ac=i.payload,ul=Ac.consumerId,wl=Ac.score,kc=p[ul];if(!kc)return p;var Xo=et(et({},kc),{},{score:wl});return et(et({},p),{},(0,J.A)({},ul,Xo))}default:return p}};const pa=Lr;function za(D,p){var i=Object.keys(D);if(Object.getOwnPropertySymbols){var E=Object.getOwnPropertySymbols(D);p&&(E=E.filter(function(M){return Object.getOwnPropertyDescriptor(D,M).enumerable})),i.push.apply(i,E)}return i}function Za(D){for(var p=1;p<arguments.length;p++){var i=arguments[p]!=null?arguments[p]:{};p%2?za(Object(i),!0).forEach(function(E){(0,J.A)(D,E,i[E])}):Object.getOwnPropertyDescriptors?Object.defineProperties(D,Object.getOwnPropertyDescriptors(i)):za(Object(i)).forEach(function(E){Object.defineProperty(D,E,Object.getOwnPropertyDescriptor(i,E))})}return D}var zt={},He=function(){var p=arguments.length>0&&arguments[0]!==void 0?arguments[0]:zt,i=arguments.length>1?arguments[1]:void 0;switch(i.type){case"SET_ROOM_STATE":{var E=i.payload.state;return E==="closed"?{}:p}case"ADD_DATA_CONSUMER":{var M=i.payload.dataConsumer;return Za(Za({},p),{},(0,J.A)({},M.id,M))}case"REMOVE_DATA_CONSUMER":{var N=i.payload.dataConsumerId,re=Za({},p);return delete re[N],re}default:return p}};const yt=He;var Xe=[],kt=function(){var p=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Xe,i=arguments.length>1?arguments[1]:void 0;switch(i.type){case"ADD_NOTIFICATION":{var E=i.payload.notification;return[].concat((0,br.A)(p),[E])}case"REMOVE_NOTIFICATION":{var M=i.payload.notificationId;return p.filter(function(N){return N.id!==M})}case"REMOVE_ALL_NOTIFICATIONS":return[];default:return p}},Ce=m({room:le,me:ye,producers:tr,dataProducers:Ua,peers:pn,consumers:pa,dataConsumers:yt,notifications:kt});const fr=Ce;var Sr=S(9767);function Rt(D){if(D==null)throw new TypeError("Cannot destructure "+D)}var Rr=S(7007),aa=S(296),Ke=S(9767);Ke.default;var Xt=(0,b.A)(function D(){(0,T.A)(this,D),this.roomClient=null}),Ht=(function(){function D(){(0,T.A)(this,D),D.instance||(D.instance=new Xt)}return(0,b.A)(D,[{key:"getInstance",value:function(){return D.instance}}])})(),Qt=new Ht;Object.freeze(Qt);var rt=Qt.getInstance(),Tt="state",yr=(function(){function D(p){(0,T.A)(this,D),(0,J.A)(this,"pausedBy",void 0),this.id=p.id,this.kind=p.track.kind,this.codec=p.codec,this.track=p.track,this.producerOrConsumer=p.instance,p.appData&&p.appData.share===!0&&p.track.kind==="video"&&(this.kind="share"),p.appData&&p.appData.share===!0&&p.track.kind==="audio"&&(this.kind="shareAudio"),this.rtpSender=p.rtpSender,this.rtpReceiver=p.rtpReceiver,this.eventEmitter=new Rr}return(0,b.A)(D,[{key:"pause",value:function(){rt.roomClient._pauseConsumer(this.producerOrConsumer)}},{key:"resume",value:function(){rt.roomClient._resumeConsumer(this.producerOrConsumer)}},{key:"handleStateChanged",value:function(i){var E=i.state;i.streamId,this.eventEmitter.emit(Tt,{state:E,timestamp:new Date().getTime()})}},{key:"paused",get:function(){return this.producerOrConsumer.paused}},{key:"on",value:function(i,E){switch(i){case Tt:this.eventEmitter.on(i,E);break;default:throw new Error("Invalid event type from STREAM onn")}}},{key:"off",value:function(i,E){switch(i){case Tt:this.eventEmitter.off(i,E);break;default:throw new Error("Invalid event type from STREAM off")}}}])})(),ur=S(1803);function wr(D,p){var i=Object.keys(D);if(Object.getOwnPropertySymbols){var E=Object.getOwnPropertySymbols(D);p&&(E=E.filter(function(M){return Object.getOwnPropertyDescriptor(D,M).enumerable})),i.push.apply(i,E)}return i}function $r(D){for(var p=1;p<arguments.length;p++){var i=arguments[p]!=null?arguments[p]:{};p%2?wr(Object(i),!0).forEach(function(E){(0,J.A)(D,E,i[E])}):Object.getOwnPropertyDescriptors?Object.defineProperties(D,Object.getOwnPropertyDescriptors(i)):wr(Object(i)).forEach(function(E){Object.defineProperty(D,E,Object.getOwnPropertyDescriptor(i,E))})}return D}function Ha(D,p){var i=typeof Symbol<"u"&&D[Symbol.iterator]||D["@@iterator"];if(!i){if(Array.isArray(D)||(i=nn(D))||p){i&&(D=i);var E=0,M=function(){};return{s:M,n:function(){return E>=D.length?{done:!0}:{done:!1,value:D[E++]}},e:function(he){throw he},f:M}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var N,re=!0,ce=!1;return{s:function(){i=i.call(D)},n:function(){var he=i.next();return re=he.done,he},e:function(he){ce=!0,N=he},f:function(){try{re||i.return==null||i.return()}finally{if(ce)throw N}}}}function nn(D,p){if(D){if(typeof D=="string")return qn(D,p);var i={}.toString.call(D).slice(8,-1);return i==="Object"&&D.constructor&&(i=D.constructor.name),i==="Map"||i==="Set"?Array.from(D):i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?qn(D,p):void 0}}function qn(D,p){(p==null||p>D.length)&&(p=D.length);for(var i=0,E=Array(p);i<p;i++)E[i]=D[i];return E}var hn="stream-enabled",ca="stream-disabled",Kr="media-status-changed",Oa="video-quality-changed",jn="stream-paused",Qn="stream-resumed",di="producer-added",qi="producer-removed",sn="consumer-added",Wi="consumer-removed",Xn="e2ee-state-change",Ei=(function(){function D(p){var i=this;(0,T.A)(this,D),(0,J.A)(this,"captureImage",(0,C.A)(n().mark(function E(){var M,N,re,ce,de,he,me,ve,Ve,Be,Ut,vt,lt,ft,mt=arguments,lr,dt;return n().wrap(function(Bt){for(;;)switch(Bt.prev=Bt.next){case 0:N=mt.length>0&&mt[0]!==void 0?mt[0]:{},re=N.height,ce=N.width,de=(M=rt.roomClient._openTelemetry)===null||M===void 0?void 0:M.trace({spanName:"Capturing image",status:1,attributes:{height:JSON.stringify(re),width:JSON.stringify(ce)}}),Bt.prev=1,ve=(he=rt.roomClient._openTelemetry)===null||he===void 0?void 0:he.trace({spanName:"Fetching available streams",span:de,status:1}),Ve=(0,br.A)(i.streams.values()),(me=rt.roomClient._openTelemetry)===null||me===void 0||me.completeSpan({span:ve,status:1,message:"Fetched available streams"}),Be=Ha(Ve),Bt.prev=2,vt=n().mark(function Ir(){var ya,Ot,xr,Ea,da,wa,Wr,yn,Mn,Bn,Ja,bi,Mi,Ds,Ps;return n().wrap(function(es){for(;;)switch(es.prev=es.next){case 0:if(ya=Ut.value,ya.kind!="video"){es.next=4;break}return xr=(Ot=rt.roomClient._openTelemetry)===null||Ot===void 0?void 0:Ot.trace({spanName:"Processing video stream for capture",span:de,status:1}),es.prev=1,yn=(Ea=rt.roomClient._openTelemetry)===null||Ea===void 0?void 0:Ea.trace({spanName:"Initializing capture elements",span:xr,status:1}),Mn=new MediaStream,Mn.addTrack(ya.track),Bn=document.createElement("video"),Bn.srcObject=Mn,Bn.playsInline=!0,Ja=document.createElement("canvas"),Ja.id="canvasId",(da=rt.roomClient._openTelemetry)===null||da===void 0||da.completeSpan({span:yn,status:1,message:"Initialized video and canvas elements"}),bi=(wa=rt.roomClient._openTelemetry)===null||wa===void 0?void 0:wa.trace({spanName:"Waiting for video frame to load",span:xr,status:1}),es.next=2,new Promise(function(Ac,ul){Bn.addEventListener("loadeddata",(0,C.A)(n().mark(function wl(){var kc,Xo,Dn,Yn,Oc,Mc,Dc,Gl,Pc,Kl,Lc,Rl;return n().wrap(function(Do){for(;;)switch(Do.prev=Do.next){case 0:return(kc=rt.roomClient._openTelemetry)===null||kc===void 0||kc.completeSpan({span:bi,status:1,message:"Video frame loaded"}),Dn=(Xo=rt.roomClient._openTelemetry)===null||Xo===void 0?void 0:Xo.trace({spanName:"Drawing video frame to canvas",span:de,status:1}),Do.prev=1,Oc=Bn.videoWidth,Mc=Bn.videoHeight,Dc=16/9,re==null&&ce==null&&(re=Mc,ce=Oc),(re!=null||re!=null)&&(re<=0||re>Mc)&&(re=Mc),(ce!=null||ce!=null)&&(ce<=0||ce>Oc)&&(ce=Oc),re==null&&(re=ce/Dc),ce==null&&(ce=re*Dc),Ja.width=ce,Ja.height=re,Do.next=2,Bn.play();case 2:document.body.appendChild(Bn),Gl=(Ja.width-Oc*Dc)/2,Pc=(Ja.height-Mc*Dc)/2,Ja.getContext("2d").clearRect(0,0,Gl/2,Pc/2),Ja.getContext("2d").drawImage(Bn,0,0),Kl=Ja.toDataURL("image/jpeg").split(";base64,")[1],document.body.appendChild(Ja),document.body.removeChild(Ja),document.body.removeChild(Bn),(Yn=rt.roomClient._openTelemetry)===null||Yn===void 0||Yn.completeSpan({span:Dn,status:1,message:"Captured frame and generated base64 image"}),Ac(Kl),Do.next=4;break;case 3:Do.prev=3,Rl=Do.catch(1),(Lc=rt.roomClient._openTelemetry)===null||Lc===void 0||Lc.completeSpan({span:Dn,status:2,message:"Error capturing frame: ".concat(Rl.message)}),ul(Rl);case 4:case"end":return Do.stop()}},wl,null,[[1,3]])})))});case 2:return Mi=es.sent,(Wr=rt.roomClient._openTelemetry)===null||Wr===void 0||Wr.completeSpan({span:xr,status:1,message:"Image captured successfully"}),es.abrupt("return",{v:Mi});case 3:es.prev=3,Ps=es.catch(1),(Ds=rt.roomClient._openTelemetry)===null||Ds===void 0||Ds.completeSpan({span:xr,status:2,message:"Error processing video stream: ".concat(Ps.message)}),console.error("err on image capture",Ps);case 4:case"end":return es.stop()}},Ir,null,[[1,3]])}),Be.s();case 3:if((Ut=Be.n()).done){Bt.next=6;break}return Bt.delegateYield(vt(),"t0",4);case 4:if(lt=Bt.t0,!lt){Bt.next=5;break}return Bt.abrupt("return",lt.v);case 5:Bt.next=3;break;case 6:Bt.next=8;break;case 7:Bt.prev=7,lr=Bt.catch(2),Be.e(lr);case 8:return Bt.prev=8,Be.f(),Bt.finish(8);case 9:throw new Error("Camera must be on to capture an image");case 10:Bt.prev=10,dt=Bt.catch(1),(ft=rt.roomClient._openTelemetry)===null||ft===void 0||ft.completeSpan({span:de,status:2,message:"Failed to capture image: ".concat(dt.message)}),console.error("Error in captureImage::",dt),rt.roomClient._videosdkLogs&&rt.roomClient._videosdkLogs.pushLogs({logText:"Error on image capture",logType:"ERROR",attributes:{error:dt.message}});case 11:case"end":return Bt.stop()}},E,null,[[1,10],[2,7,8,9]])}))),this.id=p.id,this.displayName=p.displayName,this.streams=new Map,this.quality="low",this.screenShareQuality="high",this.local=p.local||!1,this.pinState={cam:!1,share:!1},this.webcamOn=!1,this.micOn=!1,this.mode=p.mode,this.metaData=p.metaData,this.eventEmitter=new Rr.EventEmitter,this.participantVideoElements=new Map,this.participantAudioElements=new Map,this.videoVisible=!1,this.height=null,this.width=null,this.resizeObserver=null}return(0,b.A)(D,[{key:"_setPinState",value:function(i){i.cam!=null&&(this.pinState.cam=i.cam),i.share!=null&&(this.pinState.share=i.share)}},{key:"remove",value:function(){rt.roomClient.removePeer(this.id)}},{key:"enableMic",value:function(){rt.roomClient.enablePeerMic(this.id)}},{key:"disableMic",value:function(){rt.roomClient.disablePeerMic(this.id)}},{key:"enableWebcam",value:function(){rt.roomClient.enablePeerWebcam(this.id)}},{key:"disableWebcam",value:function(){rt.roomClient.disablePeerWebcam(this.id)}},{key:"getTransportStats",value:function(){return rt.roomClient.getTransportRemoteStats({participantId:this.id})}},{key:"handleStreamStateChanged",value:function(i){var E=i.state;i.peerId;var M=i.streamId,N=this.streams.get(M);N!=null&&(N.kind==="video"||N.kind==="share")&&N.handleStateChanged({state:E,streamId:M})}},{key:"addStream",value:function(i){if(!i){console.warn("Attempted to add null/undefined stream");return}this.streams.set(i.id,i),i.kind==="video"&&!this.local&&rt.roomClient.setConsumerQuality(i.id,this.quality);var E=new MediaStream;E.addTrack(i.track);try{if(["video","share"].includes(i.kind)){var M=this.participantVideoElements.get(i.kind);if(M){var N={display:"block",objectFit:i.kind==="share"?"contain":"cover",width:"100%"};Object.assign(M.style,N),M.srcObject=E,M.play().catch(function(ce){console.error("Failed to play ".concat(i.kind," stream:"),ce)}),(i.kind==="share"||i.kind==="video"&&this.videoVisible)&&i.resume()}}if((i.kind==="audio"||i.kind==="shareAudio")&&!this.local){var re=this.participantAudioElements.get(i.kind);re&&(re.srcObject=E,re.play().catch(function(ce){console.error("Failed to play ".concat(i.kind," audio:"),ce)}))}this.eventEmitter.emit(hn,i),i.kind==="video"&&!this.local&&this.height&&this.width&&this.setViewPort(this.width,this.height)}catch(ce){console.error("Error in addStream:",ce)}}},{key:"updateStream",value:function(i){this.streams.set(i.id,i),this.eventEmitter.emit(hn,i)}},{key:"deleteStream",value:function(i){var E=this.streams.get(i);if(E!=null){this.streams.delete(i);var M={video:{collection:this.participantVideoElements,type:"video"},share:{collection:this.participantVideoElements,type:"share"},audio:{collection:this.participantAudioElements,type:"audio"},shareAudio:{collection:this.participantAudioElements,type:"shareAudio"}},N=M[E.kind];if(N){var re=N.collection.get(N.type);re&&(re.style.display="none")}return this.eventEmitter.emit(ca,E),E}}},{key:"streamResumed",value:function(i){var E=this.streams.get(i);E!=null}},{key:"streamPaused",value:function(i){var E=this.streams.get(i);E!=null}},{key:"updateParticipantMediaState",value:function(i,E){i=="audio"?this.micOn=E:i=="video"&&(this.webcamOn=E),this.eventEmitter.emit(Kr,{peerId:this.id,kind:i,newStatus:E})}},{key:"handleParticipantPause",value:function(i){if(i!=null&&i.consumerId){var E=this.streams.get(i.consumerId);E?E.pausedBy="SUB_MANAGER":console.warn("Stream with consumerId ".concat(i.consumerId," not found."))}this.eventEmitter.emit(jn,{kind:i?.kind,reason:i?.reason})}},{key:"handleParticipantResume",value:function(i){if(i!=null&&i.consumerId){var E=this.streams.get(i.consumerId);E?E.pausedBy=void 0:console.warn("Stream with consumerId ".concat(i.consumerId," not found."))}this.eventEmitter.emit(Qn,{kind:i?.kind,reason:i?.reason})}},{key:"handleE2EEStateChange",value:function(i){i==null||delete i.peerId,this.eventEmitter.emit(Xn,i)}},{key:"videoQualityChanged",value:function(i,E){this.eventEmitter.emit(Oa,{peerId:this.id,prevQuality:i,currentQuality:E})}},{key:"setQuality",value:function(i){var E=this;if(!this.local){if(typeof document<"u"&&this.resizeObserver){var M=document.querySelector("#f-".concat(this.id));M&&this.resizeObserver.unobserve(M)}this.quality=i;var N=(0,br.A)(this.streams.entries());N.forEach(function(re){var ce=re[1];ce.kind==="video"&&rt.roomClient.setConsumerQuality(ce.id,i,E.id)})}}},{key:"setScreenShareQuality",value:function(i){var E=this;this.local||(this.screenShareQuality=i,this.streams.forEach(function(M){M.kind==="share"&&rt.roomClient.setConsumerScreenShareQuality(M.id,i,E.id)}))}},{key:"setViewPort",value:function(i,E){var M=this,N=(0,br.A)(this.streams.entries());N.forEach(function(re){var ce=re[1];ce.kind==="video"&&rt.roomClient.setViewPort(ce.producerOrConsumer,i,E,M.id)})}},{key:"pin",value:function(i){switch(i){case"SHARE_AND_CAM":case void 0:this._setPinState({cam:!0,share:!0});break;case"CAM":this._setPinState({cam:!0});break;case"SHARE":this._setPinState({share:!0});break;default:throw new Error("Unknown pin type")}rt.roomClient.pinStateChange({peerId:this.id,state:this.pinState})}},{key:"unpin",value:function(i){switch(i){case"SHARE_AND_CAM":case void 0:this._setPinState({cam:!1,share:!1});break;case"CAM":this._setPinState({cam:!1});break;case"SHARE":this._setPinState({share:!1});break;default:throw new Error("Unknown unpin type")}rt.roomClient.pinStateChange({peerId:this.id,state:this.pinState})}},{key:"switchTo",value:(function(){var p=(0,C.A)(n().mark(function E(M){var N,re,ce;return n().wrap(function(de){for(;;)switch(de.prev=de.next){case 0:return N=M.meetingId,re=M.payload,ce=M.token,de.next=1,rt.roomClient.switchPeerRoom({peerId:this.id,roomId:N,payload:re,token:ce});case 1:case"end":return de.stop()}},E,this)}));function i(E){return p.apply(this,arguments)}return i})()},{key:"getVideoStats",value:(function(){var p=(0,C.A)(n().mark(function E(){var M,N,re,ce,de,he,me;return n().wrap(function(ve){for(;;)switch(ve.prev=ve.next){case 0:if(!this.local){ve.next=2;break}return ve.next=1,rt.roomClient.getVideoRemoteStats();case 1:return ve.abrupt("return",ve.sent);case 2:M=(0,br.A)(this.streams.entries()),N=Ha(M),ve.prev=3,N.s();case 4:if((re=N.n()).done){ve.next=7;break}if(ce=(0,aa.A)(re.value,2),de=ce[0],he=ce[1],he.kind!="video"){ve.next=6;break}return ve.next=5,rt.roomClient.getConsumerRemoteStats(de);case 5:return ve.abrupt("return",ve.sent);case 6:ve.next=4;break;case 7:ve.next=9;break;case 8:ve.prev=8,me=ve.catch(3),N.e(me);case 9:return ve.prev=9,N.f(),ve.finish(9);case 10:case"end":return ve.stop()}},E,this,[[3,8,9,10]])}));function i(){return p.apply(this,arguments)}return i})()},{key:"getShareStats",value:(function(){var p=(0,C.A)(n().mark(function E(){var M,N,re,ce,de,he,me;return n().wrap(function(ve){for(;;)switch(ve.prev=ve.next){case 0:if(!this.local){ve.next=2;break}return ve.next=1,rt.roomClient.getShareRemoteStats();case 1:return ve.abrupt("return",ve.sent);case 2:M=(0,br.A)(this.streams.entries()),N=Ha(M),ve.prev=3,N.s();case 4:if((re=N.n()).done){ve.next=7;break}if(ce=(0,aa.A)(re.value,2),de=ce[0],he=ce[1],he.kind!="share"){ve.next=6;break}return ve.next=5,rt.roomClient.getConsumerRemoteStats(de);case 5:return ve.abrupt("return",ve.sent);case 6:ve.next=4;break;case 7:ve.next=9;break;case 8:ve.prev=8,me=ve.catch(3),N.e(me);case 9:return ve.prev=9,N.f(),ve.finish(9);case 10:case"end":return ve.stop()}},E,this,[[3,8,9,10]])}));function i(){return p.apply(this,arguments)}return i})()},{key:"getShareAudioStats",value:(function(){var p=(0,C.A)(n().mark(function E(){var M,N,re,ce,de,he,me;return n().wrap(function(ve){for(;;)switch(ve.prev=ve.next){case 0:if(!this.local){ve.next=2;break}return ve.next=1,rt.roomClient.getShareAudioRemoteStats();case 1:return ve.abrupt("return",ve.sent);case 2:M=(0,br.A)(this.streams.entries()),N=Ha(M),ve.prev=3,N.s();case 4:if((re=N.n()).done){ve.next=7;break}if(ce=(0,aa.A)(re.value,2),de=ce[0],he=ce[1],he.kind!="shareAudio"){ve.next=6;break}return ve.next=5,rt.roomClient.getConsumerRemoteStats(de);case 5:return ve.abrupt("return",ve.sent);case 6:ve.next=4;break;case 7:ve.next=9;break;case 8:ve.prev=8,me=ve.catch(3),N.e(me);case 9:return ve.prev=9,N.f(),ve.finish(9);case 10:case"end":return ve.stop()}},E,this,[[3,8,9,10]])}));function i(){return p.apply(this,arguments)}return i})()},{key:"getAudioStats",value:(function(){var p=(0,C.A)(n().mark(function E(){var M,N,re,ce,de,he,me;return n().wrap(function(ve){for(;;)switch(ve.prev=ve.next){case 0:if(this.micOn){ve.next=1;break}return ve.abrupt("return",[]);case 1:if(!this.local){ve.next=3;break}return ve.next=2,rt.roomClient.getAudioRemoteStats();case 2:return ve.abrupt("return",ve.sent);case 3:M=(0,br.A)(this.streams.entries()),N=Ha(M),ve.prev=4,N.s();case 5:if((re=N.n()).done){ve.next=8;break}if(ce=(0,aa.A)(re.value,2),de=ce[0],he=ce[1],he.kind!="audio"){ve.next=7;break}return ve.next=6,rt.roomClient.getConsumerRemoteStats(de);case 6:return ve.abrupt("return",ve.sent);case 7:ve.next=5;break;case 8:ve.next=10;break;case 9:ve.prev=9,me=ve.catch(4),N.e(me);case 10:return ve.prev=10,N.f(),ve.finish(10);case 11:case"end":return ve.stop()}},E,this,[[4,9,10,11]])}));function i(){return p.apply(this,arguments)}return i})()},{key:"consumeMicStreams",value:function(){rt.roomClient.consumeMicStreams(this.id)}},{key:"consumeWebcamStreams",value:function(){rt.roomClient.consumeWebcamStreams(this.id)}},{key:"stopConsumingWebcamStreams",value:function(){rt.roomClient.stopConsumingWebcamStreams(this.id)}},{key:"stopConsumingMicStreams",value:function(){rt.roomClient.stopConsumingMicStreams(this.id)}},{key:"renderVideo",value:function(i){for(var E=this,M=i.type,N=M===void 0?"video":M,re=i.maxQuality,ce=re===void 0?"auto":re,de=i.videostyle,he=de===void 0?{}:de,me=i.containerStyle,ve=me===void 0?{}:me,Ve,Be=0,Ut=(0,br.A)(this.streams.values());Be<Ut.length;Be++){var vt=Ut[Be];vt.kind==N&&(Ve=new MediaStream,Ve.addTrack(vt.track))}if(this.participantVideoElements.get(N)){if(Ve){var lt=this.participantVideoElements.get(N);lt&&(lt.srcObject=Ve,lt.play().catch(function(Ot){return console.error("videoElem.play() failed",Ot)}))}return this.participantVideoElements.get(N)}try{var ft=document.createElement("div");ft.classList.add("video-container","participant-video-".concat(this.id)),ft.setAttribute("id","f-".concat(this.id).concat(N==="share"?"-share":"")),ft.style.setProperty("position","relative"),Object.assign(ft.style,ve);var mt=document.createElement("video");if(mt.setAttribute("id","v-".concat(this.id).concat(N==="share"?"-share":"")),mt.setAttribute("playsinline",""),mt.setAttribute("webkit-playsinline",""),mt.setAttribute("x5-playsinline",""),mt.playsinline=!0,mt.muted=!0,mt.autoplay=!0,mt.onerror=function(Ot){console.log(Ot,"participant video error")},Object.assign(mt.style,$r({width:"100%",height:"100%",objectFit:N==="share"?"contain":"cover"},he)),Ve&&(mt.srcObject=Ve,mt.play().then(function(Ot){console.log("videoElem.play() success",Ot)}).catch(function(Ot){return console.error("videoElem.play() failed",Ot)})),ft.appendChild(mt),this.participantVideoElements.set(N,mt),this.videoVisible=!1,!this.local&&N==="video"){var lr=(0,ur.sg)(function(Ot){if(Ot.length!=0){var xr=Ot[Ot.length-1];if(xr.intersectionRatio>0){E.videoVisible=!0;for(var Ea=0,da=(0,br.A)(E.streams.values());Ea<da.length;Ea++){var wa=da[Ea];wa.kind=="video"&&wa.pausedBy!=="SUB_MANAGER"&&wa.paused&&wa.resume()}}else{E.videoVisible=!1;for(var Wr=0,yn=(0,br.A)(E.streams.values());Wr<yn.length;Wr++){var Mn=yn[Wr];Mn.kind=="video"&&Mn.pause()}}}},500),dt={root:null,rootMargin:"0px",threshold:0},Bt=new IntersectionObserver(lr,dt);if(Bt.observe(ft),ce=="auto"&&N==="video"){var Ir=(0,ur.sg)(function(Ot){var xr=Ot[0].contentRect,Ea=xr.width,da=xr.height;Ea>0&&da>0&&(E.height=da,E.width=Ea,E.setViewPort(Ea,da))},500),ya=new ResizeObserver(Ir);ya.observe(ft),this.resizeObserver=ya}}return N==="video"&&ce!=="auto"&&!this.local&&this.setQuality(ce),ft}catch(Ot){console.log("Render video Exception",Ot)}}},{key:"renderAudio",value:function(i){var E=i.type,M=E===void 0?"audio":E;if(this.local)return null;try{if(this.participantAudioElements.get(M)){var N=this.participantAudioElements.get(M),re=this.getAudioStream(M);return re&&N&&(N.srcObject=re,N.play().catch(function(he){return console.error("Failed to play existing audio:",he)})),N}var ce=document.createElement("audio");ce.setAttribute("id","a-".concat(this.id,"-").concat(M)),ce.autoplay=!1,ce.playsInline=!0,ce.controls=!1,ce.style.display="none",ce.onerror=function(he){return console.log("Audio element error:",he)};var de=this.getAudioStream(M);return de&&(ce.srcObject=de,ce.play().catch(function(he){return console.error("Failed to play new audio:",he)})),this.participantAudioElements.set(M,ce),ce}catch(he){return console.error("Render audio exception:",he),null}}},{key:"getAudioStream",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"audio",E=(0,br.A)(this.streams.values()).find(function(N){return N.kind===i});if(E){var M=new MediaStream;return M.addTrack(E.track),E.resume(),M}return null}},{key:"addProducer",value:function(i){this.eventEmitter.emit(di,i)}},{key:"removeProducer",value:function(i){this.eventEmitter.emit(qi,i)}},{key:"addConsumer",value:function(i){this.eventEmitter.emit(sn,i)}},{key:"removeConsumer",value:function(i){this.eventEmitter.emit(Wi,i)}},{key:"on",value:function(i,E){switch(i){case hn:case ca:case Kr:case Oa:case jn:case Qn:case di:case qi:case sn:case Wi:case Xn:this.eventEmitter.on(i,E);break;default:throw new Error("Invalid event type from participant onn")}}},{key:"off",value:function(i,E){switch(i){case hn:case ca:case Kr:case Oa:case jn:case Qn:case di:case qi:case sn:case Wi:case Xn:this.eventEmitter.off(i,E);break;default:throw new Error("Invalid event type from participant off")}}}])})(),Pi=S(388),Tr=S(3954),Va=S(5501),Li={CHARACTER_SPEAKING:"CHARACTER_SPEAKING",CHARACTER_THINKING:"CHARACTER_THINKING",CHARACTER_LISTENING:"CHARACTER_LISTENING"},Jn={TEXT:"text",CO_PILOT:"co_pilot",AUTO_PILOT:"auto_pilot",VISION_PILOT:"vision_pilot"},ha=S(2107);function Ga(D,p,i){return p=(0,Tr.A)(p),(0,Pi.A)(D,ts()?Reflect.construct(p,i||[],(0,Tr.A)(D).constructor):p.apply(D,i))}function ts(){try{var D=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(ts=function(){return!!D})()}function We(D,p){Mt(D,p),p.add(D)}function _t(D,p,i){Mt(D,p),p.set(D,i)}function Mt(D,p){if(p.has(D))throw new TypeError("Cannot initialize the same private elements twice on an object")}function $t(D,p){return D.get(jr(D,p))}function Br(D,p,i){return D.set(jr(D,p),i),i}function jr(D,p,i){if(typeof D=="function"?D===p:D.has(p))return arguments.length<3?p:i;throw new TypeError("Private element is not present on this object")}var Dt="stream-enabled",Xr="stream-disabled",Nr="character-joined",Ca="character-left",Ka="media-status-changed",Un="video-quality-changed",ni="character-state-changed",Ln="character-message",pi="user-message",gs="data",Gi="error",wi=new WeakMap,ys=new WeakMap,rs=new WeakMap,Ri=new WeakMap,as=new WeakMap,xs=new WeakMap,Zn=new WeakMap,Ys=new WeakSet,fo=(function(D){function p(i){var E;return(0,T.A)(this,p),E=Ga(this,p,[{id:i.id,displayName:i.displayName,mode:ha.nI.SEND_AND_RECV,metaData:i.metaData}]),We(E,Ys),_t(E,wi,void 0),_t(E,ys,void 0),_t(E,rs,void 0),_t(E,Ri,void 0),_t(E,as,void 0),_t(E,xs,void 0),_t(E,Zn,void 0),(0,J.A)(E,"captureImage",(0,C.A)(n().mark(function M(){var N,re=arguments;return n().wrap(function(ce){for(;;)switch(ce.prev=ce.next){case 0:throw N=re.length>0&&re[0]!==void 0?re[0]:{},N.height,N.width,new Error("captureImage method is not supported on character");case 1:case"end":return ce.stop()}},M)}))),Br(as,E,i.interactionId||null),E.id=i.id||null,Br(wi,E,i.characterRole),Br(ys,E,i.characterMode),Br(rs,E,i.knowledgeBases||[]),E.displayName=i.displayName,Br(Ri,E,i.language),Br(xs,E,i.state||Li.CHARACTER_LISTENING),Br(Zn,E,i.roomClient),E}return(0,Va.A)(p,D),(0,b.A)(p,[{key:"join",value:(function(){var i=(0,C.A)(n().mark(function M(){var N;return n().wrap(function(re){for(;;)switch(re.prev=re.next){case 0:return re.next=1,$t(Zn,this).joinCharacter({interactionId:$t(as,this),characterId:this.id,characterRole:$t(wi,this),displayName:this.displayName,characterMode:$t(ys,this),knowledgeBases:$t(rs,this),language:$t(Ri,this),metaData:this.metaData});case 1:N=re.sent,N&&(this.id=N.characterId,this.displayName=N.displayName,Br(ys,this,N.characterMode),Br(wi,this,N.characterRole),Br(as,this,N.interactionId),Br(rs,this,N.knowledgeBases),Br(Ri,this,N.language),$t(Zn,this)._eventEmitter.emit("INIT_CHARACTER",this));case 2:case"end":return re.stop()}},M,this)}));function E(){return i.apply(this,arguments)}return E})()},{key:"leave",value:(function(){var i=(0,C.A)(n().mark(function M(){return n().wrap(function(N){for(;;)switch(N.prev=N.next){case 0:return N.next=1,$t(Zn,this).removeCharacter();case 1:case"end":return N.stop()}},M,this)}));function E(){return i.apply(this,arguments)}return E})()},{key:"remove",value:(function(){var i=(0,C.A)(n().mark(function M(){return n().wrap(function(N){for(;;)switch(N.prev=N.next){case 0:throw new Error("remove method is not supported on character");case 1:case"end":return N.stop()}},M)}));function E(){return i.apply(this,arguments)}return E})()},{key:"sendMessage",value:(function(){var i=(0,C.A)(n().mark(function M(N){return n().wrap(function(re){for(;;)switch(re.prev=re.next){case 0:return re.next=1,$t(Zn,this).sendCharacterMessage({interactionId:$t(as,this),text:N});case 1:case"end":return re.stop()}},M,this)}));function E(M){return i.apply(this,arguments)}return E})()},{key:"handleCharacterStateChanged",value:function(E){Object.keys(Li).includes(E.status)&&(jr(Ys,this,Qs).call(this,E.status),this.eventEmitter.emit(ni,E))}},{key:"handleCharacterMessage",value:function(E){this.eventEmitter.emit(Ln,E)}},{key:"interrupt",value:(function(){var i=(0,C.A)(n().mark(function M(){return n().wrap(function(N){for(;;)switch(N.prev=N.next){case 0:return N.next=1,$t(Zn,this).interruptCharacter({interactionId:$t(as,this)});case 1:case"end":return N.stop()}},M,this)}));function E(){return i.apply(this,arguments)}return E})()},{key:"handleUserMessage",value:function(E){this.eventEmitter.emit(pi,E)}},{key:"handleCharacterData",value:function(E){var M=E.topic,N=E.data;this.eventEmitter.emit(gs,M,N)}},{key:"handleCharacterError",value:function(E){var M=E.data,N=this.eventEmitter.listenerCount(Gi);N>0&&this.eventEmitter.emit(Gi,M)}},{key:"enableMic",value:function(){$t(Zn,this).enablePeerMic(this.id)}},{key:"disableMic",value:function(){$t(Zn,this).disablePeerMic(this.id)}},{key:"enableWebcam",value:function(){$t(Zn,this).enablePeerWebcam(this.id)}},{key:"disableWebcam",value:function(){$t(Zn,this).disablePeerWebcam(this.id)}},{key:"updateStream",value:function(E){throw new Error("updateStream method is not supported on character")}},{key:"switchTo",value:(function(){var i=(0,C.A)(n().mark(function M(N){return n().wrap(function(re){for(;;)switch(re.prev=re.next){case 0:throw N.meetingId,N.payload,N.token,new Error("switchTo method is not supported on character");case 1:case"end":return re.stop()}},M)}));function E(M){return i.apply(this,arguments)}return E})()},{key:"pin",value:function(E){throw new Error("pin method is not supported on character")}},{key:"on",value:function(E,M){switch(E){case Dt:case Xr:case Nr:case Ca:case Ka:case Un:case ni:case Ln:case pi:case gs:case Gi:this.eventEmitter.on(E,M);break;default:throw new Error("Invalid event type")}}},{key:"off",value:function(E,M){switch(E){case Dt:case Xr:case Nr:case Ca:case Ka:case Un:case ni:case Ln:case pi:case gs:case Gi:this.eventEmitter.off(E,M);break;default:throw new Error("Invalid event type")}}},{key:"state",get:function(){return $t(xs,this)}},{key:"knowledgeBases",get:function(){return $t(rs,this)}},{key:"characterMode",get:function(){return $t(ys,this)}},{key:"characterRole",get:function(){return $t(wi,this)}},{key:"interactionId",get:function(){return $t(as,this)}},{key:"language",get:function(){return $t(Ri,this)}}])})(Ei);function Qs(D){Br(xs,this,D)}function mo(D,p,i){Ti(D,p),p.set(D,i)}function Ti(D,p){if(p.has(D))throw new TypeError("Cannot initialize the same private elements twice on an object")}function vo(D,p){return D.get(ns(D,p))}function xo(D,p,i){return D.set(ns(D,p),i),i}function ns(D,p,i){if(typeof D=="function"?D===p:D.has(p))return arguments.length<3?p:i;throw new TypeError("Private element is not present on this object")}var Ni=new WeakMap,_s=(function(){function D(p,i){var E=p.id,M=p.displayName;(0,T.A)(this,D),mo(this,Ni,void 0),this.id=E,this.displayName=M,xo(Ni,this,i)}return(0,b.A)(D,[{key:"switchTo",value:(function(){var p=(0,C.A)(n().mark(function E(M){var N,re,ce;return n().wrap(function(de){for(;;)switch(de.prev=de.next){case 0:return N=M.meetingId,re=M.payload,ce=M.token,de.next=1,rt.roomClient.connectionSwitchPeerRoom({roomId:N,connectionRoomId:vo(Ni,this),payload:re,peerId:this.id,token:ce});case 1:case"end":return de.stop()}},E,this)}));function i(E){return p.apply(this,arguments)}return i})()}])})(),Bs="participant-joined",js="participant-left",hi="data",Nn=(function(){function D(p,i){var E=this;(0,T.A)(this,D),this.eventEmitter=new Rr.EventEmitter,this.id=p,this.participants=new Map,i.forEach(function(M){E.participants.set(M.id,new _s(M,E.id))})}return(0,b.A)(D,[{key:"participantJoin",value:function(i){var E=new _s(i,this.id);this.participants.set(i.id,E),this.eventEmitter.emit(Bs,E)}},{key:"participantLeft",value:function(i){this.participants.delete(i),this.eventEmitter.emit(js,i)}},{key:"sendChatMessage",value:function(i){rt.roomClient.connectionSendChatMessage({roomId:this.id,message:i})}},{key:"sendChatMessageEvent",value:function(i){var E=i.participantId,M=i.message;this.eventEmitter.emit(hi,{participantId:E,message:M})}},{key:"end",value:(function(){var p=(0,C.A)(n().mark(function E(){return n().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return M.next=1,rt.roomClient.connectionEndMeeting({roomId:this.id});case 1:case"end":return M.stop()}},E,this)}));function i(){return p.apply(this,arguments)}return i})()},{key:"on",value:function(i,E){switch(i){case Bs:case js:case hi:this.eventEmitter.on(i,E);break;default:throw new Error("Invalid event type")}}},{key:"off",value:function(i,E){switch(i){case Bs:case js:case hi:this.eventEmitter.off(i,E);break;default:throw new Error("Invalid event type")}}}])})(),Bo=(function(){function D(p){var i=p.roomId,E=p.peers,M=p.payload;(0,T.A)(this,D),this.id=i,this.payload=M,this.meeting=new Nn(i,E)}return(0,b.A)(D,[{key:"close",value:function(){rt.roomClient.closeConnection(this.id)}}])})(),is=S(1260);function Ii(D,p){var i=Object.keys(D);if(Object.getOwnPropertySymbols){var E=Object.getOwnPropertySymbols(D);p&&(E=E.filter(function(M){return Object.getOwnPropertyDescriptor(D,M).enumerable})),i.push.apply(i,E)}return i}function Us(D){for(var p=1;p<arguments.length;p++){var i=arguments[p]!=null?arguments[p]:{};p%2?Ii(Object(i),!0).forEach(function(E){(0,J.A)(D,E,i[E])}):Object.getOwnPropertyDescriptors?Object.defineProperties(D,Object.getOwnPropertyDescriptors(i)):Ii(Object(i)).forEach(function(E){Object.defineProperty(D,E,Object.getOwnPropertyDescriptor(i,E))})}return D}function Xs(D,p){bs(D,p),p.add(D)}function go(D,p,i){bs(D,p),p.set(D,i)}function bs(D,p){if(p.has(D))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Rn(D,p){return D.get(Tn(D,p))}function yo(D,p,i){return D.set(Tn(D,p),i),i}function Tn(D,p,i){if(typeof D=="function"?D===p:D.has(p))return arguments.length<3?p:i;throw new TypeError("Private element is not present on this object")}var xi="error",Ss="meeting-joined",ss="meeting-left",_o="participant-mode-changed",Js="participant-joined",Zs="participant-left",Es="speaker-changed",Ci="presenter-changed",bo="main-participant-changed",jo="data",Uo="entry-requested",zo="entry-responded",zs="recording-state-changed",Er="recording-started",So="recording-stopped",Eo="livestream-state-changed",Hs="livestream-started",xe="livestream-stopped",se="hls-state-changed",we="hls-started",nr="hls-stopped",Jr="whiteboard-started",_n="whiteboard-stopped",Bi="video-state-changed",oc="video-seeked",os="mic-requested",Gc="webcam-requested",wo="stream-enabled",ws="stream-disabled",Kc="pin-state-changed",cc="connection-open",Ro="connection-close",Yc="switch-meeting",lc="meeting-state-changed",eo="quality-limitation",uc="paused-all-streams",dc="resumed-all-streams",Rs="transcription-state-changed",Ts="transcription-text",pc="translation-state-changed",hc="translation-text",Ho="translation-language-changed",Vo="character-joined",to="character-left",Fo="media-relay-started",Cs="media-relay-stopped",Qc="media-relay-error",fc="media-relay-request-response",Xc="media-relay-request-received",fi=new WeakMap,Wn=new WeakMap,cs=new WeakSet,To=(function(){function D(p,i,E){var M=this;(0,T.A)(this,D),Xs(this,cs),go(this,fi,void 0),go(this,Wn,void 0),(0,J.A)(this,"pubSub",{publish:(function(){var N=(0,C.A)(n().mark(function ce(de,he,me,ve){return n().wrap(function(Ve){for(;;)switch(Ve.prev=Ve.next){case 0:if(he==null){Ve.next=1;break}if(typeof he=="string"){Ve.next=1;break}throw new Error('"message" can only be string.');case 1:if(ve==null){Ve.next=2;break}if((0,x.A)(ve)=="object"){Ve.next=2;break}throw new Error('"payload" can only be object.');case 2:return Ve.next=3,M.roomClient.pubsubPublish(de,he,me,ve);case 3:case"end":return Ve.stop()}},ce)}));function re(ce,de,he,me){return N.apply(this,arguments)}return re})(),subscribe:(function(){var N=(0,C.A)(n().mark(function ce(de,he){var me;return n().wrap(function(ve){for(;;)switch(ve.prev=ve.next){case 0:if(!Rn(fi,M).listeners(de).includes(he)){ve.next=1;break}return ve.abrupt("return");case 1:return ve.next=2,M.roomClient.pubsubSubscribe(de);case 2:return me=ve.sent,Rn(fi,M).on(de,he),ve.abrupt("return",me);case 3:case"end":return ve.stop()}},ce)}));function re(ce,de){return N.apply(this,arguments)}return re})(),unsubscribe:(function(){var N=(0,C.A)(n().mark(function ce(de,he){return n().wrap(function(me){for(;;)switch(me.prev=me.next){case 0:if(Rn(fi,M).off(de,he),Rn(fi,M).listeners(de).length!=0){me.next=1;break}return me.next=1,M.roomClient.pubsubUnsubscribe(de);case 1:case"end":return me.stop()}},ce)}));function re(ce,de){return N.apply(this,arguments)}return re})()}),(0,J.A)(this,"realtimeStore",{setValue:(function(){var N=(0,C.A)(n().mark(function ce(de,he){return n().wrap(function(me){for(;;)switch(me.prev=me.next){case 0:return me.next=1,M.roomClient.setValue(de,he);case 1:return me.abrupt("return",me.sent);case 2:case"end":return me.stop()}},ce)}));function re(ce,de){return N.apply(this,arguments)}return re})(),getValue:(function(){var N=(0,C.A)(n().mark(function ce(de){return n().wrap(function(he){for(;;)switch(he.prev=he.next){case 0:return he.next=1,M.roomClient.getValue(de);case 1:return he.abrupt("return",he.sent);case 2:case"end":return he.stop()}},ce)}));function re(ce){return N.apply(this,arguments)}return re})(),observe:(function(){var N=(0,C.A)(n().mark(function ce(de,he){var me;return n().wrap(function(ve){for(;;)switch(ve.prev=ve.next){case 0:if(de!=null){ve.next=1;break}throw new Error("The 'key' parameter is required.");case 1:if(typeof de=="string"){ve.next=2;break}throw new TypeError("Invalid type for 'key'. Expected a string.");case 2:if(!Rn(Wn,M).listeners(de).includes(he)){ve.next=3;break}return ve.abrupt("return");case 3:return ve.next=4,M.roomClient.observe(de);case 4:return me=Math.random().toString(36).substring(2,10),M.observers.set(me,{key:de,callback:he}),Rn(Wn,M).on(de,he),ve.abrupt("return",me);case 5:case"end":return ve.stop()}},ce)}));function re(ce,de){return N.apply(this,arguments)}return re})(),stopObserving:(function(){var N=(0,C.A)(n().mark(function ce(de){var he,me,ve;return n().wrap(function(Ve){for(;;)switch(Ve.prev=Ve.next){case 0:if(de!=null){Ve.next=1;break}throw new Error("The 'observerId' parameter is required.");case 1:if(he=M.observers.get(de),he){Ve.next=2;break}return Ve.abrupt("return");case 2:if(me=he.key,ve=he.callback,Rn(Wn,M).off(me,ve),Rn(Wn,M).listeners(me).length!=0){Ve.next=3;break}return Ve.next=3,M.roomClient.stopObserving(me);case 3:case"end":return Ve.stop()}},ce)}));function re(ce){return N.apply(this,arguments)}return re})()}),(0,J.A)(this,"uploadBase64File",(function(){var N=(0,C.A)(n().mark(function re(ce){var de,he,me,ve,Ve,Be,Ut,vt,lt,ft,mt,lr;return n().wrap(function(dt){for(;;)switch(dt.prev=dt.next){case 0:if(he=ce.base64Data,me=ce.token,ve=ce.fileName,Ve=(de=M.roomClient._openTelemetry)===null||de===void 0?void 0:de.trace({spanName:"Uploading Base64 File",attributes:{fileName:ve||"No filename provided"}}),dt.prev=1,!(!he||!me||!ve)){dt.next=2;break}throw new Error("please provide base64Data, token and fileName");case 2:return Ut="https://".concat(M.baseUrl,"/base64-upload?roomId=").concat(M.id),vt={fileName:ve,base64Data:he},dt.next=3,fetch(Ut,{method:"POST",body:JSON.stringify(vt),headers:{"Content-Type":"application/json",Authorization:me}});case 3:return lt=dt.sent,dt.next=4,lt.json();case 4:return ft=dt.sent,(Be=M.roomClient._openTelemetry)===null||Be===void 0||Be.completeSpan({span:Ve,status:1,message:"Base64 File uploaded successfully"}),dt.abrupt("return",ft.url);case 5:dt.prev=5,lr=dt.catch(1),console.error("Error while Uploading Base64 File::",lr),M.roomClient._videosdkLogs&&M.roomClient._videosdkLogs.pushLogs({logText:"Error while Uploading Base64 File",logType:"ERROR",attributes:{error:lr.message}}),(mt=M.roomClient._openTelemetry)===null||mt===void 0||mt.completeSpan({span:Ve,status:1,message:"Error while Uploading Base64 File : ".concat(lr.message)});case 6:case"end":return dt.stop()}},re,null,[[1,5]])}));return function(re){return N.apply(this,arguments)}})()),(0,J.A)(this,"fetchBase64File",(function(){var N=(0,C.A)(n().mark(function re(ce){var de,he,me,ve,Ve,Be,Ut,vt,lt,ft;return n().wrap(function(mt){for(;;)switch(mt.prev=mt.next){case 0:if(he=ce.url,me=ce.token,ve=(de=M.roomClient._openTelemetry)===null||de===void 0?void 0:de.trace({spanName:"Fetching Base64 File",attributes:{fileUrl:he||"No URL provided"}}),mt.prev=1,!(!he||!me)){mt.next=2;break}throw new Error("please provide url and token");case 2:return mt.next=3,fetch(he,{headers:{Authorization:me}});case 3:return Be=mt.sent,mt.next=4,Be.arrayBuffer();case 4:return Ut=mt.sent,vt=window.btoa(new Uint8Array(Ut).reduce(function(lr,dt){return lr+String.fromCharCode(dt)},"")),(Ve=M.roomClient._openTelemetry)===null||Ve===void 0||Ve.completeSpan({span:ve,status:1,message:"Base64 File fetched successfully"}),mt.abrupt("return",vt);case 5:mt.prev=5,ft=mt.catch(1),console.error("Error while fetching Base64 File::",ft),M.roomClient._videosdkLogs&&M.roomClient._videosdkLogs.pushLogs({logText:"Error while fetching Base64 File",logType:"ERROR",attributes:{error:ft.message}}),(lt=M.roomClient._openTelemetry)===null||lt===void 0||lt.completeSpan({span:ve,status:1,message:"Error while fetching Base64 File : ".concat(ft.message)});case 6:case"end":return mt.stop()}},re,null,[[1,5]])}));return function(re){return N.apply(this,arguments)}})()),this.id=p,this.roomClient=E,this.activeSpeakerId=null,this.activePresenterId=null,this.mainParticipantId=null,this.connections=new Map,this.localParticipant=i,this.participants=new Map,this.characters=new Map,this.baseUrl=null,this.livestreamState="LIVESTREAM_STOPPED",this.recordingState="RECORDING_STOPPED",this.hlsState="HLS_STOPPED",this.transcriptionState="TRANSCRIPTION_STOPPED",this.translationState="TRANSLATION_STOPPED",this.hlsUrls={downstreamUrl:null,playbackHlsUrl:null,livestreamUrl:null},this.messages=[],this.observers=new Map,this.eventEmitter=new Rr.EventEmitter,yo(fi,this,new Rr.EventEmitter),yo(Wn,this,new Rr.EventEmitter),this.eventEmitter.setMaxListeners(9999),Rn(fi,this).setMaxListeners(9999),Rn(Wn,this).setMaxListeners(9999),this.roomClient.on("ERROR",function(N){return M.handleError(N)}),this.roomClient.on("ADD_PEER",function(N){return M.handlePeerAdd(N)}),this.roomClient.on("REMOVE_PEER",function(N){return M.handlePeerRemove(N)}),this.roomClient.on("STREAM_STATE_CHANGED",function(N){return M.handleStreamState(N)}),this.roomClient.on("ADD_PRODUCER",function(N){return M.handleProducerAdd(N)}),this.roomClient.on("UPDATE_PRODUCER",function(N){return M.handleUpdateProducer(N)}),this.roomClient.on("REMOVE_PRODUCER",function(N){return M.handleProducerRemove(N)}),this.roomClient.on("ADD_CONSUMER",function(N){return M.handleConsumerAdd(N)}),this.roomClient.on("REMOVE_CONSUMER",function(N){return M.handleConsumerRemove(N)}),this.roomClient.on("CONSUMER_RESUMED",function(N){return M.handleConsumerResume(N)}),this.roomClient.on("CONSUMER_PAUSED",function(N){return M.handleConsumerPause(N)}),this.roomClient.on("PARTICIPANT_MEDIA_STATE_CHANGED",function(N){return M.handleParticipantMediaStateChanged(N)}),this.roomClient.on("DATA",function(N){return M.handleNewChatMessage(N)}),this.roomClient.on("SET_ROOM_ACTIVE_SPEAKER",function(N){return M.handleSpeakerChange(N)}),this.roomClient.on("ENTRY_REQUESTED",function(N){return M.handleEntryRequested(N)}),this.roomClient.on("ENTRY_RESPONDED",function(N){return M.handleEntryResponded(N)}),this.roomClient.on("MEETING_JOINED",function(N){return M.handleMeetingJoined(N)}),this.roomClient.on("MEETING_LEFT",function(N){return M.handleMeetingLeft(N)}),this.roomClient.on("RECORDING_STATE_CHANGED",function(N){M.handleRecordingStateChanged(N)}),this.roomClient.on("RECORDING_STARTED",function(N){return M.handleRecordingStarted(N)}),this.roomClient.on("RECORDING_STOPPED",function(N){return M.handleRecordingStopped(N)}),this.roomClient.on("LIVESTREAM_STATE_CHANGED",function(N){M.handleLivestreamStateChanged(N)}),this.roomClient.on("LIVESTREAM_STARTED",function(N){return M.handleLivestreamStarted(N)}),this.roomClient.on("LIVESTREAM_STOPPED",function(N){return M.handleLivestreamStopped(N)}),this.roomClient.on("HLS_STATE_CHANGED",function(N){M.handleHlsStateChanged(N)}),this.roomClient.on("HLS_STARTED",function(N){M.handleHlsStarted(N)}),this.roomClient.on("HLS_STOPPED",function(N){M.handleHlsStopped(N)}),this.roomClient.on("TRANSCRIPTION_STATE_CHANGED",function(N){M.handleTranscriptionStateChanged(N)}),this.roomClient.on("TRANSCRIPTION_TEXT",function(N){M.handleTranscriptionText(N)}),this.roomClient.on("TRANSLATION_STATE_CHANGED",function(N){M.handleTranslationStateChanged(N)}),this.roomClient.on("TRANSLATION_TEXT",function(N){M.handleTranslationText(N)}),this.roomClient.on("TRANSLATION_LANGUAGE_CHANGED",function(N){M.handleTranslationLanguageChanged(N)}),this.roomClient.on("SUB_MANAGER_RESUMED",function(N){M.handleParticipantResumeBySubManager(N)}),this.roomClient.on("SUB_MANAGER_PAUSED",function(N){M.handleParticipantPausedBySubManager(N)}),this.roomClient.on("WHITEBOARD_STARTED",function(N){return M.handleWhiteboardStarted(N)}),this.roomClient.on("WHITEBOARD_STOPPED",function(N){return M.handleWhiteboardStopped(N)}),this.roomClient.on("VIDEO_STATE_CHANGED",function(N){return M.handleVideoStateChanged(N)}),this.roomClient.on("VIDEO_SEEKED",function(N){return M.handleVideoSeeked(N)}),this.roomClient.on("PIN_STATE_CHANGED",function(N){M.handlePinStateChanged(N)}),this.roomClient.on("MIC_REQUESTED",function(N){return M.handleMicRequested(N)}),this.roomClient.on("WEBCAM_REQUESTED",function(N){return M.handleWebcamRequested(N)}),this.roomClient.on("CONNECTION_OPEN",function(N){return M.handleConnectionOpen(N)}),this.roomClient.on("CONNECTION_CLOSE",function(N){return M.handleConnectionClose(N)}),this.roomClient.on("CONNECTION_PARTICIPANT_JOIN",function(N){return M.handleConnectionParticipantJoin(N)}),this.roomClient.on("SWITCH_ROOM",function(N){return M.handleSwitchMeeting(N)}),this.roomClient.on("CONNECTION_CHAT_MESSAGE",function(N){return M.handleConnectionChatMessage(N)}),this.roomClient.on("CONNECTION_PARTICIPANT_LEFT",function(N){M.handleConnectionParticipantLeft(N)}),this.roomClient.on("PUBSUB_MESSAGE",function(N){return Tn(cs,M,Bl).call(M,N)}),this.roomClient.on("REALTIMESTORE_VALUE_CHANGED",function(N){return Tn(cs,M,mc).call(M,N)}),this.roomClient.on("PEER_MODE_CHANGED",function(N){return Tn(cs,M,Jc).call(M,N)}),this.updateMainParticipant(this.localParticipant.id),this.roomClient.on("MEETING_STATE_CHANGED",function(N){return M.handleMeetingStateChanged(N)}),this.roomClient.on("QUALITY_LIMITATION_INTERNAL",function(N){return M.handleQualityChanged(N)}),this.roomClient.on("ALL_CONSUMERS_PAUSED",function(N){return M.handleConsumersPaused(N)}),this.roomClient.on("ALL_CONSUMERS_RESUMED",function(N){return M.handleConsumersResumed(N)}),this.roomClient.on("VIDEO_QUALITY_CHANGED",function(N){return M.handleVideoQualityChanged(N)}),this.roomClient.on("ADD_CHARACTER",function(N){return M.handleAddCharacter(N)}),this.roomClient.on("INIT_CHARACTER",function(N){return M.handleInitCharacter(N)}),this.roomClient.on("REMOVE_CHARACTER",function(N){return M.handleRemoveCharacter(N)}),this.roomClient.on("CHARACTER_STATE_CHANGED",function(N){return M.handleCharacterStateChanged(N)}),this.roomClient.on("CHARACTER_MESSAGE",function(N){return M.handleCharacterMessage(N)}),this.roomClient.on("USER_MESSAGE",function(N){return M.handleUserMessage(N)}),this.roomClient.on("CHARACTER_DATA",function(N){return M.handleOnCharacterData(N)}),this.roomClient.on("CHARACTER_ERROR",function(N){return M.handleOnCharacterError(N)}),this.roomClient.on("E2EE_STATE_CHANGE",function(N){return M.handleE2EEStateChange(N)}),this.roomClient.on("REMOVE_PARTICIPANTS_FOR_SWITCH_MEETING",function(){return M.handleOnRemoveCurrentMeetingParticipant()}),this.roomClient.on("MEDIA_RELAY_STARTED",function(N){return M.handleMediaRelayStart(N)}),this.roomClient.on("MEDIA_RELAY_STOPPED",function(N){return M.handleMediaRelayStop(N)}),this.roomClient.on("MEDIA_RELAY_ERROR",function(N){return M.handleMediaRelayError(N)}),this.roomClient.on("MEDIA_RELAY_REQUEST_RESPONSE",function(N){return M.handleMediaRelayRequestResponse(N)}),this.roomClient.on("MEDIA_RELAY_REQUEST_RECEIVED",function(N){return M.handleMediaRelayRequest(N)})}return(0,b.A)(D,[{key:"isE2EEEnabled",get:function(){return this.roomClient.isE2EEEnabled}},{key:"handleError",value:function(i){var E=this.eventEmitter.listenerCount(xi);E>0&&this.eventEmitter.emit(xi,i)}},{key:"join",value:function(){this.roomClient.join()}},{key:"changeMode",value:function(i){this.roomClient.changeMode(i)}},{key:"leave",value:function(){this.roomClient.close({sendLeft:!0,manualCalled:!0})}},{key:"end",value:function(){this.roomClient.closeRoom()}},{key:"respondEntry",value:function(i,E){this.roomClient.respondEntry(i,E)}},{key:"pinnedParticipants",get:function(){return this.roomClient._pinnedParticipants}},{key:"muteMic",value:function(){this.roomClient.disableMic()}},{key:"unmuteMic",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:void 0;this.roomClient.enableMic(i)}},{key:"publishAudio",value:(function(){var p=(0,C.A)(n().mark(function E(){var M,N=arguments;return n().wrap(function(re){for(;;)switch(re.prev=re.next){case 0:return M=N.length>0&&N[0]!==void 0?N[0]:void 0,re.next=1,this.roomClient.enableMic(M);case 1:return re.abrupt("return");case 2:case"end":return re.stop()}},E,this)}));function i(){return p.apply(this,arguments)}return i})()},{key:"unpublishAudio",value:(function(){var p=(0,C.A)(n().mark(function E(){return n().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return M.next=1,this.roomClient.disableMic();case 1:return M.abrupt("return");case 2:case"end":return M.stop()}},E,this)}));function i(){return p.apply(this,arguments)}return i})()},{key:"disableWebcam",value:function(){this.roomClient.disableWebcam()}},{key:"enableWebcam",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:void 0;this.roomClient.enableWebcam(i)}},{key:"publishVideo",value:(function(){var p=(0,C.A)(n().mark(function E(){var M,N=arguments;return n().wrap(function(re){for(;;)switch(re.prev=re.next){case 0:return M=N.length>0&&N[0]!==void 0?N[0]:void 0,this.roomClient.enableWebcam(M),re.abrupt("return");case 1:case"end":return re.stop()}},E,this)}));function i(){return p.apply(this,arguments)}return i})()},{key:"unpublishVideo",value:(function(){var p=(0,C.A)(n().mark(function E(){return n().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return this.roomClient.disableWebcam(),M.abrupt("return");case 1:case"end":return M.stop()}},E,this)}));function i(){return p.apply(this,arguments)}return i})()},{key:"disableScreenShare",value:function(){this.roomClient.disableShare()}},{key:"enableScreenShare",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:void 0;this.roomClient.enableShare(i)}},{key:"pubblishScreenShare",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:void 0;this.roomClient.enableShare(i)}},{key:"unpublishScreenShare",value:function(){this.roomClient.disableShare()}},{key:"send",value:(function(){var p=(0,C.A)(n().mark(function E(M,N){return n().wrap(function(re){for(;;)switch(re.prev=re.next){case 0:return re.next=1,this.roomClient.send(M,N);case 1:return re.abrupt("return",re.sent);case 2:case"end":return re.stop()}},E,this)}));function i(E,M){return p.apply(this,arguments)}return i})()},{key:"pauseAllStreams",value:function(i){this.roomClient.pauseAllConsumers(i)}},{key:"resumeAllStreams",value:function(i){this.roomClient.resumeAllConsumers(i)}},{key:"startRecording",value:function(i,E,M,N){this.roomClient.startRecording(i,E,M,N)}},{key:"stopRecording",value:function(){this.roomClient.stopRecording()}},{key:"startTranscription",value:function(i){this.roomClient.startTranscription(i)}},{key:"stopTranscription",value:function(){this.roomClient.stopTranscription()}},{key:"startTranslation",value:(function(){var p=(0,C.A)(n().mark(function E(M){return n().wrap(function(N){for(;;)switch(N.prev=N.next){case 0:return N.abrupt("return",this.roomClient.startTranslation(M));case 1:case"end":return N.stop()}},E,this)}));function i(E){return p.apply(this,arguments)}return i})()},{key:"changeTranslationLanguage",value:(function(){var p=(0,C.A)(n().mark(function E(M){return n().wrap(function(N){for(;;)switch(N.prev=N.next){case 0:return N.abrupt("return",this.roomClient.changeTranslationLanguage(M));case 1:case"end":return N.stop()}},E,this)}));function i(E){return p.apply(this,arguments)}return i})()},{key:"stopTranslation",value:(function(){var p=(0,C.A)(n().mark(function E(){return n().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return M.abrupt("return",this.roomClient.stopTranslation());case 1:case"end":return M.stop()}},E,this)}));function i(){return p.apply(this,arguments)}return i})()},{key:"startLivestream",value:function(i,E){this.roomClient.startLivestream(i,E)}},{key:"stopLivestream",value:function(){this.roomClient.stopLivestream()}},{key:"startHls",value:(function(){var p=(0,C.A)(n().mark(function E(M,N){return n().wrap(function(re){for(;;)switch(re.prev=re.next){case 0:return re.next=1,this.roomClient.startHls(M,N);case 1:case"end":return re.stop()}},E,this)}));function i(E,M){return p.apply(this,arguments)}return i})()},{key:"stopHls",value:function(){this.roomClient.stopHls()}},{key:"createCharacter",value:function(i){if(!i.interactionId&&!i.id)throw new Error("InteractionId or id is required");return new fo(Us(Us({},i),{},{roomClient:this.roomClient}))}},{key:"getMics",value:(function(){var p=(0,C.A)(n().mark(function E(){return n().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return M.next=1,this.roomClient.getMics();case 1:return M.abrupt("return",M.sent);case 2:case"end":return M.stop()}},E,this)}));function i(){return p.apply(this,arguments)}return i})()},{key:"getWebcams",value:(function(){var p=(0,C.A)(n().mark(function E(){return n().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return M.next=1,this.roomClient.getWebcams();case 1:return M.abrupt("return",M.sent);case 2:case"end":return M.stop()}},E,this)}));function i(){return p.apply(this,arguments)}return i})()},{key:"changeMic",value:function(i){this.roomClient.changeMic(i)}},{key:"changeWebcam",value:function(i){this.roomClient.changeWebcam(i)}},{key:"replaceWebcamStream",value:function(i){this.roomClient.replaceWebcamStream(i)}},{key:"setWebcamQuality",value:function(i){this.roomClient.setWebcamQuality(i)}},{key:"startWhiteboard",value:function(){this.roomClient.startWhiteboard()}},{key:"stopWhiteboard",value:function(){this.roomClient.stopWhiteboard()}},{key:"startVideo",value:function(i){var E=i.link;this.roomClient.startVideo({link:E})}},{key:"stopVideo",value:function(){this.roomClient.stopVideo()}},{key:"resumeVideo",value:function(){this.roomClient.resumeVideo()}},{key:"refreshConnection",value:function(){this.roomClient.restartIce()}},{key:"pauseVideo",value:function(i){var E=i.currentTime;this.roomClient.pauseVideo(E)}},{key:"seekVideo",value:function(i){var E=i.currentTime;this.roomClient.seekVideo(E)}},{key:"handlePeerAdd",value:function(i){var E=i.peer,M=new Ei(E);this.participants.set(M.id,M),this.eventEmitter.emit(Js,M),this.participants.size===1&&this.updateMainParticipant(M.id)}},{key:"handleStreamState",value:function(i){var E=i.state,M=i.peerId,N=i.streamId,re=this.participants.get(M);re?.handleStreamStateChanged({state:E,peerId:M,streamId:N})}},{key:"handlePeerRemove",value:function(i){var E=i.peerId,M=i.reason,N={code:is.t.UNKNOWN.code,message:is.t.UNKNOWN.message},re=this.participants.get(E);re!=null&&(this.participants.delete(E),this.eventEmitter.emit(Zs,re,M||N),this.activePresenterId===re.id&&(this.activePresenterId=null,this.eventEmitter.emit(Ci,this.activePresenterId)),this.mainParticipantId===re.id&&(this.participants.size>0?this.updateMainParticipant(this.participants.entries().next().value[1].id):this.updateMainParticipant(this.localParticipant.id)))}},{key:"handleProducerAdd",value:function(i){var E=i.producer,M={id:E.id,rtpSender:E.rtpSender};this.localParticipant.addProducer(M);var N=new yr(E);this.localParticipant.addStream(N),N.kind==="share"&&(this.activePresenterId=this.localParticipant.id,this.eventEmitter.emit(Ci,this.activePresenterId),this.updateMainParticipant(this.localParticipant.id))}},{key:"handleUpdateProducer",value:function(i){var E=i.producer,M=new yr(E);this.localParticipant.updateStream(M)}},{key:"handleProducerRemove",value:function(i){var E=i.producerId;this.localParticipant.removeProducer(E);var M=this.localParticipant.deleteStream(E);if(M&&M.kind==="share"){this.activePresenterId=null,this.eventEmitter.emit(Ci,this.activePresenterId);var N=this.participants.size>0?this.participants.entries().next().value[1].id:null;this.updateMainParticipant(this.activeSpeakerId||N||this.localParticipant.id)}}},{key:"handleConsumerAdd",value:function(i){var E=i.consumer,M=i.peerId,N=this.participants.get(M)||this.characters.get(M);if(N){var re={id:E.id,rtpReceiver:E.rtpReceiver};N.addConsumer(re);var ce=new yr(E);N.addStream(ce),this.eventEmitter.emit(wo,ce),ce.kind==="share"&&(this.activePresenterId=N.id,this.eventEmitter.emit(Ci,this.activePresenterId),this.updateMainParticipant(N.id))}}},{key:"handleConsumerResume",value:function(i){var E=i.consumerId,M=i.peerId,N=this.participants.get(M);N&&N.streamResumed(E)}},{key:"handleConsumerPause",value:function(i){var E=i.consumerId,M=i.peerId,N=this.participants.get(M);N&&N.streamPaused(E)}},{key:"handleConsumerRemove",value:function(i){var E=i.consumerId,M=i.peerId,N=this.participants.get(M)||this.characters.get(M);if(N!=null&&N){N.removeConsumer(E);var re=N.deleteStream(E);if(this.eventEmitter.emit(ws,re),re&&re.kind==="share"){this.activePresenterId=null,this.eventEmitter.emit(Ci,this.activePresenterId);var ce=this.participants.size>0?this.participants.entries().next().value[1].id:null;this.updateMainParticipant(this.activeSpeakerId||ce||this.localParticipant.id)}}}},{key:"handleParticipantMediaStateChanged",value:function(i){var E=i.peerId,M=i.kind,N=i.newState,re=this.participants.get(E)||this.characters.get(E);this.localParticipant.id==E&&(re=this.localParticipant),re&&re&&(M=="audio"?re.micOn=N:M=="video"&&(re.webcamOn=N),re.updateParticipantMediaState(M,N))}},{key:"handleParticipantPausedBySubManager",value:function(i){var E=this.participants.get(i.peerId);E&&E&&E.handleParticipantPause(i)}},{key:"handleParticipantResumeBySubManager",value:function(i){var E=this.participants.get(i.peerId);E&&E&&E.handleParticipantResume(i)}},{key:"handleSpeakerChange",value:function(i){var E=i.peerId;this.activeSpeakerId!==E&&(this.activeSpeakerId=E,this.eventEmitter.emit(Es,E),E&&E!==this.localParticipant.id&&this.activePresenterId!==this.mainParticipantId&&E!==this.mainParticipantId&&this.updateMainParticipant(E))}},{key:"handleNewChatMessage",value:function(i){var E=i.payload,M=i.from,N=i.reliability,re=i.timestamp,ce={from:M,payload:E,timestamp:re,reliability:N};this.messages.push(ce),this.eventEmitter.emit(jo,ce)}},{key:"updateMainParticipant",value:function(i){this.mainParticipantId=i;var E=null;i===this.localParticipant.id?E=this.localParticipant:E=this.participants.get(this.mainParticipantId),this.eventEmitter.emit(bo,E)}},{key:"handleEntryRequested",value:function(i){var E=this,M=i.id,N=i.name;this.eventEmitter.emit(Uo,{participantId:M,name:N,allow:function(){E.roomClient.respondEntry(M,"allowed")},deny:function(){E.roomClient.respondEntry(M,"denied")}})}},{key:"handleEntryResponded",value:function(i){var E=i.id,M=i.decision;this.eventEmitter.emit(zo,E,M)}},{key:"handleMeetingJoined",value:function(i){var E=i.peers,M=i.poll,N=i.messages,re=i.baseUrl,ce=i.switchRoomId;typeof ce=="string"&&(this.id=ce),this.baseUrl=re,N.length>0&&(this.messages=N),this.eventEmitter.emit(Ss,{switchRoomId:ce||null,peers:E,poll:M,messages:N})}},{key:"handleMeetingLeft",value:function(i){this.eventEmitter.emit(ss,i)}},{key:"handleRecordingStateChanged",value:function(i){this.recordingState=i.status,this.eventEmitter.emit(zs,i)}},{key:"handleLivestreamStateChanged",value:function(i){this.livestreamState=i.status,this.eventEmitter.emit(Eo,i)}},{key:"handleHlsStateChanged",value:function(i){this.hlsState=i.status,i.status=="HLS_PLAYABLE"?this.hlsUrls={downstreamUrl:i.downstreamUrl,playbackHlsUrl:i.playbackHlsUrl,livestreamUrl:i.livestreamUrl}:i.status=="HLS_STOPPED"&&(this.hlsUrls={downstreamUrl:null,playbackHlsUrl:null,livestreamUrl:null}),this.eventEmitter.emit(se,i)}},{key:"handleTranscriptionStateChanged",value:function(i){this.transcriptionState=i.status,this.eventEmitter.emit(Rs,i)}},{key:"handleTranscriptionText",value:function(i){this.eventEmitter.emit(Ts,i)}},{key:"handleTranslationText",value:function(i){this.eventEmitter.emit(hc,i)}},{key:"handleTranslationStateChanged",value:function(i){this.translationState=i.status,this.eventEmitter.emit(pc,i)}},{key:"handleTranslationLanguageChanged",value:function(i){this.eventEmitter.emit(Ho,i)}},{key:"handleRecordingStarted",value:function(){this.eventEmitter.emit(Er)}},{key:"handleRecordingStopped",value:function(){this.eventEmitter.emit(So)}},{key:"handleLivestreamStarted",value:function(){this.eventEmitter.emit(Hs)}},{key:"handleLivestreamStopped",value:function(){this.eventEmitter.emit(xe)}},{key:"handleHlsStarted",value:function(i){this.eventEmitter.emit(we,i)}},{key:"handleHlsStopped",value:function(){this.eventEmitter.emit(nr)}},{key:"handleWhiteboardStarted",value:function(i){this.eventEmitter.emit(Jr,i)}},{key:"handleWhiteboardStopped",value:function(i){Rt(i),this.eventEmitter.emit(_n)}},{key:"handleAddCharacter",value:function(i){var E,M=i.id,N=(E=this.characters.get(M))!==null&&E!==void 0?E:new fo(Us(Us({},i),{},{state:Li.CHARACTER_LISTENING,roomClient:this.roomClient}));this.characters.set(M,N),this.eventEmitter.emit(Vo,N),N.eventEmitter.emit(Vo)}},{key:"handleInitCharacter",value:function(i){this.characters.set(i.id,i)}},{key:"handleRemoveCharacter",value:function(i){var E=i.id;if(this.characters.has(E)){var M=this.characters.get(E);this.eventEmitter.emit(to,M),M.eventEmitter.emit(to),this.characters.delete(E)}}},{key:"handleCharacterStateChanged",value:function(i){var E=i.id;if(this.characters.has(E)){var M=this.characters.get(E);M.handleCharacterStateChanged(i)}}},{key:"handleCharacterMessage",value:function(i){var E=i.id;if(this.characters.has(E)){var M=this.characters.get(E);M.handleCharacterMessage(i)}}},{key:"handleUserMessage",value:function(i){var E=i.id;if(this.characters.has(E)){var M=this.characters.get(E);M.handleUserMessage(i)}}},{key:"handleOnCharacterData",value:function(i){var E=i.id;if(this.characters.has(E)){var M=this.characters.get(E);M.handleCharacterData(i)}}},{key:"handleOnCharacterError",value:function(i){var E=i.id;if(this.characters.has(E)){var M=this.characters.get(E);M.handleCharacterError(i)}}},{key:"handleOnRemoveCurrentMeetingParticipant",value:function(){var i=this;(0,br.A)(this.participants.keys()).forEach(function(E){E!==i.localParticipant.id&&i.handlePeerRemove({peerId:E})})}},{key:"handleVideoStateChanged",value:function(i){this.eventEmitter.emit(Bi,i)}},{key:"handleVideoSeeked",value:function(i){var E=i.currentTime;this.eventEmitter.emit(oc,{currentTime:E})}},{key:"handlePinStateChanged",value:function(i){var E=i.peerId,M=i.state,N=i.pinnedBy;this.eventEmitter.emit(Kc,{participantId:E,state:M,pinnedBy:N})}},{key:"handleMeetingStateChanged",value:function(i){var E=i.state;this.eventEmitter.emit(lc,{state:E})}},{key:"handleQualityChanged",value:function(i){var E=i.type,M=i.state,N=i.timestamp;this.eventEmitter.emit(eo,{type:E,state:M,timestamp:N})}},{key:"handleConsumersPaused",value:function(i){var E=i.kind;this.eventEmitter.emit(uc,{kind:E})}},{key:"handleConsumersResumed",value:function(i){var E=i.kind;this.eventEmitter.emit(dc,{kind:E})}},{key:"handleVideoQualityChanged",value:function(i){var E=i.peerId,M=i.prevQuality,N=i.currentQuality,re=this.participants.get(E)||this.characters.get(E);re&&re&&re.videoQualityChanged(M,N)}},{key:"handleMicRequested",value:function(i){var E=this,M=i.peerId;this.eventEmitter.emit(os,{participantId:M,accept:function(){return E.unmuteMic()},reject:function(){}})}},{key:"handleWebcamRequested",value:function(i){var E=this,M=i.peerId;this.eventEmitter.emit(Gc,{participantId:M,accept:function(){return E.enableWebcam()},reject:function(){}})}},{key:"handleConnectionParticipantJoin",value:function(i){var E=i.roomId,M=i.peer,N=this.connections.get(E);N?.meeting.participantJoin(M)}},{key:"handleConnectionParticipantLeft",value:function(i){var E=i.roomId,M=i.peerId,N=this.connections.get(E);N?.meeting.participantLeft(M)}},{key:"handleConnectionOpen",value:function(i){var E=i.peers,M=i.roomId,N=i.payload,re=new Bo({roomId:M,peers:E,payload:N});this.connections.set(re.id,re),this.eventEmitter.emit(cc,re)}},{key:"handleConnectionClose",value:function(i){var E=i.roomId,M=this.connections.get(E);M!=null&&(this.connections.delete(E),this.eventEmitter.emit(Ro,E))}},{key:"handleMediaRelayError",value:function(i){var E=i.meetingId,M=i.error;this.eventEmitter.emit(Qc,{meetingId:E,error:M})}},{key:"handleMediaRelayRequest",value:function(i){var E=this,M=i.peerId,N=i.meetingId,re=i.displayName;this.eventEmitter.emit(Xc,{participantId:M,meetingId:N,displayName:re,accept:function(){return E.roomClient.handleRelayRequestResponse({decision:"allowed",meetingId:N,peerId:M})},reject:function(){return E.roomClient.handleRelayRequestResponse({decision:"denied",meetingId:N,peerId:M})}})}},{key:"handleMediaRelayRequestResponse",value:function(i){var E=i.decision,M=i.decidedBy,N=i.meetingId;this.eventEmitter.emit(fc,{decision:E,decidedBy:M,meetingId:N})}},{key:"handleMediaRelayStart",value:function(i){var E=i.meetingId;this.eventEmitter.emit(Fo,{meetingId:E})}},{key:"handleMediaRelayStop",value:function(i){var E=i.meetingId,M=i.reason;this.eventEmitter.emit(Cs,{meetingId:E,reason:M})}},{key:"requestMediaRelay",value:(function(){var p=(0,C.A)(n().mark(function E(M){var N,re,ce;return n().wrap(function(de){for(;;)switch(de.prev=de.next){case 0:if(N=M.destinationMeetingId,re=M.token,ce=M.kinds,N){de.next=1;break}throw new Error("Parameter destinationMeetingId is required when calling requestMediaRelay.");case 1:return de.next=2,this.roomClient.requestMediaRelay(N,re,ce);case 2:case"end":return de.stop()}},E,this)}));function i(E){return p.apply(this,arguments)}return i})()},{key:"stopMediaRelay",value:(function(){var p=(0,C.A)(n().mark(function E(M){return n().wrap(function(N){for(;;)switch(N.prev=N.next){case 0:if(M){N.next=1;break}throw new Error("Parameter destinationMeetingId is required when calling stopMediaRelay.");case 1:return N.next=2,this.roomClient.stopMediaRelay(M);case 2:case"end":return N.stop()}},E,this)}));function i(E){return p.apply(this,arguments)}return i})()},{key:"enableAdaptiveSubscription",value:(function(){var p=(0,C.A)(n().mark(function E(){return n().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return M.next=1,this.roomClient.enableAdaptiveSubscription();case 1:case"end":return M.stop()}},E,this)}));function i(){return p.apply(this,arguments)}return i})()},{key:"disableAdaptiveSubscription",value:(function(){var p=(0,C.A)(n().mark(function E(){return n().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return M.next=1,this.roomClient.disableAdaptiveSubscription();case 1:case"end":return M.stop()}},E,this)}));function i(){return p.apply(this,arguments)}return i})()},{key:"enableE2EE",value:(function(){var p=(0,C.A)(n().mark(function E(){return n().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return M.next=1,this.roomClient.toggleE2EEEnabled(!0);case 1:case"end":return M.stop()}},E,this)}));function i(){return p.apply(this,arguments)}return i})()},{key:"disableE2EE",value:(function(){var p=(0,C.A)(n().mark(function E(){return n().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return M.next=1,this.roomClient.toggleE2EEEnabled(!1);case 1:case"end":return M.stop()}},E,this)}));function i(){return p.apply(this,arguments)}return i})()},{key:"handleSwitchMeeting",value:function(i){var E=i.roomId,M=i.token,N=i.payload,re=i.peerId,ce=i.connectionPeerId,de=i.connectionRoomId,he=re?{meetingId:E,payload:N,token:M,participantId:re}:{meetingId:E,payload:N,token:M,connectionParticipantId:ce,connectionMeetingId:de};this.eventEmitter.emit(Yc,he)}},{key:"handleConnectionChatMessage",value:function(i){var E=i.roomId,M=i.peerId,N=i.message,re=this.connections.get(E);re?.meeting.sendChatMessageEvent({participantId:M,message:N})}},{key:"handleE2EEStateChange",value:function(i){var E=i.peerId,M=this.localParticipant.id==E?this.localParticipant:this.participants.get(E)||this.characters.get(E);M&&M&&M.handleE2EEStateChange(i)}},{key:"connectTo",value:(function(){var p=(0,C.A)(n().mark(function E(M){var N,re;return n().wrap(function(ce){for(;;)switch(ce.prev=ce.next){case 0:return N=M.meetingId,re=M.payload,ce.next=1,this.roomClient.openConnection({roomId:N,payload:re});case 1:case"end":return ce.stop()}},E,this)}));function i(E){return p.apply(this,arguments)}return i})()},{key:"switchTo",value:function(i){var E=i.meetingId,M=i.token;if(!E||typeof E!="string"||E.trim()==="")throw new Error("Invalid meetingId: must be a non-empty string");this.roomClient.switchTo({meetingId:E,token:M,participantId:this.localParticipant.id})}},{key:"selectedCameraDevice",get:(function(){var i;return(i=this.roomClient._webcam)===null||i===void 0?void 0:i.device})},{key:"selectedMicrophoneDevice",get:function(){var i;return(i=this.roomClient._mic)===null||i===void 0?void 0:i.device}},{key:"on",value:function(i,E){switch(i){case Js:case Zs:case Es:case Ci:case bo:case jo:case Uo:case zo:case zs:case Er:case So:case Eo:case Hs:case xe:case we:case nr:case se:case Rs:case Ts:case pc:case hc:case Ho:case wo:case ws:case Jr:case _n:case Vo:case to:case Ss:case ss:case Bi:case oc:case os:case Gc:case Kc:case cc:case Ro:case Yc:case lc:case _o:case uc:case dc:case Fo:case Cs:case Qc:case Xc:case fc:case xi:case eo:this.eventEmitter.on(i,E);break;default:throw new Error("Invalid event type "+i)}}},{key:"off",value:function(i,E){switch(i){case Js:case Zs:case Es:case Ci:case bo:case jo:case Uo:case zo:case zs:case Er:case So:case Eo:case Hs:case xe:case se:case we:case nr:case Rs:case Ts:case pc:case hc:case Ho:case wo:case ws:case Jr:case _n:case Vo:case to:case Ss:case ss:case Bi:case oc:case os:case Gc:case Kc:case cc:case Ro:case Yc:case lc:case xi:case Fo:case Cs:case Qc:case Xc:case fc:case _o:case uc:case dc:case eo:this.eventEmitter.off(i,E);break;default:throw new Error("Invalid event type.")}}}])})();function Bl(D){var p=D.topic,i=D.message,E=D.senderId,M=D.timestamp,N=D.senderName,re=D.id,ce=D.payload;!p||!i||Rn(fi,this).emit(p,{message:i,senderId:E,timestamp:M,topic:p,senderName:N,id:re,payload:ce})}function mc(D){var p=D.key,i=D.value,E=D.updatedBy;p&&Rn(Wn,this).emit(p,{value:i,updatedBy:E})}function Jc(D){var p=D.peerId,i=D.mode;p===this.localParticipant.id?this.localParticipant.mode=i:this.participants.get(p).mode=i,this.activePresenterId===this.localParticipant.id&&!(0,ha.kR)(i)&&(this.activePresenterId=null,this.eventEmitter.emit(Ci,this.activePresenterId)),this.eventEmitter.emit(_o,{participantId:p,mode:i})}var ea=S(7080),vc={RECORDING_STARTING:"RECORDING_STARTING",RECORDING_STARTED:"RECORDING_STARTED",RECORDING_STOPPING:"RECORDING_STOPPING",RECORDING_STOPPED:"RECORDING_STOPPED"},Zc={LIVESTREAM_STARTING:"LIVESTREAM_STARTING",LIVESTREAM_STARTED:"LIVESTREAM_STARTED",LIVESTREAM_STOPPING:"LIVESTREAM_STOPPING",LIVESTREAM_STOPPED:"LIVESTREAM_STOPPED"},fl=S(5071),ml={TRANSCRIPTION_STARTING:"TRANSCRIPTION_STARTING",TRANSCRIPTION_STARTED:"TRANSCRIPTION_STARTED",TRANSCRIPTION_STOPPING:"TRANSCRIPTION_STOPPING",TRANSCRIPTION_STOPPED:"TRANSCRIPTION_STOPPED"},gc={TRANSLATION_STARTING:"TRANSLATION_STARTING",TRANSLATION_STARTED:"TRANSLATION_STARTED",TRANSLATION_STOPPING:"TRANSLATION_STOPPING",TRANSLATION_STOPPED:"TRANSLATION_STOPPED"},el=S(4973),Ai=S(9027);function Vs(D,p,i){return p=(0,Tr.A)(p),(0,Pi.A)(D,vl()?Reflect.construct(p,i||[],(0,Tr.A)(D).constructor):p.apply(D,i))}function vl(){try{var D=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(vl=function(){return!!D})()}var jl=(0,b.A)(function D(p,i,E,M){(0,T.A)(this,D),this.deviceId=p,this.groupId=i,this.kind=E,this.label=M}),Ya=(function(D){function p(i,E,M,N){return(0,T.A)(this,p),Vs(this,p,[i,E,M,N])}return(0,Va.A)(p,D),(0,b.A)(p)})(jl),ro=(function(D){function p(i,E,M,N){return(0,T.A)(this,p),Vs(this,p,[i,E,M,N])}return(0,Va.A)(p,D),(0,b.A)(p)})(Ya),$o=(function(D){function p(i,E,M,N){return(0,T.A)(this,p),Vs(this,p,[i,E,M,N])}return(0,Va.A)(p,D),(0,b.A)(p)})(Ya),yc=(function(D){function p(i,E,M,N){return(0,T.A)(this,p),Vs(this,p,[i,E,M,N])}return(0,Va.A)(p,D),(0,b.A)(p)})(Ya),Zr={AUDIO:"audio",VIDEO:"video",AUDIO_AND_VIDEO:"audio_video"};S(328);var gl=S(7654);function Co(D,p){return D==null||p==null?NaN:D<p?-1:D>p?1:D>=p?0:NaN}function Ul(D,p){return D==null||p==null?NaN:p<D?-1:p>D?1:p>=D?0:NaN}function As(D){let p,i,E;D.length!==2?(p=Co,i=(ce,de)=>Co(D(ce),de),E=(ce,de)=>D(ce)-de):(p=D===Co||D===Ul?D:qo,i=D,E=D);function M(ce,de,he=0,me=ce.length){if(he<me){if(p(de,de)!==0)return me;do{const ve=he+me>>>1;i(ce[ve],de)<0?he=ve+1:me=ve}while(he<me)}return he}function N(ce,de,he=0,me=ce.length){if(he<me){if(p(de,de)!==0)return me;do{const ve=he+me>>>1;i(ce[ve],de)<=0?he=ve+1:me=ve}while(he<me)}return he}function re(ce,de,he=0,me=ce.length){const ve=M(ce,de,he,me-1);return ve>he&&E(ce[ve-1],de)>-E(ce[ve],de)?ve-1:ve}return{left:M,center:re,right:N}}function qo(){return 0}function Wo(D){return D===null?NaN:+D}const Go=As(Co).right;As(Wo).center;const Te=Go;function Fe(D,p){switch(arguments.length){case 0:break;case 1:this.range(D);break;default:this.range(p).domain(D);break}return this}function Ki(){var D=[.5],p=[0,1],i,E=1;function M(N){return N!=null&&N<=N?p[Te(D,N,0,E)]:i}return M.domain=function(N){return arguments.length?(D=Array.from(N),E=Math.min(D.length,p.length-1),M):D.slice()},M.range=function(N){return arguments.length?(p=Array.from(N),E=Math.min(D.length,p.length-1),M):p.slice()},M.invertExtent=function(N){var re=p.indexOf(N);return[D[re-1],D[re]]},M.unknown=function(N){return arguments.length?(i=N,M):i},M.copy=function(){return Ki().domain(D).range(p).unknown(i)},Fe.apply(M,arguments)}function _c(D,p){(p==null||p>D.length)&&(p=D.length);for(var i=0,E=Array(p);i<p;i++)E[i]=D[i];return E}function ao(D){if(Array.isArray(D))return D}function bc(D){if(Array.isArray(D))return _c(D)}function F(D,p,i){if(typeof D=="function"?D===p:D.has(p))return arguments.length<3?p:i;throw new TypeError("Private element is not present on this object")}function o(D){if(D===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return D}function u(D,p,i){return p=Me(p),pt(D,$e()?Reflect.construct(p,i||[],Me(D).constructor):p.apply(D,i))}function v(D,p){if(p.has(D))throw new TypeError("Cannot initialize the same private elements twice on an object")}function s(D,p){if(!(D instanceof p))throw new TypeError("Cannot call a class as a function")}function l(D,p){return D.get(F(D,p))}function A(D,p,i){v(D,p),p.set(D,i)}function O(D,p,i){return D.set(F(D,p),i),i}function I(D,p){v(D,p),p.add(D)}function Z(D,p){for(var i=0;i<p.length;i++){var E=p[i];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(D,rr(E.key),E)}}function ee(D,p,i){return p&&Z(D.prototype,p),Object.defineProperty(D,"prototype",{writable:!1}),D}function te(D,p,i){return(p=rr(p))in D?Object.defineProperty(D,p,{value:i,enumerable:!0,configurable:!0,writable:!0}):D[p]=i,D}function fe(){return fe=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(D,p,i){var E=Jt(D,p);if(E){var M=Object.getOwnPropertyDescriptor(E,p);return M.get?M.get.call(arguments.length<3?D:i):M.value}},fe.apply(null,arguments)}function Me(D){return Me=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(p){return p.__proto__||Object.getPrototypeOf(p)},Me(D)}function ke(D,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function");D.prototype=Object.create(p&&p.prototype,{constructor:{value:D,writable:!0,configurable:!0}}),Object.defineProperty(D,"prototype",{writable:!1}),p&&cr(D,p)}function $e(){try{var D=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return($e=function(){return!!D})()}function ot(D){if(typeof Symbol<"u"&&D[Symbol.iterator]!=null||D["@@iterator"]!=null)return Array.from(D)}function Je(D,p){var i=D==null?null:typeof Symbol<"u"&&D[Symbol.iterator]||D["@@iterator"];if(i!=null){var E,M,N,re,ce=[],de=!0,he=!1;try{if(N=(i=i.call(D)).next,p===0){if(Object(i)!==i)return;de=!1}else for(;!(de=(E=N.call(i)).done)&&(ce.push(E.value),ce.length!==p);de=!0);}catch(me){he=!0,M=me}finally{try{if(!de&&i.return!=null&&(re=i.return(),Object(re)!==re))return}finally{if(he)throw M}}return ce}}function qe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ct(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function gt(D,p){var i=Object.keys(D);if(Object.getOwnPropertySymbols){var E=Object.getOwnPropertySymbols(D);p&&(E=E.filter(function(M){return Object.getOwnPropertyDescriptor(D,M).enumerable})),i.push.apply(i,E)}return i}function Et(D){for(var p=1;p<arguments.length;p++){var i=arguments[p]!=null?arguments[p]:{};p%2?gt(Object(i),!0).forEach(function(E){te(D,E,i[E])}):Object.getOwnPropertyDescriptors?Object.defineProperties(D,Object.getOwnPropertyDescriptors(i)):gt(Object(i)).forEach(function(E){Object.defineProperty(D,E,Object.getOwnPropertyDescriptor(i,E))})}return D}function it(D,p){if(D==null)return{};var i,E,M=Pt(D,p);if(Object.getOwnPropertySymbols){var N=Object.getOwnPropertySymbols(D);for(E=0;E<N.length;E++)i=N[E],p.indexOf(i)===-1&&{}.propertyIsEnumerable.call(D,i)&&(M[i]=D[i])}return M}function Pt(D,p){if(D==null)return{};var i={};for(var E in D)if({}.hasOwnProperty.call(D,E)){if(p.indexOf(E)!==-1)continue;i[E]=D[E]}return i}function pt(D,p){if(p&&(typeof p=="object"||typeof p=="function"))return p;if(p!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return o(D)}function Ge(D,p,i,E){return Ge=typeof Reflect<"u"&&Reflect.set?Reflect.set:function(M,N,re,ce){var de,he=Jt(M,N);if(he){if((de=Object.getOwnPropertyDescriptor(he,N)).set)return de.set.call(ce,re),!0;if(!de.writable)return!1}if(de=Object.getOwnPropertyDescriptor(ce,N)){if(!de.writable)return!1;de.value=re,Object.defineProperty(ce,N,de)}else te(ce,N,re);return!0},Ge(D,p,i,E)}function At(D,p,i,E,M){if(!Ge(D,p,i,E||D)&&M)throw new TypeError("failed to set property");return i}function cr(D,p){return cr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,E){return i.__proto__=E,i},cr(D,p)}function qt(D,p){return ao(D)||Je(D,p)||bt(D,p)||qe()}function Jt(D,p){for(;!{}.hasOwnProperty.call(D,p)&&(D=Me(D))!==null;);return D}function Gt(D,p,i,E){var M=fe(Me(D.prototype),p,i);return 2&E&&typeof M=="function"?function(N){return M.apply(i,N)}:M}function ht(D,p,i,E,M,N){return At(Me(D.prototype),p,i,E,M)}function Zt(D){return bc(D)||ot(D)||bt(D)||Ct()}function mr(D,p){if(typeof D!="object"||!D)return D;var i=D[Symbol.toPrimitive];if(i!==void 0){var E=i.call(D,p);if(typeof E!="object")return E;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(D)}function rr(D){var p=mr(D,"string");return typeof p=="symbol"?p:p+""}function bt(D,p){if(D){if(typeof D=="string")return _c(D,p);var i={}.toString.call(D).slice(8,-1);return i==="Object"&&D.constructor&&(i=D.constructor.name),i==="Map"||i==="Set"?Array.from(D):i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?_c(D,p):void 0}}var Ze="https://speed.cloudflare.com",Ie={autoStart:!0,downloadApiUrl:"".concat(Ze,"/__down"),uploadApiUrl:"".concat(Ze,"/__up"),logMeasurementApiUrl:null,logAimApiUrl:"https://aim.cloudflare.com/__log",turnServerUri:"turn.speed.cloudflare.com:50000",turnServerCredsApiUrl:"".concat(Ze,"/turn-creds"),turnServerUser:null,turnServerPass:null,rpkiInvalidHost:"invalid.rpki.cloudflare.com",cfTraceUrl:"".concat(Ze,"/cdn-cgi/trace"),includeCredentials:!1,sessionId:void 0,measurements:[{type:"latency",numPackets:1},{type:"download",bytes:1e5,count:1,bypassMinDuration:!0},{type:"latency",numPackets:20},{type:"download",bytes:1e5,count:9},{type:"download",bytes:1e6,count:8},{type:"upload",bytes:1e5,count:8},{type:"packetLoss",numPackets:1e3,batchSize:10,batchWaitTime:10,responsesWaitTime:3e3},{type:"upload",bytes:1e6,count:6},{type:"download",bytes:1e7,count:6},{type:"upload",bytes:1e7,count:4},{type:"download",bytes:25e6,count:4},{type:"upload",bytes:25e6,count:4},{type:"download",bytes:1e8,count:3},{type:"upload",bytes:5e7,count:3},{type:"download",bytes:25e7,count:2}],measureDownloadLoadedLatency:!0,measureUploadLoadedLatency:!0,loadedLatencyThrottle:400,bandwidthFinishRequestDuration:1e3,estimatedServerTime:10,latencyPercentile:.5,bandwidthPercentile:.9,bandwidthMinRequestDuration:10,loadedRequestMinDuration:250,loadedLatencyMaxPoints:20},Le={aimMeasurementScoring:{packetLoss:Ki([.01,.05,.25,.5],[10,5,0,-10,-20]),latency:Ki([10,20,50,100,500],[20,10,5,0,-10,-20]),loadedLatencyIncrease:Ki([10,20,50,100,500],[20,10,5,0,-10,-20]),jitter:Ki([10,20,100,500],[10,5,0,-10,-20]),download:Ki([1e6,1e7,5e7,1e8],[0,5,10,20,30]),upload:Ki([1e6,1e7,5e7,1e8],[0,5,10,20,30])},aimExperiencesDefs:{streaming:{input:["latency","packetLoss","download","loadedLatencyIncrease"],pointThresholds:[15,20,40,60]},gaming:{input:["latency","packetLoss","loadedLatencyIncrease"],pointThresholds:[5,15,25,30]},rtc:{input:["latency","jitter","packetLoss","loadedLatencyIncrease"],pointThresholds:[5,15,25,40]}}},Lt=20,Kt=.005,Yt=function(p){var i=p.headers.get("server-timing");if(i){var E=i.match(/dur=([0-9.]+)/);if(E)return+E[1]}},vr=function(p){return p.responseStart-p.requestStart},kr=function(p){return p.responseEnd-p.responseStart},ta=function(p){var i=p.ping,E=p.payloadDownloadTime;return i+E},Yr=function(p){var i=p.ttfb;return i},Wt=function(p,i){var E=p.duration,M=p.transferSize,N=8*(M||+i*(1+Kt)),re=E/1e3;return re?N/re:void 0},Cr=function(p,i){var E=p.duration,M=8*i*(1+Kt),N=E/1e3;return N?M/N:void 0},er=gl(function(D){return"0".repeat(D)}),Ur=new WeakMap,Hr=new WeakMap,Fa=new WeakMap,fa=new WeakMap,on=new WeakMap,Qa=new WeakMap,ma=new WeakMap,la=new WeakMap,xt=new WeakMap,Mr=new WeakMap,Vr=new WeakMap,ra=new WeakMap,va=new WeakMap,na=new WeakMap,ia=new WeakMap,en=new WeakMap,fn=new WeakMap,Aa=new WeakMap,tn=new WeakMap,Sa=new WeakMap,ua=new WeakMap,vn=new WeakMap,Pa=new WeakSet,Yi=(function(){function D(p){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},E=i.downloadApiUrl,M=i.uploadApiUrl,N=i.throttleMs,re=N===void 0?0:N,ce=i.estimatedServerTime,de=ce===void 0?0:ce;if(s(this,D),I(this,Pa),A(this,Ur,{}),A(this,Hr,{}),te(this,"finishRequestDuration",1e3),te(this,"getServerTime",Yt),A(this,Fa,function(he){return he}),A(this,fa,function(){}),A(this,on,function(){}),A(this,Qa,function(){}),A(this,ma,function(){}),A(this,la,function(){}),A(this,xt,void 0),A(this,Mr,void 0),A(this,Vr,void 0),A(this,ra,!1),A(this,va,{down:!1,up:!1}),A(this,na,{down:{},up:{}}),A(this,ia,0),A(this,en,0),A(this,fn,0),A(this,Aa,-1/0),A(this,tn,0),A(this,Sa,0),A(this,ua,void 0),A(this,vn,void 0),!p)throw new Error("Missing measurements argument");if(!E)throw new Error("Missing downloadApiUrl argument");if(!M)throw new Error("Missing uploadApiUrl argument");O(xt,this,p),O(Mr,this,E),O(Vr,this,M),O(tn,this,re),O(Sa,this,Math.max(0,de))}return ee(D,[{key:"results",get:function(){return l(na,this)}},{key:"qsParams",get:(function(){return l(Ur,this)}),set:function(i){O(Ur,this,i)}},{key:"fetchOptions",get:(function(){return l(Hr,this)}),set:function(i){O(Hr,this,i)}},{key:"responseHook",set:(function(i){O(Fa,this,i)})},{key:"onRunningChange",set:(function(i){O(fa,this,i)})},{key:"onNewMeasurementStarted",set:(function(i){O(on,this,i)})},{key:"onMeasurementResult",set:(function(i){O(Qa,this,i)})},{key:"onFinished",set:(function(i){O(ma,this,i)})},{key:"onConnectionError",set:(function(i){O(la,this,i)})},{key:"pause",value:function(){clearTimeout(l(vn,this)),F(Pa,this,mi).call(this),F(Pa,this,ki).call(this,!1)}},{key:"play",value:function(){l(ra,this)||(F(Pa,this,ki).call(this,!0),F(Pa,this,ga).call(this))}}])})();function ki(D){var p=this;D!==l(ra,this)&&(O(ra,this,D),setTimeout(function(){return l(fa,p).call(p,l(ra,p))}))}function Qi(D,p){var i=this,E=l(xt,this)[D],M=E.bytes,N=E.dir,re=l(na,this),ce=re[N].hasOwnProperty(M)?re[N][M]:{timings:[],numMeasurements:l(xt,this).filter(function(de){var he=de.bytes,me=de.dir;return M===he&&N===me}).map(function(de){return de.count}).reduce(function(de,he){return de+he},0)};p&&ce.timings.push(p),ce.timings=ce.timings.slice(-ce.numMeasurements),re[N][M]=ce,p?setTimeout(function(){l(Qa,i).call(i,Et({type:N,bytes:M},p),re)}):l(on,this).call(this,l(xt,this)[D],re)}function ga(){var D=this,p=l(xt,this),i=p[l(ia,this)];if(l(en,this)>=i.count){var E=l(va,this);if(l(Aa,this)>this.finishRequestDuration&&!i.bypassMinDuration){var M=i.dir;l(va,this)[M]=!0,Object.values(l(va,this)).every(function(lt){return lt})&&l(ma,this).call(this,l(na,this))}O(en,this,0),O(Aa,this,-1/0),performance.clearResourceTimings();do O(ia,this,l(ia,this)+1);while(l(ia,this)<p.length&&E[p[l(ia,this)].dir]);if(l(ia,this)>=p.length){O(va,this,{down:!0,up:!0}),F(Pa,this,ki).call(this,!1),l(ma,this).call(this,l(na,this));return}i=p[l(ia,this)]}var N=l(ia,this);l(en,this)===0&&F(Pa,this,Qi).call(this,N);var re=i,ce=re.bytes,de=re.dir,he=de==="down",me=he?l(Mr,this):l(Vr,this),ve=Object.assign({},l(Ur,this));he&&(ve.bytes="".concat(ce));var Ve="".concat(me.startsWith("http")||me.startsWith("//")?"":window.location.origin).concat(me,"?").concat(Object.entries(ve).map(function(lt){var ft=qt(lt,2),mt=ft[0],lr=ft[1];return"".concat(mt,"=").concat(lr)}).join("&")),Be=Object.assign({},he?{}:{method:"POST",body:er(ce)},l(Hr,this)),Ut,vt=O(ua,this,fetch(Ve,Be).then(function(lt){if(lt.ok)return lt;throw Error(lt.statusText)}).then(function(lt){return D.getServerTime&&(Ut=D.getServerTime(lt)),lt}).then(function(lt){return lt.text().then(function(ft){return l(Fa,D)&&l(Fa,D).call(D,{url:Ve,headers:lt.headers,body:ft}),ft})}).then(function(lt,ft){if(vt._cancel){ft("cancelled");return}var mt=performance.getEntriesByName(Ve).slice(-1)[0],lr={transferSize:mt.transferSize,ttfb:vr(mt),payloadDownloadTime:kr(mt),serverTime:Ut||-1,measTime:new Date};if(lr.ping=Math.max(.01,lr.ttfb-(Ut||l(Sa,D))),lr.duration=(he?ta:Yr)(lr),lr.bps=(he?Wt:Cr)(lr,ce),he&&ce){var dt=+ce;lr.transferSize&&(lr.transferSize<dt||lr.transferSize/dt>1.05)&&console.warn("Requested ".concat(dt,"B but received ").concat(lr.transferSize,"B (").concat(Math.round(lr.transferSize/dt*1e4)/100,"%)."))}F(Pa,D,Qi).call(D,N,lr);var Bt=lr.duration;O(Aa,D,l(Aa,D)<0?Bt:Math.min(l(Aa,D),Bt)),O(en,D,l(en,D)+1),O(fn,D,0),l(tn,D)?O(vn,D,setTimeout(function(){return F(Pa,D,ga).call(D)},l(tn,D))):F(Pa,D,ga).call(D)}).catch(function(lt){var ft,mt;vt._cancel||(console.warn("Error fetching ".concat(Ve,": ").concat(lt)),O(fn,D,(ft=l(fn,D),mt=ft++,ft)),mt<Lt?F(Pa,D,ga).call(D):(O(fn,D,0),F(Pa,D,ki).call(D,!1),l(la,D).call(D,"Connection failed to ".concat(Ve,". Gave up after ").concat(Lt," retries."))))}))}function mi(){var D=l(ua,this);D&&(D._cancel=!0)}var ei=["measureParallelLatency","parallelLatencyThrottleMs","downloadApiUrl","uploadApiUrl","estimatedServerTime"],Ia=new WeakMap,ti=new WeakMap,cn=new WeakSet,ri=(function(D){function p(i){var E,M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},N=M.measureParallelLatency,re=N===void 0?!1:N,ce=M.parallelLatencyThrottleMs,de=ce===void 0?100:ce,he=M.downloadApiUrl,me=M.uploadApiUrl,ve=M.estimatedServerTime,Ve=ve===void 0?0:ve,Be=it(M,ei);return s(this,p),E=u(this,p,[i,Et({downloadApiUrl:he,uploadApiUrl:me,estimatedServerTime:Ve},Be)]),I(E,cn),A(E,Ia,void 0),A(E,ti,void 0),re&&(O(Ia,E,new Yi([{dir:"down",bytes:0,count:1/0,bypassMinDuration:!0}],{downloadApiUrl:he,uploadApiUrl:me,estimatedServerTime:Ve,throttleMs:de})),l(Ia,E).qsParams={during:"".concat(i[0].dir,"load")},ht(p,"onRunningChange",F(cn,E,ji),E,1),ht(p,"onConnectionError",function(){return l(Ia,E).pause()},E,1)),E}return ke(p,D),ee(p,[{key:"latencyResults",get:function(){return l(Ia,this)&&l(Ia,this).results.down[0].timings}},{key:"onParallelLatencyResult",set:function(E){l(Ia,this)&&(l(Ia,this).onMeasurementResult=function(M){return E(M)})}},{key:"fetchOptions",get:function(){return Gt(p,"fetchOptions",this,1)},set:function(E){ht(p,"fetchOptions",E,this,1),l(Ia,this)&&(l(Ia,this).fetchOptions=E)}},{key:"onRunningChange",set:function(E){var M=this;ht(p,"onRunningChange",function(N){F(cn,M,ji).call(M,N),E(N)},this,1)}},{key:"onConnectionError",set:function(E){var M=this;ht(p,"onConnectionError",function(){l(Ia,M)&&l(Ia,M).pause(),E.apply(void 0,arguments)},this,1)}}])})(Yi);function ji(D){var p=this;l(Ia,this)&&(D?O(ti,this,setTimeout(function(){return l(Ia,p).play()},20)):(clearTimeout(l(ti,this)),l(Ia,this).pause()))}var vi=["measurementId","logApiUrl","sessionId"],Gn=new WeakMap,ii=new WeakMap,zn=new WeakMap,Cn=new WeakMap,La=new WeakMap,bn=new WeakSet,Sn=(function(D){function p(i){var E,M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},N=M.measurementId,re=M.logApiUrl,ce=M.sessionId,de=it(M,vi);return s(this,p),E=u(this,p,[i,de]),I(E,bn),A(E,Gn,void 0),A(E,ii,void 0),A(E,zn,void 0),A(E,Cn,void 0),A(E,La,void 0),O(Gn,E,N),O(Cn,E,re),O(La,E,ce),ht(p,"qsParams",re?{measId:l(Gn,E)}:{},E,1),ht(p,"responseHook",function(he){return F(bn,E,pr).call(E,he)},E,1),ht(p,"onMeasurementResult",function(he){return F(bn,E,ka).call(E,he)},E,1),E}return ke(p,D),ee(p,[{key:"qsParams",set:function(E){ht(p,"qsParams",l(Cn,this)?Et({measId:l(Gn,this)},E):E,this,1)}},{key:"responseHook",set:function(E){var M=this;ht(p,"responseHook",function(N){E(N),F(bn,M,pr).call(M,N)},this,1)}},{key:"onMeasurementResult",set:function(E){var M=this;ht(p,"onMeasurementResult",function(N){for(var re=arguments.length,ce=new Array(re>1?re-1:0),de=1;de<re;de++)ce[de-1]=arguments[de];E.apply(void 0,[N].concat(ce)),F(bn,M,ka).call(M,N)},this,1)}}])})(ri);function pr(D){l(Cn,this)&&(O(zn,this,+D.headers.get("cf-meta-request-time")),O(ii,this,D.body.slice(-300).split("___").pop()))}function ka(D){if(l(Cn,this)){var p={type:D.type,bytes:D.bytes,ping:Math.round(D.ping),ttfb:Math.round(D.ttfb),payloadDownloadTime:Math.round(D.payloadDownloadTime),duration:Math.round(D.duration),transferSize:Math.round(D.transferSize),serverTime:Math.round(D.serverTime),token:l(ii,this),requestTime:l(zn,this),measId:l(Gn,this),sessionId:l(La,this)};O(ii,this,null),O(zn,this,null),fetch(l(Cn,this),Et({method:"POST",body:JSON.stringify(p)},this.fetchOptions))}}var sa=new WeakMap,Kn=new WeakMap,si=new WeakMap,In=new WeakSet,xn=(function(){function D(p){if(s(this,D),I(this,In),A(this,sa,!1),A(this,Kn,void 0),A(this,si,void 0),!p)throw new Error("Missing operation to perform");O(si,this,p),this.play()}return ee(D,[{key:"pause",value:function(){F(In,this,gi).call(this),F(In,this,Ui).call(this,!1)}},{key:"stop",value:function(){this.pause()}},{key:"play",value:function(){l(sa,this)||(F(In,this,Ui).call(this,!0),F(In,this,xa).call(this))}}])})();function Ui(D){D!==l(sa,this)&&O(sa,this,D)}function xa(){var D=this,p=O(Kn,this,l(si,this).call(this).then(function(){!p._cancel&&F(In,D,xa).call(D)}))}function gi(){var D=l(Kn,this);D&&(D._cancel=!0)}var yi=new WeakMap,ks=(function(){function D(){var p=this,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},E=i.download,M=i.upload;if(s(this,D),te(this,"qsParams",{}),te(this,"fetchOptions",{}),A(this,yi,[]),!E&&!M)throw new Error("Missing at least one of download/upload config");[[E,"download"],[M,"upload"]].filter(function(re){var ce=qt(re,1),de=ce[0];return de}).forEach(function(re){var ce=qt(re,2),de=ce[0],he=ce[1],me=de.apiUrl,ve=de.chunkSize;if(!me)throw new Error("Missing ".concat(he," apiUrl argument"));if(!ve)throw new Error("Missing ".concat(he," chunkSize argument"))});var N=function(ce){var de=ce.apiUrl,he=ce.qsParams,me=he===void 0?{}:he,ve=ce.fetchOptions,Ve=ve===void 0?{}:ve;return new xn(function(){var Be=Object.assign({},me,p.qsParams),Ut="".concat(de.startsWith("http")||de.startsWith("//")?"":window.location.origin).concat(de,"?").concat(Object.entries(Be).map(function(lt){var ft=qt(lt,2),mt=ft[0],lr=ft[1];return"".concat(mt,"=").concat(lr)}).join("&")),vt=Object.assign({},Ve,p.fetchOptions);return fetch(Ut,vt).then(function(lt){if(lt.ok)return lt;throw Error(lt.statusText)}).then(function(lt){return lt.text()})})};E&&l(yi,this).push(N({apiUrl:E.apiUrl,qsParams:{bytes:"".concat(E.chunkSize)}})),M&&l(yi,this).push(N({apiUrl:M.apiUrl,fetchOptions:{method:"POST",body:"0".repeat(M.chunkSize)}}))}return ee(D,[{key:"pause",value:(function(){l(yi,this).forEach(function(i){return i.pause()})})},{key:"stop",value:function(){this.pause()}},{key:"play",value:function(){l(yi,this).forEach(function(i){return i.play()})}}])})(),zi=["iceServers","acceptIceCandidate","dataChannelCfg"],oi=new WeakMap,ls=new WeakMap,Hn=new WeakMap,gn=new WeakMap,Vn=new WeakMap,Hi=(function(){function D(){var p=this,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},E=i.iceServers,M=E===void 0?[]:E,N=i.acceptIceCandidate,re=N===void 0?function(Be){var Ut=Be.protocol||"";if(!Ut&&Be.candidate){var vt=Be.candidate.split(" ");vt.length>=3&&(Ut=vt[2])}return Ut.toLowerCase()==="udp"}:N,ce=i.dataChannelCfg,de=ce===void 0?{ordered:!1,maxRetransmits:0}:ce,he=it(i,zi);s(this,D),te(this,"onOpen",function(){}),te(this,"onClose",function(){}),te(this,"onMessageReceived",function(){}),A(this,oi,!1),A(this,ls,void 0),A(this,Hn,void 0),A(this,gn,void 0),A(this,Vn,void 0);var me=new RTCPeerConnection(Et({iceServers:M},he)),ve=new RTCPeerConnection(Et({iceServers:M},he)),Ve=me.createDataChannel("channel",de);Ve.onopen=function(){O(oi,p,!0),p.onOpen()},Ve.onclose=function(){return p.close()},ve.ondatachannel=function(Be){var Ut=Be.channel;Ut.onclose=function(){return p.close()},Ut.onmessage=function(vt){return p.onMessageReceived(vt.data)},O(Vn,p,Ut)},me.onicecandidate=function(Be){Be.candidate&&re(Be.candidate)&&ve.addIceCandidate(Be.candidate)},ve.onicecandidate=function(Be){Be.candidate&&re(Be.candidate)&&me.addIceCandidate(Be.candidate)},me.createOffer().then(function(Be){return me.setLocalDescription(Be)}).then(function(){return ve.setRemoteDescription(me.localDescription)}).then(function(){return ve.createAnswer()}).then(function(Be){return ve.setLocalDescription(Be)}).then(function(){return me.setRemoteDescription(ve.localDescription)}),O(ls,this,me),O(Hn,this,ve),O(gn,this,Ve),O(oi,this,!1)}return ee(D,[{key:"send",value:(function(i){return l(gn,this).send(i)})},{key:"close",value:function(){return l(ls,this)&&l(ls,this).close(),l(Hn,this)&&l(Hn,this).close(),l(gn,this)&&l(gn,this).close(),l(Vn,this)&&l(Vn,this).close(),l(oi,this)&&this.onClose(),O(oi,this,!1),this}}])})(),sr=new WeakMap,qr=new WeakMap,Na=new WeakMap,An=new WeakMap,Os=new WeakMap,Xi=new WeakMap,no=(function(){function D(){var p=this,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},E=i.turnServerUri,M=i.turnServerCredsApi,N=i.turnServerCredsApiParser,re=N===void 0?function(Bt){var Ir=Bt.username,ya=Bt.credential,Ot=Bt.server;return{turnServerUser:Ir,turnServerPass:ya,turnServerUri:Ot}}:N,ce=i.turnServerCredsApiIncludeCredentials,de=ce===void 0?!1:ce,he=i.turnServerUser,me=i.turnServerPass,ve=i.numMsgs,Ve=ve===void 0?100:ve,Be=i.batchSize,Ut=Be===void 0?10:Be,vt=i.batchWaitTime,lt=vt===void 0?10:vt,ft=i.responsesWaitTime,mt=ft===void 0?5e3:ft,lr=i.connectionTimeout,dt=lr===void 0?5e3:lr;if(s(this,D),A(this,sr,function(){}),A(this,qr,function(){}),A(this,Na,function(){}),te(this,"onMsgSent",function(){}),te(this,"onAllMsgsSent",function(){}),te(this,"onMsgReceived",function(){}),A(this,An,{}),A(this,Os,void 0),A(this,Xi,void 0),!E&&!M)throw new Error("Missing turnServerCredsApi or turnServerUri argument");if((!he||!me)&&!M)throw new Error("Missing either turnServerCredsApi or turnServerUser+turnServerPass arguments");O(Xi,this,Ve),(!he||!me?fetch(M,{credentials:de?"include":void 0}).then(function(Bt){return Bt.json()}).then(function(Bt){if(Bt.error)throw Bt.error;return Bt}).then(re):Promise.resolve({turnServerUser:he,turnServerPass:me})).catch(function(Bt){return l(sr,p).call(p,Bt)}).then(function(Bt){var Ir=Bt.turnServerUser,ya=Bt.turnServerPass,Ot=Bt.turnServerUri,xr=O(Os,p,new Hi({iceServers:[{urls:"turn:".concat(Ot||E,"?transport=udp"),username:Ir,credential:ya}],iceTransportPolicy:"relay"})),Ea=!1;setTimeout(function(){Ea||(xr.close(),l(qr,p).call(p,"ICE connection timeout!"))},dt);var da=l(An,p);xr.onOpen=function(){Ea=!0;var wa=p;(function Wr(yn){if(yn<=Ve){for(var Mn=yn;Mn<=Math.min(Ve,yn+Ut-1);)da[Mn]=!1,xr.send(Mn),wa.onMsgSent(Mn),Mn++;setTimeout(function(){return Wr(Mn)},lt)}else{wa.onAllMsgsSent(Object.keys(da).length);var Bn=function(){xr.close(),l(Na,wa).call(wa,wa.results)},Ja=setTimeout(Bn,mt),bi=Object.values(l(An,wa)).filter(function(Mi){return!Mi}).length;xr.onMessageReceived=function(Mi){clearTimeout(Ja),da[Mi]=!0,wa.onMsgReceived(Mi),bi--,bi<=0&&Object.values(l(An,wa)).every(function(Ds){return Ds})?Bn():Ja=setTimeout(Bn,mt)}}})(1)},xr.onMessageReceived=function(wa){da[wa]=!0,p.onMsgReceived(wa)}}).catch(function(Bt){return l(qr,p).call(p,Bt.toString())})}return ee(D,[{key:"onCredentialsFailure",set:(function(i){O(sr,this,i)})},{key:"onConnectionError",set:(function(i){O(qr,this,i)})},{key:"onFinished",set:(function(i){O(Na,this,i)})},{key:"results",get:(function(){var i=l(Xi,this),E=Object.keys(l(An,this)).length,M=Object.entries(l(An,this)).filter(function(re){var ce=qt(re,2),de=ce[1];return!de}).map(function(re){var ce=qt(re,1),de=ce[0];return+de}),N=M.length/E;return{totalMessages:i,numMessagesSent:E,packetLoss:N,lostMessages:M}})}])})(),io=["downloadChunkSize","uploadChunkSize","downloadApiUrl","uploadApiUrl"],ci=new WeakMap,rl=(function(D){function p(){var i,E=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},M=E.downloadChunkSize,N=E.uploadChunkSize,re=E.downloadApiUrl,ce=E.uploadApiUrl,de=it(E,io);return s(this,p),i=u(this,p,[de]),A(i,ci,void 0),(M||N)&&(O(ci,i,new ks({download:M?{apiUrl:re,chunkSize:M}:null,upload:N?{apiUrl:ce,chunkSize:N}:null})),ht(p,"onCredentialsFailure",ht(p,"onConnectionError",ht(p,"onFinished",function(){return l(ci,i).stop()},i,1,1),i,1,1),i,1)),i}return ke(p,D),ee(p,[{key:"qsParams",set:function(E){l(ci,this)&&(l(ci,this).qsParams=E)}},{key:"fetchOptions",set:function(E){l(ci,this)&&(l(ci,this).fetchOptions=E)}},{key:"onCredentialsFailure",set:function(E){var M=this;ht(p,"onCredentialsFailure",function(){E.apply(void 0,arguments),l(ci,M)&&l(ci,M).stop()},this,1)}},{key:"onConnectionError",set:function(E){var M=this;ht(p,"onConnectionError",function(){E.apply(void 0,arguments),l(ci,M)&&l(ci,M).stop()},this,1)}},{key:"onFinished",set:function(E){var M=this;ht(p,"onFinished",function(){E.apply(void 0,arguments),l(ci,M)&&l(ci,M).stop()},this,1)}}])})(no),Fs=["reachable"],so=ee(function D(p){var i=this,E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},M=E.timeout,N=M===void 0?-1:M,re=E.fetchOptions,ce=re===void 0?{}:re;s(this,D),te(this,"onFinished",function(){});var de=!1,he=function(ve){var Ve=ve.reachable,Be=it(ve,Fs);de||(de=!0,i.onFinished(Et({targetUrl:p,reachable:Ve},Be)))};fetch(p,ce).then(function(me){he({reachable:!0,response:me})}).catch(function(me){he({reachable:!1,error:me})}),N>0&&setTimeout(function(){return he({reachable:!1,error:"Request timeout"})},N)}),al=function(p){return p.reduce(function(i,E){return i+E},0)},Ao=function(p){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:.5;if(!p.length)return 0;var E=p.slice().sort(function(ce,de){return ce-de}),M=(p.length-1)*i,N=M%1;if(N===0)return E[Math.round(M)];var re=[Math.floor,Math.ceil].map(function(ce){return E[ce(M)]});return re[0]+(re[1]-re[0])*N},us=new WeakMap,Fn=new WeakMap,Oi=(function(){function D(p){var i=this;s(this,D),te(this,"getLatencyPoints",function(E){return E.timings.map(function(M){return M.ping})}),te(this,"getLatency",function(E){return Ao(i.getLatencyPoints(E),l(us,i).latencyPercentile)}),te(this,"getBandwidthPoints",function(E){return Object.entries(E).map(function(M){var N=qt(M,2),re=N[0],ce=N[1].timings;return ce.map(function(de){var he=de.bps,me=de.duration,ve=de.ping,Ve=de.measTime,Be=de.serverTime,Ut=de.transferSize;return{bytes:+re,bps:he,duration:me,ping:ve,measTime:Ve,serverTime:Be,transferSize:Ut}})}).flat()}),te(this,"getBandwidth",function(E){return Ao(i.getBandwidthPoints(E).filter(function(M){return M.duration>=l(us,i).bandwidthMinRequestDuration}).map(function(M){return M.bps}).filter(function(M){return M}),l(us,i).bandwidthPercentile)}),te(this,"getLoadedLatency",function(E){return i.getLatency({timings:l(Fn,i).call(i,E)})}),te(this,"getLoadedJitter",function(E){return i.getJitter({timings:l(Fn,i).call(i,E)})}),te(this,"getLoadedLatencyPoints",function(E){return i.getLatencyPoints({timings:l(Fn,i).call(i,E)})}),te(this,"getPacketLoss",function(E){return E.packetLoss}),te(this,"getPacketLossDetails",function(E){return E}),te(this,"getReachability",function(E){return!!E.reachable}),te(this,"getReachabilityDetails",function(E){return{host:E.host,reachable:E.reachable}}),A(this,us,void 0),A(this,Fn,function(E){return Object.values(E).filter(function(M){return M.timings.length&&Math.min.apply(Math,Zt(M.timings.map(function(N){return N.duration})))>=l(us,i).loadedRequestMinDuration}).map(function(M){return M.sideLatency||[]}).flat().slice(-l(us,i).loadedLatencyMaxPoints)}),O(us,this,p)}return ee(D,[{key:"getJitter",value:function(i){var E=this.getLatencyPoints(i);return E.length<2?null:E.reduce(function(M,N){var re=M.sumDeltas,ce=re===void 0?0:re,de=M.prevLatency;return{sumDeltas:ce+(de!==void 0?Math.abs(de-N):0),prevLatency:N}},{}).sumDeltas/(E.length-1)}}])})(),Ms=["bad","poor","average","good","great"],ko={loadedLatencyIncrease:function(p){return p.latency&&(p.downLoadedLatency||p.upLoadedLatency)?Math.max(p.downLoadedLatency,p.upLoadedLatency)-p.latency:void 0}},Ko={packetLoss:0},Vi=new WeakMap,_i=(function(){function D(p){s(this,D),A(this,Vi,void 0),O(Vi,this,p)}return ee(D,[{key:"getScores",value:function(i){var E=Object.assign.apply(Object,Zt(Object.entries(l(Vi,this).aimMeasurementScoring).map(function(M){var N=qt(M,2),re=N[0],ce=N[1],de=ko.hasOwnProperty(re)?ko[re](i):i[re];return de===void 0?Ko.hasOwnProperty(re)?te({},re,Ko[re]):{}:te({},re,de===void 0?0:+ce(de))})));return Object.assign.apply(Object,[{}].concat(Zt(Object.entries(l(Vi,this).aimExperiencesDefs).filter(function(M){var N=qt(M,2),re=N[1].input;return re.every(function(ce){return E.hasOwnProperty(ce)})}).map(function(M){var N=qt(M,2),re=N[0],ce=N[1],de=ce.input,he=ce.pointThresholds,me=Math.max(0,al(de.map(function(Be){return E[Be]}))),ve=Ki(he,[0,1,2,3,4])(me),Ve=Ms[ve];return te({},re,{points:me,classificationIdx:ve,classificationName:Ve})}))))}}])})(),Xa=new WeakMap,oo=new WeakMap,Fi=new WeakMap,dr=new WeakMap,Ma=new WeakMap,En=new WeakMap,Oo=new WeakMap,co=new WeakMap,$s=(function(){function D(p){var i=this;s(this,D),te(this,"raw",void 0),te(this,"getUnloadedLatency",function(){return l(dr,i).call(i,"getLatency","latency")}),te(this,"getUnloadedJitter",function(){return l(dr,i).call(i,"getJitter","latency")}),te(this,"getUnloadedLatencyPoints",function(){return l(dr,i).call(i,"getLatencyPoints","latency",[])}),te(this,"getDownLoadedLatency",function(){return l(dr,i).call(i,"getLoadedLatency","download")}),te(this,"getDownLoadedJitter",function(){return l(dr,i).call(i,"getLoadedJitter","download")}),te(this,"getDownLoadedLatencyPoints",function(){return l(dr,i).call(i,"getLoadedLatencyPoints","download",[])}),te(this,"getUpLoadedLatency",function(){return l(dr,i).call(i,"getLoadedLatency","upload")}),te(this,"getUpLoadedJitter",function(){return l(dr,i).call(i,"getLoadedJitter","upload")}),te(this,"getUpLoadedLatencyPoints",function(){return l(dr,i).call(i,"getLoadedLatencyPoints","upload",[])}),te(this,"getDownloadBandwidth",function(){return l(dr,i).call(i,"getBandwidth","download")}),te(this,"getDownloadBandwidthPoints",function(){return l(dr,i).call(i,"getBandwidthPoints","download",[])}),te(this,"getUploadBandwidth",function(){return l(dr,i).call(i,"getBandwidth","upload")}),te(this,"getUploadBandwidthPoints",function(){return l(dr,i).call(i,"getBandwidthPoints","upload",[])}),te(this,"getPacketLoss",function(){return l(dr,i).call(i,"getPacketLoss","packetLoss")}),te(this,"getPacketLossDetails",function(){return l(dr,i).call(i,"getPacketLossDetails","packetLoss",void 0,!0)}),te(this,"getScores",function(){return l(Fi,i).getScores(i.getSummary())}),A(this,Xa,void 0),A(this,oo,void 0),A(this,Fi,void 0),A(this,dr,function(E,M){var N=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0,re=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;return!i.raw.hasOwnProperty(M)||!i.raw[M].started?N:re&&i.raw[M].error?{error:i.raw[M].error}:l(oo,i)[E](i.raw[M].results)}),A(this,Ma,function(){return l(dr,i).call(i,"getReachability","v4Reachability")}),A(this,En,function(){return l(dr,i).call(i,"getReachabilityDetails","v4Reachability")}),A(this,Oo,function(){return l(dr,i).call(i,"getReachability","v6Reachability")}),A(this,co,function(){return l(dr,i).call(i,"getReachabilityDetails","v6Reachability")}),O(Xa,this,p),this.clear(),O(oo,this,new Oi(l(Xa,this))),O(Fi,this,new _i(l(Xa,this)))}return ee(D,[{key:"isFinished",get:function(){return Object.values(this.raw).every(function(i){return i.finished})}},{key:"clear",value:function(){this.raw=Object.assign.apply(Object,[{}].concat(Zt(Zt(new Set(l(Xa,this).measurements.map(function(i){return i.type}))).map(function(i){return te({},i,{started:!1,finished:!1,results:{}})}))))}},{key:"getSummary",value:function(){var i={download:this.getDownloadBandwidth,upload:this.getUploadBandwidth,latency:this.getUnloadedLatency,jitter:this.getUnloadedJitter,downLoadedLatency:this.getDownLoadedLatency,downLoadedJitter:this.getDownLoadedJitter,upLoadedLatency:this.getUpLoadedLatency,upLoadedJitter:this.getUpLoadedJitter,packetLoss:this.getPacketLoss,v4Reachability:l(Ma,this),v6Reachability:l(Oo,this)};return Object.assign.apply(Object,Zt(Object.entries(i).map(function(E){var M=qt(E,2),N=M[0],re=M[1],ce=re();return ce===void 0?{}:te({},N,ce)})))}}])})(),lo=function(p){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return p&&Math.round(p*Math.pow(10,i))/Math.pow(10,i)},or=function(p){return p.map(function(i){return lo(i,2)})},It=function(p){return p.map(function(i){return{bytes:+i.bytes,bps:lo(i.bps)}})},Yo=function(p){return p.error?void 0:{numMessages:p.numMessagesSent,lossRatio:lo(p.packetLoss,4)}},kn={latencyMs:["getUnloadedLatencyPoints",or],download:["getDownloadBandwidthPoints",It],upload:["getUploadBandwidthPoints",It],downLoadedLatencyMs:["getDownLoadedLatencyPoints",or],upLoadedLatencyMs:["getUpLoadedLatencyPoints",or],packetLoss:["getPacketLossDetails",Yo]},zl=function(p){return{points:p.points,classification:p.classificationName}},Hl=function(p,i){var E=i.apiUrl,M=i.sessionId,N={sessionId:M};Object.entries(kn).forEach(function(ce){var de=qt(ce,2),he=de[0],me=qt(de[1],2),ve=me[0],Ve=me[1],Be=Ve===void 0?function(vt){return vt}:Ve,Ut=p[ve]();Ut&&(N[he]=Be(Ut))});var re=p.getScores();re&&(N.scores=Object.assign.apply(Object,[{}].concat(Zt(Object.entries(re).map(function(ce){var de=qt(ce,2),he=de[0],me=de[1];return te({},he,zl(me))}))))),fetch(E,{method:"POST",body:JSON.stringify(N)})},gu=["type"],yu=["numPackets"],sd=["bytes"],Vl=1e6,Fl=1e6,$l=.5,li=["latency","latencyUnderLoad","download","upload"],On=function(){return"".concat(Math.round(Math.random()*1e16))},Sc=new WeakMap,qs=new WeakMap,ln=new WeakMap,Qo=new WeakMap,ds=new WeakMap,Ji=new WeakMap,Mo=new WeakMap,Ec=new WeakMap,nl=new WeakMap,uo=new WeakMap,il=new WeakMap,Da=new WeakSet,_u=(function(){function D(){var p=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};s(this,D),I(this,Da),te(this,"onRunningChange",function(){}),te(this,"onResultsChange",function(){}),A(this,Sc,function(){}),A(this,qs,function(){}),A(this,ln,void 0),A(this,Qo,void 0),A(this,ds,On()),A(this,Ji,-1),A(this,Mo,void 0),A(this,Ec,Vl),A(this,nl,Fl),A(this,uo,!1),A(this,il,!1),O(ln,this,Object.assign({},Ie,p,Le)),O(Qo,this,new $s(l(ln,this))),l(ln,this).autoStart&&this.play()}return ee(D,[{key:"results",get:function(){return l(Qo,this)}},{key:"isRunning",get:function(){return l(uo,this)}},{key:"isFinished",get:function(){return l(il,this)}},{key:"onFinish",set:(function(i){O(Sc,this,i)})},{key:"onError",set:(function(i){O(qs,this,i)})},{key:"pause",value:function(){li.includes(F(Da,this,ol).call(this))&&l(Mo,this).pause(),F(Da,this,sl).call(this,!1)}},{key:"play",value:function(){l(uo,this)||(F(Da,this,sl).call(this,!0),F(Da,this,Zi).call(this))}},{key:"restart",value:function(){F(Da,this,bu).call(this),this.play()}}])})();function sl(D){D!==l(uo,this)&&(O(uo,this,D),this.onRunningChange(l(uo,this)))}function yl(D){var p=this;D!==l(il,this)&&(O(il,this,D),D&&setTimeout(function(){return l(Sc,p).call(p,p.results)}))}function ol(){return l(Ji,this)<0||l(Ji,this)>=l(ln,this).measurements.length?null:l(ln,this).measurements[l(Ji,this)].type}function wc(){return l(Qo,this).raw[F(Da,this,ol).call(this)]||void 0}function bu(){F(Da,this,Su).call(this),O(ds,this,On()),O(Ji,this,-1),O(Mo,this,void 0),F(Da,this,sl).call(this,!1),F(Da,this,yl).call(this,!1),l(Qo,this).clear()}function Su(){var D=l(Mo,this);D&&(D.onFinished=D.onConnectionError=D.onFail=D.onMsgReceived=D.onCredentialsFailure=D.onMeasurementResult=function(){},li.includes(F(Da,this,ol).call(this))&&D.pause())}function Zi(){var D=this,p;if(li.includes(F(Da,this,ol).call(this))&&F(Da,this,wc).call(this)&&F(Da,this,wc).call(this).started&&!F(Da,this,wc).call(this).finished&&!F(Da,this,wc).call(this).finishedCurrentRound&&!F(Da,this,wc).call(this).error){l(Mo,this).play();return}if(O(Ji,this,(p=l(Ji,this),p++,p)),l(Ji,this)>=l(ln,this).measurements.length){F(Da,this,sl).call(this,!1),F(Da,this,yl).call(this,!0);return}var i=l(ln,this).measurements[l(Ji,this)],E=i.type,M=it(i,gu),N=F(Da,this,wc).call(this),re=l(ln,this),ce=re.downloadApiUrl,de=re.uploadApiUrl,he=re.estimatedServerTime,me;switch(E){case"v4Reachability":case"v6Reachability":me=new so("https://".concat(M.host),{fetchOptions:{method:"GET",mode:"no-cors"}}),me.onFinished=function(dt){N.finished=!0,N.results=Et({host:M.host},dt),D.onResultsChange({type:E}),F(Da,D,Zi).call(D)};break;case"rpki":me=new so("https://".concat(l(ln,this).rpkiInvalidHost),{timeout:5e3}),me.onFinished=function(dt){(dt.response?dt.response.json():Promise.resolve()).then(function(Bt){N.finished=!0,N.results=Et({host:l(ln,D).rpkiInvalidHost,filteringInvalids:!dt.reachable},Bt?{asn:Bt.asn,name:Bt.name}:{}),D.onResultsChange({type:E}),F(Da,D,Zi).call(D)})};break;case"nxdomain":me=new so("https://".concat(M.nxhost),{fetchOptions:{mode:"no-cors"}}),me.onFinished=function(dt){N.finished=!0,N.results={host:M.nxhost,reachable:dt.reachable},D.onResultsChange({type:E}),F(Da,D,Zi).call(D)};break;case"packetLoss":case"packetLossUnderLoad":{N.finished=!1;var ve=M.numPackets,Ve=it(M,yu),Be=l(ln,this),Ut=Be.turnServerUri,vt=Be.turnServerCredsApiUrl,lt=Be.turnServerUser,ft=Be.turnServerPass,mt=Be.includeCredentials;me=new rl(Et({turnServerUri:Ut,turnServerCredsApi:vt,turnServerCredsApiIncludeCredentials:mt,turnServerUser:lt,turnServerPass:ft,numMsgs:ve,downloadChunkSize:M.loadDown?l(Ec,this):void 0,uploadChunkSize:M.loadUp?l(nl,this):void 0,downloadApiUrl:ce,uploadApiUrl:de},Ve))}me.onMsgReceived=function(){N.results=Object.assign({},me.results),D.onResultsChange({type:E})},me.onFinished=function(){N.finished=!0,D.onResultsChange({type:E}),F(Da,D,Zi).call(D)},me.onConnectionError=function(dt){N.error=dt,D.onResultsChange({type:E}),l(qs,D).call(D,"Connection error while measuring packet loss: ".concat(dt)),F(Da,D,Zi).call(D)},me.onCredentialsFailure=function(){N.error="unable to get turn server credentials",D.onResultsChange({type:E}),l(qs,D).call(D,"Error while measuring packet loss: unable to get turn server credentials."),F(Da,D,Zi).call(D)};break;case"latency":case"latencyUnderLoad":N.finished=!1,me=new Sn([{dir:"down",bytes:0,count:M.numPackets,bypassMinDuration:!0}],{downloadApiUrl:ce,uploadApiUrl:de,estimatedServerTime:he,logApiUrl:l(ln,this).logMeasurementApiUrl,measurementId:l(ds,this),sessionId:l(ln,this).sessionId,downloadChunkSize:M.loadDown?l(Ec,this):void 0,uploadChunkSize:M.loadUp?l(nl,this):void 0}),me.fetchOptions={credentials:l(ln,this).includeCredentials?"include":void 0},me.onMeasurementResult=me.onNewMeasurementStarted=function(dt,Bt){N.results=Object.assign({},Bt.down[0]),D.onResultsChange({type:E})},me.onFinished=function(){N.finished=!0,D.onResultsChange({type:E}),l(uo,D)&&F(Da,D,Zi).call(D)},me.onConnectionError=function(dt){N.error=dt,D.onResultsChange({type:E}),l(qs,D).call(D,"Connection error while measuring latency: ".concat(dt)),F(Da,D,Zi).call(D)},me.play();break;case"download":case"upload":if(N.finished||N.error)F(Da,this,Zi).call(this);else{delete N.finishedCurrentRound;var lr=l(ln,this)["measure".concat(E==="download"?"Down":"Up","loadLoadedLatency")];me=new Sn([Et({dir:E==="download"?"down":"up"},M)],{downloadApiUrl:ce,uploadApiUrl:de,estimatedServerTime:he,logApiUrl:l(ln,this).logMeasurementApiUrl,measurementId:l(ds,this),measureParallelLatency:lr,parallelLatencyThrottleMs:l(ln,this).loadedLatencyThrottle,sessionId:l(ln,this).sessionId}),me.fetchOptions={credentials:l(ln,this).includeCredentials?"include":void 0},me.finishRequestDuration=l(ln,this).bandwidthFinishRequestDuration,me.onNewMeasurementStarted=function(dt){var Bt=dt.count,Ir=dt.bytes,ya=N.results=Object.assign({},N.results);!ya.hasOwnProperty(Ir)&&(ya[Ir]={timings:[],numMeasurements:0,sideLatency:lr?[]:void 0}),ya[Ir].numMeasurements-ya[Ir].timings.length!==Bt&&(ya[Ir].numMeasurements+=Bt,D.onResultsChange({type:E}))},me.onMeasurementResult=function(dt){var Bt=dt.bytes,Ir=it(dt,sd);N.results[Bt].timings.push(Ir),N.results=Object.assign({},N.results),D.onResultsChange({type:E})},me.onParallelLatencyResult=function(dt){N.results[M.bytes].sideLatency.push(dt),N.results=Object.assign({},N.results),D.onResultsChange({type:E})},me.onFinished=function(dt){var Bt=!l(ln,D).measurements.slice(l(Ji,D)+1).map(function(Ea){return Ea.type}).includes(E),Ir=Math.min.apply(Math,Zt(Object.values(E==="download"?dt.down:dt.up).slice(-1)[0].timings.map(function(Ea){return Ea.duration}))),ya=Bt||!M.bypassMinDuration&&Ir>l(ln,D).bandwidthFinishRequestDuration;if(!ya)N.finishedCurrentRound=!0;else{N.finished=!0,D.onResultsChange({type:E});var Ot=Object.keys(N.results).map(function(Ea){return+Ea}).sort(function(Ea,da){return da-Ea})[0],xr=Ot*$l;E==="download"&&O(Ec,D,xr),E==="upload"&&O(nl,D,xr)}l(uo,D)&&F(Da,D,Zi).call(D)},me.onConnectionError=function(dt){N.error=dt,D.onResultsChange({type:E}),l(qs,D).call(D,"Connection error while measuring ".concat(E,": ").concat(dt)),F(Da,D,Zi).call(D)},me.play()}break}O(Mo,this,me),N.started=!0,this.onResultsChange({type:E})}var Rc=new WeakMap,_l=new WeakMap,bl=new WeakMap,Eu=(function(D){function p(i){var E;s(this,p);for(var M=arguments.length,N=new Array(M>1?M-1:0),re=1;re<M;re++)N[re-1]=arguments[re];E=u(this,p,[i].concat(N)),A(E,Rc,void 0),A(E,_l,void 0),A(E,bl,function(de){l(Rc,E)&&Hl(de,{apiUrl:l(Rc,E),sessionId:l(_l,E)})}),ht(p,"onFinish",l(bl,E),E,1);var ce=Object.assign({},Ie,i,Le);return O(Rc,E,ce.logAimApiUrl),O(_l,E,ce.sessionId),E}return ke(p,D),ee(p,[{key:"onFinish",set:function(E){var M=this;ht(p,"onFinish",function(N){E(N),l(bl,M).call(M,N)},this,1)}}])})(_u),wu=S(9633),Ru=S(2067),Tu=S(6565);function ql(D,p){var i=typeof Symbol<"u"&&D[Symbol.iterator]||D["@@iterator"];if(!i){if(Array.isArray(D)||(i=Tc(D))||p){i&&(D=i);var E=0,M=function(){};return{s:M,n:function(){return E>=D.length?{done:!0}:{done:!1,value:D[E++]}},e:function(he){throw he},f:M}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var N,re=!0,ce=!1;return{s:function(){i=i.call(D)},n:function(){var he=i.next();return re=he.done,he},e:function(he){ce=!0,N=he},f:function(){try{re||i.return==null||i.return()}finally{if(ce)throw N}}}}function Tc(D,p){if(D){if(typeof D=="string")return Wl(D,p);var i={}.toString.call(D).slice(8,-1);return i==="Object"&&D.constructor&&(i=D.constructor.name),i==="Map"||i==="Set"?Array.from(D):i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?Wl(D,p):void 0}}function Wl(D,p){(p==null||p>D.length)&&(p=D.length);for(var i=0,E=Array(p);i<p;i++)E[i]=D[i];return E}var Sl=[L],cl=!1,Cc=(function(){function D(){(0,T.A)(this,D),(0,J.A)(this,"keyProvider",null)}return(0,b.A)(D,null,[{key:"setKeyProvider",value:(function(i){this.keyProvider=i})},{key:"getKeyProvider",value:function(){return this.keyProvider}},{key:"config",value:function(i){if(!i)throw new Error("'token' is empty, please provide it in config");this.apiKey=i;var E=d(fr,void 0,H.apply(void 0,Sl));window.STORE=E,Sr.default.init({store:E})}},{key:"getCameras",value:(function(){var p=(0,C.A)(n().mark(function E(){var M,N,re,ce,de;return n().wrap(function(he){for(;;)switch(he.prev=he.next){case 0:if(he.prev=0,navigator.userAgent&&(M=navigator.userAgent.includes("Firefox")),N=[],!M){he.next=2;break}return he.next=1,new Promise(function(me,ve){navigator.mediaDevices.getUserMedia({audio:!1,video:!0}).then((function(){var Ve=(0,C.A)(n().mark(function Be(Ut){var vt;return n().wrap(function(lt){for(;;)switch(lt.prev=lt.next){case 0:return lt.next=1,navigator.mediaDevices.enumerateDevices();case 1:vt=lt.sent,N=vt.filter(function(ft){return ft.kind==="videoinput"}).map(function(ft){return new ro(ft.deviceId,ft.groupId,ft.kind,ft.label)}),me(N),Ut.getTracks().forEach(function(ft){return ft.stop()});case 2:case"end":return lt.stop()}},Be)}));return function(Be){return Ve.apply(this,arguments)}})()).catch(function(Ve){console.error("Error in getCameras()",Ve),ve(Ve)})});case 1:he.next=4;break;case 2:return he.next=3,navigator.mediaDevices.enumerateDevices();case 3:re=he.sent,N=re.filter(function(me){return me.kind==="videoinput"}).map(function(me){return new ro(me.deviceId,me.groupId,me.kind,me.label)});case 4:return he.abrupt("return",N);case 5:he.prev=5,de=he.catch(0),ce=de.message,de instanceof TypeError&&de.name==="TypeError"&&(ce=ea.q.ERROR_CAMERA_ACCESS_UNAVAILABLE.message),console.error("An error occurred in getCameras(), ".concat(ce));case 6:case"end":return he.stop()}},E,null,[[0,5]])}));function i(){return p.apply(this,arguments)}return i})()},{key:"getMicrophones",value:(function(){var p=(0,C.A)(n().mark(function E(){var M,N,re,ce,de;return n().wrap(function(he){for(;;)switch(he.prev=he.next){case 0:if(he.prev=0,navigator.userAgent&&(M=navigator.userAgent.includes("Firefox")),N=[],!M){he.next=2;break}return he.next=1,new Promise(function(me,ve){navigator.mediaDevices.getUserMedia({audio:!0,video:!1}).then((function(){var Ve=(0,C.A)(n().mark(function Be(Ut){var vt;return n().wrap(function(lt){for(;;)switch(lt.prev=lt.next){case 0:return lt.next=1,navigator.mediaDevices.enumerateDevices();case 1:vt=lt.sent,N=vt.filter(function(ft){return ft.kind==="audioinput"}).map(function(ft){return new $o(ft.deviceId,ft.groupId,ft.kind,ft.label)}),me(N),Ut.getTracks().forEach(function(ft){return ft.stop()});case 2:case"end":return lt.stop()}},Be)}));return function(Be){return Ve.apply(this,arguments)}})()).catch(function(Ve){console.error("Error in getMicrophones()",Ve),ve(Ve)})});case 1:he.next=4;break;case 2:return he.next=3,navigator.mediaDevices.enumerateDevices();case 3:re=he.sent,N=re.filter(function(me){return me.kind==="audioinput"}).map(function(me){return new $o(me.deviceId,me.groupId,me.kind,me.label)});case 4:return he.abrupt("return",N);case 5:he.prev=5,de=he.catch(0),ce=de.message,de instanceof TypeError&&de.name==="TypeError"&&(ce=ea.q.ERROR_MICROPHONE_ACCESS_UNAVAILABLE.message),console.error("An error occurred in getMicrophones(), ".concat(ce));case 6:case"end":return he.stop()}},E,null,[[0,5]])}));function i(){return p.apply(this,arguments)}return i})()},{key:"getPlaybackDevices",value:(function(){var p=(0,C.A)(n().mark(function E(){var M,N,re,ce,de;return n().wrap(function(he){for(;;)switch(he.prev=he.next){case 0:if(he.prev=0,navigator.userAgent&&(M=navigator.userAgent.includes("Firefox")),N=[],!M){he.next=2;break}return he.next=1,new Promise(function(me,ve){navigator.mediaDevices.getUserMedia({audio:!0,video:!1}).then((function(){var Ve=(0,C.A)(n().mark(function Be(Ut){var vt;return n().wrap(function(lt){for(;;)switch(lt.prev=lt.next){case 0:return lt.next=1,navigator.mediaDevices.enumerateDevices();case 1:vt=lt.sent,N=vt.filter(function(ft){return ft.kind==="audiooutput"}).map(function(ft){return new yc(ft.deviceId,ft.groupId,ft.kind,ft.label)}),me(N),Ut.getTracks().forEach(function(ft){return ft.stop()});case 2:case"end":return lt.stop()}},Be)}));return function(Be){return Ve.apply(this,arguments)}})()).catch(function(Ve){console.error("Error in getPlaybackDevices()",Ve),ve(Ve)})});case 1:he.next=4;break;case 2:return he.next=3,navigator.mediaDevices.enumerateDevices();case 3:re=he.sent,N=re.filter(function(me){return me.kind==="audiooutput"}).map(function(me){return new yc(me.deviceId,me.groupId,me.kind,me.label)});case 4:return he.abrupt("return",N);case 5:he.prev=5,de=he.catch(0),ce=de.message,de instanceof TypeError&&de.name==="TypeError"&&(ce="Playback device access unavailable: Please ensure your device is compatible and that you're on a secure website (https://)"),console.error("An error occurred in getPlaybackDevices(), ".concat(ce));case 6:case"end":return he.stop()}},E,null,[[0,5]])}));function i(){return p.apply(this,arguments)}return i})()},{key:"getDevices",value:(function(){var p=(0,C.A)(n().mark(function E(){var M,N,re,ce,de,he,me;return n().wrap(function(ve){for(;;)switch(ve.prev=ve.next){case 0:return ve.prev=0,ve.next=1,navigator.mediaDevices.enumerateDevices();case 1:M=ve.sent,N=[],re=ql(M);try{for(re.s();!(ce=re.n()).done;)de=ce.value,N.push(new Ya(de.deviceId,de.groupId,de.kind,de.label))}catch(Ve){re.e(Ve)}finally{re.f()}return ve.abrupt("return",N);case 2:ve.prev=2,me=ve.catch(0),he=me.message,me instanceof TypeError&&(me.name==="TypeError"?he="Could not access devices : Please ensure your devices is compatible and that you're on a secure website (https://)":he=me.message),console.error("An error occurred in getDevices(), ".concat(he));case 3:case"end":return ve.stop()}},E,null,[[0,2]])}));function i(){return p.apply(this,arguments)}return i})()},{key:"on",value:function(i,E){switch(i){case"device-changed":this.addDeviceChangeEvent(),this.eventEmitter.on(i,E);break;default:throw new Error("Unsupported event type")}}},{key:"addDeviceChangeEvent",value:function(){var i=this;if(!cl){this.getDevices().then(function(M){i.devices=M});try{navigator.mediaDevices.addEventListener("devicechange",(function(){var M=(0,C.A)(n().mark(function N(re){var ce,de,he,me,ve,Ve;return n().wrap(function(Be){for(;;)switch(Be.prev=Be.next){case 0:return ce=i.devices,Be.next=1,i.getDevices();case 1:i.devices=Be.sent,de=new Array,he=ql(i.devices),Be.prev=2,ve=n().mark(function Ut(){var vt,lt;return n().wrap(function(ft){for(;;)switch(ft.prev=ft.next){case 0:vt=me.value,lt=ce.filter(function(mt){return mt.deviceId==vt.deviceId&&mt.kind==vt.kind}),lt.length==0?de.push(vt):ce=ce.filter(function(mt){return!(mt.deviceId==vt.deviceId&&mt.kind==vt.kind)});case 1:case"end":return ft.stop()}},Ut)}),he.s();case 3:if((me=he.n()).done){Be.next=5;break}return Be.delegateYield(ve(),"t0",4);case 4:Be.next=3;break;case 5:Be.next=7;break;case 6:Be.prev=6,Ve=Be.catch(2),he.e(Ve);case 7:return Be.prev=7,he.f(),Be.finish(7);case 8:de.length!=0&&i.eventEmitter.emit("device-changed",{devices:i.devices}),ce.length!=0&&i.eventEmitter.emit("device-changed",{devices:i.devices});case 9:case"end":return Be.stop()}},N,null,[[2,6,7,8]])}));return function(N){return M.apply(this,arguments)}})()),cl=!0}catch(M){var E=M.message;M instanceof TypeError&&(M.name==="TypeError"?E="Could not access devices : Please ensure your devices is compatible and that you're on a secure website (https://)":E=M.message),console.error("An error occurred in device-change event, ".concat(E))}}}},{key:"off",value:function(i,E){switch(i){case"device-changed":this.eventEmitter.off(i,E);break;default:throw new Error("Unsupported event type")}}},{key:"checkPermissions",value:(function(){var p=(0,C.A)(n().mark(function E(M){var N,re,ce,de,he;return n().wrap(function(me){for(;;)switch(me.prev=me.next){case 0:if(M||(M=Zr.AUDIO_AND_VIDEO),N=new Map,!(M.includes(Zr.AUDIO)||M.includes(Zr.AUDIO_AND_VIDEO))){me.next=5;break}return re=!0,me.prev=1,me.next=2,navigator.permissions.query({name:"microphone"});case 2:ce=me.sent,(ce.state=="prompt"||ce.state=="denied")&&(re=!1),me.next=4;break;case 3:throw me.prev=3,me.catch(1),Error("Browser does not support microphone permission check");case 4:N.set(Zr.AUDIO,re);case 5:if(!(M.includes(Zr.VIDEO)||M.includes(Zr.AUDIO_AND_VIDEO))){me.next=10;break}return de=!0,me.prev=6,me.next=7,navigator.permissions.query({name:"camera"});case 7:he=me.sent,(he.state=="prompt"||he.state=="denied")&&(de=!1),me.next=9;break;case 8:throw me.prev=8,me.catch(6),Error("Browser does not support camera permission check");case 9:N.set(Zr.VIDEO,de);case 10:return me.abrupt("return",N);case 11:case"end":return me.stop()}},E,null,[[1,3],[6,8]])}));function i(E){return p.apply(this,arguments)}return i})()},{key:"requestPermission",value:(function(){var p=(0,C.A)(n().mark(function E(M){var N,re,ce,de,he,me,ve,Ve,Be,Ut,vt,lt,ft,mt,lr,dt,Bt,Ir,ya;return n().wrap(function(Ot){for(;;)switch(Ot.prev=Ot.next){case 0:if(M||(M=Zr.AUDIO_AND_VIDEO),N=new Map,!M.includes(Zr.AUDIO_AND_VIDEO)){Ot.next=12;break}return ce={audio:!0,video:!0},de=!0,Ot.prev=1,Ot.next=2,navigator.mediaDevices.getUserMedia(ce);case 2:re=Ot.sent,Ot.next=11;break;case 3:if(Ot.prev=3,mt=Ot.catch(1),!(mt instanceof DOMException)){Ot.next=9;break}lr=mt.name,Ot.next=lr==="NotAllowedError"?4:lr==="NotReadableError"?5:lr==="NotFoundError"?6:7;break;case 4:return mt.message==="Permission denied by system"&&(he=ea.q.ERROR_CAMERA_PERMISSION_DENIED_BY_OS.message),Ot.abrupt("continue",8);case 5:return he=ll(mt,"video"),Ot.abrupt("continue",8);case 6:return he=ea.q.ERROR_CAMERA_NOT_FOUND.message,navigator&&navigator.userAgent&&navigator.userAgent.indexOf("Firefox")!=-1&&(he=ea.q.ERROR_CAMERA_PERMISSION_DENIED_BY_OS.message),Ot.abrupt("continue",8);case 7:he=mt.message;case 8:Ot.next=10;break;case 9:mt instanceof TypeError&&mt.name==="TypeError"?he=ea.q.ERROR_CAMERA_ACCESS_UNAVAILABLE.message:he=mt.message;case 10:de=!1,he&&console.error("An error occurred in request permission, ".concat(he));case 11:re&&setTimeout(function(){re.getTracks().forEach(function(xr){xr.stop()})},100),N.set(Zr.AUDIO_AND_VIDEO,de);case 12:if(!M.includes(Zr.VIDEO)){Ot.next=24;break}return ve={audio:!1,video:!0},Ve=!0,Ot.prev=13,Ot.next=14,navigator.mediaDevices.getUserMedia(ve);case 14:me=Ot.sent,Ot.next=23;break;case 15:if(Ot.prev=15,dt=Ot.catch(13),!(dt instanceof DOMException)){Ot.next=21;break}Bt=dt.name,Ot.next=Bt==="NotAllowedError"?16:Bt==="NotReadableError"?17:Bt==="NotFoundError"?18:19;break;case 16:return dt.message==="Permission denied by system"&&(Be=ea.q.ERROR_CAMERA_PERMISSION_DENIED_BY_OS.message),Ot.abrupt("continue",20);case 17:return Be=ll(dt,"video"),Ot.abrupt("continue",20);case 18:return Be=ea.q.ERROR_CAMERA_NOT_FOUND.message,navigator&&navigator.userAgent&&navigator.userAgent.indexOf("Firefox")!=-1&&(Be=ea.q.ERROR_CAMERA_PERMISSION_DENIED_BY_OS.message),Ot.abrupt("continue",20);case 19:Be=dt.message;case 20:Ot.next=22;break;case 21:dt instanceof TypeError&&dt.name==="TypeError"?Be=ea.q.ERROR_CAMERA_ACCESS_UNAVAILABLE.message:Be=dt.message;case 22:Ve=!1,Be&&console.error("An error occurred in request permission, ".concat(Be));case 23:me&&me.getTracks().forEach(function(xr){xr.stop()}),N.set(Zr.VIDEO,Ve);case 24:if(!M.includes(Zr.AUDIO)){Ot.next=36;break}return vt={audio:!0,video:!1},lt=!0,Ot.prev=25,Ot.next=26,navigator.mediaDevices.getUserMedia(vt);case 26:Ut=Ot.sent,Ot.next=35;break;case 27:if(Ot.prev=27,Ir=Ot.catch(25),!(Ir instanceof DOMException)){Ot.next=33;break}ya=Ir.name,Ot.next=ya==="NotAllowedError"?28:ya==="NotReadableError"?29:ya==="NotFoundError"?30:31;break;case 28:return Ir.message==="Permission denied by system"&&(ft=ea.q.ERROR_MICROPHONE_PERMISSION_DENIED_BY_OS.message),Ot.abrupt("continue",32);case 29:return ft=ll(Ir,"audio"),Ot.abrupt("continue",32);case 30:return ft=ea.q.ERROR_MICROPHONE_NOT_FOUND.message,navigator&&navigator.userAgent&&navigator.userAgent.indexOf("Firefox")!=-1&&(ft=ea.q.ERROR_MICROPHONE_PERMISSION_DENIED_BY_OS.message),Ot.abrupt("continue",32);case 31:ft=Ir.message;case 32:Ot.next=34;break;case 33:Ir instanceof TypeError&&Ir.name==="TypeError"?ft=ea.q.ERROR_MICROPHONE_ACCESS_UNAVAILABLE.message:ft=Ir.message;case 34:lt=!1,ft&&console.error("An error occurred in request permission, ".concat(ft));case 35:Ut&&Ut.getTracks().forEach(function(xr){xr.stop()}),N.set(Zr.AUDIO,lt);case 36:return Ot.abrupt("return",N);case 37:case"end":return Ot.stop()}},E,null,[[1,3],[13,15],[25,27]])}));function i(E){return p.apply(this,arguments)}return i})()},{key:"isInt",value:function(i){return typeof i=="number"&&i%1==0}},{key:"getNetworkStats",value:(function(){var p=(0,C.A)(n().mark(function E(){var M,N,re,ce,de,he,me=arguments;return n().wrap(function(ve){for(;;)switch(ve.prev=ve.next){case 0:return M=me.length>0&&me[0]!==void 0?me[0]:{},N=M.timeoutDuration,re=M.baseUrl,ce=re===void 0?"api.videosdk.live":re,(!N||!this.isInt(N))&&(N=6e4),de=new Promise(function(Ve,Be){setTimeout(function(){Be("Not able to get NetworkStats due to timeout")},N)}),he=new Promise(function(Ve,Be){if(!navigator.onLine){Be("Not able to get NetworkStats due to no Network");return}var Ut=new Eu({measureDownloadLoadedLatency:!1,measureUploadLoadedLatency:!1,measurements:[{type:"upload",bytes:3e6,count:1,bypassMinDuration:!0},{type:"download",bytes:3e6,count:1,bypassMinDuration:!0}],uploadApiUrl:"https://".concat(ce,"/test-upload-speed"),downloadApiUrl:"https://".concat(ce,"/test-download-speed")});if(!Ut.isRunning){Be("Not able to get NetworkStats");return}Ut.onFinish=function(vt){Ve({downloadSpeed:parseFloat(Number(vt.getDownloadBandwidth()/1048576).toFixed(2)),uploadSpeed:parseFloat(Number(vt.getUploadBandwidth()/1048576).toFixed(2))})},Ut.onError=function(vt){Be("Not able to get NetworkStats")}}),ve.abrupt("return",Promise.race([he,de]));case 1:case"end":return ve.stop()}},E,this)}));function i(){return p.apply(this,arguments)}return i})()},{key:"checkConnection",value:(function(){var p=(0,C.A)(n().mark(function E(){var M,N,re,ce,de,he,me=arguments;return n().wrap(function(ve){for(;;)switch(ve.prev=ve.next){case 0:return M=me.length>0&&me[0]!==void 0?me[0]:{},N=M.timeoutDuration,re=M.baseUrl,ce=re===void 0?"api.videosdk.live":re,(!N||!this.isInt(N))&&(N=6e4),de=new Promise(function(Ve,Be){setTimeout(function(){Be("TimeoutError: NetworkStats timeout")},N)}),he=new Promise(function(Ve,Be){if(!navigator.onLine){Be("NetworkError: Offline");return}fetch("https://".concat(ce,"/ping")).then(function(Ut){Ut.text().then(function(vt){vt=="pong"?Ve("Connection established"):Be("ConnectionError: Server unreachable")})}).catch(function(Ut){Be("ConnectionError: Server unreachable")})}),ve.abrupt("return",Promise.race([he,de]));case 1:case"end":return ve.stop()}},E,this)}));function i(){return p.apply(this,arguments)}return i})()},{key:"analytics",value:function(i){var E,M,N;!i&&navigator&&navigator.userAgent&&(M=navigator.userAgent,N=U().parse(M),delete N.engine);try{var re;(re=i)!==null&&re!==void 0&&re.browserUserAgent||(M=navigator.userAgent,N=U().parse(M),delete N.engine)}catch{}i&&i.rawUserAgent&&(M=i.rawUserAgent,N=U().parse(M),delete N.engine),i||(i={});var ce={};ce.sdkType=i.sdkType||"javascript",ce.sdkVersion=i.sdkVersion||"0.5.3",ce.platform=i.platform||((E=N)===null||E===void 0||(E=E.platform)===null||E===void 0?void 0:E.type)||"",i.browserUserAgent=="null"?ce.browserUserAgent=void 0:ce.browserUserAgent=N,i.deviceUserAgent&&(ce.deviceUserAgent=i.deviceUserAgent),this._deviceInfo=ce}},{key:"initMeeting",value:function(i){var E,M=i.meetingId,N=i.customCameraVideoTrack,re=N===void 0?void 0:N,ce=i.customMicrophoneAudioTrack,de=ce===void 0?void 0:ce,he=i.autoConsume,me=he===void 0?!0:he,ve=i.preferredProtocol,Ve=i.mode,Be=i.multiStream,Ut=Be===void 0?!0:Be,vt=i.participantId,lt=i.name,ft=i.translationLanguage,mt=i.speakingLanguage,lr=i.micEnabled,dt=i.webcamEnabled,Bt=i.maxResolution,Ir=i.metaData,ya=i.chatEnabled,Ot=i.useSpartialLayerAnalytics,xr=i.signalingBaseUrl,Ea=i.defaultCamera,da=i.debugMode,wa=da===void 0?!0:da;if(!M)throw new Error("'meetingId' is empty, please verify it or generate new meetingId using the API.");var Wr=vt?vt.toString():V()({length:8}).toLowerCase(),yn=lt||V()({length:6}).toLowerCase();switch(this._deviceInfo||this.analytics(),typeof ve!="string"&&(ve="UDP_OVER_TCP"),(E=ve)===null||E===void 0?void 0:E.toUpperCase()){case"UDP_ONLY":case"UDP_OVER_TCP":case"TCP_ONLY":ve=ve.toUpperCase();break;default:ve="UDP_OVER_TCP";break}if(Ve||(Ve=ha.nI.SEND_AND_RECV),Ve!==ha.nI.SEND_AND_RECV&&Ve!==ha.nI.SIGNALLING_ONLY&&Ve!==ha.nI.RECV_ONLY&&Ve!==ha.nI.VIEWER&&Ve!==ha.nI.CONFERENCE)throw new Error('"mode" can only be either '.concat(ha.nI.SEND_AND_RECV," or ").concat(ha.nI.SIGNALLING_ONLY," or ").concat(ha.nI.RECV_ONLY," "));if(Ir!=null&&(0,x.A)(Ir)!="object")throw new Error('"metaData" can only be object.');var Mn=this._deviceInfo.sdkType==="react-native",Bn=Mn?Ea?Ea==="front"?1:0:re?re.getVideoTracks()[0].getConstraints().facingMode==="user"?1:0:Mn?1:0:0,Ja=new Sr.default({roomId:M,peerId:Wr,secret:this.apiKey,device:"unknown",displayName:yn,translationLanguage:ft,speakingLanguage:mt,mode:Ve,useSimulcast:Ut,produce:!0,consume:!0,datachannel:ya!==!1,micEnabled:lr!==!1,webcamEnabled:dt!==!1,maxResolution:Bt||"hd",useSpartialLayerAnalytics:Ot,_deviceInfo:this._deviceInfo,customCameraVideoTrack:re,customMicrophoneAudioTrack:de,autoConsume:me,preferredProtocol:ve,signalingBaseUrl:xr,metaData:Ir,defaultCameraIndex:Bn,defaultCamera:Ea,debugMode:wa,keyProvider:this.keyProvider});rt.roomClient=Ja;var bi=new Ei({id:Wr,displayName:yn,local:!0,mode:Ve,metaData:Ir});return new To(M,bi,Ja)}},{key:"createCameraVideoTrack",value:(function(){var p=(0,C.A)(n().mark(function E(M){var N,re,ce,de,he,me,ve,Ve,Be,Ut,vt,lt,ft,mt,lr,dt,Bt,Ir,ya,Ot,xr,Ea,da,wa;return n().wrap(function(Wr){for(;;)switch(Wr.prev=Wr.next){case 0:if(N=M.cameraId,re=N===void 0?void 0:N,ce=M.encoderConfig,de=ce===void 0?void 0:ce,he=M.facingMode,me=he===void 0?void 0:he,ve=M.optimizationMode,Ve=ve===void 0?void 0:ve,Be=M.multiStream,Ut=Be===void 0?!0:Be,vt=M.bitrateMode,lt=vt===void 0?Tu.x.BALANCED:vt,ft=M.maxLayer,mt=ft===void 0?3:ft,!re){Wr.next=2;break}return Wr.next=1,this.getCameras();case 1:lr=Wr.sent,lr&&(dt=lr.some(function(yn){return yn.deviceId}),dt&&(Bt=lr.some(function(yn){return yn.deviceId===re}),Bt||console.error("No camera device found for the given cameraId, please check the passed cameraId. The default camera will be used instead.")));case 2:return Wr.prev=2,Ir=de?Ai.$.videoProfiles[de]:Ai.$.videoProfiles.h720p_w1280p,ya={video:{deviceId:re?{exact:re}:void 0,facingMode:me||void 0,width:Ir.width,height:Ir.height,frameRate:Ir.frameRate}},Wr.next=3,(0,el.lp)(ya);case 3:return Ot=Wr.sent,Ve&&(Ot.contentHint=Ve),Ot.encoderConfig=de||"h720p_w1280p",Ot.contentHint=Ve||"",Ot.multiStream=Ut,Ot.cameraId=re,Ot.bitrateMode=lt,Ot.maxLayer=Number.isInteger(mt)&&mt>0&&mt<=3?mt:3,Wr.abrupt("return",Ot);case 4:if(Wr.prev=4,da=Wr.catch(2),da.name!=="SecurityError"){Wr.next=5;break}xr=ea.q.ERROR_RN_CAMERA_ACCESS_DENIED_OR_DISMISSED.message,Wr.next=13;break;case 5:if(da.name!=="DOMException"){Wr.next=6;break}xr=ea.q.ERROR_RN_CAMERA_NOT_FOUND.message,Wr.next=13;break;case 6:if(!(da instanceof DOMException)){Wr.next=12;break}wa=da.name,Wr.next=wa==="NotAllowedError"?7:wa==="NotReadableError"?8:wa==="NotFoundError"?9:10;break;case 7:return xr=El(da,"video"),Wr.abrupt("continue",11);case 8:return xr=ll(da,"video"),Wr.abrupt("continue",11);case 9:return xr=ea.q.ERROR_CAMERA_NOT_FOUND.message,navigator&&navigator.userAgent&&navigator.userAgent.indexOf("Firefox")!=-1&&(xr=ea.q.ERROR_CAMERA_PERMISSION_DENIED_BY_OS.message),Wr.abrupt("continue",11);case 10:return xr=da.message,Wr.abrupt("continue",11);case 11:Wr.next=13;break;case 12:da.message=="getUserMedia is not implemented in this browser"?(Ea=ea.q.ERROR_CAMERA_ACCESS_UNAVAILABLE,xr=Ea.message):xr=da.message;case 13:return console.error("An error occurred in creating video track, ".concat(xr)),Wr.abrupt("return",null);case 14:case"end":return Wr.stop()}},E,this,[[2,4]])}));function i(E){return p.apply(this,arguments)}return i})()},{key:"createScreenShareVideoTrack",value:(function(){var p=(0,C.A)(n().mark(function E(M){var N,re,ce,de,he,me,ve,Ve,Be,Ut,vt;return n().wrap(function(lt){for(;;)switch(lt.prev=lt.next){case 0:return N=M.encoderConfig,re=N===void 0?void 0:N,ce=M.optimizationMode,de=ce===void 0?void 0:ce,he=M.withAudio,me=he===void 0?"enable":he,ve=M.multiStream,Ve=ve===void 0?!1:ve,Be=re?Ai.$.screenShareProfiles[re]:Ai.$.screenShareProfiles.h720p_15fps,Ut={audio:me==="enable",video:{width:Be.resolution.width,height:Be.resolution.height,frameRate:Be.frameRate}},lt.next=1,(0,el.Zu)(Ut);case 1:return vt=lt.sent,de&&(vt.contentHint=de),vt.multiStream=Ve,lt.abrupt("return",vt);case 2:case"end":return lt.stop()}},E)}));function i(E){return p.apply(this,arguments)}return i})()},{key:"createMicrophoneAudioTrack",value:(function(){var p=(0,C.A)(n().mark(function E(M){var N,re,ce,de,he,me,ve,Ve,Be,Ut,vt,lt,ft,mt,lr;return n().wrap(function(dt){for(;;)switch(dt.prev=dt.next){case 0:if(N=M.noiseConfig,re=N===void 0?void 0:N,ce=M.encoderConfig,de=ce===void 0?void 0:ce,he=M.microphoneId,me=he===void 0?void 0:he,!me){dt.next=2;break}return dt.next=1,this.getMicrophones();case 1:ve=dt.sent,ve&&ve.some(function(Bt){return Bt.deviceId})&&(Ve=ve.some(function(Bt){return Bt.deviceId===me}),Ve||console.error("No microphone device found for the given microphoneId, please check the passed microphoneId. The default microphone will be used instead."));case 2:return dt.prev=2,Be=de?Ai.$.audioProfiles[de]:Ai.$.audioProfiles.speech_standard,Ut={audio:{deviceId:me?{exact:me}:void 0,sampleRate:Be.sampleRate,echoCancellation:re?re&&re.acousticEchoCancellation:Be.echoCancellation,autoGainControl:re?re&&re.autoGainControl:Be.autoGainControl,noiseSuppression:re?re&&re.noiseSuppression:Be.noiseSuppression,channelCount:Be.channelCount}},dt.next=3,(0,el.lp)(Ut);case 3:return vt=dt.sent,vt.encoderConfig=de||"speech_standard",vt.microphoneId=me,dt.abrupt("return",vt);case 4:if(dt.prev=4,mt=dt.catch(2),mt.name!=="SecurityError"){dt.next=5;break}lt=ea.q.ERROR_RN_MIC_ACCESS_DENIED_OR_DISMISSED.message,dt.next=13;break;case 5:if(mt.name!=="DOMException"){dt.next=6;break}lt=ea.q.ERROR_RN_MIC_NOT_FOUND.message,dt.next=13;break;case 6:if(!(mt instanceof DOMException)){dt.next=12;break}lr=mt.name,dt.next=lr==="NotAllowedError"?7:lr==="NotReadableError"?8:lr==="NotFoundError"?9:10;break;case 7:return lt=El(mt,"audio"),dt.abrupt("continue",11);case 8:return lt=ll(mt,"audio"),dt.abrupt("continue",11);case 9:return lt=ea.q.ERROR_MICROPHONE_NOT_FOUND.message,navigator&&navigator.userAgent&&navigator.userAgent.indexOf("Firefox")!=-1&&(lt=ea.q.ERROR_MICROPHONE_PERMISSION_DENIED_BY_OS.message),dt.abrupt("continue",11);case 10:return lt=mt.message,dt.abrupt("continue",11);case 11:dt.next=13;break;case 12:mt.message=="getUserMedia is not implemented in this browser"?(ft=ea.q.ERROR_MICROPHONE_ACCESS_UNAVAILABLE,lt=ft.message):lt=mt.message;case 13:return console.error("An error occurred in creating audio track, ".concat(lt)),dt.abrupt("return",null);case 14:case"end":return dt.stop()}},E,this,[[2,4]])}));function i(E){return p.apply(this,arguments)}return i})()}])})();(0,J.A)(Cc,"devices",[]),(0,J.A)(Cc,"eventEmitter",new Rr),(0,J.A)(Cc,"Constants",{errors:ea.s,recordingEvents:vc,livestreamEvents:Zc,characterState:Li,characterMode:Jn,hlsEvents:fl.V,transcriptionEvents:ml,translationEvents:gc,modes:ha.nI,permission:Zr,reliabilityMode:Ru.y,leaveReason:is.E,BitrateMode:Tu.x});function El(D,p){var i={};return D.message==="Permission denied"||D.message==="Permission dismissed"?i=p==="video"?ea.q.ERROR_CAMERA_ACCESS_DENIED_OR_DISMISSED:ea.q.ERROR_MICROPHONE_ACCESS_DENIED_OR_DISMISSED:D.message.includes("The request is not allowed by the user agent")?i=p==="video"?ea.q.ERROR_CAMERA_PERMISSION_OR_AUTOPLAY_ISSUE:ea.q.ERROR_MICROPHONE_ACCESS_DENIED_OR_DISMISSED:D.message==="Permission denied by system"?i=p==="video"?ea.q.ERROR_CAMERA_PERMISSION_DENIED_BY_OS:ea.q.ERROR_MICROPHONE_PERMISSION_DENIED_BY_OS:i=p==="video"?ea.q.ERROR_GET_VIDEO_MEDIA_PERMISSION_DENIED:ea.q.ERROR_GET_AUDIO_MEDIA_PERMISSION_DENIED,i.message}function ll(D,p){var i={};return D.message==="Device in use"?i=p==="video"?ea.q.ERROR_CAMERA_IN_USE:ea.q.ERROR_MICROPHONE_IN_USE:i=p==="video"?ea.q.ERROR_VIDEO_SOURCE_INITIATION_FAILED:ea.q.ERROR_MICROPHONE_IN_USE,i.message}var Cu=Cc}),3128:(function(oe,Y,S){(function(x,C,T){oe.exports=C(S(9021),S(754),S(4636),S(9506),S(7165))})(this,function(x){return(function(){var C=x,T=C.lib,b=T.BlockCipher,J=C.algo;const w=16,n=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],f=[[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946],[1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055],[3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504],[976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462]];var U={pbox:[],sbox:[]};function q(j,y){let d=y>>24&255,R=y>>16&255,m=y>>8&255,P=y&255,H=j.sbox[0][d]+j.sbox[1][R];return H=H^j.sbox[2][m],H=H+j.sbox[3][P],H}function g(j,y,d){let R=y,m=d,P;for(let H=0;H<w;++H)R=R^j.pbox[H],m=q(j,R)^m,P=R,R=m,m=P;return P=R,R=m,m=P,m=m^j.pbox[w],R=R^j.pbox[w+1],{left:R,right:m}}function h(j,y,d){let R=y,m=d,P;for(let H=w+1;H>1;--H)R=R^j.pbox[H],m=q(j,R)^m,P=R,R=m,m=P;return P=R,R=m,m=P,m=m^j.pbox[1],R=R^j.pbox[0],{left:R,right:m}}function k(j,y,d){for(let B=0;B<4;B++){j.sbox[B]=[];for(let $=0;$<256;$++)j.sbox[B][$]=f[B][$]}let R=0;for(let B=0;B<w+2;B++)j.pbox[B]=n[B]^y[R],R++,R>=d&&(R=0);let m=0,P=0,H=0;for(let B=0;B<w+2;B+=2)H=g(j,m,P),m=H.left,P=H.right,j.pbox[B]=m,j.pbox[B+1]=P;for(let B=0;B<4;B++)for(let $=0;$<256;$+=2)H=g(j,m,P),m=H.left,P=H.right,j.sbox[B][$]=m,j.sbox[B][$+1]=P;return!0}var W=J.Blowfish=b.extend({_doReset:function(){if(this._keyPriorReset!==this._key){var j=this._keyPriorReset=this._key,y=j.words,d=j.sigBytes/4;k(U,y,d)}},encryptBlock:function(j,y){var d=g(U,j[y],j[y+1]);j[y]=d.left,j[y+1]=d.right},decryptBlock:function(j,y){var d=h(U,j[y],j[y+1]);j[y]=d.left,j[y+1]=d.right},blockSize:64/32,keySize:128/32,ivSize:64/32});C.Blowfish=b._createHelper(W)})(),x.Blowfish})}),3145:((oe,Y,S)=>{S.d(Y,{A:()=>x});function x(C,T){(T==null||T>C.length)&&(T=C.length);for(var b=0,J=Array(T);b<T;b++)J[b]=C[b];return J}}),3200:((oe,Y,S)=>{Object.defineProperty(Y,"__esModule",{value:!0}),Y.ProfileLevelId=Y.Level=Y.Profile=void 0,Y.parseProfileLevelId=g,Y.profileLevelIdToString=h,Y.profileToString=k,Y.levelToString=W,Y.parseSdpProfileLevelId=j,Y.isSameProfile=y,Y.isSameProfileAndLevel=d,Y.generateProfileLevelIdStringForAnswer=R,Y.supportedLevel=m;const x=S(3582),C=new x.Logger;var T;(function(L){L[L.ConstrainedBaseline=1]="ConstrainedBaseline",L[L.Baseline=2]="Baseline",L[L.Main=3]="Main",L[L.ConstrainedHigh=4]="ConstrainedHigh",L[L.High=5]="High",L[L.PredictiveHigh444=6]="PredictiveHigh444"})(T||(Y.Profile=T={}));var b;(function(L){L[L.L1_b=0]="L1_b",L[L.L1=10]="L1",L[L.L1_1=11]="L1_1",L[L.L1_2=12]="L1_2",L[L.L1_3=13]="L1_3",L[L.L2=20]="L2",L[L.L2_1=21]="L2_1",L[L.L2_2=22]="L2_2",L[L.L3=30]="L3",L[L.L3_1=31]="L3_1",L[L.L3_2=32]="L3_2",L[L.L4=40]="L4",L[L.L4_1=41]="L4_1",L[L.L4_2=42]="L4_2",L[L.L5=50]="L5",L[L.L5_1=51]="L5_1",L[L.L5_2=52]="L5_2"})(b||(Y.Level=b={}));class J{profile;level;constructor(z,V){this.profile=z,this.level=V}}Y.ProfileLevelId=J;const w=new J(T.ConstrainedBaseline,b.L3_1);class n{mask;masked_value;constructor(z){this.mask=~P("x",z),this.masked_value=P("1",z)}isMatch(z){return this.masked_value===(z&this.mask)}}class f{profile_idc;profile_iop;profile;constructor(z,V,X){this.profile_idc=z,this.profile_iop=V,this.profile=X}}const U=[new f(66,new n("x1xx0000"),T.ConstrainedBaseline),new f(77,new n("1xxx0000"),T.ConstrainedBaseline),new f(88,new n("11xx0000"),T.ConstrainedBaseline),new f(66,new n("x0xx0000"),T.Baseline),new f(88,new n("10xx0000"),T.Baseline),new f(77,new n("0x0x0000"),T.Main),new f(100,new n("00000000"),T.High),new f(100,new n("00001100"),T.ConstrainedHigh),new f(244,new n("00000000"),T.PredictiveHigh444)],q=[{max_macroblocks_per_second:1485,max_macroblock_frame_size:99,level:b.L1},{max_macroblocks_per_second:1485,max_macroblock_frame_size:99,level:b.L1_b},{max_macroblocks_per_second:3e3,max_macroblock_frame_size:396,level:b.L1_1},{max_macroblocks_per_second:6e3,max_macroblock_frame_size:396,level:b.L1_2},{max_macroblocks_per_second:11880,max_macroblock_frame_size:396,level:b.L1_3},{max_macroblocks_per_second:11880,max_macroblock_frame_size:396,level:b.L2},{max_macroblocks_per_second:19800,max_macroblock_frame_size:792,level:b.L2_1},{max_macroblocks_per_second:20250,max_macroblock_frame_size:1620,level:b.L2_2},{max_macroblocks_per_second:40500,max_macroblock_frame_size:1620,level:b.L3},{max_macroblocks_per_second:108e3,max_macroblock_frame_size:3600,level:b.L3_1},{max_macroblocks_per_second:216e3,max_macroblock_frame_size:5120,level:b.L3_2},{max_macroblocks_per_second:245760,max_macroblock_frame_size:8192,level:b.L4},{max_macroblocks_per_second:245760,max_macroblock_frame_size:8192,level:b.L4_1},{max_macroblocks_per_second:522240,max_macroblock_frame_size:8704,level:b.L4_2},{max_macroblocks_per_second:589824,max_macroblock_frame_size:22080,level:b.L5},{max_macroblocks_per_second:983040,max_macroblock_frame_size:36864,level:b.L5_1},{max_macroblocks_per_second:2073600,max_macroblock_frame_size:36864,level:b.L5_2}];function g(L){if(typeof L!="string"||L.length!==6)return;const V=parseInt(L,16);if(V===0)return;const X=V&255,G=V>>8&255,ae=V>>16&255;let Q;switch(X){case b.L1_1:{Q=(G&16)!==0?b.L1_b:b.L1_1;break}case b.L1:case b.L1_2:case b.L1_3:case b.L2:case b.L2_1:case b.L2_2:case b.L3:case b.L3_1:case b.L3_2:case b.L4:case b.L4_1:case b.L4_2:case b.L5:case b.L5_1:case b.L5_2:{Q=X;break}default:{C.warn(`parseProfileLevelId() | unrecognized level_idc [str:${L}, level_idc:${X}]`);return}}for(const le of U)if(ae===le.profile_idc&&le.profile_iop.isMatch(G))return C.debug(`parseProfileLevelId() | result [str:${L}, profile:${le.profile}, level:${Q}]`),new J(le.profile,Q);C.warn(`parseProfileLevelId() | unrecognized profile_idc/profile_iop combination [str:${L}, profile_idc:${ae}, profile_iop:${G}]`)}function h(L){if(L.level==b.L1_b)switch(L.profile){case T.ConstrainedBaseline:return"42f00b";case T.Baseline:return"42100b";case T.Main:return"4d100b";default:{C.warn(`profileLevelIdToString() | Level 1_b not is allowed for profile ${L.profile}`);return}}let z;switch(L.profile){case T.ConstrainedBaseline:{z="42e0";break}case T.Baseline:{z="4200";break}case T.Main:{z="4d00";break}case T.ConstrainedHigh:{z="640c";break}case T.High:{z="6400";break}case T.PredictiveHigh444:{z="f400";break}default:{C.warn(`profileLevelIdToString() | unrecognized profile ${L.profile}`);return}}let V=L.level.toString(16);return V.length===1&&(V=`0${V}`),`${z}${V}`}function k(L){switch(L){case T.ConstrainedBaseline:return"ConstrainedBaseline";case T.Baseline:return"Baseline";case T.Main:return"Main";case T.ConstrainedHigh:return"ConstrainedHigh";case T.High:return"High";case T.PredictiveHigh444:return"PredictiveHigh444";default:{C.warn(`profileToString() | unrecognized profile ${L}`);return}}}function W(L){switch(L){case b.L1_b:return"1b";case b.L1:return"1";case b.L1_1:return"1.1";case b.L1_2:return"1.2";case b.L1_3:return"1.3";case b.L2:return"2";case b.L2_1:return"2.1";case b.L2_2:return"2.2";case b.L3:return"3";case b.L3_1:return"3.1";case b.L3_2:return"3.2";case b.L4:return"4";case b.L4_1:return"4.1";case b.L4_2:return"4.2";case b.L5:return"5";case b.L5_1:return"5.1";case b.L5_2:return"5.2";default:{C.warn(`levelToString() | unrecognized level ${L}`);return}}}function j(L={}){const z=L["profile-level-id"];return z?g(z):w}function y(L={},z={}){const V=j(L),X=j(z);return!!(V&&X&&V.profile===X.profile)}function d(L={},z={}){const V=j(L),X=j(z);return!!(V&&X&&V.profile===X.profile&&V.level==X.level)}function R(L={},z={}){if(!L["profile-level-id"]&&!z["profile-level-id"]){C.warn("generateProfileLevelIdStringForAnswer() | profile-level-id missing in local and remote params");return}const V=j(L),X=j(z);if(!V)throw new TypeError("invalid local_profile_level_id");if(!X)throw new TypeError("invalid remote_profile_level_id");if(V.profile!==X.profile)throw new TypeError("H264 Profile mismatch");const G=$(L)&&$(z),ae=V.level,Q=X.level,le=B(ae,Q),pe=G?ae:le;return C.debug(`generateProfileLevelIdStringForAnswer() | result [profile:${V.profile}, level:${pe}]`),h(new J(V.profile,pe))}function m(L,z){for(let X=q.length-1;X>=0;--X){const G=q[X];if(G.max_macroblock_frame_size*256<=L&&G.max_macroblocks_per_second<=z*G.max_macroblock_frame_size)return C.debug(`supportedLevel() | result [max_frame_pixel_count:${L}, max_fps:${z}, level:${G.level}]`),G.level}C.warn(`supportedLevel() | no level supported [max_frame_pixel_count:${L}, max_fps:${z}]`)}function P(L,z){return+(z[0]===L)<<7|+(z[1]===L)<<6|+(z[2]===L)<<5|+(z[3]===L)<<4|+(z[4]===L)<<3|+(z[5]===L)<<2|+(z[6]===L)<<1|+(z[7]===L)<<0}function H(L,z){return L===b.L1_b?z!==b.L1&&z!==b.L1_b:z===b.L1_b?L!==b.L1:L<z}function B(L,z){return H(L,z)?L:z}function $(L={}){const z=L["level-asymmetry-allowed"];return z===!0||z===1||z==="1"}}),3240:(function(oe,Y,S){(function(x,C){oe.exports=C(S(9021))})(this,function(x){return(function(C){var T=x,b=T.lib,J=b.Base,w=b.WordArray,n=T.x64={};n.Word=J.extend({init:function(f,U){this.high=f,this.low=U}}),n.WordArray=J.extend({init:function(f,U){f=this.words=f||[],U!=C?this.sigBytes=U:this.sigBytes=f.length*8},toX32:function(){for(var f=this.words,U=f.length,q=[],g=0;g<U;g++){var h=f[g];q.push(h.high),q.push(h.low)}return w.create(q,this.sigBytes)},clone:function(){for(var f=J.clone.call(this),U=f.words=this.words.slice(0),q=U.length,g=0;g<q;g++)U[g]=U[g].clone();return f}})})(),x})}),3303:((oe,Y)=>{Object.defineProperty(Y,"__esModule",{value:!0}),Y.parse=x;const S=new RegExp("^[LS]([1-9]\\d{0,1})T([1-9]\\d{0,1})");function x(C){const T=S.exec(C??"");return T?{spatialLayers:Number(T[1]),temporalLayers:Number(T[2])}:{spatialLayers:1,temporalLayers:1}}}),3471:((oe,Y,S)=>{Object.defineProperty(Y,"__esModule",{value:!0}),Y.OfferMediaSection=Y.AnswerMediaSection=Y.MediaSection=void 0;const x=S(7363),C=S(1765);class T{_mediaObject;constructor({iceParameters:f,iceCandidates:U,dtlsParameters:q}){if(this._mediaObject={type:"",port:0,protocol:"",payloads:"",rtp:[],fmtp:[]},f&&this.setIceParameters(f),U){this._mediaObject.candidates=[];for(const g of U){const h={foundation:g.foundation,component:1,ip:g.address??g.ip,port:g.port,priority:g.priority,transport:g.protocol,type:g.type};g.tcpType&&(h.tcptype=g.tcpType),this._mediaObject.candidates.push(h)}this._mediaObject.endOfCandidates="end-of-candidates",this._mediaObject.iceOptions="renomination"}q&&this.setDtlsRole(q.role)}get mid(){return String(this._mediaObject.mid)}get closed(){return this._mediaObject.port===0}getObject(){return this._mediaObject}setIceParameters(f){this._mediaObject.iceUfrag=f.usernameFragment,this._mediaObject.icePwd=f.password}pause(){this._mediaObject.direction="inactive"}disable(){this.pause(),delete this._mediaObject.ext,delete this._mediaObject.ssrcs,delete this._mediaObject.ssrcGroups,delete this._mediaObject.simulcast,delete this._mediaObject.simulcast_03,delete this._mediaObject.rids,delete this._mediaObject.extmapAllowMixed}close(){this.disable(),this._mediaObject.port=0}}Y.MediaSection=T;class b extends T{constructor({iceParameters:f,iceCandidates:U,dtlsParameters:q,sctpParameters:g,plainRtpParameters:h,offerMediaObject:k,offerRtpParameters:W,answerRtpParameters:j,codecOptions:y}){switch(super({iceParameters:f,iceCandidates:U,dtlsParameters:q}),this._mediaObject.mid=String(k.mid),this._mediaObject.type=k.type,this._mediaObject.protocol=k.protocol,h?(this._mediaObject.connection={ip:h.ip,version:h.ipVersion},this._mediaObject.port=h.port):(this._mediaObject.connection={ip:"127.0.0.1",version:4},this._mediaObject.port=7),k.type){case"audio":case"video":{this._mediaObject.direction="recvonly",this._mediaObject.rtp=[],this._mediaObject.rtcpFb=[],this._mediaObject.fmtp=[];for(const d of j.codecs){const R={payload:d.payloadType,codec:w(d),rate:d.clockRate};d.channels>1&&(R.encoding=d.channels),this._mediaObject.rtp.push(R);const m=C.clone(d.parameters)??{};let P=C.clone(d.rtcpFeedback)??[];if(y){const{opusStereo:B,opusFec:$,opusDtx:L,opusMaxPlaybackRate:z,opusMaxAverageBitrate:V,opusPtime:X,opusNack:G,videoGoogleStartBitrate:ae,videoGoogleMaxBitrate:Q,videoGoogleMinBitrate:le}=y,pe=W.codecs.find(ue=>ue.payloadType===d.payloadType);switch(d.mimeType.toLowerCase()){case"audio/opus":case"audio/multiopus":{B!==void 0&&(pe.parameters["sprop-stereo"]=B?1:0,m.stereo=B?1:0),$!==void 0&&(pe.parameters.useinbandfec=$?1:0,m.useinbandfec=$?1:0),L!==void 0&&(pe.parameters.usedtx=L?1:0,m.usedtx=L?1:0),z!==void 0&&(m.maxplaybackrate=z),V!==void 0&&(m.maxaveragebitrate=V),X!==void 0&&(pe.parameters.ptime=X,m.ptime=X),G||(pe.rtcpFeedback=pe.rtcpFeedback.filter(ue=>ue.type!=="nack"||ue.parameter),P=P.filter(ue=>ue.type!=="nack"||ue.parameter));break}case"video/vp8":case"video/vp9":case"video/h264":case"video/h265":case"video/av1":{ae!==void 0&&(m["x-google-start-bitrate"]=ae),Q!==void 0&&(m["x-google-max-bitrate"]=Q),le!==void 0&&(m["x-google-min-bitrate"]=le);break}}}const H={payload:d.payloadType,config:""};for(const B of Object.keys(m))H.config&&(H.config+=";"),H.config+=`${B}=${m[B]}`;H.config&&this._mediaObject.fmtp.push(H);for(const B of P)this._mediaObject.rtcpFb.push({payload:d.payloadType,type:B.type,subtype:B.parameter})}this._mediaObject.payloads=j.codecs.map(d=>d.payloadType).join(" "),this._mediaObject.ext=[];for(const d of j.headerExtensions)(k.ext??[]).some(m=>m.uri===d.uri)&&this._mediaObject.ext.push({uri:d.uri,value:d.id});if(k.extmapAllowMixed==="extmap-allow-mixed"&&(this._mediaObject.extmapAllowMixed="extmap-allow-mixed"),k.simulcast){this._mediaObject.simulcast={dir1:"recv",list1:k.simulcast.list1},this._mediaObject.rids=[];for(const d of k.rids??[])d.direction==="send"&&this._mediaObject.rids.push({id:d.id,direction:"recv"})}else if(k.simulcast_03){this._mediaObject.simulcast_03={value:k.simulcast_03.value.replace(/send/g,"recv")},this._mediaObject.rids=[];for(const d of k.rids??[])d.direction==="send"&&this._mediaObject.rids.push({id:d.id,direction:"recv"})}this._mediaObject.rtcpMux="rtcp-mux",this._mediaObject.rtcpRsize="rtcp-rsize";break}case"application":{typeof k.sctpPort=="number"?(this._mediaObject.payloads="webrtc-datachannel",this._mediaObject.sctpPort=g.port,this._mediaObject.maxMessageSize=g.maxMessageSize):k.sctpmap&&(this._mediaObject.payloads=String(g.port),this._mediaObject.sctpmap={app:"webrtc-datachannel",sctpmapNumber:g.port,maxMessageSize:g.maxMessageSize});break}}}setDtlsRole(f){switch(f){case"client":{this._mediaObject.setup="active";break}case"server":{this._mediaObject.setup="passive";break}case"auto":{this._mediaObject.setup="actpass";break}}}resume(){this._mediaObject.direction="recvonly"}muxSimulcastStreams(f){if(!this._mediaObject.simulcast?.list1)return;const U={};for(const h of f)h.rid&&(U[h.rid]=h);const q=this._mediaObject.simulcast.list1,g=x.parseSimulcastStreamList(q);for(const h of g)for(const k of h)k.paused=!U[k.scid]?.active;this._mediaObject.simulcast.list1=g.map(h=>h.map(k=>`${k.paused?"~":""}${k.scid}`).join(",")).join(";")}}Y.AnswerMediaSection=b;class J extends T{constructor({iceParameters:f,iceCandidates:U,dtlsParameters:q,sctpParameters:g,plainRtpParameters:h,mid:k,kind:W,offerRtpParameters:j,streamId:y,trackId:d}){switch(super({iceParameters:f,iceCandidates:U,dtlsParameters:q}),this._mediaObject.mid=String(k),this._mediaObject.type=W,h?(this._mediaObject.connection={ip:h.ip,version:h.ipVersion},this._mediaObject.protocol="RTP/AVP",this._mediaObject.port=h.port):(this._mediaObject.connection={ip:"127.0.0.1",version:4},g?this._mediaObject.protocol="UDP/DTLS/SCTP":this._mediaObject.protocol="UDP/TLS/RTP/SAVPF",this._mediaObject.port=7),this._mediaObject.extmapAllowMixed="extmap-allow-mixed",W){case"audio":case"video":{this._mediaObject.direction="sendonly",this._mediaObject.rtp=[],this._mediaObject.rtcpFb=[],this._mediaObject.fmtp=[],this._mediaObject.msid=`${y??"-"} ${d}`;for(const H of j.codecs){const B={payload:H.payloadType,codec:w(H),rate:H.clockRate};H.channels>1&&(B.encoding=H.channels),this._mediaObject.rtp.push(B);const $={payload:H.payloadType,config:""};for(const L of Object.keys(H.parameters??{}))$.config&&($.config+=";"),$.config+=`${L}=${H.parameters[L]}`;$.config&&this._mediaObject.fmtp.push($);for(const L of H.rtcpFeedback)this._mediaObject.rtcpFb.push({payload:H.payloadType,type:L.type,subtype:L.parameter})}this._mediaObject.payloads=j.codecs.map(H=>H.payloadType).join(" "),this._mediaObject.ext=[];for(const H of j.headerExtensions)this._mediaObject.ext.push({uri:H.uri,value:H.id});this._mediaObject.rtcpMux="rtcp-mux",this._mediaObject.rtcpRsize="rtcp-rsize";const R=j.encodings[0],m=R.ssrc,P=R.rtx?.ssrc;this._mediaObject.ssrcs=[],this._mediaObject.ssrcGroups=[],m&&j.rtcp.cname&&this._mediaObject.ssrcs.push({id:m,attribute:"cname",value:j.rtcp.cname}),P&&(j.rtcp.cname&&this._mediaObject.ssrcs.push({id:P,attribute:"cname",value:j.rtcp.cname}),m&&this._mediaObject.ssrcGroups.push({semantics:"FID",ssrcs:`${m} ${P}`}));break}case"application":{this._mediaObject.payloads="webrtc-datachannel",this._mediaObject.sctpPort=g.port,this._mediaObject.maxMessageSize=g.maxMessageSize;break}}}setDtlsRole(f){this._mediaObject.setup="actpass"}resume(){this._mediaObject.direction="sendonly"}}Y.OfferMediaSection=J;function w(n){const U=new RegExp("^(audio|video)/(.+)","i").exec(n.mimeType);if(!U)throw new TypeError("invalid codec.mimeType");return U[2]}}),3518:((oe,Y,S)=>{Object.defineProperty(Y,"__esModule",{value:!0}),Y.Consumer=void 0;const x=S(2994),C=S(3953),T=S(4893),b=new x.Logger("Consumer");class J extends C.EnhancedEventEmitter{_id;_localId;_producerId;_closed=!1;_rtpReceiver;_track;_rtpParameters;_paused;_appData;_observer=new C.EnhancedEventEmitter;constructor({id:n,localId:f,producerId:U,rtpReceiver:q,track:g,rtpParameters:h,appData:k}){super(),b.debug("constructor()"),this._id=n,this._localId=f,this._producerId=U,this._rtpReceiver=q,this._track=g,this._rtpParameters=h,this._paused=!g.enabled,this._appData=k??{},this.onTrackEnded=this.onTrackEnded.bind(this),this.handleTrack()}get id(){return this._id}get localId(){return this._localId}get producerId(){return this._producerId}get closed(){return this._closed}get kind(){return this._track.kind}get rtpReceiver(){return this._rtpReceiver}get track(){return this._track}get rtpParameters(){return this._rtpParameters}get paused(){return this._paused}get appData(){return this._appData}set appData(n){this._appData=n}get observer(){return this._observer}close(){this._closed||(b.debug("close()"),this._closed=!0,this.destroyTrack(),this.emit("@close"),this._observer.safeEmit("close"),super.close(),this._observer.close())}transportClosed(){this._closed||(b.debug("transportClosed()"),this._closed=!0,this.destroyTrack(),this.safeEmit("transportclose"),this._observer.safeEmit("close"))}async getStats(){if(this._closed)throw new T.InvalidStateError("closed");return new Promise((n,f)=>{this.safeEmit("@getstats",n,f)})}pause(){if(b.debug("pause()"),this._closed){b.error("pause() | Consumer closed");return}if(this._paused){b.debug("pause() | Consumer is already paused");return}this._paused=!0,this._track.enabled=!1,this.emit("@pause"),this._observer.safeEmit("pause")}resume(){if(b.debug("resume()"),this._closed){b.error("resume() | Consumer closed");return}if(!this._paused){b.debug("resume() | Consumer is already resumed");return}this._paused=!1,this._track.enabled=!0,this.emit("@resume"),this._observer.safeEmit("resume")}onTrackEnded(){b.debug('track "ended" event'),this.safeEmit("trackended"),this._observer.safeEmit("trackended")}handleTrack(){this._track.addEventListener("ended",this.onTrackEnded)}destroyTrack(){try{this._track.removeEventListener("ended",this.onTrackEnded),this._track.stop()}catch{}}}Y.Consumer=J}),3582:((oe,Y,S)=>{Object.defineProperty(Y,"__esModule",{value:!0}),Y.Logger=void 0;const x=S(7833),C="h264-profile-level-id";class T{_debug;_warn;_error;constructor(J){J?(this._debug=(0,x.default)(`${C}:${J}`),this._warn=(0,x.default)(`${C}:WARN:${J}`),this._error=(0,x.default)(`${C}:ERROR:${J}`)):(this._debug=(0,x.default)(C),this._warn=(0,x.default)(`${C}:WARN`),this._error=(0,x.default)(`${C}:ERROR`)),this._debug.log=console.info.bind(console),this._warn.log=console.warn.bind(console),this._error.log=console.error.bind(console)}get debug(){return this._debug}get warn(){return this._warn}get error(){return this._error}}Y.Logger=T}),3662:((oe,Y,S)=>{S.d(Y,{A:()=>x});function x(C,T){return x=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(b,J){return b.__proto__=J,b},x(C,T)}}),3738:(oe=>{function Y(S){"@babel/helpers - typeof";return oe.exports=Y=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(x){return typeof x}:function(x){return x&&typeof Symbol=="function"&&x.constructor===Symbol&&x!==Symbol.prototype?"symbol":typeof x},oe.exports.__esModule=!0,oe.exports.default=oe.exports,Y(S)}oe.exports=Y,oe.exports.__esModule=!0,oe.exports.default=oe.exports}),3785:((oe,Y)=>{Object.defineProperty(Y,"__esModule",{value:!0}),Y.clone=S;function S(x){if(x!==void 0)return Number.isNaN(x)?NaN:typeof structuredClone=="function"?structuredClone(x):JSON.parse(JSON.stringify(x))}}),3797:(function(oe,Y,S){(function(x,C,T){oe.exports=C(S(9021),S(7165))})(this,function(x){return x.mode.OFB=(function(){var C=x.lib.BlockCipherMode.extend(),T=C.Encryptor=C.extend({processBlock:function(b,J){var w=this._cipher,n=w.blockSize,f=this._iv,U=this._keystream;f&&(U=this._keystream=f.slice(0),this._iv=void 0),w.encryptBlock(U,0);for(var q=0;q<n;q++)b[J+q]^=U[q]}});return C.Decryptor=T,C})(),x.mode.OFB})}),3804:((oe,Y,S)=>{var x=S(5602),C=/%[sdv%]/g,T=function(n){var f=1,U=arguments,q=U.length;return n.replace(C,function(g){if(f>=q)return g;var h=U[f];switch(f+=1,g){case"%%":return"%";case"%s":return String(h);case"%d":return Number(h);case"%v":return""}})},b=function(n,f,U){var q=f.format instanceof Function?f.format(f.push?U:U[f.name]):f.format,g=[n+"="+q];if(f.names)for(var h=0;h<f.names.length;h+=1){var k=f.names[h];f.name?g.push(U[f.name][k]):g.push(U[f.names[h]])}else g.push(U[f.name]);return T.apply(null,g)},J=["v","o","s","i","u","e","p","c","b","t","r","z","a"],w=["i","c","b","a"];oe.exports=function(n,f){f=f||{},n.version==null&&(n.version=0),n.name==null&&(n.name=" "),n.media.forEach(function(h){h.payloads==null&&(h.payloads="")});var U=f.outerOrder||J,q=f.innerOrder||w,g=[];return U.forEach(function(h){x[h].forEach(function(k){k.name in n&&n[k.name]!=null?g.push(b(h,k,n)):k.push in n&&n[k.push]!=null&&n[k.push].forEach(function(W){g.push(b(h,k,W))})})}),n.media.forEach(function(h){g.push(b("m",x.m[0],h)),q.forEach(function(k){x[k].forEach(function(W){W.name in h&&h[W.name]!=null?g.push(b(k,W,h)):W.push in h&&h[W.push]!=null&&h[W.push].forEach(function(j){g.push(b(k,W,j))})})})}),g.join(`\r
`)+`\r
`}}),3953:((oe,Y,S)=>{Object.defineProperty(Y,"__esModule",{value:!0}),Y.EnhancedEventEmitter=void 0;const x=S(5528),C=S(2994),T=new C.Logger("EnhancedEventEmitter");class b extends x.EventEmitter{constructor(){super(),this.setMaxListeners(1/0)}close(){super.removeAllListeners()}emit(w,...n){return super.emit(w,...n)}safeEmit(w,...n){try{return super.emit(w,...n)}catch(f){T.error("safeEmit() | event listener threw an error [eventName:%s]:%o",w,f);try{super.emit("listenererror",w,f)}catch{}return!!super.listenerCount(w)}}on(w,n){return super.on(w,n),this}off(w,n){return super.off(w,n),this}addListener(w,n){return super.on(w,n),this}prependListener(w,n){return super.prependListener(w,n),this}once(w,n){return super.once(w,n),this}prependOnceListener(w,n){return super.prependOnceListener(w,n),this}removeListener(w,n){return super.off(w,n),this}removeAllListeners(w){return super.removeAllListeners(w),this}listenerCount(w){return super.listenerCount(w)}listeners(w){return super.listeners(w)}rawListeners(w){return super.rawListeners(w)}}Y.EnhancedEventEmitter=b}),3954:((oe,Y,S)=>{S.d(Y,{A:()=>x});function x(C){return x=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(T){return T.__proto__||Object.getPrototypeOf(T)},x(C)}}),4253:((oe,Y)=>{Object.defineProperty(Y,"__esModule",{value:!0}),Y.AwaitQueueRemovedTaskError=Y.AwaitQueueStoppedError=void 0;class S extends Error{constructor(T){super(T??"queue stopped"),this.name="AwaitQueueStoppedError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,S)}}Y.AwaitQueueStoppedError=S;class x extends Error{constructor(T){super(T??"queue task removed"),this.name="AwaitQueueRemovedTaskError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,x)}}Y.AwaitQueueRemovedTaskError=x}),4256:((oe,Y)=>{Object.defineProperty(Y,"__esModule",{value:!0}),Y.addNackSupportForOpus=S;function S(x){for(const C of x.codecs??[])(C.mimeType.toLowerCase()==="audio/opus"||C.mimeType.toLowerCase()==="audio/multiopus")&&!C.rtcpFeedback?.some(T=>T.type==="nack"&&!T.parameter)&&(C.rtcpFeedback||(C.rtcpFeedback=[]),C.rtcpFeedback.push({type:"nack"}))}}),4373:(oe=>{function Y(S){var x=Object(S),C=[];for(var T in x)C.unshift(T);return function b(){for(;C.length;)if((T=C.pop())in x)return b.value=T,b.done=!1,b;return b.done=!0,b}}oe.exports=Y,oe.exports.__esModule=!0,oe.exports.default=oe.exports}),4467:((oe,Y,S)=>{S.d(Y,{A:()=>C});var x=S(816);function C(T,b,J){return(b=(0,x.A)(b))in T?Object.defineProperty(T,b,{value:J,enumerable:!0,configurable:!0,writable:!0}):T[b]=J,T}}),4633:((oe,Y,S)=>{var x=S(5172),C=S(6993),T=S(5869),b=S(887),J=S(1791),w=S(4373),n=S(579);function f(){var U=C(),q=U.m(f),g=(Object.getPrototypeOf?Object.getPrototypeOf(q):q.__proto__).constructor;function h(j){var y=typeof j=="function"&&j.constructor;return!!y&&(y===g||(y.displayName||y.name)==="GeneratorFunction")}var k={throw:1,return:2,break:3,continue:3};function W(j){var y,d;return function(R){y||(y={stop:function(){return d(R.a,2)},catch:function(){return R.v},abrupt:function(P,H){return d(R.a,k[P],H)},delegateYield:function(P,H,B){return y.resultName=H,d(R.d,n(P),B)},finish:function(P){return d(R.f,P)}},d=function(P,H,B){R.p=y.prev,R.n=y.next;try{return P(H,B)}finally{y.next=R.n}}),y.resultName&&(y[y.resultName]=R.v,y.resultName=void 0),y.sent=R.v,y.next=R.n;try{return j.call(this,y)}finally{R.p=y.prev,R.n=y.next}}}return(oe.exports=f=function(){return{wrap:function(d,R,m,P){return U.w(W(d),R,m,P&&P.reverse())},isGeneratorFunction:h,mark:U.m,awrap:function(d,R){return new x(d,R)},AsyncIterator:J,async:function(d,R,m,P,H){return(h(R)?b:T)(W(d),R,m,P,H)},keys:w,values:n}},oe.exports.__esModule=!0,oe.exports.default=oe.exports)()}oe.exports=f,oe.exports.__esModule=!0,oe.exports.default=oe.exports}),4636:(function(oe,Y,S){(function(x,C){oe.exports=C(S(9021))})(this,function(x){return(function(C){var T=x,b=T.lib,J=b.WordArray,w=b.Hasher,n=T.algo,f=[];(function(){for(var W=0;W<64;W++)f[W]=C.abs(C.sin(W+1))*4294967296|0})();var U=n.MD5=w.extend({_doReset:function(){this._hash=new J.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(W,j){for(var y=0;y<16;y++){var d=j+y,R=W[d];W[d]=(R<<8|R>>>24)&16711935|(R<<24|R>>>8)&4278255360}var m=this._hash.words,P=W[j+0],H=W[j+1],B=W[j+2],$=W[j+3],L=W[j+4],z=W[j+5],V=W[j+6],X=W[j+7],G=W[j+8],ae=W[j+9],Q=W[j+10],le=W[j+11],pe=W[j+12],ue=W[j+13],ne=W[j+14],Oe=W[j+15],ye=m[0],_e=m[1],Se=m[2],ze=m[3];ye=q(ye,_e,Se,ze,P,7,f[0]),ze=q(ze,ye,_e,Se,H,12,f[1]),Se=q(Se,ze,ye,_e,B,17,f[2]),_e=q(_e,Se,ze,ye,$,22,f[3]),ye=q(ye,_e,Se,ze,L,7,f[4]),ze=q(ze,ye,_e,Se,z,12,f[5]),Se=q(Se,ze,ye,_e,V,17,f[6]),_e=q(_e,Se,ze,ye,X,22,f[7]),ye=q(ye,_e,Se,ze,G,7,f[8]),ze=q(ze,ye,_e,Se,ae,12,f[9]),Se=q(Se,ze,ye,_e,Q,17,f[10]),_e=q(_e,Se,ze,ye,le,22,f[11]),ye=q(ye,_e,Se,ze,pe,7,f[12]),ze=q(ze,ye,_e,Se,ue,12,f[13]),Se=q(Se,ze,ye,_e,ne,17,f[14]),_e=q(_e,Se,ze,ye,Oe,22,f[15]),ye=g(ye,_e,Se,ze,H,5,f[16]),ze=g(ze,ye,_e,Se,V,9,f[17]),Se=g(Se,ze,ye,_e,le,14,f[18]),_e=g(_e,Se,ze,ye,P,20,f[19]),ye=g(ye,_e,Se,ze,z,5,f[20]),ze=g(ze,ye,_e,Se,Q,9,f[21]),Se=g(Se,ze,ye,_e,Oe,14,f[22]),_e=g(_e,Se,ze,ye,L,20,f[23]),ye=g(ye,_e,Se,ze,ae,5,f[24]),ze=g(ze,ye,_e,Se,ne,9,f[25]),Se=g(Se,ze,ye,_e,$,14,f[26]),_e=g(_e,Se,ze,ye,G,20,f[27]),ye=g(ye,_e,Se,ze,ue,5,f[28]),ze=g(ze,ye,_e,Se,B,9,f[29]),Se=g(Se,ze,ye,_e,X,14,f[30]),_e=g(_e,Se,ze,ye,pe,20,f[31]),ye=h(ye,_e,Se,ze,z,4,f[32]),ze=h(ze,ye,_e,Se,G,11,f[33]),Se=h(Se,ze,ye,_e,le,16,f[34]),_e=h(_e,Se,ze,ye,ne,23,f[35]),ye=h(ye,_e,Se,ze,H,4,f[36]),ze=h(ze,ye,_e,Se,L,11,f[37]),Se=h(Se,ze,ye,_e,X,16,f[38]),_e=h(_e,Se,ze,ye,Q,23,f[39]),ye=h(ye,_e,Se,ze,ue,4,f[40]),ze=h(ze,ye,_e,Se,P,11,f[41]),Se=h(Se,ze,ye,_e,$,16,f[42]),_e=h(_e,Se,ze,ye,V,23,f[43]),ye=h(ye,_e,Se,ze,ae,4,f[44]),ze=h(ze,ye,_e,Se,pe,11,f[45]),Se=h(Se,ze,ye,_e,Oe,16,f[46]),_e=h(_e,Se,ze,ye,B,23,f[47]),ye=k(ye,_e,Se,ze,P,6,f[48]),ze=k(ze,ye,_e,Se,X,10,f[49]),Se=k(Se,ze,ye,_e,ne,15,f[50]),_e=k(_e,Se,ze,ye,z,21,f[51]),ye=k(ye,_e,Se,ze,pe,6,f[52]),ze=k(ze,ye,_e,Se,$,10,f[53]),Se=k(Se,ze,ye,_e,Q,15,f[54]),_e=k(_e,Se,ze,ye,H,21,f[55]),ye=k(ye,_e,Se,ze,G,6,f[56]),ze=k(ze,ye,_e,Se,Oe,10,f[57]),Se=k(Se,ze,ye,_e,V,15,f[58]),_e=k(_e,Se,ze,ye,ue,21,f[59]),ye=k(ye,_e,Se,ze,L,6,f[60]),ze=k(ze,ye,_e,Se,le,10,f[61]),Se=k(Se,ze,ye,_e,B,15,f[62]),_e=k(_e,Se,ze,ye,ae,21,f[63]),m[0]=m[0]+ye|0,m[1]=m[1]+_e|0,m[2]=m[2]+Se|0,m[3]=m[3]+ze|0},_doFinalize:function(){var W=this._data,j=W.words,y=this._nDataBytes*8,d=W.sigBytes*8;j[d>>>5]|=128<<24-d%32;var R=C.floor(y/4294967296),m=y;j[(d+64>>>9<<4)+15]=(R<<8|R>>>24)&16711935|(R<<24|R>>>8)&4278255360,j[(d+64>>>9<<4)+14]=(m<<8|m>>>24)&16711935|(m<<24|m>>>8)&4278255360,W.sigBytes=(j.length+1)*4,this._process();for(var P=this._hash,H=P.words,B=0;B<4;B++){var $=H[B];H[B]=($<<8|$>>>24)&16711935|($<<24|$>>>8)&4278255360}return P},clone:function(){var W=w.clone.call(this);return W._hash=this._hash.clone(),W}});function q(W,j,y,d,R,m,P){var H=W+(j&y|~j&d)+R+P;return(H<<m|H>>>32-m)+j}function g(W,j,y,d,R,m,P){var H=W+(j&d|y&~d)+R+P;return(H<<m|H>>>32-m)+j}function h(W,j,y,d,R,m,P){var H=W+(j^y^d)+R+P;return(H<<m|H>>>32-m)+j}function k(W,j,y,d,R,m,P){var H=W+(y^(j|~d))+R+P;return(H<<m|H>>>32-m)+j}T.MD5=w._createHelper(U),T.HmacMD5=w._createHmacHelper(U)})(Math),x.MD5})}),4725:(function(oe,Y,S){(function(x,C){oe.exports=C(S(9021))})(this,function(x){return(function(){var C=x,T=C.lib,b=T.WordArray,J=C.enc;J.Base64url={stringify:function(n,f){f===void 0&&(f=!0);var U=n.words,q=n.sigBytes,g=f?this._safe_map:this._map;n.clamp();for(var h=[],k=0;k<q;k+=3)for(var W=U[k>>>2]>>>24-k%4*8&255,j=U[k+1>>>2]>>>24-(k+1)%4*8&255,y=U[k+2>>>2]>>>24-(k+2)%4*8&255,d=W<<16|j<<8|y,R=0;R<4&&k+R*.75<q;R++)h.push(g.charAt(d>>>6*(3-R)&63));var m=g.charAt(64);if(m)for(;h.length%4;)h.push(m);return h.join("")},parse:function(n,f){f===void 0&&(f=!0);var U=n.length,q=f?this._safe_map:this._map,g=this._reverseMap;if(!g){g=this._reverseMap=[];for(var h=0;h<q.length;h++)g[q.charCodeAt(h)]=h}var k=q.charAt(64);if(k){var W=n.indexOf(k);W!==-1&&(U=W)}return w(n,U,g)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_safe_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"};function w(n,f,U){for(var q=[],g=0,h=0;h<f;h++)if(h%4){var k=U[n.charCodeAt(h-1)]<<h%4*2,W=U[n.charCodeAt(h)]>>>6-h%4*2,j=k|W;q[g>>>2]|=j<<24-g%4*8,g++}return b.create(q,g)}})(),x.enc.Base64url})}),4756:((oe,Y,S)=>{var x=S(4633)();oe.exports=x;try{regeneratorRuntime=x}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=x:Function("r","regeneratorRuntime = r")(x)}}),4893:((oe,Y)=>{Object.defineProperty(Y,"__esModule",{value:!0}),Y.InvalidStateError=Y.UnsupportedError=void 0;class S extends Error{constructor(T){super(T),this.name="UnsupportedError",Error.hasOwnProperty("captureStackTrace")?Error.captureStackTrace(this,S):this.stack=new Error(T).stack}}Y.UnsupportedError=S;class x extends Error{constructor(T){super(T),this.name="InvalidStateError",Error.hasOwnProperty("captureStackTrace")?Error.captureStackTrace(this,x):this.stack=new Error(T).stack}}Y.InvalidStateError=x}),4905:(function(oe,Y,S){(function(x,C,T){oe.exports=C(S(9021),S(7165))})(this,function(x){return x.pad.Iso10126={pad:function(C,T){var b=T*4,J=b-C.sigBytes%b;C.concat(x.lib.WordArray.random(J-1)).concat(x.lib.WordArray.create([J<<24],1))},unpad:function(C){var T=C.words[C.sigBytes-1>>>2]&255;C.sigBytes-=T}},x.pad.Iso10126})}),4973:((oe,Y,S)=>{S.d(Y,{Zu:()=>J,lp:()=>b});var x=S(467),C=S(4756),T=S.n(C);S(9027);var b=(function(){var w=(0,x.A)(T().mark(function n(f){return T().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:return navigator.mediaDevices===void 0&&(navigator.mediaDevices={}),navigator.mediaDevices.getUserMedia===void 0&&(navigator.mediaDevices.getUserMedia=function(q){var g=navigator.webkitGetUserMedia||navigator.mozGetUserMedia;return g?new Promise(function(h,k){g.call(navigator,q,h,k)}):Promise.reject(new Error("getUserMedia is not implemented in this browser"))}),U.next=1,navigator.mediaDevices.getUserMedia(f);case 1:return U.abrupt("return",U.sent);case 2:case"end":return U.stop()}},n)}));return function(f){return w.apply(this,arguments)}})(),J=(function(){var w=(0,x.A)(T().mark(function n(f){return T().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:return navigator.mediaDevices===void 0&&(navigator.mediaDevices={}),navigator.mediaDevices.getDisplayMedia===void 0&&(navigator.mediaDevices.getDisplayMedia=function(q){var g=navigator.webkitGetDisplayMedia||navigator.mozGetDisplayMedia;return g?new Promise(function(h,k){g.call(navigator,q,h,k)}):Promise.reject(new Error("getDisplayMedia is not implemented in this browser"))}),U.next=1,navigator.mediaDevices.getDisplayMedia(f);case 1:return U.abrupt("return",U.sent);case 2:case"end":return U.stop()}},n)}));return function(f){return w.apply(this,arguments)}})()}),5020:((oe,Y,S)=>{var x=function(n){return String(Number(n))===n?Number(n):n},C=function(n,f,U,q){if(q&&!U)f[q]=x(n[1]);else for(var g=0;g<U.length;g+=1)n[g+1]!=null&&(f[U[g]]=x(n[g+1]))},T=function(n,f,U){var q=n.name&&n.names;n.push&&!f[n.push]?f[n.push]=[]:q&&!f[n.name]&&(f[n.name]={});var g=n.push?{}:q?f[n.name]:f;C(U.match(n.reg),g,n.names,n.name),n.push&&f[n.push].push(g)},b=S(5602),J=RegExp.prototype.test.bind(/^([a-z])=(.*)/);Y.parse=function(n){var f={},U=[],q=f;return n.split(/(\r\n|\r|\n)/).filter(J).forEach(function(g){var h=g[0],k=g.slice(2);h==="m"&&(U.push({rtp:[],fmtp:[]}),q=U[U.length-1]);for(var W=0;W<(b[h]||[]).length;W+=1){var j=b[h][W];if(j.reg.test(k))return T(j,q,k)}}),f.media=U,f};var w=function(n,f){var U=f.split(/=(.+)/,2);return U.length===2?n[U[0]]=x(U[1]):U.length===1&&f.length>1&&(n[U[0]]=void 0),n};Y.parseParams=function(n){return n.split(/;\s?/).reduce(w,{})},Y.parseFmtpConfig=Y.parseParams,Y.parsePayloads=function(n){return n.toString().split(" ").map(Number)},Y.parseRemoteCandidates=function(n){for(var f=[],U=n.split(" ").map(x),q=0;q<U.length;q+=3)f.push({component:U[q],ip:U[q+1],port:U[q+2]});return f},Y.parseImageAttributes=function(n){return n.split(" ").map(function(f){return f.substring(1,f.length-1).split(",").reduce(w,{})})},Y.parseSimulcastStreamList=function(n){return n.split(";").map(function(f){return f.split(",").map(function(U){var q,g=!1;return U[0]!=="~"?q=x(U):(q=x(U.substring(1,U.length)),g=!0),{scid:q,paused:g}})})}}),5071:((oe,Y,S)=>{S.d(Y,{V:()=>x});var x={HLS_STARTING:"HLS_STARTING",HLS_STARTED:"HLS_STARTED",HLS_PLAYABLE:"HLS_PLAYABLE",HLS_STOPPING:"HLS_STOPPING",HLS_STOPPED:"HLS_STOPPED"}}),5172:(oe=>{function Y(S,x){this.v=S,this.k=x}oe.exports=Y,oe.exports.__esModule=!0,oe.exports.default=oe.exports}),5248:((oe,Y,S)=>{S(1765)}),5328:((oe,Y,S)=>{Object.defineProperty(Y,"__esModule",{value:!0}),Y.FakeMediaStreamTrack=void 0;const x=S(2614),C=S(5935),T=S(878),b=S(3785);class J extends C.FakeEventTarget{#m;#d;#p;#e;#r;#t;#a;#h;#n;#f;#i;#s=null;#o=null;#c=null;#l=null;#u=null;constructor({kind:n,id:f,label:U,contentHint:q,enabled:g,muted:h,readyState:k,capabilities:W,constraints:j,settings:y,data:d}){super(),this.#m=f??(0,x.v4)(),this.#d=n,this.#p=U??"",this.#a=q??"",this.#r=g??!0,this.#t=h??!1,this.#e=k??"live",this.#h=W??{},this.#n=j??{},this.#f=y??{},this.#i=d??{}}get id(){return this.#m}get kind(){return this.#d}get label(){return this.#p}get contentHint(){return this.#a}set contentHint(n){this.#a=n}get enabled(){return this.#r}set enabled(n){const f=this.#r!==n;this.#r=n,f&&this.dispatchEvent(new T.FakeEvent("enabledchange"))}get muted(){return this.#t}get readyState(){return this.#e}get data(){return this.#i}set data(n){this.#i=n}get onmute(){return this.#s}set onmute(n){this.#s&&this.removeEventListener("mute",this.#s),this.#s=n,n&&this.addEventListener("mute",n)}get onunmute(){return this.#o}set onunmute(n){this.#o&&this.removeEventListener("unmute",this.#o),this.#o=n,n&&this.addEventListener("unmute",n)}get onended(){return this.#c}set onended(n){this.#c&&this.removeEventListener("ended",this.#c),this.#c=n,n&&this.addEventListener("ended",n)}get onenabledchange(){return this.#l}set onenabledchange(n){this.#l&&this.removeEventListener("enabledchange",this.#l),this.#l=n,n&&this.addEventListener("enabledchange",n)}get onstopped(){return this.#u}set onstopped(n){this.#u&&this.removeEventListener("stopped",this.#u),this.#u=n,n&&this.addEventListener("stopped",n)}addEventListener(n,f,U){super.addEventListener(n,f,U)}removeEventListener(n,f,U){super.removeEventListener(n,f,U)}stop(){this.#e!=="ended"&&(this.#e="ended",this.dispatchEvent(new T.FakeEvent("stopped")))}clone({id:n,data:f}={}){return new J({id:n??(0,x.v4)(),kind:this.#d,label:this.#p,contentHint:this.#a,enabled:this.#r,muted:this.#t,readyState:this.#e,capabilities:(0,b.clone)(this.#h),constraints:(0,b.clone)(this.#n),settings:(0,b.clone)(this.#f),data:f??(0,b.clone)(this.#i)})}getCapabilities(){return this.#h}getConstraints(){return this.#n}async applyConstraints(n={}){return this.#n=n,Promise.resolve()}getSettings(){return this.#f}remoteStop(){this.#e!=="ended"&&(this.#e="ended",this.dispatchEvent(new T.FakeEvent("stopped")),this.dispatchEvent(new T.FakeEvent("ended")))}remoteMute(){this.#t||(this.#t=!0,this.dispatchEvent(new T.FakeEvent("mute")))}remoteUnmute(){this.#t&&(this.#t=!1,this.dispatchEvent(new T.FakeEvent("unmute")))}}Y.FakeMediaStreamTrack=J}),5414:(oe=>{(function(Y,S){oe.exports=S()})(self,(function(){return(()=>{var Y={43:function(T,b,J){var w,n;(function(f,U){w=function(){var q=function(){},g="undefined",h=typeof window!==g&&typeof window.navigator!==g&&/Trident\/|MSIE /.test(window.navigator.userAgent),k=["trace","debug","info","warn","error"];function W(L,z){var V=L[z];if(typeof V.bind=="function")return V.bind(L);try{return Function.prototype.bind.call(V,L)}catch{return function(){return Function.prototype.apply.apply(V,[L,arguments])}}}function j(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function y(L){return L==="debug"&&(L="log"),typeof console!==g&&(L==="trace"&&h?j:console[L]!==void 0?W(console,L):console.log!==void 0?W(console,"log"):q)}function d(L,z){for(var V=0;V<k.length;V++){var X=k[V];this[X]=V<L?q:this.methodFactory(X,L,z)}this.log=this.debug}function R(L,z,V){return function(){typeof console!==g&&(d.call(this,z,V),this[L].apply(this,arguments))}}function m(L,z,V){return y(L)||R.apply(this,arguments)}function P(L,z,V){var X,G=this,ae="loglevel";function Q(){var pe;if(typeof window!==g&&ae){try{pe=window.localStorage[ae]}catch{}if(typeof pe===g)try{var ue=window.document.cookie,ne=ue.indexOf(encodeURIComponent(ae)+"=");ne!==-1&&(pe=/^([^;]+)/.exec(ue.slice(ne))[1])}catch{}return G.levels[pe]===void 0&&(pe=void 0),pe}}typeof L=="string"?ae+=":"+L:typeof L=="symbol"&&(ae=void 0),G.name=L,G.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},G.methodFactory=V||m,G.getLevel=function(){return X},G.setLevel=function(pe,ue){if(typeof pe=="string"&&G.levels[pe.toUpperCase()]!==void 0&&(pe=G.levels[pe.toUpperCase()]),!(typeof pe=="number"&&pe>=0&&pe<=G.levels.SILENT))throw"log.setLevel() called with invalid level: "+pe;if(X=pe,ue!==!1&&(function(ne){var Oe=(k[ne]||"silent").toUpperCase();if(typeof window!==g&&ae){try{return void(window.localStorage[ae]=Oe)}catch{}try{window.document.cookie=encodeURIComponent(ae)+"="+Oe+";"}catch{}}})(pe),d.call(G,pe,L),typeof console===g&&pe<G.levels.SILENT)return"No console available for logging"},G.setDefaultLevel=function(pe){Q()||G.setLevel(pe,!1)},G.enableAll=function(pe){G.setLevel(G.levels.TRACE,pe)},G.disableAll=function(pe){G.setLevel(G.levels.SILENT,pe)};var le=Q();le==null&&(le=z??"WARN"),G.setLevel(le,!1)}var H=new P,B={};H.getLogger=function(L){if(typeof L!="symbol"&&typeof L!="string"||L==="")throw new TypeError("You must supply a name when creating a logger.");var z=B[L];return z||(z=B[L]=new P(L,H.getLevel(),H.methodFactory)),z};var $=typeof window!==g?window.log:void 0;return H.noConflict=function(){return typeof window!==g&&window.log===H&&(window.log=$),H},H.getLoggers=function(){return B},H.default=H,H},(n=w.call(b,J,b,T))===void 0||(T.exports=n)})()}},S={};function x(T){var b=S[T];if(b!==void 0)return b.exports;var J=S[T]={exports:{}};return Y[T].call(J.exports,J,J.exports,x),J.exports}x.d=(T,b)=>{for(var J in b)x.o(b,J)&&!x.o(T,J)&&Object.defineProperty(T,J,{enumerable:!0,get:b[J]})},x.o=(T,b)=>Object.prototype.hasOwnProperty.call(T,b),x.r=T=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(T,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(T,"__esModule",{value:!0})};var C={};return(()=>{x.r(C),x.d(C,{VideoSDKMetrics:()=>Za});const T="inbound",b="outbound",J={codec_id_in:"",codec_in:{mime_type:null,clock_rate:null,sdp_fmtp_line:null},delta_jitter_ms_in:0,delta_rtt_ms_out:null,percent_packets_lost_in:0,delta_packets_in:0,delta_packets_lost_in:0,total_packets_in:0,total_packets_lost_in:0,total_KBytes_in:0,delta_KBytes_in:0,delta_kbs_in:0,timestamp_in:null,ssrc:"",total_concealment_events:0,delta_concealment_events:0,total_inserted_samples_for_decelaration:0,delta_inserted_samples_for_decelaration:0,total_removed_samples_for_accelaration:0,delta_removed_samples_for_accelaration:0,direction:T},w={codec_id_out:"",codec_out:{mime_type:null,clock_rate:null,sdp_fmtp_line:null},delta_jitter_ms_out:0,delta_rtt_ms_out:null,percent_packets_lost_out:0,delta_packets_out:0,delta_packets_lost_out:0,total_packets_out:0,total_packets_lost_out:0,total_KBytes_out:0,delta_KBytes_out:0,delta_kbs_out:0,timestamp_out:null,ssrc:"",direction:b},n={codec_id_in:"",size_in:{width:null,height:null,framerate:null},codec_in:{mime_type:null,clock_rate:null},delta_jitter_ms_in:0,percent_packets_lost_in:0,delta_packets_in:0,delta_packets_lost_in:0,total_packets_in:0,total_packets_lost_in:0,total_KBytes_in:0,delta_KBytes_in:0,delta_kbs_in:0,ssrc:"",direction:T},f={codec_id_out:"",size_out:{width:null,height:null,framerate:null},codec_out:{mime_type:null,clock_rate:null},delta_jitter_ms_out:0,delta_rtt_ms_out:null,percent_packets_lost_out:0,delta_packets_out:0,delta_packets_lost_out:0,total_packets_out:0,total_packets_lost_out:0,total_KBytes_out:0,delta_KBytes_out:0,delta_kbs_out:0,limitation_out:{reason:null,durations:null,resolutionChanges:0},timestamp_out:null,ssrc:"",direction:b},U="inbound-rtp",q="bytesReceived",g="bytesSent",h="currentRoundTripTime",k="roundTripTime",W="fractionLost",j="frameHeight",y="frameWidth",d="qualityLimitationReason",R="qualityLimitationDurations",m="qualityLimitationResolutionChanges",P="jitter",H="packetsLost",B="packetsReceived",$="packetsSent",L="responsesReceived",z="selected",V="totalRoundTripTime",X="roundTripTimeMeasurements",G="framesDecoded",ae="framesEncoded",Q="totalDecodeTime",le="totalEncodeTime",pe="pliCount",ue="nackCount",ne="audio",Oe="video",ye={0:"ETHERNET",2:"CELLULAR_5G",3:"WIFI",5:"CELLULAR_4G",10:"CELLULAR"},_e="audio",Se="video",ze="network",Vt="data";var tr=x(43);const gr=()=>`${new Date().toISOString()} | metrics`,jt=(zt,He,yt)=>`${zt} | ${He} | ${yt}`;tr.setDefaultLevel(tr.levels.TRACE);const Pr=(zt,He,yt)=>{yt?tr.debug(jt(gr(),zt,He),yt):tr.debug(jt(gr(),zt,He))},qa=(zt,He)=>{tr.warn(jt(gr(),zt,He))},Ua=(zt,He)=>{tr.error(jt(gr(),zt,He))},br="extractor   ",zr=(zt,He,yt)=>{if(!He)return null;const Xe={};let kt=He.audio[zt];kt||(kt=yt===T?{...J}:{...w}),Xe.audio=kt;let Or=He.video[zt];return Or||(Or=yt===T?{...n}:{...f}),Xe.video=Or,Xe},ar=(zt,He,yt,Xe)=>{let kt=!1;const Or=Xe[He].total_rtt_ms_out,Ce=Xe[He].total_rtt_measure_out,fr=yt?yt[He].total_rtt_ms_out:0,Sr=yt?yt[He].total_rtt_measure_out:0,Rt={rtt:null,totalRTT:Or,totalRTTMeasurements:Ce};if(zt.timestamp===Xe[He].timestamp_out||!Object.prototype.hasOwnProperty.call(zt,k)||Object.prototype.hasOwnProperty.call(zt,X)&&(kt=!0,Number(zt.roundTripTimeMeasurements)===0||Number(zt.roundTripTimeMeasurements)-Sr===Ce))return Rt;const Rr=1e3*Number(zt.roundTripTime);let aa=Or+Rr,Ke=Ce+1;return kt&&(aa=1e3*Number(zt.totalRoundTripTime)-fr,Ke=Number(zt.roundTripTimeMeasurements)-Sr),{rtt:Rr,totalRTT:aa,totalRTTMeasurements:Ke}},Wa=(zt,He,yt)=>zt.timestamp===yt[He].timestamp_out?null:Object.prototype.hasOwnProperty.call(zt,P)?1e3*(Number(zt.jitter)||0):null,Gr=(zt,He,yt,Xe)=>{if(!Object.prototype.hasOwnProperty.call(zt,$)||!Object.prototype.hasOwnProperty.call(zt,g))return{packetsSent:yt[He].total_packets_out,packetsLost:yt[He].total_packets_lost_out,bytesSent:yt[He].total_KBytes_out};const kt=Number(zt.packetsSent)||0-(Xe?Xe[He].total_packets_out:0),Or=kt-yt[He].total_packets_out,Ce=Number(zt.bytesSent)/1024-(Xe?Xe[He].total_KBytes_out:0),fr=Ce-yt[He].total_KBytes_out,Sr=zt.timestamp||Date.now(),Rt=Xe?Xe.timestamp:null;let Rr=yt.timestamp;!Rr&&Rt&&(Rr=Rt);const aa=Rr?Sr-Rr:0;return{packetsSent:kt,deltaPacketsSent:Or,KBytesSent:Ce,deltaKBytesSent:fr,kbsSent:aa>0?.008*fr*1024/aa*1e3:0}},pn=(zt,He,yt,Xe)=>{let kt=yt[He].total_packets_lost_out,Or=0,Ce=0;return Object.prototype.hasOwnProperty.call(zt,H)&&(kt=Number(zt.packetsLost)||0-(Xe?Xe[He].total_packets_lost_out:0),Or=kt-yt[He].total_packets_lost_out),Object.prototype.hasOwnProperty.call(zt,W)&&(Ce=Number(100*zt.fractionLost)),{packetsLost:kt,deltaPacketsLost:Or,fractionLost:Ce}},nt=(zt,He,yt,Xe)=>{if(!Object.prototype.hasOwnProperty.call(zt,B)||!Object.prototype.hasOwnProperty.call(zt,H)||!Object.prototype.hasOwnProperty.call(zt,q))return{percent_packets_lost:yt[He].percent_packets_lost_in,packetsReceived:yt[He].total_packets_in,packetsLost:yt[He].total_packets_lost_in,bytesReceived:yt[He].total_KBytes_in};const kt=(Number(zt.packetsReceived)||0)-(Xe?Xe[He].total_packets_in:0),Or=(Number(zt.packetsLost)||0)-(Xe?Xe[He].total_packets_lost_in:0),Ce=Or-yt[He].total_packets_lost_in,fr=kt-yt[He].total_packets_in,Sr=kt!==yt[He].total_packets_in?100*Ce/(Ce+fr):0,Rt=Number(zt.bytesReceived)/1024-(Xe?Xe[He].total_KBytes_in:0),Rr=Rt-yt[He].total_KBytes_in,aa=zt.timestamp||Date.now(),Ke=Xe?Xe.timestamp:null;let Xt=yt.timestamp;!Xt&&Ke&&(Xt=Ke);const Ht=Xt?aa-Xt:0;return{percentPacketsLost:Sr,packetsReceived:kt,deltaPacketsReceived:fr,packetsLost:Or,deltaPacketsLost:Ce,KBytesReceived:Rt,deltaKBytesReceived:Rr,kbsReceived:Ht>0?.008*Rr*1024/Ht*1e3:0}},et=zt=>zt.candidateType!=="relay"?"":zt.relayProtocol||"",ir=zt=>Object.prototype.hasOwnProperty.call(zt,j)&&Object.prototype.hasOwnProperty.call(zt,y)?{width:zt.frameWidth||null,height:zt.frameHeight||null,framerate:zt.framesPerSecond}:{width:null,height:null,framerate:null};class Lr{constructor(He,yt){this._callbacks={onStatsCollected:null},this._id=`collector-${yt}`,this._moduleName=this._id,this._probeId=yt,this._config=He,this._state="idle",this._statsReports=[]}registerCallback(He,yt,Xe){He in this._callbacks?(this._callbacks[He]={callback:yt,context:Xe},Pr(this._moduleName,`registered callback '${He}'`)):Ua(this._moduleName,`can't register callback for '${He}' - not found`)}unregisterCallback(He){He in this._callbacks?(this._callbacks[He]=null,delete this._callbacks[He],Pr(this._moduleName,`unregistered callback '${He}'`)):Ua(this._moduleName,`can't unregister callback for '${He}' - not found`)}analyze(He,yt){const Xe=(Or=>{const Ce={name:"",meetingId:"",peerId:"",timestamp:null,count:0,audio:{},video:{},network:{infrastructure:3},data:{delta_kbs_bandwidth_in:0,delta_kbs_bandwidth_out:0,delta_rtt_connectivity_ms:null,total_rtt_connectivity_ms:0}};if(Or){const fr={...Or,audio:{},video:{},data:{...Or.data},network:{...Or.network}};return Object.keys(Or.audio).forEach((Sr=>{fr.audio[Sr]={...Or.audio[Sr]}})),Object.keys(Or.video).forEach((Sr=>{fr.video[Sr]={...Or.video[Sr]}})),fr}return{...Ce,audio:{},video:{},data:{...Ce.data},network:{...Ce.network}}})(yt);Xe.name=this._config.name,Xe.meetingId=this._config.meetingId,Xe.peerId=this._config.peerId,Xe.count=yt?yt.count+1:1;let kt=null;return He.forEach((Or=>{!kt&&Or.timestamp&&(kt=Or.timestamp),((Ce,fr,Sr,Rt)=>{if(!Ce)return[];switch(Ce.type){case"candidate-pair":let Rr=!1;if(Ce.nominated&&Ce.state==="succeeded"&&(Rr=!0,Pr(br,`analyze() - got stats ${Ce.type} for ${Sr}`,Ce),z in Ce&&!Ce.selected&&(Rr=!1)),Rr){Ce.localCandidateId,Ce.remoteCandidateId;const Ke=((Ht,Qt,rt)=>{const Tt=(Ht.bytesReceived||0)/1024-0,yr=(Ht.bytesSent||0)/1024-0,ur=Ht.timestamp||Date.now(),wr=Tt-Qt.data.total_KBytes_in,$r=yr-Qt.data.total_KBytes_out;let Ha=Qt.timestamp;const nn=Ha?ur-Ha:0;return{total_KBytes_received:Tt,total_KBytes_sent:yr,delta_KBytes_received:wr,delta_KBytes_sent:$r,kbs_speed_received:nn>0?.008*wr*1024/nn*1e3:0,kbs_speed_sent:nn>0?.008*$r*1024/nn*1e3:0}})(Ce,fr),Xt=((Ht=>{Ht.availableIncomingBitrate,Ht.availableOutgoingBitrate})(Ce),((Ht,Qt,rt,Tt)=>{if(!Object.prototype.hasOwnProperty.call(Ht,h))return{rtt:null,totalRTT:Tt.data.total_rtt_connectivity_ms,totalRTTMeasurements:Tt.data.total_rtt_connectivity_measure};const yr=1e3*Number(Ht.currentRoundTripTime);let ur=Tt.data.total_rtt_connectivity_ms+yr,wr=Tt.data.total_rtt_connectivity_measure+1;return Object.prototype.hasOwnProperty.call(Ht,V)&&(ur=1e3*Number(Ht.totalRoundTripTime)-0),Object.prototype.hasOwnProperty.call(Ht,L)&&(wr=Number(Ht.responsesReceived)-0),{rtt:yr,totalRTT:ur,totalRTTMeasurements:wr}})(Ce,0,Rt,fr));return[{type:Vt,value:{total_KBytes_in:Ke.total_KBytes_received}},{type:Vt,value:{total_KBytes_out:Ke.total_KBytes_sent}},{type:Vt,value:{delta_KBytes_in:Ke.delta_KBytes_received}},{type:Vt,value:{delta_KBytes_out:Ke.delta_KBytes_sent}},{type:Vt,value:{delta_kbs_in:Ke.kbs_speed_received}},{type:Vt,value:{delta_kbs_out:Ke.kbs_speed_sent}},{type:Vt,value:{delta_rtt_connectivity_ms:Xt.rtt}}]}break;case"local-candidate":if(Ce.id===fr.network.local_candidate_id)return[{type:ze,value:{infrastructure:Ce.networkType}},{type:ze,value:{local_candidate_protocol:Ce.protocol||""}},{type:ze,value:{local_candidate_relay_protocol:et(Ce)}}];break;case U:{Pr(br,`analyze() - got stats ${Ce.type} for ${Sr}`,Ce);const Ke=Ce.ssrc,Xt=zr(Ke,fr,T);Xt&&(Xt.timestamp=fr.timestamp);const Ht=zr(Ke,Rt,T);if(Ht&&(Ht.timestamp=Rt.timestamp),Ce.kind===ne){const Qt=nt(Ce,ne,Xt,Ht),rt=Wa(Ce,ne,Xt),Tt=Ce.codecId||"",yr=((ur,wr,$r,Ha)=>{const nn=Number(ur.concealmentEvents)||0,qn=nn-($r.audio.total_concealment_events||0),hn=Number(ur.insertedSamplesForDeceleration)||0,ca=hn-($r.audio.total_inserted_samples_for_decelaration||0),Kr=Number(ur.removedSamplesForAcceleration)||0;return{totalConcealmentEvents:nn,deltaConcealmentEvents:qn,totalInsertedSamplesForDecelaration:hn,deltaInsertedSamplesForDecelaration:ca,totalRemovedSamplesForAccelaration:Kr,deltaRemovedSampleForAccelaration:Kr-($r.audio.total_removed_samples_for_accelaration||0)}})(Ce,0,Xt);return[{ssrc:Ke,type:_e,value:{codec_id_in:Tt}},{ssrc:Ke,type:_e,value:{total_packets_in:Qt.packetsReceived}},{ssrc:Ke,type:_e,value:{delta_packets_in:Qt.deltaPacketsReceived}},{ssrc:Ke,type:_e,value:{total_packets_lost_in:Qt.packetsLost}},{ssrc:Ke,type:_e,value:{delta_packets_lost_in:Qt.deltaPacketsLost}},{ssrc:Ke,type:_e,value:{percent_packets_lost_in:Qt.percentPacketsLost}},{ssrc:Ke,type:_e,value:{total_KBytes_in:Qt.KBytesReceived}},{ssrc:Ke,type:_e,value:{delta_KBytes_in:Qt.deltaKBytesReceived}},{ssrc:Ke,type:_e,value:{delta_kbs_in:Qt.kbsReceived}},{ssrc:Ke,type:_e,value:{delta_jitter_ms_in:rt}},{ssrc:Ke,type:_e,value:{total_concealment_events:yr.totalConcealmentEvents}},{ssrc:Ke,type:_e,value:{delta_concealment_events:yr.deltaConcealmentEvents}},{ssrc:Ke,type:_e,value:{total_inserted_samples_for_decelaration:yr.totalInsertedSamplesForDecelaration}},{ssrc:Ke,type:_e,value:{delta_inserted_samples_for_decelaration:yr.deltaInsertedSamplesForDecelaration}},{ssrc:Ke,type:_e,value:{total_removed_samples_for_accelaration:yr.totalRemovedSamplesForAccelaration}},{ssrc:Ke,type:_e,value:{delta_removed_samples_for_accelaration:yr.deltaRemovedSampleForAccelaration}},{ssrc:Ke,type:_e,value:{track_in:Ce.trackId}},{ssrc:Ke,type:_e,value:{track_id_in:Ce.trackIdentifier}},{ssrc:Ke,type:_e,value:{media_source_id:Ce.mediaSourceId}}]}if(Ce.kind===Oe){((ur,wr)=>{if(!Object.prototype.hasOwnProperty.call(ur,G)||!Object.prototype.hasOwnProperty.call(ur,Q))return{delta_ms_decode_frame:wr.video.delta_ms_decode_frame_in,frames_decoded:wr.video.total_frames_decoded_in,total_decode_time:wr.video.total_time_decoded_in};ur.framesDecoded,ur.totalDecodeTime,wr.video.total_time_decoded_in,wr.video.total_frames_decoded_in})(Ce,Xt);const Qt=nt(Ce,Oe,Xt,Ht),rt=Wa(Ce,Oe,Xt),Tt=(Ce.decoderImplementation,Ce.codecId||null),yr=ir(Ce);return((ur,wr,$r)=>{if(!Object.prototype.hasOwnProperty.call(ur,pe)||!Object.prototype.hasOwnProperty.call(ur,ue))return{pliCount:wr.total_pli_sent_in,nackCount:wr.total_nack_sent_in,deltaPliCount:0,deltaNackCount:0};ur.pliCount,$r&&$r.video.total_pli_sent_in,ur.nackCount,$r&&$r.video.total_nack_sent_in,wr.video.total_pli_sent_in,wr.video.total_nack_sent_in})(Ce,Xt,Ht),[{ssrc:Ke,type:Se,value:{codec_id_in:Tt}},{ssrc:Ke,type:Se,value:{total_packets_in:Qt.packetsReceived}},{ssrc:Ke,type:Se,value:{delta_packets_in:Qt.deltaPacketsReceived}},{ssrc:Ke,type:Se,value:{total_packets_lost_in:Qt.packetsLost}},{ssrc:Ke,type:Se,value:{delta_packets_lost_in:Qt.deltaPacketsLost}},{ssrc:Ke,type:Se,value:{percent_packets_lost_in:Qt.percentPacketsLost}},{ssrc:Ke,type:Se,value:{total_KBytes_in:Qt.KBytesReceived}},{ssrc:Ke,type:Se,value:{delta_KBytes_in:Qt.deltaKBytesReceived}},{ssrc:Ke,type:Se,value:{delta_kbs_in:Qt.kbsReceived}},{ssrc:Ke,type:Se,value:{delta_jitter_ms_in:rt}},{ssrc:Ke,type:Se,value:{size_in:yr}},{ssrc:Ke,type:Se,value:{track_in:Ce.trackId}},{ssrc:Ke,type:Se,value:{track_id_in:Ce.trackIdentifier}},{ssrc:Ke,type:Se,value:{media_source_id:Ce.mediaSourceId}},{ssrc:Ke,type:Se,value:{pause_count:Ce.pauseCount}},{ssrc:Ke,type:Se,value:{total_pauses_duration:Ce.totalPausesDuration}},{ssrc:Ke,type:Se,value:{freeze_count:Ce.freezeCount}},{ssrc:Ke,type:Se,value:{total_freezes_duration:Ce.totalFreezesDuration}}]}break}case"outbound-rtp":{Pr(br,`analyze() - got stats ${Ce.type} for ${Sr}`,Ce);const Ke=Ce.ssrc,Xt=zr(Ke,fr,b);Xt&&(Xt.timestamp=fr.timestamp);const Ht=zr(Ke,Rt,b);if(Ht&&(Ht.timestamp=Rt.timestamp),Ce.kind===ne){const Qt=Ce.codecId||null,rt=Gr(Ce,ne,Xt,Ht);return[{ssrc:Ke,type:_e,value:{codec_id_out:Qt}},{ssrc:Ke,type:_e,value:{total_packets_out:rt.packetsSent}},{ssrc:Ke,type:_e,value:{delta_packets_out:rt.deltaPacketsSent}},{ssrc:Ke,type:_e,value:{total_KBytes_out:rt.KBytesSent}},{type:_e,value:{delta_KBytes_out:rt.deltaKBytesSent}},{ssrc:Ke,type:_e,value:{delta_kbs_out:rt.kbsSent}},{ssrc:Ke,type:_e,value:{track_out:Ce.trackId}},{ssrc:Ke,type:_e,value:{track_id_out:Ce.trackIdentifier}},{ssrc:Ke,type:_e,value:{media_source_id:Ce.mediaSourceId}}]}if(Ce.kind===Oe){Ce.encoderImplementation;const Qt=Ce.codecId||null,rt=(((ur,wr)=>{if(!Object.prototype.hasOwnProperty.call(ur,ae)||!Object.prototype.hasOwnProperty.call(ur,le))return{delta_ms_encode_frame:wr.video.delta_ms_encode_frame_out,frames_encoded:wr.video.total_frames_encoded_out,total_encode_time:wr.video.total_time_encoded_out};ur.framesEncoded,ur.totalEncodeTime,wr.video.total_time_encoded_out,wr.video.total_frames_encoded_out})(Ce,Xt),ir(Ce)),Tt=(ur=>{const wr=Object.prototype.hasOwnProperty.call(ur,d)?ur.qualityLimitationReason:null,$r=Object.prototype.hasOwnProperty.call(ur,m)?ur.qualityLimitationResolutionChanges:null,Ha=Object.prototype.hasOwnProperty.call(ur,R)?ur.qualityLimitationDurations:null;return Ha&&Object.keys(Ha).forEach((nn=>{Ha[nn]>1e3&&(Ha[nn]=Number(Ha[nn]/1e3))})),{reason:wr,durations:Ha,resolutionChanges:$r}})(Ce),yr=(((ur,wr,$r)=>{if(!Object.prototype.hasOwnProperty.call(ur,pe)||!Object.prototype.hasOwnProperty.call(ur,ue))return{pliCount:wr.total_pli_received_out,nackCount:wr.total_nack_received_out,deltaPliCount:0,deltaNackCount:0};ur.pliCount,$r&&$r.video.total_pli_received_out,ur.nackCount,$r&&$r.video.total_nack_received_out,wr.video.total_pli_received_out,wr.video.total_nack_received_out})(Ce,Xt,Ht),Gr(Ce,Oe,Xt,Ht));return[{ssrc:Ke,type:Se,value:{codec_id_out:Qt}},{ssrc:Ke,type:Se,value:{total_packets_out:yr.packetsSent}},{ssrc:Ke,type:Se,value:{delta_packets_out:yr.deltaPacketsSent}},{ssrc:Ke,type:Se,value:{total_KBytes_out:yr.KBytesSent}},{ssrc:Ke,type:Se,value:{delta_KBytes_out:yr.deltaKBytesSent}},{ssrc:Ke,type:Se,value:{delta_kbs_out:yr.kbsSent}},{ssrc:Ke,type:Se,value:{size_out:rt}},{ssrc:Ke,type:Se,value:{limitation_out:Tt}},{ssrc:Ke,type:Se,value:{track_out:Ce.trackId}},{ssrc:Ke,type:Se,value:{track_id_out:Ce.trackIdentifier}},{ssrc:Ke,type:Se,value:{media_source_id:Ce.mediaSourceId}}]}break}case"media-source":{Pr(br,`analyze() - got stats ${Ce.type} for ${Sr}`,Ce);const Ke=[];return Object.keys(fr.audio).forEach((Xt=>{const Ht=fr.audio[Xt];if(Ht.media_source_id===Ce.id){var Qt=Ce.trackIdentifier;Ke.push({ssrc:Ht.ssrc,type:_e,value:{track_id_out:Qt}})}})),Object.keys(fr.video).forEach((Xt=>{const Ht=fr.video[Xt];if(Ht.media_source_id===Ce.id){var Qt=Ce.trackIdentifier;Ke.push({ssrc:Ht.ssrc,type:Se,value:{track_id_out:Qt}})}})),Ke}case"track":{Pr(br,`analyze() - got stats ${Ce.type} for ${Sr}`,Ce);const Ke=[];return Object.keys(fr.audio).forEach((Xt=>{const Ht=fr.audio[Xt];if(Ht.track_in===Ce.id||Ht.track_out===Ce.id){Pr(br,`analyze() - got stats ${Ce.type} for ${Sr}`,Ce);var Qt=Ce.trackIdentifier;Ce.id===Ht.track_in?Ke.push({ssrc:Ht.ssrc,type:_e,value:{track_id_in:Qt}}):Ke.push({ssrc:Ht.ssrc,type:_e,value:{track_id_out:Qt}})}})),Object.keys(fr.video).forEach((Xt=>{const Ht=fr.video[Xt];if(Ht.track_in===Ce.id||Ht.track_out===Ce.id){Pr(br,`analyze() - got stats ${Ce.type} for ${Sr}`,Ce);var Qt=Ce.trackIdentifier;Ce.id===Ht.track_in?Ke.push({ssrc:Ht.ssrc,type:Se,value:{track_id_in:Qt}}):Ke.push({ssrc:Ht.ssrc,type:Se,value:{track_id_out:Qt}})}})),Ke}case"codec":const aa=[];return Object.keys(fr.audio).forEach((Ke=>{const Xt=fr.audio[Ke];if(Xt.codec_id_in===Ce.id||Xt.codec_id_out===Ce.id){Pr(br,`analyze() - got stats ${Ce.type} for ${Sr}`,Ce);const Ht=(Qt=>({channels:Qt.channels||null,clock_rate:Qt.clockRate||null,mime_type:Qt.mimeType||null,sdp_fmtp_line:Qt.sdpFmtpLine||null}))(Ce);Ce.id===Xt.codec_id_in?aa.push({ssrc:Xt.ssrc,type:_e,value:{codec_in:Ht}}):aa.push({ssrc:Xt.ssrc,type:_e,value:{codec_out:Ht}})}})),Object.keys(fr.video).forEach((Ke=>{const Xt=fr.video[Ke];if(Xt.codec_id_in===Ce.id||Xt.codec_id_out===Ce.id){Pr(br,`analyze() - got stats ${Ce.type} for ${Sr}`,Ce);const Ht=(Qt=>({clock_rate:Qt.clockRate||null,mime_type:Qt.mimeType||null}))(Ce);Ce.id===Xt.codec_id_in?aa.push({ssrc:Xt.ssrc,type:Se,value:{codec_in:Ht}}):aa.push({ssrc:Xt.ssrc,type:Se,value:{codec_out:Ht}})}})),aa;case"remote-inbound-rtp":{Pr(br,`analyze() - got stats ${Ce.type} for ${Sr}`,Ce);const Ke=Ce.ssrc,Xt=zr(Ke,fr,b),Ht=zr(Ke,Rt,b);if(Ce.kind===ne){const Qt=ar(Ce,ne,Ht,Xt),rt=Wa(Ce,ne,Xt),Tt=pn(Ce,ne,Xt,Ht);return[{ssrc:Ke,type:_e,value:{delta_rtt_ms_out:Qt.rtt}},{ssrc:Ke,type:_e,value:{delta_jitter_ms_out:rt}},{ssrc:Ke,type:_e,value:{timestamp_out:Ce.timestamp}},{ssrc:Ke,type:_e,value:{total_packets_lost_out:Tt.packetsLost}},{ssrc:Ke,type:_e,value:{delta_packets_lost_out:Tt.deltaPacketsLost}},{ssrc:Ke,type:_e,value:{percent_packets_lost_out:Tt.fractionLost}}]}if(Ce.kind===Oe){const Qt=ar(Ce,Oe,Ht,Xt),rt=Wa(Ce,Oe,Xt),Tt=pn(Ce,Oe,Xt,Ht);return[{ssrc:Ke,type:Se,value:{delta_rtt_ms_out:Qt.rtt}},{ssrc:Ke,type:Se,value:{delta_jitter_ms_out:rt}},{ssrc:Ke,type:Se,value:{timestamp_out:Ce.timestamp}},{ssrc:Ke,type:Se,value:{total_packets_lost_out:Tt.packetsLost}},{ssrc:Ke,type:Se,value:{delta_packets_lost_out:Tt.deltaPacketsLost}}]}break}case"remote-outbound-rtp":{Pr(br,`analyze() - got stats ${Ce.type} for ${Sr}`,Ce);const Ke=Ce.ssrc,Xt=zr(Ke,fr,b),Ht=zr(Ke,Rt,b);if(Ce.kind===ne){const Qt=ar(Ce,ne,Ht,Xt);return[{ssrc:Ke,type:_e,value:{delta_rtt_ms_in:Qt.rtt}},{ssrc:Ke,type:_e,value:{timestamp_in:Ce.timestamp}}]}break}}return[]})(Or,Xe,Xe.name,null).forEach((Ce=>{if(Ce.value&&Ce.type)if(Ce.ssrc){let Rt=Xe[Ce.type][Ce.ssrc];Rt||(fr=Ce.type,Sr=Or.type,Rt=fr===ne?Sr===U?{...J}:{...w}:Sr===U?{...n}:{...f},Rt.ssrc=Ce.ssrc,Xe[Ce.type][Ce.ssrc]=Rt),Object.keys(Ce.value).forEach((Rr=>{Ce.value[Rr]!==void 0&&(Rt[Rr]=Ce.value[Rr])}))}else Object.keys(Ce.value).forEach((Rt=>{Ce.value[Rt]!==void 0&&(Xe[Ce.type][Rt]=Ce.value[Rt])}));var fr,Sr}))})),Xe.timestamp=kt,Xe}async collectStats(){try{const He=await this._config.monitoringObject.getStats(),yt=this.analyze(He,this._statsReports.slice().pop()||null);return this._statsReports.push(yt),this.fireOnStatsCollected(yt),He}catch(He){return Ua(this._moduleName,`got error ${He}`),null}}fireOnStatsCollected(He){if(this._callbacks.onStatsCollected){const yt={};yt.meetingId=He.meetingId,yt.peerId=He.peerId,yt.name=He.name,yt.audio=[],yt.video=[],Object.values(He.audio).forEach((Xe=>{const kt={};if(kt.network=ye[He.network.infrastructure],kt.timestamp=He.timestamp,Xe.direction==T){kt.codec=Xe.codec_in.mime_type,kt.jitter=Xe.delta_jitter_ms_in,kt.bitrate=Xe.delta_kbs_in,kt.packetsLost=Xe.delta_packets_lost_in,kt.rtt=He.data.delta_rtt_connectivity_ms||0,kt.totalPackets=Xe.delta_packets_in,kt.concealmentEvents=Xe.delta_concealment_events,kt.removedSampleForAccelaration=Xe.delta_removed_samples_for_accelaration,kt.insertedSamplesForDecelaration=Xe.delta_inserted_samples_for_decelaration;const Or=JSON.stringify(Xe.track_id_in).replace(/[{}"]/g,"");kt.trackId=Or}else Xe.direction==b&&(kt.codec=Xe.codec_out.mime_type,kt.jitter=Xe.delta_jitter_ms_out,kt.bitrate=Xe.delta_kbs_out,kt.packetsLost=Xe.delta_packets_lost_out,kt.rtt=He.data.delta_rtt_connectivity_ms||0,kt.totalPackets=Xe.delta_packets_out,kt.trackId=Xe.track_id_out);Xe.direction&&yt.audio.push(kt)})),Object.values(He.video).forEach((Xe=>{const kt={};if(kt.network=ye[He.network.infrastructure],kt.timestamp=He.timestamp,Xe.direction==T){kt.codec=Xe.codec_in.mime_type,kt.jitter=Xe.delta_jitter_ms_in,kt.bitrate=Xe.delta_kbs_in,kt.packetsLost=Xe.delta_packets_lost_in,kt.rtt=He.data.delta_rtt_connectivity_ms||0,kt.totalPackets=Xe.delta_packets_in,kt.size=Xe.size_in,kt.pauseCount=Xe.pause_count,kt.totalPausesDuration=Xe.total_pauses_duration,kt.freezeCount=Xe.freeze_count,kt.totalFreezesDuration=Xe.total_freezes_duration;const Or=JSON.stringify(Xe.track_id_in).replace(/[{}"]/g,"");kt.trackId=Or}else Xe.direction==b&&(kt.codec=Xe.codec_out.mime_type,kt.jitter=Xe.delta_jitter_ms_out,kt.bitrate=Xe.delta_kbs_out,kt.packetsLost=Xe.delta_packets_lost_out,kt.rtt=He.data.delta_rtt_connectivity_ms||0,kt.totalPackets=Xe.delta_packets_out,kt.limitation=Xe.limitation_out,kt.size=Xe.size_out,kt.trackId=Xe.track_id_out);Xe.direction&&yt.video.push(kt)})),this._callbacks.onStatsCollected.callback(yt)}}}class pa{constructor(He){this._id=He.name&&He.name.substr(0,12).padEnd(12," "),this._moduleName=this._id,this._config=He,this._collector=new Lr(this._config,this._id)}get id(){return this._id}start(){this._collectorIntervalId?qa("Probe already started."):(Pr(this._moduleName,"Probe Started"),this._collectorIntervalId=setInterval((()=>{Pr(this._moduleName,"Collector collecting stats"),this._collector.collectStats()}),this._config.refreshEvery))}stop(){this._collectorIntervalId?(clearInterval(this._collectorIntervalId),Pr(this._moduleName,"Probe Stopped")):qa("Probe not running, Please start first.")}set onStatsCollected(He){He?this._collector.registerCallback("onStatsCollected",He):this._collector.unregisterCallback("onStatsCollected")}}const za={refreshEvery:2e3,startAfter:0,stopAfter:-1,verbose:!1,peerId:"peerId",meetingId:"meetingId",name:"name"};class Za{constructor(He){var yt;this._config={defaultConfig:za,...He},this._probes=[],yt=this._config.verbose||!1,tr.setLevel(yt?tr.levels.TRACE:tr.levels.INFO),Pr("VideoSDKMetrics","VideoSDKMetrics initialized")}get probes(){return this._probes}addNewProbe(He,yt){if(!He)throw new Error("undefined monitoring object");const Xe={monitoringObject:He,...yt,...this._config},kt=new pa(Xe);return this._probes.push(kt),kt}removeExistingProbe(He){if(!He)throw new Error("undefined probe");He.stop(),this._probes=this._probes.filter((yt=>He.id!==yt.id))}getProbe(He){for(let yt of this.probes)if(yt.id==He)return yt}startAllProbes(){this._probes.forEach(((He,yt)=>{He.start()}))}stopAllProbes(){this._probes.forEach((He=>He.stop()))}}})(),C})()}))}),5458:((oe,Y,S)=>{S.d(Y,{A:()=>w});var x=S(3145);function C(n){if(Array.isArray(n))return(0,x.A)(n)}function T(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}var b=S(7800);function J(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function w(n){return C(n)||T(n)||(0,b.A)(n)||J()}}),5471:(function(oe,Y,S){(function(x,C){oe.exports=C(S(9021))})(this,function(x){return(function(){var C=x,T=C.lib,b=T.WordArray,J=T.Hasher,w=C.algo,n=[],f=w.SHA1=J.extend({_doReset:function(){this._hash=new b.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(U,q){for(var g=this._hash.words,h=g[0],k=g[1],W=g[2],j=g[3],y=g[4],d=0;d<80;d++){if(d<16)n[d]=U[q+d]|0;else{var R=n[d-3]^n[d-8]^n[d-14]^n[d-16];n[d]=R<<1|R>>>31}var m=(h<<5|h>>>27)+y+n[d];d<20?m+=(k&W|~k&j)+1518500249:d<40?m+=(k^W^j)+1859775393:d<60?m+=(k&W|k&j|W&j)-1894007588:m+=(k^W^j)-899497514,y=j,j=W,W=k<<30|k>>>2,k=h,h=m}g[0]=g[0]+h|0,g[1]=g[1]+k|0,g[2]=g[2]+W|0,g[3]=g[3]+j|0,g[4]=g[4]+y|0},_doFinalize:function(){var U=this._data,q=U.words,g=this._nDataBytes*8,h=U.sigBytes*8;return q[h>>>5]|=128<<24-h%32,q[(h+64>>>9<<4)+14]=Math.floor(g/4294967296),q[(h+64>>>9<<4)+15]=g,U.sigBytes=q.length*4,this._process(),this._hash},clone:function(){var U=J.clone.call(this);return U._hash=this._hash.clone(),U}});C.SHA1=J._createHelper(f),C.HmacSHA1=J._createHmacHelper(f)})(),x.SHA1})}),5501:((oe,Y,S)=>{S.d(Y,{A:()=>C});var x=S(3662);function C(T,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function");T.prototype=Object.create(b&&b.prototype,{constructor:{value:T,writable:!0,configurable:!0}}),Object.defineProperty(T,"prototype",{writable:!1}),b&&(0,x.A)(T,b)}}),5503:(function(oe,Y,S){(function(x,C){oe.exports=C(S(9021))})(this,function(x){return(function(){var C=x,T=C.lib,b=T.WordArray,J=C.enc;J.Utf16=J.Utf16BE={stringify:function(n){for(var f=n.words,U=n.sigBytes,q=[],g=0;g<U;g+=2){var h=f[g>>>2]>>>16-g%4*8&65535;q.push(String.fromCharCode(h))}return q.join("")},parse:function(n){for(var f=n.length,U=[],q=0;q<f;q++)U[q>>>1]|=n.charCodeAt(q)<<16-q%2*16;return b.create(U,f*2)}},J.Utf16LE={stringify:function(n){for(var f=n.words,U=n.sigBytes,q=[],g=0;g<U;g+=2){var h=w(f[g>>>2]>>>16-g%4*8&65535);q.push(String.fromCharCode(h))}return q.join("")},parse:function(n){for(var f=n.length,U=[],q=0;q<f;q++)U[q>>>1]|=w(n.charCodeAt(q)<<16-q%2*16);return b.create(U,f*2)}};function w(n){return n<<8&4278255360|n>>>8&16711935}})(),x.enc.Utf16})}),5528:(oe=>{var Y=typeof Reflect=="object"?Reflect:null,S=Y&&typeof Y.apply=="function"?Y.apply:function(P,H,B){return Function.prototype.apply.call(P,H,B)},x;Y&&typeof Y.ownKeys=="function"?x=Y.ownKeys:Object.getOwnPropertySymbols?x=function(P){return Object.getOwnPropertyNames(P).concat(Object.getOwnPropertySymbols(P))}:x=function(P){return Object.getOwnPropertyNames(P)};function C(m){console&&console.warn&&console.warn(m)}var T=Number.isNaN||function(P){return P!==P};function b(){b.init.call(this)}oe.exports=b,oe.exports.once=y,b.EventEmitter=b,b.prototype._events=void 0,b.prototype._eventsCount=0,b.prototype._maxListeners=void 0;var J=10;function w(m){if(typeof m!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof m)}Object.defineProperty(b,"defaultMaxListeners",{enumerable:!0,get:function(){return J},set:function(m){if(typeof m!="number"||m<0||T(m))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+m+".");J=m}}),b.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},b.prototype.setMaxListeners=function(P){if(typeof P!="number"||P<0||T(P))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+P+".");return this._maxListeners=P,this};function n(m){return m._maxListeners===void 0?b.defaultMaxListeners:m._maxListeners}b.prototype.getMaxListeners=function(){return n(this)},b.prototype.emit=function(P){for(var H=[],B=1;B<arguments.length;B++)H.push(arguments[B]);var $=P==="error",L=this._events;if(L!==void 0)$=$&&L.error===void 0;else if(!$)return!1;if($){var z;if(H.length>0&&(z=H[0]),z instanceof Error)throw z;var V=new Error("Unhandled error."+(z?" ("+z.message+")":""));throw V.context=z,V}var X=L[P];if(X===void 0)return!1;if(typeof X=="function")S(X,this,H);else for(var G=X.length,ae=k(X,G),B=0;B<G;++B)S(ae[B],this,H);return!0};function f(m,P,H,B){var $,L,z;if(w(H),L=m._events,L===void 0?(L=m._events=Object.create(null),m._eventsCount=0):(L.newListener!==void 0&&(m.emit("newListener",P,H.listener?H.listener:H),L=m._events),z=L[P]),z===void 0)z=L[P]=H,++m._eventsCount;else if(typeof z=="function"?z=L[P]=B?[H,z]:[z,H]:B?z.unshift(H):z.push(H),$=n(m),$>0&&z.length>$&&!z.warned){z.warned=!0;var V=new Error("Possible EventEmitter memory leak detected. "+z.length+" "+String(P)+" listeners added. Use emitter.setMaxListeners() to increase limit");V.name="MaxListenersExceededWarning",V.emitter=m,V.type=P,V.count=z.length,C(V)}return m}b.prototype.addListener=function(P,H){return f(this,P,H,!1)},b.prototype.on=b.prototype.addListener,b.prototype.prependListener=function(P,H){return f(this,P,H,!0)};function U(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function q(m,P,H){var B={fired:!1,wrapFn:void 0,target:m,type:P,listener:H},$=U.bind(B);return $.listener=H,B.wrapFn=$,$}b.prototype.once=function(P,H){return w(H),this.on(P,q(this,P,H)),this},b.prototype.prependOnceListener=function(P,H){return w(H),this.prependListener(P,q(this,P,H)),this},b.prototype.removeListener=function(P,H){var B,$,L,z,V;if(w(H),$=this._events,$===void 0)return this;if(B=$[P],B===void 0)return this;if(B===H||B.listener===H)--this._eventsCount===0?this._events=Object.create(null):(delete $[P],$.removeListener&&this.emit("removeListener",P,B.listener||H));else if(typeof B!="function"){for(L=-1,z=B.length-1;z>=0;z--)if(B[z]===H||B[z].listener===H){V=B[z].listener,L=z;break}if(L<0)return this;L===0?B.shift():W(B,L),B.length===1&&($[P]=B[0]),$.removeListener!==void 0&&this.emit("removeListener",P,V||H)}return this},b.prototype.off=b.prototype.removeListener,b.prototype.removeAllListeners=function(P){var H,B,$;if(B=this._events,B===void 0)return this;if(B.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):B[P]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete B[P]),this;if(arguments.length===0){var L=Object.keys(B),z;for($=0;$<L.length;++$)z=L[$],z!=="removeListener"&&this.removeAllListeners(z);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(H=B[P],typeof H=="function")this.removeListener(P,H);else if(H!==void 0)for($=H.length-1;$>=0;$--)this.removeListener(P,H[$]);return this};function g(m,P,H){var B=m._events;if(B===void 0)return[];var $=B[P];return $===void 0?[]:typeof $=="function"?H?[$.listener||$]:[$]:H?j($):k($,$.length)}b.prototype.listeners=function(P){return g(this,P,!0)},b.prototype.rawListeners=function(P){return g(this,P,!1)},b.listenerCount=function(m,P){return typeof m.listenerCount=="function"?m.listenerCount(P):h.call(m,P)},b.prototype.listenerCount=h;function h(m){var P=this._events;if(P!==void 0){var H=P[m];if(typeof H=="function")return 1;if(H!==void 0)return H.length}return 0}b.prototype.eventNames=function(){return this._eventsCount>0?x(this._events):[]};function k(m,P){for(var H=new Array(P),B=0;B<P;++B)H[B]=m[B];return H}function W(m,P){for(;P+1<m.length;P++)m[P]=m[P+1];m.pop()}function j(m){for(var P=new Array(m.length),H=0;H<P.length;++H)P[H]=m[H].listener||m[H];return P}function y(m,P){return new Promise(function(H,B){function $(z){m.removeListener(P,L),B(z)}function L(){typeof m.removeListener=="function"&&m.removeListener("error",$),H([].slice.call(arguments))}R(m,P,L,{once:!0}),P!=="error"&&d(m,$,{once:!0})})}function d(m,P,H){typeof m.on=="function"&&R(m,"error",P,H)}function R(m,P,H,B){if(typeof m.on=="function")B.once?m.once(P,H):m.on(P,H);else if(typeof m.addEventListener=="function")m.addEventListener(P,function $(L){B.once&&m.removeEventListener(P,$),H(L)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof m)}}),5544:((oe,Y,S)=>{Object.defineProperty(Y,"__esModule",{value:!0}),Y.extractRtpCapabilities=C,Y.extractDtlsParameters=T,Y.getCname=b,Y.applyCodecParameters=J;const x=S(7363);function C({sdpObject:w}){const n=new Map,f=new Map;for(const q of w.media){const g=q.type;switch(g){case"audio":case"video":break;default:continue}for(const h of q.rtp){const k={kind:g,mimeType:`${g}/${h.codec}`,preferredPayloadType:h.payload,clockRate:h.rate,channels:h.encoding,parameters:{},rtcpFeedback:[]};n.set(k.preferredPayloadType,k)}for(const h of q.fmtp??[]){const k=x.parseParams(h.config),W=n.get(h.payload);W&&(k?.hasOwnProperty("profile-level-id")&&(k["profile-level-id"]=String(k["profile-level-id"])),W.parameters=k)}for(const h of q.rtcpFb??[]){const k={type:h.type,parameter:h.subtype};if(k.parameter||delete k.parameter,h.payload!=="*"){const W=n.get(Number(h.payload));if(!W)continue;W.rtcpFeedback.push(k)}else for(const W of n.values())W.kind===g&&!/.+\/rtx$/i.test(W.mimeType)&&W.rtcpFeedback.push(k)}for(const h of q.ext??[]){if(h["encrypt-uri"])continue;const k={kind:g,uri:h.uri,preferredId:h.value};f.set(k.preferredId,k)}}return{codecs:Array.from(n.values()),headerExtensions:Array.from(f.values())}}function T({sdpObject:w}){let n=w.setup,f=w.fingerprint;if(!n||!f){const g=(w.media??[]).find(h=>h.port!==0);g&&(n??=g.setup,f??=g.fingerprint)}if(n){if(!f)throw new Error("no a=fingerprint found at SDP session or media level")}else throw new Error("no a=setup found at SDP session or media level");let U;switch(n){case"active":{U="client";break}case"passive":{U="server";break}case"actpass":{U="auto";break}}return{role:U,fingerprints:[{algorithm:f.type,value:f.hash}]}}function b({offerMediaObject:w}){const n=(w.ssrcs??[]).find(f=>f.attribute==="cname");return n?n.value:""}function J({offerRtpParameters:w,answerMediaObject:n}){for(const f of w.codecs){const U=f.mimeType.toLowerCase();if(U!=="audio/opus"||!(n.rtp??[]).find(k=>k.payload===f.payloadType))continue;n.fmtp=n.fmtp??[];let g=n.fmtp.find(k=>k.payload===f.payloadType);g||(g={payload:f.payloadType,config:""},n.fmtp.push(g));const h=x.parseParams(g.config);switch(U){case"audio/opus":{const k=f.parameters?.["sprop-stereo"];k!==void 0&&(h.stereo=Number(k)?1:0);break}}g.config="";for(const k of Object.keys(h))g.config&&(g.config+=";"),g.config+=`${k}=${h[k]}`}}}),5546:(oe=>{function Y(S,x,C,T){var b=Object.defineProperty;try{b({},"",{})}catch{b=0}oe.exports=Y=function(w,n,f,U){function q(g,h){Y(w,g,function(k){return this._invoke(g,h,k)})}n?b?b(w,n,{value:f,enumerable:!U,configurable:!U,writable:!U}):w[n]=f:(q("next",0),q("throw",1),q("return",2))},oe.exports.__esModule=!0,oe.exports.default=oe.exports,Y(S,x,C,T)}oe.exports=Y,oe.exports.__esModule=!0,oe.exports.default=oe.exports}),5601:((oe,Y,S)=>{Object.defineProperty(Y,"__esModule",{value:!0}),Y.Transport=void 0;const x=S(8876),C=S(2994),T=S(3953),b=S(4893),J=S(1765),w=S(8046),n=S(9792),f=S(3518),U=S(7504),q=S(9166),g=new C.Logger("Transport");class h{consumerOptions;promise;resolve;reject;constructor(j){this.consumerOptions=j,this.promise=new Promise((y,d)=>{this.resolve=y,this.reject=d})}}class k extends T.EnhancedEventEmitter{_id;_closed=!1;_direction;_getSendExtendedRtpCapabilities;_recvRtpCapabilities;_canProduceByKind;_maxSctpMessageSize;_handler;_iceGatheringState="new";_connectionState="new";_appData;_producers=new Map;_consumers=new Map;_dataProducers=new Map;_dataConsumers=new Map;_probatorConsumerCreated=!1;_awaitQueue=new x.AwaitQueue;_pendingConsumerTasks=[];_consumerCreationInProgress=!1;_pendingPauseConsumers=new Map;_consumerPauseInProgress=!1;_pendingResumeConsumers=new Map;_consumerResumeInProgress=!1;_pendingCloseConsumers=new Map;_consumerCloseInProgress=!1;_observer=new T.EnhancedEventEmitter;constructor({direction:j,id:y,iceParameters:d,iceCandidates:R,dtlsParameters:m,sctpParameters:P,iceServers:H,iceTransportPolicy:B,additionalSettings:$,appData:L,handlerFactory:z,getSendExtendedRtpCapabilities:V,recvRtpCapabilities:X,canProduceByKind:G}){super(),g.debug("constructor() [id:%s, direction:%s]",y,j),this._id=y,this._direction=j,this._getSendExtendedRtpCapabilities=V,this._recvRtpCapabilities=X,this._canProduceByKind=G,this._maxSctpMessageSize=P?P.maxMessageSize:null;const ae=J.clone($)??{};delete ae.iceServers,delete ae.iceTransportPolicy,delete ae.bundlePolicy,delete ae.rtcpMuxPolicy,this._handler=z.factory({direction:j,iceParameters:d,iceCandidates:R,dtlsParameters:m,sctpParameters:P,iceServers:H,iceTransportPolicy:B,additionalSettings:ae,getSendExtendedRtpCapabilities:this._getSendExtendedRtpCapabilities}),this._appData=L??{},this.handleHandler()}get id(){return this._id}get closed(){return this._closed}get direction(){return this._direction}get handler(){return this._handler}get iceGatheringState(){return this._iceGatheringState}get connectionState(){return this._connectionState}get appData(){return this._appData}set appData(j){this._appData=j}get observer(){return this._observer}close(){if(!this._closed){g.debug("close()"),this._closed=!0,this._awaitQueue.stop(),this._handler.close(),this._connectionState="closed";for(const j of this._producers.values())j.transportClosed();this._producers.clear();for(const j of this._consumers.values())j.transportClosed();this._consumers.clear();for(const j of this._dataProducers.values())j.transportClosed();this._dataProducers.clear();for(const j of this._dataConsumers.values())j.transportClosed();this._dataConsumers.clear(),this._observer.safeEmit("close"),super.close(),this._observer.close()}}async getStats(){if(this._closed)throw new b.InvalidStateError("closed");return this._handler.getTransportStats()}async restartIce({iceParameters:j}){if(g.debug("restartIce()"),this._closed)throw new b.InvalidStateError("closed");if(!j)throw new TypeError("missing iceParameters");return this._awaitQueue.push(async()=>await this._handler.restartIce(j),"transport.restartIce()")}async updateIceServers({iceServers:j}={}){if(g.debug("updateIceServers()"),this._closed)throw new b.InvalidStateError("closed");if(!Array.isArray(j))throw new TypeError("missing iceServers");return this._awaitQueue.push(async()=>this._handler.updateIceServers(j),"transport.updateIceServers()")}async produce({track:j,encodings:y,codecOptions:d,codec:R,stopTracks:m=!0,disableTrackOnPause:P=!0,zeroRtpOnPause:H=!1,onRtpSender:B,appData:$={}}={}){if(g.debug("produce() [track:%o]",j),this._closed)throw new b.InvalidStateError("closed");if(j){if(this._direction!=="send")throw new b.UnsupportedError("not a sending Transport");if(this._canProduceByKind[j.kind]){if(j.readyState==="ended")throw new b.InvalidStateError("track ended");if(this.listenerCount("connect")===0&&this._connectionState==="new")throw new TypeError('no "connect" listener set into this transport');if(this.listenerCount("produce")===0)throw new TypeError('no "produce" listener set into this transport');if($&&typeof $!="object")throw new TypeError("if given, appData must be an object")}else throw new b.UnsupportedError(`cannot produce ${j.kind}`)}else throw new TypeError("missing track");return this._awaitQueue.push(async()=>{let L;if(y&&!Array.isArray(y))throw TypeError("encodings must be an array");y&&y.length===0?L=void 0:y&&(L=y.map(G=>{const ae={active:!0};return G.active===!1&&(ae.active=!1),typeof G.dtx=="boolean"&&(ae.dtx=G.dtx),typeof G.scalabilityMode=="string"&&(ae.scalabilityMode=G.scalabilityMode),typeof G.scaleResolutionDownBy=="number"&&(ae.scaleResolutionDownBy=G.scaleResolutionDownBy),typeof G.maxBitrate=="number"&&(ae.maxBitrate=G.maxBitrate),typeof G.maxFramerate=="number"&&(ae.maxFramerate=G.maxFramerate),typeof G.adaptivePtime=="boolean"&&(ae.adaptivePtime=G.adaptivePtime),typeof G.priority=="string"&&(ae.priority=G.priority),typeof G.networkPriority=="string"&&(ae.networkPriority=G.networkPriority),ae}));const{localId:z,rtpParameters:V,rtpSender:X}=await this._handler.send({track:j,encodings:L,codecOptions:d,codec:R,onRtpSender:B});try{w.validateAndNormalizeRtpParameters(V);const{id:G}=await new Promise((Q,le)=>{this.safeEmit("produce",{kind:j.kind,rtpParameters:V,appData:$},Q,le)}),ae=new n.Producer({id:G,localId:z,rtpSender:X,track:j,rtpParameters:V,stopTracks:m,disableTrackOnPause:P,zeroRtpOnPause:H,appData:$});return this._producers.set(ae.id,ae),this.handleProducer(ae),this._observer.safeEmit("newproducer",ae),ae}catch(G){throw this._handler.stopSending(z).catch(()=>{}),G}},"transport.produce()").catch(L=>{if(m)try{j.stop()}catch{}throw L})}async consume({id:j,producerId:y,kind:d,rtpParameters:R,streamId:m,onRtpReceiver:P,appData:H={}}){if(g.debug("consume()"),this._closed)throw new b.InvalidStateError("closed");if(this._direction!=="recv")throw new b.UnsupportedError("not a receiving Transport");if(typeof j!="string")throw new TypeError("missing id");if(typeof y!="string")throw new TypeError("missing producerId");if(d!=="audio"&&d!=="video")throw new TypeError(`invalid kind '${d}'`);if(this.listenerCount("connect")===0&&this._connectionState==="new")throw new TypeError('no "connect" listener set into this transport');if(H&&typeof H!="object")throw new TypeError("if given, appData must be an object");const B=J.clone(R);if(!w.canReceive(B,this._recvRtpCapabilities))throw new b.UnsupportedError("cannot consume this Producer");const L=new h({id:j,producerId:y,kind:d,rtpParameters:B,streamId:m,onRtpReceiver:P,appData:H});return this._pendingConsumerTasks.push(L),queueMicrotask(()=>{this._closed||this._consumerCreationInProgress===!1&&this.createPendingConsumers()}),L.promise}async produceData({ordered:j=!0,maxPacketLifeTime:y,maxRetransmits:d,label:R="",protocol:m="",appData:P={}}={}){if(g.debug("produceData()"),this._closed)throw new b.InvalidStateError("closed");if(this._direction!=="send")throw new b.UnsupportedError("not a sending Transport");if(this._maxSctpMessageSize){if(this.listenerCount("connect")===0&&this._connectionState==="new")throw new TypeError('no "connect" listener set into this transport');if(this.listenerCount("producedata")===0)throw new TypeError('no "producedata" listener set into this transport');if(P&&typeof P!="object")throw new TypeError("if given, appData must be an object")}else throw new b.UnsupportedError("SCTP not enabled by remote Transport");return(y||d)&&(j=!1),this._awaitQueue.push(async()=>{const{dataChannel:H,sctpStreamParameters:B}=await this._handler.sendDataChannel({ordered:j,maxPacketLifeTime:y,maxRetransmits:d,label:R,protocol:m});w.validateAndNormalizeSctpStreamParameters(B);const{id:$}=await new Promise((z,V)=>{this.safeEmit("producedata",{sctpStreamParameters:B,label:R,protocol:m,appData:P},z,V)}),L=new U.DataProducer({id:$,dataChannel:H,sctpStreamParameters:B,appData:P});return this._dataProducers.set(L.id,L),this.handleDataProducer(L),this._observer.safeEmit("newdataproducer",L),L},"transport.produceData()")}async consumeData({id:j,dataProducerId:y,sctpStreamParameters:d,label:R="",protocol:m="",appData:P={}}){if(g.debug("consumeData()"),this._closed)throw new b.InvalidStateError("closed");if(this._direction!=="recv")throw new b.UnsupportedError("not a receiving Transport");if(this._maxSctpMessageSize){if(typeof j!="string")throw new TypeError("missing id");if(typeof y!="string")throw new TypeError("missing dataProducerId");if(this.listenerCount("connect")===0&&this._connectionState==="new")throw new TypeError('no "connect" listener set into this transport');if(P&&typeof P!="object")throw new TypeError("if given, appData must be an object")}else throw new b.UnsupportedError("SCTP not enabled by remote Transport");const H=J.clone(d);return w.validateAndNormalizeSctpStreamParameters(H),this._awaitQueue.push(async()=>{const{dataChannel:B}=await this._handler.receiveDataChannel({sctpStreamParameters:H,label:R,protocol:m}),$=new q.DataConsumer({id:j,dataProducerId:y,dataChannel:B,sctpStreamParameters:H,appData:P});return this._dataConsumers.set($.id,$),this.handleDataConsumer($),this._observer.safeEmit("newdataconsumer",$),$},"transport.consumeData()")}createPendingConsumers(){this._consumerCreationInProgress=!0,this._awaitQueue.push(async()=>{if(this._pendingConsumerTasks.length===0){g.debug("createPendingConsumers() | there is no Consumer to be created");return}const j=[...this._pendingConsumerTasks];this._pendingConsumerTasks=[];let y;const d=[];for(const R of j){const{id:m,kind:P,rtpParameters:H,streamId:B,onRtpReceiver:$}=R.consumerOptions;d.push({trackId:m,kind:P,rtpParameters:H,streamId:B,onRtpReceiver:$})}try{const R=await this._handler.receive(d);for(let m=0;m<R.length;++m){const P=j[m],H=R[m],{id:B,producerId:$,kind:L,rtpParameters:z,appData:V}=P.consumerOptions,{localId:X,rtpReceiver:G,track:ae}=H,Q=new f.Consumer({id:B,localId:X,producerId:$,rtpReceiver:G,track:ae,rtpParameters:z,appData:V});this._consumers.set(Q.id,Q),this.handleConsumer(Q),!this._probatorConsumerCreated&&!y&&L==="video"&&(y=Q),this._observer.safeEmit("newconsumer",Q),P.resolve(Q)}}catch(R){for(const m of j)m.reject(R)}if(y)try{const R=w.generateProbatorRtpParameters(y.rtpParameters);await this._handler.receive([{trackId:"probator",kind:"video",rtpParameters:R}]),g.debug("createPendingConsumers() | Consumer for RTP probation created"),this._probatorConsumerCreated=!0}catch(R){g.error("createPendingConsumers() | failed to create Consumer for RTP probation:%o",R)}},"transport.createPendingConsumers()").then(()=>{this._consumerCreationInProgress=!1,this._pendingConsumerTasks.length>0&&this.createPendingConsumers()}).catch(()=>{})}pausePendingConsumers(){this._consumerPauseInProgress=!0,this._awaitQueue.push(async()=>{if(this._pendingPauseConsumers.size===0){g.debug("pausePendingConsumers() | there is no Consumer to be paused");return}const j=Array.from(this._pendingPauseConsumers.values());this._pendingPauseConsumers.clear();try{const y=j.map(d=>d.localId);await this._handler.pauseReceiving(y)}catch(y){g.error("pausePendingConsumers() | failed to pause Consumers:",y)}},"transport.pausePendingConsumers").then(()=>{this._consumerPauseInProgress=!1,this._pendingPauseConsumers.size>0&&this.pausePendingConsumers()}).catch(()=>{})}resumePendingConsumers(){this._consumerResumeInProgress=!0,this._awaitQueue.push(async()=>{if(this._pendingResumeConsumers.size===0){g.debug("resumePendingConsumers() | there is no Consumer to be resumed");return}const j=Array.from(this._pendingResumeConsumers.values());this._pendingResumeConsumers.clear();try{const y=j.map(d=>d.localId);await this._handler.resumeReceiving(y)}catch(y){g.error("resumePendingConsumers() | failed to resume Consumers:",y)}},"transport.resumePendingConsumers").then(()=>{this._consumerResumeInProgress=!1,this._pendingResumeConsumers.size>0&&this.resumePendingConsumers()}).catch(()=>{})}closePendingConsumers(){this._consumerCloseInProgress=!0,this._awaitQueue.push(async()=>{if(this._pendingCloseConsumers.size===0){g.debug("closePendingConsumers() | there is no Consumer to be closed");return}const j=Array.from(this._pendingCloseConsumers.values());this._pendingCloseConsumers.clear();try{await this._handler.stopReceiving(j.map(y=>y.localId))}catch(y){g.error("closePendingConsumers() | failed to close Consumers:",y)}},"transport.closePendingConsumers").then(()=>{this._consumerCloseInProgress=!1,this._pendingCloseConsumers.size>0&&this.closePendingConsumers()}).catch(()=>{})}handleHandler(){const j=this._handler;j.on("@connect",({dtlsParameters:y},d,R)=>{if(this._closed){R(new b.InvalidStateError("closed"));return}this.safeEmit("connect",{dtlsParameters:y},d,R)}),j.on("@icegatheringstatechange",y=>{y!==this._iceGatheringState&&(g.debug("ICE gathering state changed to %s",y),this._iceGatheringState=y,this._closed||this.safeEmit("icegatheringstatechange",y))}),j.on("@icecandidateerror",y=>{g.warn(`ICE candidate error [url:${y.url}, localAddress:${y.address}, localPort:${y.port}]: ${y.errorCode} "${y.errorText}"`),this.safeEmit("icecandidateerror",y)}),j.on("@connectionstatechange",y=>{y!==this._connectionState&&(g.debug("connection state changed to %s",y),this._connectionState=y,this._closed||this.safeEmit("connectionstatechange",y))})}handleProducer(j){j.on("@close",()=>{this._producers.delete(j.id),!this._closed&&this._awaitQueue.push(async()=>await this._handler.stopSending(j.localId),"producer @close event").catch(y=>g.warn("producer.close() failed:%o",y))}),j.on("@pause",(y,d)=>{this._awaitQueue.push(async()=>await this._handler.pauseSending(j.localId),"producer @pause event").then(y).catch(d)}),j.on("@resume",(y,d)=>{this._awaitQueue.push(async()=>await this._handler.resumeSending(j.localId),"producer @resume event").then(y).catch(d)}),j.on("@replacetrack",(y,d,R)=>{this._awaitQueue.push(async()=>await this._handler.replaceTrack(j.localId,y),"producer @replacetrack event").then(d).catch(R)}),j.on("@setmaxspatiallayer",(y,d,R)=>{this._awaitQueue.push(async()=>await this._handler.setMaxSpatialLayer(j.localId,y),"producer @setmaxspatiallayer event").then(d).catch(R)}),j.on("@setrtpencodingparameters",(y,d,R)=>{this._awaitQueue.push(async()=>await this._handler.setRtpEncodingParameters(j.localId,y),"producer @setrtpencodingparameters event").then(d).catch(R)}),j.on("@getstats",(y,d)=>{if(this._closed)return d(new b.InvalidStateError("closed"));this._handler.getSenderStats(j.localId).then(y).catch(d)})}handleConsumer(j){j.on("@close",()=>{this._consumers.delete(j.id),this._pendingPauseConsumers.delete(j.id),this._pendingResumeConsumers.delete(j.id),!this._closed&&(this._pendingCloseConsumers.set(j.id,j),this._consumerCloseInProgress===!1&&this.closePendingConsumers())}),j.on("@pause",()=>{this._pendingResumeConsumers.has(j.id)&&this._pendingResumeConsumers.delete(j.id),this._pendingPauseConsumers.set(j.id,j),queueMicrotask(()=>{this._closed||this._consumerPauseInProgress===!1&&this.pausePendingConsumers()})}),j.on("@resume",()=>{this._pendingPauseConsumers.has(j.id)&&this._pendingPauseConsumers.delete(j.id),this._pendingResumeConsumers.set(j.id,j),queueMicrotask(()=>{this._closed||this._consumerResumeInProgress===!1&&this.resumePendingConsumers()})}),j.on("@getstats",(y,d)=>{if(this._closed)return d(new b.InvalidStateError("closed"));this._handler.getReceiverStats(j.localId).then(y).catch(d)})}handleDataProducer(j){j.on("@close",()=>{this._dataProducers.delete(j.id)})}handleDataConsumer(j){j.on("@close",()=>{this._dataConsumers.delete(j.id)})}}Y.Transport=k}),5602:(oe=>{var Y=oe.exports={v:[{name:"version",reg:/^(\d*)$/}],o:[{name:"origin",reg:/^(\S*) (\d*) (\d*) (\S*) IP(\d) (\S*)/,names:["username","sessionId","sessionVersion","netType","ipVer","address"],format:"%s %s %d %s IP%d %s"}],s:[{name:"name"}],i:[{name:"description"}],u:[{name:"uri"}],e:[{name:"email"}],p:[{name:"phone"}],z:[{name:"timezones"}],r:[{name:"repeats"}],t:[{name:"timing",reg:/^(\d*) (\d*)/,names:["start","stop"],format:"%d %d"}],c:[{name:"connection",reg:/^IN IP(\d) (\S*)/,names:["version","ip"],format:"IN IP%d %s"}],b:[{push:"bandwidth",reg:/^(TIAS|AS|CT|RR|RS):(\d*)/,names:["type","limit"],format:"%s:%s"}],m:[{reg:/^(\w*) (\d*) ([\w/]*)(?: (.*))?/,names:["type","port","protocol","payloads"],format:"%s %d %s %s"}],a:[{push:"rtp",reg:/^rtpmap:(\d*) ([\w\-.]*)(?:\s*\/(\d*)(?:\s*\/(\S*))?)?/,names:["payload","codec","rate","encoding"],format:function(S){return S.encoding?"rtpmap:%d %s/%s/%s":S.rate?"rtpmap:%d %s/%s":"rtpmap:%d %s"}},{push:"fmtp",reg:/^fmtp:(\d*) ([\S| ]*)/,names:["payload","config"],format:"fmtp:%d %s"},{name:"control",reg:/^control:(.*)/,format:"control:%s"},{name:"rtcp",reg:/^rtcp:(\d*)(?: (\S*) IP(\d) (\S*))?/,names:["port","netType","ipVer","address"],format:function(S){return S.address!=null?"rtcp:%d %s IP%d %s":"rtcp:%d"}},{push:"rtcpFbTrrInt",reg:/^rtcp-fb:(\*|\d*) trr-int (\d*)/,names:["payload","value"],format:"rtcp-fb:%s trr-int %d"},{push:"rtcpFb",reg:/^rtcp-fb:(\*|\d*) ([\w-_]*)(?: ([\w-_]*))?/,names:["payload","type","subtype"],format:function(S){return S.subtype!=null?"rtcp-fb:%s %s %s":"rtcp-fb:%s %s"}},{push:"ext",reg:/^extmap:(\d+)(?:\/(\w+))?(?: (urn:ietf:params:rtp-hdrext:encrypt))? (\S*)(?: (\S*))?/,names:["value","direction","encrypt-uri","uri","config"],format:function(S){return"extmap:%d"+(S.direction?"/%s":"%v")+(S["encrypt-uri"]?" %s":"%v")+" %s"+(S.config?" %s":"")}},{name:"extmapAllowMixed",reg:/^(extmap-allow-mixed)/},{push:"crypto",reg:/^crypto:(\d*) ([\w_]*) (\S*)(?: (\S*))?/,names:["id","suite","config","sessionConfig"],format:function(S){return S.sessionConfig!=null?"crypto:%d %s %s %s":"crypto:%d %s %s"}},{name:"setup",reg:/^setup:(\w*)/,format:"setup:%s"},{name:"connectionType",reg:/^connection:(new|existing)/,format:"connection:%s"},{name:"mid",reg:/^mid:([^\s]*)/,format:"mid:%s"},{name:"msid",reg:/^msid:(.*)/,format:"msid:%s"},{name:"ptime",reg:/^ptime:(\d*(?:\.\d*)*)/,format:"ptime:%d"},{name:"maxptime",reg:/^maxptime:(\d*(?:\.\d*)*)/,format:"maxptime:%d"},{name:"direction",reg:/^(sendrecv|recvonly|sendonly|inactive)/},{name:"icelite",reg:/^(ice-lite)/},{name:"iceUfrag",reg:/^ice-ufrag:(\S*)/,format:"ice-ufrag:%s"},{name:"icePwd",reg:/^ice-pwd:(\S*)/,format:"ice-pwd:%s"},{name:"fingerprint",reg:/^fingerprint:(\S*) (\S*)/,names:["type","hash"],format:"fingerprint:%s %s"},{push:"candidates",reg:/^candidate:(\S*) (\d*) (\S*) (\d*) (\S*) (\d*) typ (\S*)(?: raddr (\S*) rport (\d*))?(?: tcptype (\S*))?(?: generation (\d*))?(?: network-id (\d*))?(?: network-cost (\d*))?/,names:["foundation","component","transport","priority","ip","port","type","raddr","rport","tcptype","generation","network-id","network-cost"],format:function(S){var x="candidate:%s %d %s %d %s %d typ %s";return x+=S.raddr!=null?" raddr %s rport %d":"%v%v",x+=S.tcptype!=null?" tcptype %s":"%v",S.generation!=null&&(x+=" generation %d"),x+=S["network-id"]!=null?" network-id %d":"%v",x+=S["network-cost"]!=null?" network-cost %d":"%v",x}},{name:"endOfCandidates",reg:/^(end-of-candidates)/},{name:"remoteCandidates",reg:/^remote-candidates:(.*)/,format:"remote-candidates:%s"},{name:"iceOptions",reg:/^ice-options:(\S*)/,format:"ice-options:%s"},{push:"ssrcs",reg:/^ssrc:(\d*) ([\w_-]*)(?::(.*))?/,names:["id","attribute","value"],format:function(S){var x="ssrc:%d";return S.attribute!=null&&(x+=" %s",S.value!=null&&(x+=":%s")),x}},{push:"ssrcGroups",reg:/^ssrc-group:([\x21\x23\x24\x25\x26\x27\x2A\x2B\x2D\x2E\w]*) (.*)/,names:["semantics","ssrcs"],format:"ssrc-group:%s %s"},{name:"msidSemantic",reg:/^msid-semantic:\s?(\w*) (\S*)/,names:["semantic","token"],format:"msid-semantic: %s %s"},{push:"groups",reg:/^group:(\w*) (.*)/,names:["type","mids"],format:"group:%s %s"},{name:"rtcpMux",reg:/^(rtcp-mux)/},{name:"rtcpRsize",reg:/^(rtcp-rsize)/},{name:"sctpmap",reg:/^sctpmap:([\w_/]*) (\S*)(?: (\S*))?/,names:["sctpmapNumber","app","maxMessageSize"],format:function(S){return S.maxMessageSize!=null?"sctpmap:%s %s %s":"sctpmap:%s %s"}},{name:"xGoogleFlag",reg:/^x-google-flag:([^\s]*)/,format:"x-google-flag:%s"},{push:"rids",reg:/^rid:([\d\w]+) (\w+)(?: ([\S| ]*))?/,names:["id","direction","params"],format:function(S){return S.params?"rid:%s %s %s":"rid:%s %s"}},{push:"imageattrs",reg:new RegExp("^imageattr:(\\d+|\\*)[\\s\\t]+(send|recv)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*)(?:[\\s\\t]+(recv|send)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*))?"),names:["pt","dir1","attrs1","dir2","attrs2"],format:function(S){return"imageattr:%s %s %s"+(S.dir2?" %s %s":"")}},{name:"simulcast",reg:new RegExp("^simulcast:(send|recv) ([a-zA-Z0-9\\-_~;,]+)(?:\\s?(send|recv) ([a-zA-Z0-9\\-_~;,]+))?$"),names:["dir1","list1","dir2","list2"],format:function(S){return"simulcast:%s %s"+(S.dir2?" %s %s":"")}},{name:"simulcast_03",reg:/^simulcast:[\s\t]+([\S+\s\t]+)$/,names:["value"],format:"simulcast: %s"},{name:"framerate",reg:/^framerate:(\d+(?:$|\.\d+))/,format:"framerate:%s"},{name:"sourceFilter",reg:/^source-filter: *(excl|incl) (\S*) (IP4|IP6|\*) (\S*) (.*)/,names:["filterMode","netType","addressTypes","destAddress","srcList"],format:"source-filter: %s %s %s %s %s"},{name:"bundleOnly",reg:/^(bundle-only)/},{name:"label",reg:/^label:(.+)/,format:"label:%s"},{name:"sctpPort",reg:/^sctp-port:(\d+)$/,format:"sctp-port:%s"},{name:"maxMessageSize",reg:/^max-message-size:(\d+)$/,format:"max-message-size:%s"},{push:"tsRefClocks",reg:/^ts-refclk:([^\s=]*)(?:=(\S*))?/,names:["clksrc","clksrcExt"],format:function(S){return"ts-refclk:%s"+(S.clksrcExt!=null?"=%s":"")}},{name:"mediaClk",reg:/^mediaclk:(?:id=(\S*))? *([^\s=]*)(?:=(\S*))?(?: *rate=(\d+)\/(\d+))?/,names:["id","mediaClockName","mediaClockValue","rateNumerator","rateDenominator"],format:function(S){var x="mediaclk:";return x+=S.id!=null?"id=%s %s":"%v%s",x+=S.mediaClockValue!=null?"=%s":"",x+=S.rateNumerator!=null?" rate=%s":"",x+=S.rateDenominator!=null?"/%s":"",x}},{name:"keywords",reg:/^keywds:(.+)$/,format:"keywds:%s"},{name:"content",reg:/^content:(.+)/,format:"content:%s"},{name:"bfcpFloorCtrl",reg:/^floorctrl:(c-only|s-only|c-s)/,format:"floorctrl:%s"},{name:"bfcpConfId",reg:/^confid:(\d+)/,format:"confid:%s"},{name:"bfcpUserId",reg:/^userid:(\d+)/,format:"userid:%s"},{name:"bfcpFloorId",reg:/^floorid:(.+) (?:m-stream|mstrm):(.+)/,names:["id","mStream"],format:"floorid:%s mstrm:%s"},{push:"invalid",names:["value"]}]};Object.keys(Y).forEach(function(S){var x=Y[S];x.forEach(function(C){C.reg||(C.reg=/(.*)/),C.format||(C.format="%s")})})}),5765:((oe,Y,S)=>{Object.defineProperty(Y,"__esModule",{value:!0}),Y.Safari12=void 0;const x=S(7363),C=S(3953),T=S(2994),b=S(8046),J=S(4893),w=S(3303),n=S(1305),f=S(5544),U=S(5938),q=S(4256),g=new T.Logger("Safari12"),h="Safari12",k={OS:1024,MIS:1024};class W extends C.EnhancedEventEmitter{_closed=!1;_direction;_remoteSdp;_getSendExtendedRtpCapabilities;_forcedLocalDtlsRole;_pc;_mapMidTransceiver=new Map;_sendStream=new MediaStream;_hasDataChannelMediaSection=!1;_nextSendSctpStreamId=0;_transportReady=!1;static createFactory(){return{name:h,factory:y=>new W(y),getNativeRtpCapabilities:async()=>{g.debug("getNativeRtpCapabilities()");let y=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require"});try{y.addTransceiver("audio"),y.addTransceiver("video");const d=await y.createOffer();try{y.close()}catch{}y=void 0;const R=x.parse(d.sdp);return W.getLocalRtpCapabilities(R)}catch(d){try{y?.close()}catch{}throw y=void 0,d}},getNativeSctpCapabilities:async()=>(g.debug("getNativeSctpCapabilities()"),{numStreams:k})}}static getLocalRtpCapabilities(y){const d=f.extractRtpCapabilities({sdpObject:y});return b.validateAndNormalizeRtpCapabilities(d),q.addNackSupportForOpus(d),d}constructor({direction:y,iceParameters:d,iceCandidates:R,dtlsParameters:m,sctpParameters:P,iceServers:H,iceTransportPolicy:B,additionalSettings:$,getSendExtendedRtpCapabilities:L}){super(),g.debug("constructor()"),this._direction=y,this._remoteSdp=new n.RemoteSdp({iceParameters:d,iceCandidates:R,dtlsParameters:m,sctpParameters:P}),this._getSendExtendedRtpCapabilities=L,m.role&&m.role!=="auto"&&(this._forcedLocalDtlsRole=m.role==="server"?"client":"server"),this._pc=new RTCPeerConnection({iceServers:H??[],iceTransportPolicy:B??"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",...$}),this._pc.addEventListener("icegatheringstatechange",()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)}),this._pc.addEventListener("icecandidateerror",z=>{this.emit("@icecandidateerror",z)}),this._pc.addEventListener("icegatheringstatechange",this.onIceGatheringStateChange),this._pc.addEventListener("icecandidateerror",this.onIceCandidateError),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",this.onConnectionStateChange):(g.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.addEventListener("iceconnectionstatechange",this.onIceConnectionStateChange))}get name(){return h}close(){if(g.debug("close()"),!this._closed){this._closed=!0;try{this._pc.close()}catch{}this._pc.removeEventListener("icegatheringstatechange",this.onIceGatheringStateChange),this._pc.removeEventListener("icecandidateerror",this.onIceCandidateError),this._pc.removeEventListener("connectionstatechange",this.onConnectionStateChange),this._pc.removeEventListener("iceconnectionstatechange",this.onIceConnectionStateChange),this.emit("@close"),super.close()}}async updateIceServers(y){this.assertNotClosed(),g.debug("updateIceServers()");const d=this._pc.getConfiguration();d.iceServers=y,this._pc.setConfiguration(d)}async restartIce(y){if(this.assertNotClosed(),g.debug("restartIce()"),this._remoteSdp.updateIceParameters(y),!!this._transportReady)if(this._direction==="send"){const d=await this._pc.createOffer({iceRestart:!0});g.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",d),await this._pc.setLocalDescription(d);const R={type:"answer",sdp:this._remoteSdp.getSdp()};g.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",R),await this._pc.setRemoteDescription(R)}else{const d={type:"offer",sdp:this._remoteSdp.getSdp()};g.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",d),await this._pc.setRemoteDescription(d);const R=await this._pc.createAnswer();g.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",R),await this._pc.setLocalDescription(R)}}async getTransportStats(){return this.assertNotClosed(),this._pc.getStats()}async send({track:y,encodings:d,codecOptions:R,codec:m,onRtpSender:P}){this.assertNotClosed(),this.assertSendDirection(),g.debug("send() [kind:%s, track.id:%s]",y.kind,y.id);const H=this._remoteSdp.getNextMediaSectionIdx(),B=this._pc.addTransceiver(y,{direction:"sendonly",streams:[this._sendStream]});P&&P(B.sender);let $=await this._pc.createOffer(),L=x.parse($.sdp);L.extmapAllowMixed&&this._remoteSdp.setSessionExtmapAllowMixed();const z=W.getLocalRtpCapabilities(L),V=this._getSendExtendedRtpCapabilities(z),X=b.getSendingRtpParameters(y.kind,V);X.codecs=b.reduceCodecs(X.codecs,m);const G=b.getSendingRemoteRtpParameters(y.kind,V);G.codecs=b.reduceCodecs(G.codecs,m);let ae;this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:L});const Q=(0,w.parse)((d??[{}])[0].scalabilityMode);d&&d.length>1&&(g.debug("send() | enabling legacy simulcast"),L=x.parse($.sdp),ae=L.media[H.idx],U.addLegacySimulcast({offerMediaObject:ae,numStreams:d.length}),$={type:"offer",sdp:x.write(L)}),g.debug("send() | calling pc.setLocalDescription() [offer:%o]",$),await this._pc.setLocalDescription($);const le=B.mid;if(X.mid=le,L=x.parse(this._pc.localDescription.sdp),ae=L.media[H.idx],X.rtcp.cname=f.getCname({offerMediaObject:ae}),X.encodings=U.getRtpEncodings({offerMediaObject:ae}),d)for(let ue=0;ue<X.encodings.length;++ue)d[ue]&&Object.assign(X.encodings[ue],d[ue]);if(X.encodings.length>1&&(X.codecs[0].mimeType.toLowerCase()==="video/vp8"||X.codecs[0].mimeType.toLowerCase()==="video/h264"))for(const ue of X.encodings)ue.scalabilityMode?ue.scalabilityMode=`L1T${Q.temporalLayers}`:ue.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:ae,reuseMid:H.reuseMid,offerRtpParameters:X,answerRtpParameters:G,codecOptions:R});const pe={type:"answer",sdp:this._remoteSdp.getSdp()};return g.debug("send() | calling pc.setRemoteDescription() [answer:%o]",pe),await this._pc.setRemoteDescription(pe),this._mapMidTransceiver.set(le,B),{localId:le,rtpParameters:X,rtpSender:B.sender}}async stopSending(y){if(this.assertSendDirection(),this._closed)return;g.debug("stopSending() [localId:%s]",y);const d=this._mapMidTransceiver.get(y);if(!d)throw new Error("associated RTCRtpTransceiver not found");if(d.sender.replaceTrack(null),this._pc.removeTrack(d.sender),this._remoteSdp.closeMediaSection(d.mid))try{d.stop()}catch{}const m=await this._pc.createOffer();g.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",m),await this._pc.setLocalDescription(m);const P={type:"answer",sdp:this._remoteSdp.getSdp()};g.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",P),await this._pc.setRemoteDescription(P),this._mapMidTransceiver.delete(y)}async pauseSending(y){this.assertNotClosed(),this.assertSendDirection(),g.debug("pauseSending() [localId:%s]",y);const d=this._mapMidTransceiver.get(y);if(!d)throw new Error("associated RTCRtpTransceiver not found");d.direction="inactive",this._remoteSdp.pauseMediaSection(y);const R=await this._pc.createOffer();g.debug("pauseSending() | calling pc.setLocalDescription() [offer:%o]",R),await this._pc.setLocalDescription(R);const m={type:"answer",sdp:this._remoteSdp.getSdp()};g.debug("pauseSending() | calling pc.setRemoteDescription() [answer:%o]",m),await this._pc.setRemoteDescription(m)}async resumeSending(y){this.assertNotClosed(),this.assertSendDirection(),g.debug("resumeSending() [localId:%s]",y);const d=this._mapMidTransceiver.get(y);if(!d)throw new Error("associated RTCRtpTransceiver not found");d.direction="sendonly",this._remoteSdp.resumeSendingMediaSection(y);const R=await this._pc.createOffer();g.debug("resumeSending() | calling pc.setLocalDescription() [offer:%o]",R),await this._pc.setLocalDescription(R);const m={type:"answer",sdp:this._remoteSdp.getSdp()};g.debug("resumeSending() | calling pc.setRemoteDescription() [answer:%o]",m),await this._pc.setRemoteDescription(m)}async replaceTrack(y,d){this.assertNotClosed(),this.assertSendDirection(),d?g.debug("replaceTrack() [localId:%s, track.id:%s]",y,d.id):g.debug("replaceTrack() [localId:%s, no track]",y);const R=this._mapMidTransceiver.get(y);if(!R)throw new Error("associated RTCRtpTransceiver not found");await R.sender.replaceTrack(d)}async setMaxSpatialLayer(y,d){this.assertNotClosed(),this.assertSendDirection(),g.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",y,d);const R=this._mapMidTransceiver.get(y);if(!R)throw new Error("associated RTCRtpTransceiver not found");const m=R.sender.getParameters();m.encodings.forEach((B,$)=>{$<=d?B.active=!0:B.active=!1}),await R.sender.setParameters(m),this._remoteSdp.muxMediaSectionSimulcast(y,m.encodings);const P=await this._pc.createOffer();g.debug("setMaxSpatialLayer() | calling pc.setLocalDescription() [offer:%o]",P),await this._pc.setLocalDescription(P);const H={type:"answer",sdp:this._remoteSdp.getSdp()};g.debug("setMaxSpatialLayer() | calling pc.setRemoteDescription() [answer:%o]",H),await this._pc.setRemoteDescription(H)}async setRtpEncodingParameters(y,d){this.assertNotClosed(),this.assertSendDirection(),g.debug("setRtpEncodingParameters() [localId:%s, params:%o]",y,d);const R=this._mapMidTransceiver.get(y);if(!R)throw new Error("associated RTCRtpTransceiver not found");const m=R.sender.getParameters();m.encodings.forEach((B,$)=>{m.encodings[$]={...B,...d}}),await R.sender.setParameters(m),this._remoteSdp.muxMediaSectionSimulcast(y,m.encodings);const P=await this._pc.createOffer();g.debug("setRtpEncodingParameters() | calling pc.setLocalDescription() [offer:%o]",P),await this._pc.setLocalDescription(P);const H={type:"answer",sdp:this._remoteSdp.getSdp()};g.debug("setRtpEncodingParameters() | calling pc.setRemoteDescription() [answer:%o]",H),await this._pc.setRemoteDescription(H)}async getSenderStats(y){this.assertNotClosed(),this.assertSendDirection();const d=this._mapMidTransceiver.get(y);if(!d)throw new Error("associated RTCRtpTransceiver not found");return d.sender.getStats()}async sendDataChannel({ordered:y,maxPacketLifeTime:d,maxRetransmits:R,label:m,protocol:P}){this.assertNotClosed(),this.assertSendDirection();const H={negotiated:!0,id:this._nextSendSctpStreamId,ordered:y,maxPacketLifeTime:d,maxRetransmits:R,protocol:P};g.debug("sendDataChannel() [options:%o]",H);const B=this._pc.createDataChannel(m,H);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%k.MIS,!this._hasDataChannelMediaSection){const L=await this._pc.createOffer(),z=x.parse(L.sdp),V=z.media.find(G=>G.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:z}),g.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",L),await this._pc.setLocalDescription(L),this._remoteSdp.sendSctpAssociation({offerMediaObject:V});const X={type:"answer",sdp:this._remoteSdp.getSdp()};g.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",X),await this._pc.setRemoteDescription(X),this._hasDataChannelMediaSection=!0}const $={streamId:H.id,ordered:H.ordered,maxPacketLifeTime:H.maxPacketLifeTime,maxRetransmits:H.maxRetransmits};return{dataChannel:B,sctpStreamParameters:$}}async receive(y){this.assertNotClosed(),this.assertRecvDirection();const d=[],R=new Map;for(const B of y){const{trackId:$,kind:L,rtpParameters:z,streamId:V}=B;g.debug("receive() [trackId:%s, kind:%s]",$,L);const X=z.mid??String(this._mapMidTransceiver.size);R.set($,X),this._remoteSdp.receive({mid:X,kind:L,offerRtpParameters:z,streamId:V??z.rtcp.cname,trackId:$})}const m={type:"offer",sdp:this._remoteSdp.getSdp()};g.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",m),await this._pc.setRemoteDescription(m);for(const B of y){const{trackId:$,onRtpReceiver:L}=B;if(L){const z=R.get($),V=this._pc.getTransceivers().find(X=>X.mid===z);if(!V)throw new Error("transceiver not found");L(V.receiver)}}let P=await this._pc.createAnswer();const H=x.parse(P.sdp);for(const B of y){const{trackId:$,rtpParameters:L}=B,z=R.get($),V=H.media.find(X=>String(X.mid)===z);f.applyCodecParameters({offerRtpParameters:L,answerMediaObject:V})}P={type:"answer",sdp:x.write(H)},this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:H}),g.debug("receive() | calling pc.setLocalDescription() [answer:%o]",P),await this._pc.setLocalDescription(P);for(const B of y){const{trackId:$}=B,L=R.get($),z=this._pc.getTransceivers().find(V=>V.mid===L);if(!z)throw new Error("new RTCRtpTransceiver not found");this._mapMidTransceiver.set(L,z),d.push({localId:L,track:z.receiver.track,rtpReceiver:z.receiver})}return d}async stopReceiving(y){if(this.assertRecvDirection(),this._closed)return;for(const m of y){g.debug("stopReceiving() [localId:%s]",m);const P=this._mapMidTransceiver.get(m);if(!P)throw new Error("associated RTCRtpTransceiver not found");this._remoteSdp.closeMediaSection(P.mid)}const d={type:"offer",sdp:this._remoteSdp.getSdp()};g.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",d),await this._pc.setRemoteDescription(d);const R=await this._pc.createAnswer();g.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",R),await this._pc.setLocalDescription(R);for(const m of y)this._mapMidTransceiver.delete(m)}async pauseReceiving(y){this.assertNotClosed(),this.assertRecvDirection();for(const m of y){g.debug("pauseReceiving() [localId:%s]",m);const P=this._mapMidTransceiver.get(m);if(!P)throw new Error("associated RTCRtpTransceiver not found");P.direction="inactive",this._remoteSdp.pauseMediaSection(m)}const d={type:"offer",sdp:this._remoteSdp.getSdp()};g.debug("pauseReceiving() | calling pc.setRemoteDescription() [offer:%o]",d),await this._pc.setRemoteDescription(d);const R=await this._pc.createAnswer();g.debug("pauseReceiving() | calling pc.setLocalDescription() [answer:%o]",R),await this._pc.setLocalDescription(R)}async resumeReceiving(y){this.assertNotClosed(),this.assertRecvDirection();for(const m of y){g.debug("resumeReceiving() [localId:%s]",m);const P=this._mapMidTransceiver.get(m);if(!P)throw new Error("associated RTCRtpTransceiver not found");P.direction="recvonly",this._remoteSdp.resumeReceivingMediaSection(m)}const d={type:"offer",sdp:this._remoteSdp.getSdp()};g.debug("resumeReceiving() | calling pc.setRemoteDescription() [offer:%o]",d),await this._pc.setRemoteDescription(d);const R=await this._pc.createAnswer();g.debug("resumeReceiving() | calling pc.setLocalDescription() [answer:%o]",R),await this._pc.setLocalDescription(R)}async getReceiverStats(y){this.assertNotClosed(),this.assertRecvDirection();const d=this._mapMidTransceiver.get(y);if(!d)throw new Error("associated RTCRtpTransceiver not found");return d.receiver.getStats()}async receiveDataChannel({sctpStreamParameters:y,label:d,protocol:R}){this.assertNotClosed(),this.assertRecvDirection();const{streamId:m,ordered:P,maxPacketLifeTime:H,maxRetransmits:B}=y,$={negotiated:!0,id:m,ordered:P,maxPacketLifeTime:H,maxRetransmits:B,protocol:R};g.debug("receiveDataChannel() [options:%o]",$);const L=this._pc.createDataChannel(d,$);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation();const z={type:"offer",sdp:this._remoteSdp.getSdp()};g.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",z),await this._pc.setRemoteDescription(z);const V=await this._pc.createAnswer();if(!this._transportReady){const X=x.parse(V.sdp);await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:X})}g.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",V),await this._pc.setLocalDescription(V),this._hasDataChannelMediaSection=!0}return{dataChannel:L}}async setupTransport({localDtlsRole:y,localSdpObject:d}){d||(d=x.parse(this._pc.localDescription.sdp));const R=f.extractDtlsParameters({sdpObject:d});R.role=y,this._remoteSdp.updateDtlsRole(y==="client"?"server":"client"),await new Promise((m,P)=>{this.safeEmit("@connect",{dtlsParameters:R},m,P)}),this._transportReady=!0}onIceGatheringStateChange=()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)};onIceCandidateError=y=>{this.emit("@icecandidateerror",y)};onConnectionStateChange=()=>{this.emit("@connectionstatechange",this._pc.connectionState)};onIceConnectionStateChange=()=>{switch(this._pc.iceConnectionState){case"checking":{this.emit("@connectionstatechange","connecting");break}case"connected":case"completed":{this.emit("@connectionstatechange","connected");break}case"failed":{this.emit("@connectionstatechange","failed");break}case"disconnected":{this.emit("@connectionstatechange","disconnected");break}case"closed":{this.emit("@connectionstatechange","closed");break}}};assertNotClosed(){if(this._closed)throw new J.InvalidStateError("method called in a closed handler")}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}}Y.Safari12=W}),5869:((oe,Y,S)=>{var x=S(887);function C(T,b,J,w,n){var f=x(T,b,J,w,n);return f.next().then(function(U){return U.done?U.value:f.next()})}oe.exports=C,oe.exports.__esModule=!0,oe.exports.default=oe.exports}),5935:((oe,Y)=>{Object.defineProperty(Y,"__esModule",{value:!0}),Y.FakeEventTarget=void 0;class S{listeners={};addEventListener(C,T,b){T&&(this.listeners[C]=this.listeners[C]??[],this.listeners[C].push({callback:typeof T=="function"?T:T.handleEvent,once:typeof b=="object"&&b.once===!0}))}removeEventListener(C,T,b){this.listeners[C]&&T&&(this.listeners[C]=this.listeners[C].filter(J=>J.callback!==(typeof T=="function"?T:T.handleEvent)))}dispatchEvent(C){if(!C||typeof C.type!="string")throw new Error("invalid event object");const T=this.listeners[C.type];if(!T)return!0;for(const b of[...T]){try{b.callback.call(this,C)}catch(J){setTimeout(()=>{throw J},0)}b.once&&this.removeEventListener(C.type,b.callback)}return!C.defaultPrevented}}Y.FakeEventTarget=S}),5938:((oe,Y)=>{Object.defineProperty(Y,"__esModule",{value:!0}),Y.getRtpEncodings=S,Y.addLegacySimulcast=x;function S({offerMediaObject:C}){const T=new Set;for(const w of C.ssrcs??[]){const n=w.id;n&&T.add(n)}if(T.size===0)throw new Error("no a=ssrc lines found");const b=new Map;for(const w of C.ssrcGroups??[]){if(w.semantics!=="FID")continue;const n=w.ssrcs.split(/\s+/),f=Number(n[0]),U=Number(n[1]);T.has(f)&&(T.delete(f),T.delete(U),b.set(f,U))}for(const w of T)b.set(w,void 0);const J=[];for(const[w,n]of b){const f={ssrc:w};n&&(f.rtx={ssrc:n}),J.push(f)}return J}function x({offerMediaObject:C,numStreams:T}){if(T<=1)throw new TypeError("numStreams must be greater than 1");const b=(C.ssrcs??[]).find(k=>k.attribute==="msid");if(!b)throw new Error("a=ssrc line with msid information not found");const[J,w]=b.value.split(" "),n=Number(b.id);let f;(C.ssrcGroups??[]).some(k=>{if(k.semantics!=="FID")return!1;const W=k.ssrcs.split(/\s+/);return Number(W[0])===n?(f=Number(W[1]),!0):!1});const U=(C.ssrcs??[]).find(k=>k.attribute==="cname");if(!U)throw new Error("a=ssrc line with cname information not found");const q=U.value,g=[],h=[];for(let k=0;k<T;++k)g.push(n+k),f&&h.push(f+k);C.ssrcGroups=[],C.ssrcs=[],C.ssrcGroups.push({semantics:"SIM",ssrcs:g.join(" ")});for(const k of g)C.ssrcs.push({id:k,attribute:"cname",value:q}),C.ssrcs.push({id:k,attribute:"msid",value:`${J} ${w}`});for(let k=0;k<h.length;++k){const W=g[k],j=h[k];C.ssrcs.push({id:j,attribute:"cname",value:q}),C.ssrcs.push({id:j,attribute:"msid",value:`${J} ${w}`}),C.ssrcGroups.push({semantics:"FID",ssrcs:`${W} ${j}`})}}}),5953:(function(oe,Y,S){(function(x,C,T){oe.exports=C(S(9021),S(3240))})(this,function(x){return(function(C){var T=x,b=T.lib,J=b.WordArray,w=b.Hasher,n=T.x64,f=n.Word,U=T.algo,q=[],g=[],h=[];(function(){for(var j=1,y=0,d=0;d<24;d++){q[j+5*y]=(d+1)*(d+2)/2%64;var R=y%5,m=(2*j+3*y)%5;j=R,y=m}for(var j=0;j<5;j++)for(var y=0;y<5;y++)g[j+5*y]=y+(2*j+3*y)%5*5;for(var P=1,H=0;H<24;H++){for(var B=0,$=0,L=0;L<7;L++){if(P&1){var z=(1<<L)-1;z<32?$^=1<<z:B^=1<<z-32}P&128?P=P<<1^113:P<<=1}h[H]=f.create(B,$)}})();var k=[];(function(){for(var j=0;j<25;j++)k[j]=f.create()})();var W=U.SHA3=w.extend({cfg:w.cfg.extend({outputLength:512}),_doReset:function(){for(var j=this._state=[],y=0;y<25;y++)j[y]=new f.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(j,y){for(var d=this._state,R=this.blockSize/2,m=0;m<R;m++){var P=j[y+2*m],H=j[y+2*m+1];P=(P<<8|P>>>24)&16711935|(P<<24|P>>>8)&4278255360,H=(H<<8|H>>>24)&16711935|(H<<24|H>>>8)&4278255360;var B=d[m];B.high^=H,B.low^=P}for(var $=0;$<24;$++){for(var L=0;L<5;L++){for(var z=0,V=0,X=0;X<5;X++){var B=d[L+5*X];z^=B.high,V^=B.low}var G=k[L];G.high=z,G.low=V}for(var L=0;L<5;L++)for(var ae=k[(L+4)%5],Q=k[(L+1)%5],le=Q.high,pe=Q.low,z=ae.high^(le<<1|pe>>>31),V=ae.low^(pe<<1|le>>>31),X=0;X<5;X++){var B=d[L+5*X];B.high^=z,B.low^=V}for(var ue=1;ue<25;ue++){var z,V,B=d[ue],ne=B.high,Oe=B.low,ye=q[ue];ye<32?(z=ne<<ye|Oe>>>32-ye,V=Oe<<ye|ne>>>32-ye):(z=Oe<<ye-32|ne>>>64-ye,V=ne<<ye-32|Oe>>>64-ye);var _e=k[g[ue]];_e.high=z,_e.low=V}var Se=k[0],ze=d[0];Se.high=ze.high,Se.low=ze.low;for(var L=0;L<5;L++)for(var X=0;X<5;X++){var ue=L+5*X,B=d[ue],Vt=k[ue],tr=k[(L+1)%5+5*X],gr=k[(L+2)%5+5*X];B.high=Vt.high^~tr.high&gr.high,B.low=Vt.low^~tr.low&gr.low}var B=d[0],jt=h[$];B.high^=jt.high,B.low^=jt.low}},_doFinalize:function(){var j=this._data,y=j.words;this._nDataBytes*8;var d=j.sigBytes*8,R=this.blockSize*32;y[d>>>5]|=1<<24-d%32,y[(C.ceil((d+1)/R)*R>>>5)-1]|=128,j.sigBytes=y.length*4,this._process();for(var m=this._state,P=this.cfg.outputLength/8,H=P/8,B=[],$=0;$<H;$++){var L=m[$],z=L.high,V=L.low;z=(z<<8|z>>>24)&16711935|(z<<24|z>>>8)&4278255360,V=(V<<8|V>>>24)&16711935|(V<<24|V>>>8)&4278255360,B.push(V),B.push(z)}return new J.init(B,P)},clone:function(){for(var j=w.clone.call(this),y=j._state=this._state.slice(0),d=0;d<25;d++)y[d]=y[d].clone();return j}});T.SHA3=w._createHelper(W),T.HmacSHA3=w._createHmacHelper(W)})(Math),x.SHA3})}),6004:((oe,Y,S)=>{Object.defineProperty(Y,"__esModule",{value:!0}),Y.Device=void 0,Y.detectDeviceAsync=W,Y.detectDevice=j;const x=S(2109),C=S(2994),T=S(3953),b=S(4893),J=S(1765),w=S(8046),n=S(5601),f=S(2183),U=S(11),q=S(2292),g=S(5765),h=S(867),k=new C.Logger("Device");async function W(R){k.debug("detectDeviceAsync() [userAgent:%s]",R),!R&&typeof navigator=="object"&&(R=navigator.userAgent);const m=await(0,x.UAParser)(R).withFeatureCheck();return d(m)}function j(R){k.debug("detectDevice() [userAgent:%s]",R),!R&&typeof navigator=="object"&&(R=navigator.userAgent);const m=(0,x.UAParser)(R);return d(m)}class y{_handlerFactory;_handlerName;_loaded=!1;_getSendExtendedRtpCapabilities;_recvRtpCapabilities;_canProduceByKind={audio:!1,video:!1};_sctpCapabilities;_observer=new T.EnhancedEventEmitter;static async factory({handlerName:m,handlerFactory:P}={}){if(k.debug("factory()"),m&&P)throw new TypeError("just one of handlerName or handlerInterface can be given");if(!m&&!P&&(m=await W(),!m))throw new b.UnsupportedError("device not supported");return new y({handlerName:m,handlerFactory:P})}constructor({handlerName:m,handlerFactory:P}={}){if(k.debug("constructor()"),m&&P)throw new TypeError("just one of handlerName or handlerInterface can be given");if(P)this._handlerFactory=P;else{if(m)k.debug("constructor() | handler given: %s",m);else if(m=j(),m)k.debug("constructor() | detected handler: %s",m);else throw new b.UnsupportedError("device not supported");switch(m){case"Chrome111":{this._handlerFactory=f.Chrome111.createFactory();break}case"Chrome74":{this._handlerFactory=U.Chrome74.createFactory();break}case"Firefox120":{this._handlerFactory=q.Firefox120.createFactory();break}case"Safari12":{this._handlerFactory=g.Safari12.createFactory();break}case"ReactNative106":{this._handlerFactory=h.ReactNative106.createFactory();break}default:throw new TypeError(`unknown handlerName "${m}"`)}}this._handlerName=this._handlerFactory.name}get handlerName(){return this._handlerName}get loaded(){return this._loaded}get rtpCapabilities(){if(!this._loaded)throw new b.InvalidStateError("not loaded");return this._recvRtpCapabilities}get sctpCapabilities(){if(!this._loaded)throw new b.InvalidStateError("not loaded");return this._sctpCapabilities}get observer(){return this._observer}async load({routerRtpCapabilities:m,preferLocalCodecsOrder:P=!1}){if(k.debug("load() [routerRtpCapabilities:%o]",m),this._loaded)throw new b.InvalidStateError("already loaded");const H=J.clone(m);w.validateAndNormalizeRtpCapabilities(H);const{getNativeRtpCapabilities:B,getNativeSctpCapabilities:$}=this._handlerFactory,L=J.clone(await B());w.validateAndNormalizeRtpCapabilities(L),k.debug("load() | got native RTP capabilities:%o",L),this._getSendExtendedRtpCapabilities=V=>J.clone(w.getExtendedRtpCapabilities(V,H,P));const z=w.getExtendedRtpCapabilities(L,H,!1);this._recvRtpCapabilities=w.getRecvRtpCapabilities(z),w.validateAndNormalizeRtpCapabilities(this._recvRtpCapabilities),k.debug("load() | got receiving RTP capabilities:%o",this._recvRtpCapabilities),this._canProduceByKind.audio=w.canSend("audio",this._recvRtpCapabilities),this._canProduceByKind.video=w.canSend("video",this._recvRtpCapabilities),this._sctpCapabilities=await $(),w.validateSctpCapabilities(this._sctpCapabilities),k.debug("load() | got native SCTP capabilities:%o",this._sctpCapabilities),k.debug("load() succeeded"),this._loaded=!0}canProduce(m){if(this._loaded){if(m!=="audio"&&m!=="video")throw new TypeError(`invalid kind "${m}"`)}else throw new b.InvalidStateError("not loaded");return this._canProduceByKind[m]}createSendTransport({id:m,iceParameters:P,iceCandidates:H,dtlsParameters:B,sctpParameters:$,iceServers:L,iceTransportPolicy:z,additionalSettings:V,appData:X}){return k.debug("createSendTransport()"),this.createTransport({direction:"send",id:m,iceParameters:P,iceCandidates:H,dtlsParameters:B,sctpParameters:$,iceServers:L,iceTransportPolicy:z,additionalSettings:V,appData:X})}createRecvTransport({id:m,iceParameters:P,iceCandidates:H,dtlsParameters:B,sctpParameters:$,iceServers:L,iceTransportPolicy:z,additionalSettings:V,appData:X}){return k.debug("createRecvTransport()"),this.createTransport({direction:"recv",id:m,iceParameters:P,iceCandidates:H,dtlsParameters:B,sctpParameters:$,iceServers:L,iceTransportPolicy:z,additionalSettings:V,appData:X})}createTransport({direction:m,id:P,iceParameters:H,iceCandidates:B,dtlsParameters:$,sctpParameters:L,iceServers:z,iceTransportPolicy:V,additionalSettings:X,appData:G}){if(this._loaded){if(typeof P!="string")throw new TypeError("missing id");if(typeof H!="object")throw new TypeError("missing iceParameters");if(Array.isArray(B)){if(typeof $!="object")throw new TypeError("missing dtlsParameters");if(L&&typeof L!="object")throw new TypeError("wrong sctpParameters");if(G&&typeof G!="object")throw new TypeError("if given, appData must be an object")}else throw new TypeError("missing iceCandidates")}else throw new b.InvalidStateError("not loaded");const ae=new n.Transport({direction:m,id:P,iceParameters:H,iceCandidates:B,dtlsParameters:$,sctpParameters:L,iceServers:z,iceTransportPolicy:V,additionalSettings:X,appData:G,handlerFactory:this._handlerFactory,getSendExtendedRtpCapabilities:this._getSendExtendedRtpCapabilities,recvRtpCapabilities:this._recvRtpCapabilities,canProduceByKind:this._canProduceByKind});return this._observer.safeEmit("newtransport",ae),ae}}Y.Device=y;function d(R){if(typeof navigator=="object"&&navigator.product==="ReactNative"){if(k.debug("detectDeviceImpl() | React-Native detected"),typeof RTCPeerConnection>"u"||typeof RTCRtpTransceiver>"u"){k.warn("detectDeviceImpl() | unsupported react-native-webrtc without RTCPeerConnection or RTCRtpTransceiver, forgot to call registerGlobals() on it?");return}return"ReactNative106"}else{k.debug("detectDeviceImpl() | browser detected [userAgent:%s, parsed:%o]",R.ua,R);const m=R.browser,P=m.name?.toLowerCase(),H=parseInt(m.major??"0"),$=R.engine.name?.toLowerCase(),L=R.os,z=L.name?.toLowerCase(),V=parseFloat(L.version??"0"),G=R.device.model?.toLowerCase(),ae=z==="ios"||G==="ipad",Q=P&&["chrome","chromium","mobile chrome","chrome webview","chrome headless"].includes(P),le=P&&["firefox","mobile firefox","mobile focus"].includes(P),pe=P&&["safari","mobile safari"].includes(P),ue=P&&["edge"].includes(P);if((Q||ue)&&!ae&&H>=111)return"Chrome111";if(Q&&!ae&&H>=74||ue&&!ae&&H>=88)return"Chrome74";if(le&&!ae&&H>=120)return"Firefox120";if(le&&ae&&V>=14.3)return"Safari12";if(pe&&H>=12&&typeof RTCRtpTransceiver<"u"&&RTCRtpTransceiver.prototype.hasOwnProperty("currentDirection"))return"Safari12";if($==="webkit"&&ae&&typeof RTCRtpTransceiver<"u"&&RTCRtpTransceiver.prototype.hasOwnProperty("currentDirection"))return"Safari12";if($==="blink"){const ne=R.ua.match(/(?:(?:Chrome|Chromium))[ /](\w+)/i);return ne?Number(ne[1])>=111?"Chrome111":"Chrome74":"Chrome111"}else{k.warn("detectDeviceImpl() | browser not supported [name:%s, version:%s]",P,H);return}}}}),6298:(function(oe,Y,S){(function(x,C,T){oe.exports=C(S(9021),S(754),S(4636),S(9506),S(7165))})(this,function(x){return(function(){var C=x,T=C.lib,b=T.StreamCipher,J=C.algo,w=[],n=[],f=[],U=J.Rabbit=b.extend({_doReset:function(){for(var g=this._key.words,h=this.cfg.iv,k=0;k<4;k++)g[k]=(g[k]<<8|g[k]>>>24)&16711935|(g[k]<<24|g[k]>>>8)&4278255360;var W=this._X=[g[0],g[3]<<16|g[2]>>>16,g[1],g[0]<<16|g[3]>>>16,g[2],g[1]<<16|g[0]>>>16,g[3],g[2]<<16|g[1]>>>16],j=this._C=[g[2]<<16|g[2]>>>16,g[0]&4294901760|g[1]&65535,g[3]<<16|g[3]>>>16,g[1]&4294901760|g[2]&65535,g[0]<<16|g[0]>>>16,g[2]&4294901760|g[3]&65535,g[1]<<16|g[1]>>>16,g[3]&4294901760|g[0]&65535];this._b=0;for(var k=0;k<4;k++)q.call(this);for(var k=0;k<8;k++)j[k]^=W[k+4&7];if(h){var y=h.words,d=y[0],R=y[1],m=(d<<8|d>>>24)&16711935|(d<<24|d>>>8)&4278255360,P=(R<<8|R>>>24)&16711935|(R<<24|R>>>8)&4278255360,H=m>>>16|P&4294901760,B=P<<16|m&65535;j[0]^=m,j[1]^=H,j[2]^=P,j[3]^=B,j[4]^=m,j[5]^=H,j[6]^=P,j[7]^=B;for(var k=0;k<4;k++)q.call(this)}},_doProcessBlock:function(g,h){var k=this._X;q.call(this),w[0]=k[0]^k[5]>>>16^k[3]<<16,w[1]=k[2]^k[7]>>>16^k[5]<<16,w[2]=k[4]^k[1]>>>16^k[7]<<16,w[3]=k[6]^k[3]>>>16^k[1]<<16;for(var W=0;W<4;W++)w[W]=(w[W]<<8|w[W]>>>24)&16711935|(w[W]<<24|w[W]>>>8)&4278255360,g[h+W]^=w[W]},blockSize:128/32,ivSize:64/32});function q(){for(var g=this._X,h=this._C,k=0;k<8;k++)n[k]=h[k];h[0]=h[0]+1295307597+this._b|0,h[1]=h[1]+3545052371+(h[0]>>>0<n[0]>>>0?1:0)|0,h[2]=h[2]+886263092+(h[1]>>>0<n[1]>>>0?1:0)|0,h[3]=h[3]+1295307597+(h[2]>>>0<n[2]>>>0?1:0)|0,h[4]=h[4]+3545052371+(h[3]>>>0<n[3]>>>0?1:0)|0,h[5]=h[5]+886263092+(h[4]>>>0<n[4]>>>0?1:0)|0,h[6]=h[6]+1295307597+(h[5]>>>0<n[5]>>>0?1:0)|0,h[7]=h[7]+3545052371+(h[6]>>>0<n[6]>>>0?1:0)|0,this._b=h[7]>>>0<n[7]>>>0?1:0;for(var k=0;k<8;k++){var W=g[k]+h[k],j=W&65535,y=W>>>16,d=((j*j>>>17)+j*y>>>15)+y*y,R=((W&4294901760)*W|0)+((W&65535)*W|0);f[k]=d^R}g[0]=f[0]+(f[7]<<16|f[7]>>>16)+(f[6]<<16|f[6]>>>16)|0,g[1]=f[1]+(f[0]<<8|f[0]>>>24)+f[7]|0,g[2]=f[2]+(f[1]<<16|f[1]>>>16)+(f[0]<<16|f[0]>>>16)|0,g[3]=f[3]+(f[2]<<8|f[2]>>>24)+f[1]|0,g[4]=f[4]+(f[3]<<16|f[3]>>>16)+(f[2]<<16|f[2]>>>16)|0,g[5]=f[5]+(f[4]<<8|f[4]>>>24)+f[3]|0,g[6]=f[6]+(f[5]<<16|f[5]>>>16)+(f[4]<<16|f[4]>>>16)|0,g[7]=f[7]+(f[6]<<8|f[6]>>>24)+f[5]|0}C.Rabbit=b._createHelper(U)})(),x.Rabbit})}),6308:(function(oe,Y,S){(function(x,C,T){oe.exports=C(S(9021),S(3009))})(this,function(x){return(function(){var C=x,T=C.lib,b=T.WordArray,J=C.algo,w=J.SHA256,n=J.SHA224=w.extend({_doReset:function(){this._hash=new b.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var f=w._doFinalize.call(this);return f.sigBytes-=4,f}});C.SHA224=w._createHelper(n),C.HmacSHA224=w._createHmacHelper(n)})(),x.SHA224})}),6372:(function(oe,Y,S){(function(x,C,T){oe.exports=C(S(9021),S(7165))})(this,function(x){return x.mode.CTRGladman=(function(){var C=x.lib.BlockCipherMode.extend();function T(w){if((w>>24&255)===255){var n=w>>16&255,f=w>>8&255,U=w&255;n===255?(n=0,f===255?(f=0,U===255?U=0:++U):++f):++n,w=0,w+=n<<16,w+=f<<8,w+=U}else w+=16777216;return w}function b(w){return(w[0]=T(w[0]))===0&&(w[1]=T(w[1])),w}var J=C.Encryptor=C.extend({processBlock:function(w,n){var f=this._cipher,U=f.blockSize,q=this._iv,g=this._counter;q&&(g=this._counter=q.slice(0),this._iv=void 0),b(g);var h=g.slice(0);f.encryptBlock(h,0);for(var k=0;k<U;k++)w[n+k]^=h[k]}});return C.Decryptor=J,C})(),x.mode.CTRGladman})}),6440:(function(oe,Y,S){(function(x,C){oe.exports=C(S(9021))})(this,function(x){return(function(){if(typeof ArrayBuffer=="function"){var C=x,T=C.lib,b=T.WordArray,J=b.init,w=b.init=function(n){if(n instanceof ArrayBuffer&&(n=new Uint8Array(n)),(n instanceof Int8Array||typeof Uint8ClampedArray<"u"&&n instanceof Uint8ClampedArray||n instanceof Int16Array||n instanceof Uint16Array||n instanceof Int32Array||n instanceof Uint32Array||n instanceof Float32Array||n instanceof Float64Array)&&(n=new Uint8Array(n.buffer,n.byteOffset,n.byteLength)),n instanceof Uint8Array){for(var f=n.byteLength,U=[],q=0;q<f;q++)U[q>>>2]|=n[q]<<24-q%4*8;J.call(this,U,f)}else J.apply(this,arguments)};w.prototype=b}})(),x.lib.WordArray})}),6565:((oe,Y,S)=>{S.d(Y,{x:()=>x});var x={HIGH_QUALITY:"high_quality",BALANCED:"balanced",BANDWIDTH_OPTIMIZED:"bandwidth_optimized"}}),6585:(oe=>{var Y=1e3,S=Y*60,x=S*60,C=x*24,T=C*7,b=C*365.25;oe.exports=function(U,q){q=q||{};var g=typeof U;if(g==="string"&&U.length>0)return J(U);if(g==="number"&&isFinite(U))return q.long?n(U):w(U);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(U))};function J(U){if(U=String(U),!(U.length>100)){var q=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(U);if(q){var g=parseFloat(q[1]),h=(q[2]||"ms").toLowerCase();switch(h){case"years":case"year":case"yrs":case"yr":case"y":return g*b;case"weeks":case"week":case"w":return g*T;case"days":case"day":case"d":return g*C;case"hours":case"hour":case"hrs":case"hr":case"h":return g*x;case"minutes":case"minute":case"mins":case"min":case"m":return g*S;case"seconds":case"second":case"secs":case"sec":case"s":return g*Y;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return g;default:return}}}}function w(U){var q=Math.abs(U);return q>=C?Math.round(U/C)+"d":q>=x?Math.round(U/x)+"h":q>=S?Math.round(U/S)+"m":q>=Y?Math.round(U/Y)+"s":U+"ms"}function n(U){var q=Math.abs(U);return q>=C?f(U,q,C,"day"):q>=x?f(U,q,x,"hour"):q>=S?f(U,q,S,"minute"):q>=Y?f(U,q,Y,"second"):U+" ms"}function f(U,q,g,h){var k=q>=g*1.5;return Math.round(U/g)+" "+h+(k?"s":"")}}),6746:((oe,Y,S)=>{S.d(Y,{KS:()=>C,fo:()=>x});var x=Object.freeze({SetKey:"setKey",RatchetRequest:"ratchetRequest",KeyRatcheted:"keyRatcheted"}),C=Object.freeze({ParticipantEncryptionStatusChanged:"participantEncryptionStatusChanged",EncryptionError:"encryptionError",E2EEStateChange:"e2eeStateChange"})}),6880:(function(oe){(function(Y,S){oe.exports=S()})(this,(function(){return(function(Y){var S={};function x(C){if(S[C])return S[C].exports;var T=S[C]={i:C,l:!1,exports:{}};return Y[C].call(T.exports,T,T.exports,x),T.l=!0,T.exports}return x.m=Y,x.c=S,x.d=function(C,T,b){x.o(C,T)||Object.defineProperty(C,T,{enumerable:!0,get:b})},x.r=function(C){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(C,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(C,"__esModule",{value:!0})},x.t=function(C,T){if(1&T&&(C=x(C)),8&T||4&T&&typeof C=="object"&&C&&C.__esModule)return C;var b=Object.create(null);if(x.r(b),Object.defineProperty(b,"default",{enumerable:!0,value:C}),2&T&&typeof C!="string")for(var J in C)x.d(b,J,(function(w){return C[w]}).bind(null,J));return b},x.n=function(C){var T=C&&C.__esModule?function(){return C.default}:function(){return C};return x.d(T,"a",T),T},x.o=function(C,T){return Object.prototype.hasOwnProperty.call(C,T)},x.p="",x(x.s=90)})({17:function(Y,S,x){S.__esModule=!0,S.default=void 0;var C=x(18),T=(function(){function b(){}return b.getFirstMatch=function(J,w){var n=w.match(J);return n&&n.length>0&&n[1]||""},b.getSecondMatch=function(J,w){var n=w.match(J);return n&&n.length>1&&n[2]||""},b.matchAndReturnConst=function(J,w,n){if(J.test(w))return n},b.getWindowsVersionName=function(J){switch(J){case"NT":return"NT";case"XP":return"XP";case"NT 5.0":return"2000";case"NT 5.1":return"XP";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}},b.getMacOSVersionName=function(J){var w=J.split(".").splice(0,2).map((function(U){return parseInt(U,10)||0}));w.push(0);var n=w[0],f=w[1];if(n===10)switch(f){case 5:return"Leopard";case 6:return"Snow Leopard";case 7:return"Lion";case 8:return"Mountain Lion";case 9:return"Mavericks";case 10:return"Yosemite";case 11:return"El Capitan";case 12:return"Sierra";case 13:return"High Sierra";case 14:return"Mojave";case 15:return"Catalina";default:return}switch(n){case 11:return"Big Sur";case 12:return"Monterey";case 13:return"Ventura";case 14:return"Sonoma";case 15:return"Sequoia";default:return}},b.getAndroidVersionName=function(J){var w=J.split(".").splice(0,2).map((function(n){return parseInt(n,10)||0}));if(w.push(0),!(w[0]===1&&w[1]<5))return w[0]===1&&w[1]<6?"Cupcake":w[0]===1&&w[1]>=6?"Donut":w[0]===2&&w[1]<2?"Eclair":w[0]===2&&w[1]===2?"Froyo":w[0]===2&&w[1]>2?"Gingerbread":w[0]===3?"Honeycomb":w[0]===4&&w[1]<1?"Ice Cream Sandwich":w[0]===4&&w[1]<4?"Jelly Bean":w[0]===4&&w[1]>=4?"KitKat":w[0]===5?"Lollipop":w[0]===6?"Marshmallow":w[0]===7?"Nougat":w[0]===8?"Oreo":w[0]===9?"Pie":void 0},b.getVersionPrecision=function(J){return J.split(".").length},b.compareVersions=function(J,w,n){n===void 0&&(n=!1);var f=b.getVersionPrecision(J),U=b.getVersionPrecision(w),q=Math.max(f,U),g=0,h=b.map([J,w],(function(k){var W=q-b.getVersionPrecision(k),j=k+new Array(W+1).join(".0");return b.map(j.split("."),(function(y){return new Array(20-y.length).join("0")+y})).reverse()}));for(n&&(g=q-Math.min(f,U)),q-=1;q>=g;){if(h[0][q]>h[1][q])return 1;if(h[0][q]===h[1][q]){if(q===g)return 0;q-=1}else if(h[0][q]<h[1][q])return-1}},b.map=function(J,w){var n,f=[];if(Array.prototype.map)return Array.prototype.map.call(J,w);for(n=0;n<J.length;n+=1)f.push(w(J[n]));return f},b.find=function(J,w){var n,f;if(Array.prototype.find)return Array.prototype.find.call(J,w);for(n=0,f=J.length;n<f;n+=1){var U=J[n];if(w(U,n))return U}},b.assign=function(J){for(var w,n,f=J,U=arguments.length,q=new Array(U>1?U-1:0),g=1;g<U;g++)q[g-1]=arguments[g];if(Object.assign)return Object.assign.apply(Object,[J].concat(q));var h=function(){var k=q[w];typeof k=="object"&&k!==null&&Object.keys(k).forEach((function(W){f[W]=k[W]}))};for(w=0,n=q.length;w<n;w+=1)h();return J},b.getBrowserAlias=function(J){return C.BROWSER_ALIASES_MAP[J]},b.getBrowserTypeByAlias=function(J){return C.BROWSER_MAP[J]||""},b})();S.default=T,Y.exports=S.default},18:function(Y,S,x){S.__esModule=!0,S.ENGINE_MAP=S.OS_MAP=S.PLATFORMS_MAP=S.BROWSER_MAP=S.BROWSER_ALIASES_MAP=void 0,S.BROWSER_ALIASES_MAP={AmazonBot:"amazonbot","Amazon Silk":"amazon_silk","Android Browser":"android",BaiduSpider:"baiduspider",Bada:"bada",BingCrawler:"bingcrawler",BlackBerry:"blackberry","ChatGPT-User":"chatgpt_user",Chrome:"chrome",ClaudeBot:"claudebot",Chromium:"chromium",Diffbot:"diffbot",DuckDuckBot:"duckduckbot",Electron:"electron",Epiphany:"epiphany",FacebookExternalHit:"facebookexternalhit",Firefox:"firefox",Focus:"focus",Generic:"generic","Google Search":"google_search",Googlebot:"googlebot",GPTBot:"gptbot","Internet Explorer":"ie",InternetArchiveCrawler:"internetarchivecrawler","K-Meleon":"k_meleon",LibreWolf:"librewolf",Maxthon:"maxthon","Meta-ExternalAds":"meta_externalads","Meta-ExternalAgent":"meta_externalagent","Meta-ExternalFetcher":"meta_externalfetcher","Meta-WebIndexer":"meta_webindexer","Microsoft Edge":"edge","MZ Browser":"mz","NAVER Whale Browser":"naver","OAI-SearchBot":"oai_searchbot",Omgilibot:"omgilibot",Opera:"opera","Opera Coast":"opera_coast","Pale Moon":"pale_moon",PerplexityBot:"perplexitybot","Perplexity-User":"perplexity_user",PhantomJS:"phantomjs",PingdomBot:"pingdombot",Puffin:"puffin",QQ:"qq",QQLite:"qqlite",QupZilla:"qupzilla",Roku:"roku",Safari:"safari",Sailfish:"sailfish","Samsung Internet for Android":"samsung_internet",SeaMonkey:"seamonkey",Sleipnir:"sleipnir","Sogou Browser":"sogou",Swing:"swing",Tizen:"tizen","UC Browser":"uc",Vivaldi:"vivaldi","WebOS Browser":"webos",WeChat:"wechat",YahooSlurp:"yahooslurp","Yandex Browser":"yandex",YandexBot:"yandexbot",YouBot:"youbot"},S.BROWSER_MAP={amazonbot:"AmazonBot",amazon_silk:"Amazon Silk",android:"Android Browser",baiduspider:"BaiduSpider",bada:"Bada",bingcrawler:"BingCrawler",blackberry:"BlackBerry",chatgpt_user:"ChatGPT-User",chrome:"Chrome",claudebot:"ClaudeBot",chromium:"Chromium",diffbot:"Diffbot",duckduckbot:"DuckDuckBot",edge:"Microsoft Edge",electron:"Electron",epiphany:"Epiphany",facebookexternalhit:"FacebookExternalHit",firefox:"Firefox",focus:"Focus",generic:"Generic",google_search:"Google Search",googlebot:"Googlebot",gptbot:"GPTBot",ie:"Internet Explorer",internetarchivecrawler:"InternetArchiveCrawler",k_meleon:"K-Meleon",librewolf:"LibreWolf",maxthon:"Maxthon",meta_externalads:"Meta-ExternalAds",meta_externalagent:"Meta-ExternalAgent",meta_externalfetcher:"Meta-ExternalFetcher",meta_webindexer:"Meta-WebIndexer",mz:"MZ Browser",naver:"NAVER Whale Browser",oai_searchbot:"OAI-SearchBot",omgilibot:"Omgilibot",opera:"Opera",opera_coast:"Opera Coast",pale_moon:"Pale Moon",perplexitybot:"PerplexityBot",perplexity_user:"Perplexity-User",phantomjs:"PhantomJS",pingdombot:"PingdomBot",puffin:"Puffin",qq:"QQ Browser",qqlite:"QQ Browser Lite",qupzilla:"QupZilla",roku:"Roku",safari:"Safari",sailfish:"Sailfish",samsung_internet:"Samsung Internet for Android",seamonkey:"SeaMonkey",sleipnir:"Sleipnir",sogou:"Sogou Browser",swing:"Swing",tizen:"Tizen",uc:"UC Browser",vivaldi:"Vivaldi",webos:"WebOS Browser",wechat:"WeChat",yahooslurp:"YahooSlurp",yandex:"Yandex Browser",yandexbot:"YandexBot",youbot:"YouBot"},S.PLATFORMS_MAP={bot:"bot",desktop:"desktop",mobile:"mobile",tablet:"tablet",tv:"tv"},S.OS_MAP={Android:"Android",Bada:"Bada",BlackBerry:"BlackBerry",ChromeOS:"Chrome OS",HarmonyOS:"HarmonyOS",iOS:"iOS",Linux:"Linux",MacOS:"macOS",PlayStation4:"PlayStation 4",Roku:"Roku",Tizen:"Tizen",WebOS:"WebOS",Windows:"Windows",WindowsPhone:"Windows Phone"},S.ENGINE_MAP={Blink:"Blink",EdgeHTML:"EdgeHTML",Gecko:"Gecko",Presto:"Presto",Trident:"Trident",WebKit:"WebKit"}},90:function(Y,S,x){S.__esModule=!0,S.default=void 0;var C,T=(C=x(91))&&C.__esModule?C:{default:C},b=x(18);function J(n,f){for(var U=0;U<f.length;U++){var q=f[U];q.enumerable=q.enumerable||!1,q.configurable=!0,"value"in q&&(q.writable=!0),Object.defineProperty(n,q.key,q)}}var w=(function(){function n(){}var f,U,q;return n.getParser=function(g,h){if(h===void 0&&(h=!1),typeof g!="string")throw new Error("UserAgent should be a string");return new T.default(g,h)},n.parse=function(g){return new T.default(g).getResult()},f=n,q=[{key:"BROWSER_MAP",get:function(){return b.BROWSER_MAP}},{key:"ENGINE_MAP",get:function(){return b.ENGINE_MAP}},{key:"OS_MAP",get:function(){return b.OS_MAP}},{key:"PLATFORMS_MAP",get:function(){return b.PLATFORMS_MAP}}],(U=null)&&J(f.prototype,U),q&&J(f,q),n})();S.default=w,Y.exports=S.default},91:function(Y,S,x){S.__esModule=!0,S.default=void 0;var C=n(x(92)),T=n(x(93)),b=n(x(94)),J=n(x(95)),w=n(x(17));function n(U){return U&&U.__esModule?U:{default:U}}var f=(function(){function U(g,h){if(h===void 0&&(h=!1),g==null||g==="")throw new Error("UserAgent parameter can't be empty");this._ua=g,this.parsedResult={},h!==!0&&this.parse()}var q=U.prototype;return q.getUA=function(){return this._ua},q.test=function(g){return g.test(this._ua)},q.parseBrowser=function(){var g=this;this.parsedResult.browser={};var h=w.default.find(C.default,(function(k){if(typeof k.test=="function")return k.test(g);if(Array.isArray(k.test))return k.test.some((function(W){return g.test(W)}));throw new Error("Browser's test function is not valid")}));return h&&(this.parsedResult.browser=h.describe(this.getUA())),this.parsedResult.browser},q.getBrowser=function(){return this.parsedResult.browser?this.parsedResult.browser:this.parseBrowser()},q.getBrowserName=function(g){return g?String(this.getBrowser().name).toLowerCase()||"":this.getBrowser().name||""},q.getBrowserVersion=function(){return this.getBrowser().version},q.getOS=function(){return this.parsedResult.os?this.parsedResult.os:this.parseOS()},q.parseOS=function(){var g=this;this.parsedResult.os={};var h=w.default.find(T.default,(function(k){if(typeof k.test=="function")return k.test(g);if(Array.isArray(k.test))return k.test.some((function(W){return g.test(W)}));throw new Error("Browser's test function is not valid")}));return h&&(this.parsedResult.os=h.describe(this.getUA())),this.parsedResult.os},q.getOSName=function(g){var h=this.getOS().name;return g?String(h).toLowerCase()||"":h||""},q.getOSVersion=function(){return this.getOS().version},q.getPlatform=function(){return this.parsedResult.platform?this.parsedResult.platform:this.parsePlatform()},q.getPlatformType=function(g){g===void 0&&(g=!1);var h=this.getPlatform().type;return g?String(h).toLowerCase()||"":h||""},q.parsePlatform=function(){var g=this;this.parsedResult.platform={};var h=w.default.find(b.default,(function(k){if(typeof k.test=="function")return k.test(g);if(Array.isArray(k.test))return k.test.some((function(W){return g.test(W)}));throw new Error("Browser's test function is not valid")}));return h&&(this.parsedResult.platform=h.describe(this.getUA())),this.parsedResult.platform},q.getEngine=function(){return this.parsedResult.engine?this.parsedResult.engine:this.parseEngine()},q.getEngineName=function(g){return g?String(this.getEngine().name).toLowerCase()||"":this.getEngine().name||""},q.parseEngine=function(){var g=this;this.parsedResult.engine={};var h=w.default.find(J.default,(function(k){if(typeof k.test=="function")return k.test(g);if(Array.isArray(k.test))return k.test.some((function(W){return g.test(W)}));throw new Error("Browser's test function is not valid")}));return h&&(this.parsedResult.engine=h.describe(this.getUA())),this.parsedResult.engine},q.parse=function(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this.parseEngine(),this},q.getResult=function(){return w.default.assign({},this.parsedResult)},q.satisfies=function(g){var h=this,k={},W=0,j={},y=0;if(Object.keys(g).forEach((function(L){var z=g[L];typeof z=="string"?(j[L]=z,y+=1):typeof z=="object"&&(k[L]=z,W+=1)})),W>0){var d=Object.keys(k),R=w.default.find(d,(function(L){return h.isOS(L)}));if(R){var m=this.satisfies(k[R]);if(m!==void 0)return m}var P=w.default.find(d,(function(L){return h.isPlatform(L)}));if(P){var H=this.satisfies(k[P]);if(H!==void 0)return H}}if(y>0){var B=Object.keys(j),$=w.default.find(B,(function(L){return h.isBrowser(L,!0)}));if($!==void 0)return this.compareVersion(j[$])}},q.isBrowser=function(g,h){h===void 0&&(h=!1);var k=this.getBrowserName().toLowerCase(),W=g.toLowerCase(),j=w.default.getBrowserTypeByAlias(W);return h&&j&&(W=j.toLowerCase()),W===k},q.compareVersion=function(g){var h=[0],k=g,W=!1,j=this.getBrowserVersion();if(typeof j=="string")return g[0]===">"||g[0]==="<"?(k=g.substr(1),g[1]==="="?(W=!0,k=g.substr(2)):h=[],g[0]===">"?h.push(1):h.push(-1)):g[0]==="="?k=g.substr(1):g[0]==="~"&&(W=!0,k=g.substr(1)),h.indexOf(w.default.compareVersions(j,k,W))>-1},q.isOS=function(g){return this.getOSName(!0)===String(g).toLowerCase()},q.isPlatform=function(g){return this.getPlatformType(!0)===String(g).toLowerCase()},q.isEngine=function(g){return this.getEngineName(!0)===String(g).toLowerCase()},q.is=function(g,h){return h===void 0&&(h=!1),this.isBrowser(g,h)||this.isOS(g)||this.isPlatform(g)},q.some=function(g){var h=this;return g===void 0&&(g=[]),g.some((function(k){return h.is(k)}))},U})();S.default=f,Y.exports=S.default},92:function(Y,S,x){S.__esModule=!0,S.default=void 0;var C,T=(C=x(17))&&C.__esModule?C:{default:C},b=/version\/(\d+(\.?_?\d+)+)/i,J=[{test:[/gptbot/i],describe:function(w){var n={name:"GPTBot"},f=T.default.getFirstMatch(/gptbot\/(\d+(\.\d+)+)/i,w)||T.default.getFirstMatch(b,w);return f&&(n.version=f),n}},{test:[/chatgpt-user/i],describe:function(w){var n={name:"ChatGPT-User"},f=T.default.getFirstMatch(/chatgpt-user\/(\d+(\.\d+)+)/i,w)||T.default.getFirstMatch(b,w);return f&&(n.version=f),n}},{test:[/oai-searchbot/i],describe:function(w){var n={name:"OAI-SearchBot"},f=T.default.getFirstMatch(/oai-searchbot\/(\d+(\.\d+)+)/i,w)||T.default.getFirstMatch(b,w);return f&&(n.version=f),n}},{test:[/claudebot/i,/claude-web/i,/claude-user/i,/claude-searchbot/i],describe:function(w){var n={name:"ClaudeBot"},f=T.default.getFirstMatch(/(?:claudebot|claude-web|claude-user|claude-searchbot)\/(\d+(\.\d+)+)/i,w)||T.default.getFirstMatch(b,w);return f&&(n.version=f),n}},{test:[/omgilibot/i,/webzio-extended/i],describe:function(w){var n={name:"Omgilibot"},f=T.default.getFirstMatch(/(?:omgilibot|webzio-extended)\/(\d+(\.\d+)+)/i,w)||T.default.getFirstMatch(b,w);return f&&(n.version=f),n}},{test:[/diffbot/i],describe:function(w){var n={name:"Diffbot"},f=T.default.getFirstMatch(/diffbot\/(\d+(\.\d+)+)/i,w)||T.default.getFirstMatch(b,w);return f&&(n.version=f),n}},{test:[/perplexitybot/i],describe:function(w){var n={name:"PerplexityBot"},f=T.default.getFirstMatch(/perplexitybot\/(\d+(\.\d+)+)/i,w)||T.default.getFirstMatch(b,w);return f&&(n.version=f),n}},{test:[/perplexity-user/i],describe:function(w){var n={name:"Perplexity-User"},f=T.default.getFirstMatch(/perplexity-user\/(\d+(\.\d+)+)/i,w)||T.default.getFirstMatch(b,w);return f&&(n.version=f),n}},{test:[/youbot/i],describe:function(w){var n={name:"YouBot"},f=T.default.getFirstMatch(/youbot\/(\d+(\.\d+)+)/i,w)||T.default.getFirstMatch(b,w);return f&&(n.version=f),n}},{test:[/meta-webindexer/i],describe:function(w){var n={name:"Meta-WebIndexer"},f=T.default.getFirstMatch(/meta-webindexer\/(\d+(\.\d+)+)/i,w)||T.default.getFirstMatch(b,w);return f&&(n.version=f),n}},{test:[/meta-externalads/i],describe:function(w){var n={name:"Meta-ExternalAds"},f=T.default.getFirstMatch(/meta-externalads\/(\d+(\.\d+)+)/i,w)||T.default.getFirstMatch(b,w);return f&&(n.version=f),n}},{test:[/meta-externalagent/i],describe:function(w){var n={name:"Meta-ExternalAgent"},f=T.default.getFirstMatch(/meta-externalagent\/(\d+(\.\d+)+)/i,w)||T.default.getFirstMatch(b,w);return f&&(n.version=f),n}},{test:[/meta-externalfetcher/i],describe:function(w){var n={name:"Meta-ExternalFetcher"},f=T.default.getFirstMatch(/meta-externalfetcher\/(\d+(\.\d+)+)/i,w)||T.default.getFirstMatch(b,w);return f&&(n.version=f),n}},{test:[/googlebot/i],describe:function(w){var n={name:"Googlebot"},f=T.default.getFirstMatch(/googlebot\/(\d+(\.\d+))/i,w)||T.default.getFirstMatch(b,w);return f&&(n.version=f),n}},{test:[/amazonbot/i],describe:function(w){var n={name:"AmazonBot"},f=T.default.getFirstMatch(/amazonbot\/(\d+(\.\d+)+)/i,w)||T.default.getFirstMatch(b,w);return f&&(n.version=f),n}},{test:[/bingbot/i],describe:function(w){var n={name:"BingCrawler"},f=T.default.getFirstMatch(/bingbot\/(\d+(\.\d+)+)/i,w)||T.default.getFirstMatch(b,w);return f&&(n.version=f),n}},{test:[/baiduspider/i],describe:function(w){var n={name:"BaiduSpider"},f=T.default.getFirstMatch(/baiduspider\/(\d+(\.\d+)+)/i,w)||T.default.getFirstMatch(b,w);return f&&(n.version=f),n}},{test:[/duckduckbot/i],describe:function(w){var n={name:"DuckDuckBot"},f=T.default.getFirstMatch(/duckduckbot\/(\d+(\.\d+)+)/i,w)||T.default.getFirstMatch(b,w);return f&&(n.version=f),n}},{test:[/ia_archiver/i],describe:function(w){var n={name:"InternetArchiveCrawler"},f=T.default.getFirstMatch(/ia_archiver\/(\d+(\.\d+)+)/i,w)||T.default.getFirstMatch(b,w);return f&&(n.version=f),n}},{test:[/facebookexternalhit/i,/facebookcatalog/i],describe:function(){return{name:"FacebookExternalHit"}}},{test:[/yahoo!?[\s/]*slurp/i],describe:function(){return{name:"YahooSlurp"}}},{test:[/yandexbot/i,/yandexmobilebot/i],describe:function(){return{name:"YandexBot"}}},{test:[/pingdom/i],describe:function(){return{name:"PingdomBot"}}},{test:[/opera/i],describe:function(w){var n={name:"Opera"},f=T.default.getFirstMatch(b,w)||T.default.getFirstMatch(/(?:opera)[\s/](\d+(\.?_?\d+)+)/i,w);return f&&(n.version=f),n}},{test:[/opr\/|opios/i],describe:function(w){var n={name:"Opera"},f=T.default.getFirstMatch(/(?:opr|opios)[\s/](\S+)/i,w)||T.default.getFirstMatch(b,w);return f&&(n.version=f),n}},{test:[/SamsungBrowser/i],describe:function(w){var n={name:"Samsung Internet for Android"},f=T.default.getFirstMatch(b,w)||T.default.getFirstMatch(/(?:SamsungBrowser)[\s/](\d+(\.?_?\d+)+)/i,w);return f&&(n.version=f),n}},{test:[/Whale/i],describe:function(w){var n={name:"NAVER Whale Browser"},f=T.default.getFirstMatch(b,w)||T.default.getFirstMatch(/(?:whale)[\s/](\d+(?:\.\d+)+)/i,w);return f&&(n.version=f),n}},{test:[/PaleMoon/i],describe:function(w){var n={name:"Pale Moon"},f=T.default.getFirstMatch(b,w)||T.default.getFirstMatch(/(?:PaleMoon)[\s/](\d+(?:\.\d+)+)/i,w);return f&&(n.version=f),n}},{test:[/MZBrowser/i],describe:function(w){var n={name:"MZ Browser"},f=T.default.getFirstMatch(/(?:MZBrowser)[\s/](\d+(?:\.\d+)+)/i,w)||T.default.getFirstMatch(b,w);return f&&(n.version=f),n}},{test:[/focus/i],describe:function(w){var n={name:"Focus"},f=T.default.getFirstMatch(/(?:focus)[\s/](\d+(?:\.\d+)+)/i,w)||T.default.getFirstMatch(b,w);return f&&(n.version=f),n}},{test:[/swing/i],describe:function(w){var n={name:"Swing"},f=T.default.getFirstMatch(/(?:swing)[\s/](\d+(?:\.\d+)+)/i,w)||T.default.getFirstMatch(b,w);return f&&(n.version=f),n}},{test:[/coast/i],describe:function(w){var n={name:"Opera Coast"},f=T.default.getFirstMatch(b,w)||T.default.getFirstMatch(/(?:coast)[\s/](\d+(\.?_?\d+)+)/i,w);return f&&(n.version=f),n}},{test:[/opt\/\d+(?:.?_?\d+)+/i],describe:function(w){var n={name:"Opera Touch"},f=T.default.getFirstMatch(/(?:opt)[\s/](\d+(\.?_?\d+)+)/i,w)||T.default.getFirstMatch(b,w);return f&&(n.version=f),n}},{test:[/yabrowser/i],describe:function(w){var n={name:"Yandex Browser"},f=T.default.getFirstMatch(/(?:yabrowser)[\s/](\d+(\.?_?\d+)+)/i,w)||T.default.getFirstMatch(b,w);return f&&(n.version=f),n}},{test:[/ucbrowser/i],describe:function(w){var n={name:"UC Browser"},f=T.default.getFirstMatch(b,w)||T.default.getFirstMatch(/(?:ucbrowser)[\s/](\d+(\.?_?\d+)+)/i,w);return f&&(n.version=f),n}},{test:[/Maxthon|mxios/i],describe:function(w){var n={name:"Maxthon"},f=T.default.getFirstMatch(b,w)||T.default.getFirstMatch(/(?:Maxthon|mxios)[\s/](\d+(\.?_?\d+)+)/i,w);return f&&(n.version=f),n}},{test:[/epiphany/i],describe:function(w){var n={name:"Epiphany"},f=T.default.getFirstMatch(b,w)||T.default.getFirstMatch(/(?:epiphany)[\s/](\d+(\.?_?\d+)+)/i,w);return f&&(n.version=f),n}},{test:[/puffin/i],describe:function(w){var n={name:"Puffin"},f=T.default.getFirstMatch(b,w)||T.default.getFirstMatch(/(?:puffin)[\s/](\d+(\.?_?\d+)+)/i,w);return f&&(n.version=f),n}},{test:[/sleipnir/i],describe:function(w){var n={name:"Sleipnir"},f=T.default.getFirstMatch(b,w)||T.default.getFirstMatch(/(?:sleipnir)[\s/](\d+(\.?_?\d+)+)/i,w);return f&&(n.version=f),n}},{test:[/k-meleon/i],describe:function(w){var n={name:"K-Meleon"},f=T.default.getFirstMatch(b,w)||T.default.getFirstMatch(/(?:k-meleon)[\s/](\d+(\.?_?\d+)+)/i,w);return f&&(n.version=f),n}},{test:[/micromessenger/i],describe:function(w){var n={name:"WeChat"},f=T.default.getFirstMatch(/(?:micromessenger)[\s/](\d+(\.?_?\d+)+)/i,w)||T.default.getFirstMatch(b,w);return f&&(n.version=f),n}},{test:[/qqbrowser/i],describe:function(w){var n={name:/qqbrowserlite/i.test(w)?"QQ Browser Lite":"QQ Browser"},f=T.default.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\d+(\.?_?\d+)+)/i,w)||T.default.getFirstMatch(b,w);return f&&(n.version=f),n}},{test:[/msie|trident/i],describe:function(w){var n={name:"Internet Explorer"},f=T.default.getFirstMatch(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i,w);return f&&(n.version=f),n}},{test:[/\sedg\//i],describe:function(w){var n={name:"Microsoft Edge"},f=T.default.getFirstMatch(/\sedg\/(\d+(\.?_?\d+)+)/i,w);return f&&(n.version=f),n}},{test:[/edg([ea]|ios)/i],describe:function(w){var n={name:"Microsoft Edge"},f=T.default.getSecondMatch(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i,w);return f&&(n.version=f),n}},{test:[/vivaldi/i],describe:function(w){var n={name:"Vivaldi"},f=T.default.getFirstMatch(/vivaldi\/(\d+(\.?_?\d+)+)/i,w);return f&&(n.version=f),n}},{test:[/seamonkey/i],describe:function(w){var n={name:"SeaMonkey"},f=T.default.getFirstMatch(/seamonkey\/(\d+(\.?_?\d+)+)/i,w);return f&&(n.version=f),n}},{test:[/sailfish/i],describe:function(w){var n={name:"Sailfish"},f=T.default.getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i,w);return f&&(n.version=f),n}},{test:[/silk/i],describe:function(w){var n={name:"Amazon Silk"},f=T.default.getFirstMatch(/silk\/(\d+(\.?_?\d+)+)/i,w);return f&&(n.version=f),n}},{test:[/phantom/i],describe:function(w){var n={name:"PhantomJS"},f=T.default.getFirstMatch(/phantomjs\/(\d+(\.?_?\d+)+)/i,w);return f&&(n.version=f),n}},{test:[/slimerjs/i],describe:function(w){var n={name:"SlimerJS"},f=T.default.getFirstMatch(/slimerjs\/(\d+(\.?_?\d+)+)/i,w);return f&&(n.version=f),n}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(w){var n={name:"BlackBerry"},f=T.default.getFirstMatch(b,w)||T.default.getFirstMatch(/blackberry[\d]+\/(\d+(\.?_?\d+)+)/i,w);return f&&(n.version=f),n}},{test:[/(web|hpw)[o0]s/i],describe:function(w){var n={name:"WebOS Browser"},f=T.default.getFirstMatch(b,w)||T.default.getFirstMatch(/w(?:eb)?[o0]sbrowser\/(\d+(\.?_?\d+)+)/i,w);return f&&(n.version=f),n}},{test:[/bada/i],describe:function(w){var n={name:"Bada"},f=T.default.getFirstMatch(/dolfin\/(\d+(\.?_?\d+)+)/i,w);return f&&(n.version=f),n}},{test:[/tizen/i],describe:function(w){var n={name:"Tizen"},f=T.default.getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.?_?\d+)+)/i,w)||T.default.getFirstMatch(b,w);return f&&(n.version=f),n}},{test:[/qupzilla/i],describe:function(w){var n={name:"QupZilla"},f=T.default.getFirstMatch(/(?:qupzilla)[\s/](\d+(\.?_?\d+)+)/i,w)||T.default.getFirstMatch(b,w);return f&&(n.version=f),n}},{test:[/librewolf/i],describe:function(w){var n={name:"LibreWolf"},f=T.default.getFirstMatch(/(?:librewolf)[\s/](\d+(\.?_?\d+)+)/i,w);return f&&(n.version=f),n}},{test:[/firefox|iceweasel|fxios/i],describe:function(w){var n={name:"Firefox"},f=T.default.getFirstMatch(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,w);return f&&(n.version=f),n}},{test:[/electron/i],describe:function(w){var n={name:"Electron"},f=T.default.getFirstMatch(/(?:electron)\/(\d+(\.?_?\d+)+)/i,w);return f&&(n.version=f),n}},{test:[/sogoumobilebrowser/i,/metasr/i,/se 2\.[x]/i],describe:function(w){var n={name:"Sogou Browser"},f=T.default.getFirstMatch(/(?:sogoumobilebrowser)[\s/](\d+(\.?_?\d+)+)/i,w),U=T.default.getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,w),q=T.default.getFirstMatch(/se ([\d.]+)x/i,w),g=f||U||q;return g&&(n.version=g),n}},{test:[/MiuiBrowser/i],describe:function(w){var n={name:"Miui"},f=T.default.getFirstMatch(/(?:MiuiBrowser)[\s/](\d+(\.?_?\d+)+)/i,w);return f&&(n.version=f),n}},{test:[/chromium/i],describe:function(w){var n={name:"Chromium"},f=T.default.getFirstMatch(/(?:chromium)[\s/](\d+(\.?_?\d+)+)/i,w)||T.default.getFirstMatch(b,w);return f&&(n.version=f),n}},{test:[/chrome|crios|crmo/i],describe:function(w){var n={name:"Chrome"},f=T.default.getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,w);return f&&(n.version=f),n}},{test:[/GSA/i],describe:function(w){var n={name:"Google Search"},f=T.default.getFirstMatch(/(?:GSA)\/(\d+(\.?_?\d+)+)/i,w);return f&&(n.version=f),n}},{test:function(w){var n=!w.test(/like android/i),f=w.test(/android/i);return n&&f},describe:function(w){var n={name:"Android Browser"},f=T.default.getFirstMatch(b,w);return f&&(n.version=f),n}},{test:[/playstation 4/i],describe:function(w){var n={name:"PlayStation 4"},f=T.default.getFirstMatch(b,w);return f&&(n.version=f),n}},{test:[/safari|applewebkit/i],describe:function(w){var n={name:"Safari"},f=T.default.getFirstMatch(b,w);return f&&(n.version=f),n}},{test:[/.*/i],describe:function(w){var n=w.search("\\(")!==-1?/^(.*)\/(.*)[ \t]\((.*)/:/^(.*)\/(.*) /;return{name:T.default.getFirstMatch(n,w),version:T.default.getSecondMatch(n,w)}}}];S.default=J,Y.exports=S.default},93:function(Y,S,x){S.__esModule=!0,S.default=void 0;var C,T=(C=x(17))&&C.__esModule?C:{default:C},b=x(18),J=[{test:[/Roku\/DVP/],describe:function(w){var n=T.default.getFirstMatch(/Roku\/DVP-(\d+\.\d+)/i,w);return{name:b.OS_MAP.Roku,version:n}}},{test:[/windows phone/i],describe:function(w){var n=T.default.getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i,w);return{name:b.OS_MAP.WindowsPhone,version:n}}},{test:[/windows /i],describe:function(w){var n=T.default.getFirstMatch(/Windows ((NT|XP)( \d\d?.\d)?)/i,w),f=T.default.getWindowsVersionName(n);return{name:b.OS_MAP.Windows,version:n,versionName:f}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(w){var n={name:b.OS_MAP.iOS},f=T.default.getSecondMatch(/(Version\/)(\d[\d.]+)/,w);return f&&(n.version=f),n}},{test:[/macintosh/i],describe:function(w){var n=T.default.getFirstMatch(/mac os x (\d+(\.?_?\d+)+)/i,w).replace(/[_\s]/g,"."),f=T.default.getMacOSVersionName(n),U={name:b.OS_MAP.MacOS,version:n};return f&&(U.versionName=f),U}},{test:[/(ipod|iphone|ipad)/i],describe:function(w){var n=T.default.getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i,w).replace(/[_\s]/g,".");return{name:b.OS_MAP.iOS,version:n}}},{test:[/OpenHarmony/i],describe:function(w){var n=T.default.getFirstMatch(/OpenHarmony\s+(\d+(\.\d+)*)/i,w);return{name:b.OS_MAP.HarmonyOS,version:n}}},{test:function(w){var n=!w.test(/like android/i),f=w.test(/android/i);return n&&f},describe:function(w){var n=T.default.getFirstMatch(/android[\s/-](\d+(\.\d+)*)/i,w),f=T.default.getAndroidVersionName(n),U={name:b.OS_MAP.Android,version:n};return f&&(U.versionName=f),U}},{test:[/(web|hpw)[o0]s/i],describe:function(w){var n=T.default.getFirstMatch(/(?:web|hpw)[o0]s\/(\d+(\.\d+)*)/i,w),f={name:b.OS_MAP.WebOS};return n&&n.length&&(f.version=n),f}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(w){var n=T.default.getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i,w)||T.default.getFirstMatch(/blackberry\d+\/(\d+([_\s]\d+)*)/i,w)||T.default.getFirstMatch(/\bbb(\d+)/i,w);return{name:b.OS_MAP.BlackBerry,version:n}}},{test:[/bada/i],describe:function(w){var n=T.default.getFirstMatch(/bada\/(\d+(\.\d+)*)/i,w);return{name:b.OS_MAP.Bada,version:n}}},{test:[/tizen/i],describe:function(w){var n=T.default.getFirstMatch(/tizen[/\s](\d+(\.\d+)*)/i,w);return{name:b.OS_MAP.Tizen,version:n}}},{test:[/linux/i],describe:function(){return{name:b.OS_MAP.Linux}}},{test:[/CrOS/],describe:function(){return{name:b.OS_MAP.ChromeOS}}},{test:[/PlayStation 4/],describe:function(w){var n=T.default.getFirstMatch(/PlayStation 4[/\s](\d+(\.\d+)*)/i,w);return{name:b.OS_MAP.PlayStation4,version:n}}}];S.default=J,Y.exports=S.default},94:function(Y,S,x){S.__esModule=!0,S.default=void 0;var C,T=(C=x(17))&&C.__esModule?C:{default:C},b=x(18),J=[{test:[/googlebot/i],describe:function(){return{type:b.PLATFORMS_MAP.bot,vendor:"Google"}}},{test:[/amazonbot/i],describe:function(){return{type:b.PLATFORMS_MAP.bot,vendor:"Amazon"}}},{test:[/gptbot/i],describe:function(){return{type:b.PLATFORMS_MAP.bot,vendor:"OpenAI"}}},{test:[/chatgpt-user/i],describe:function(){return{type:b.PLATFORMS_MAP.bot,vendor:"OpenAI"}}},{test:[/oai-searchbot/i],describe:function(){return{type:b.PLATFORMS_MAP.bot,vendor:"OpenAI"}}},{test:[/baiduspider/i],describe:function(){return{type:b.PLATFORMS_MAP.bot,vendor:"Baidu"}}},{test:[/bingbot/i],describe:function(){return{type:b.PLATFORMS_MAP.bot,vendor:"Bing"}}},{test:[/duckduckbot/i],describe:function(){return{type:b.PLATFORMS_MAP.bot,vendor:"DuckDuckGo"}}},{test:[/claudebot/i,/claude-web/i,/claude-user/i,/claude-searchbot/i],describe:function(){return{type:b.PLATFORMS_MAP.bot,vendor:"Anthropic"}}},{test:[/omgilibot/i,/webzio-extended/i],describe:function(){return{type:b.PLATFORMS_MAP.bot,vendor:"Webz.io"}}},{test:[/diffbot/i],describe:function(){return{type:b.PLATFORMS_MAP.bot,vendor:"Diffbot"}}},{test:[/perplexitybot/i],describe:function(){return{type:b.PLATFORMS_MAP.bot,vendor:"Perplexity AI"}}},{test:[/perplexity-user/i],describe:function(){return{type:b.PLATFORMS_MAP.bot,vendor:"Perplexity AI"}}},{test:[/youbot/i],describe:function(){return{type:b.PLATFORMS_MAP.bot,vendor:"You.com"}}},{test:[/ia_archiver/i],describe:function(){return{type:b.PLATFORMS_MAP.bot,vendor:"Internet Archive"}}},{test:[/meta-webindexer/i],describe:function(){return{type:b.PLATFORMS_MAP.bot,vendor:"Meta"}}},{test:[/meta-externalads/i],describe:function(){return{type:b.PLATFORMS_MAP.bot,vendor:"Meta"}}},{test:[/meta-externalagent/i],describe:function(){return{type:b.PLATFORMS_MAP.bot,vendor:"Meta"}}},{test:[/meta-externalfetcher/i],describe:function(){return{type:b.PLATFORMS_MAP.bot,vendor:"Meta"}}},{test:[/facebookexternalhit/i,/facebookcatalog/i],describe:function(){return{type:b.PLATFORMS_MAP.bot,vendor:"Meta"}}},{test:[/yahoo/i],describe:function(){return{type:b.PLATFORMS_MAP.bot,vendor:"Yahoo"}}},{test:[/yandexbot/i,/yandexmobilebot/i],describe:function(){return{type:b.PLATFORMS_MAP.bot,vendor:"Yandex"}}},{test:[/pingdom/i],describe:function(){return{type:b.PLATFORMS_MAP.bot,vendor:"Pingdom"}}},{test:[/huawei/i],describe:function(w){var n=T.default.getFirstMatch(/(can-l01)/i,w)&&"Nova",f={type:b.PLATFORMS_MAP.mobile,vendor:"Huawei"};return n&&(f.model=n),f}},{test:[/nexus\s*(?:7|8|9|10).*/i],describe:function(){return{type:b.PLATFORMS_MAP.tablet,vendor:"Nexus"}}},{test:[/ipad/i],describe:function(){return{type:b.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(){return{type:b.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/kftt build/i],describe:function(){return{type:b.PLATFORMS_MAP.tablet,vendor:"Amazon",model:"Kindle Fire HD 7"}}},{test:[/silk/i],describe:function(){return{type:b.PLATFORMS_MAP.tablet,vendor:"Amazon"}}},{test:[/tablet(?! pc)/i],describe:function(){return{type:b.PLATFORMS_MAP.tablet}}},{test:function(w){var n=w.test(/ipod|iphone/i),f=w.test(/like (ipod|iphone)/i);return n&&!f},describe:function(w){var n=T.default.getFirstMatch(/(ipod|iphone)/i,w);return{type:b.PLATFORMS_MAP.mobile,vendor:"Apple",model:n}}},{test:[/nexus\s*[0-6].*/i,/galaxy nexus/i],describe:function(){return{type:b.PLATFORMS_MAP.mobile,vendor:"Nexus"}}},{test:[/Nokia/i],describe:function(w){var n=T.default.getFirstMatch(/Nokia\s+([0-9]+(\.[0-9]+)?)/i,w),f={type:b.PLATFORMS_MAP.mobile,vendor:"Nokia"};return n&&(f.model=n),f}},{test:[/[^-]mobi/i],describe:function(){return{type:b.PLATFORMS_MAP.mobile}}},{test:function(w){return w.getBrowserName(!0)==="blackberry"},describe:function(){return{type:b.PLATFORMS_MAP.mobile,vendor:"BlackBerry"}}},{test:function(w){return w.getBrowserName(!0)==="bada"},describe:function(){return{type:b.PLATFORMS_MAP.mobile}}},{test:function(w){return w.getBrowserName()==="windows phone"},describe:function(){return{type:b.PLATFORMS_MAP.mobile,vendor:"Microsoft"}}},{test:function(w){var n=Number(String(w.getOSVersion()).split(".")[0]);return w.getOSName(!0)==="android"&&n>=3},describe:function(){return{type:b.PLATFORMS_MAP.tablet}}},{test:function(w){return w.getOSName(!0)==="android"},describe:function(){return{type:b.PLATFORMS_MAP.mobile}}},{test:function(w){return w.getOSName(!0)==="macos"},describe:function(){return{type:b.PLATFORMS_MAP.desktop,vendor:"Apple"}}},{test:function(w){return w.getOSName(!0)==="windows"},describe:function(){return{type:b.PLATFORMS_MAP.desktop}}},{test:function(w){return w.getOSName(!0)==="linux"},describe:function(){return{type:b.PLATFORMS_MAP.desktop}}},{test:function(w){return w.getOSName(!0)==="playstation 4"},describe:function(){return{type:b.PLATFORMS_MAP.tv}}},{test:function(w){return w.getOSName(!0)==="roku"},describe:function(){return{type:b.PLATFORMS_MAP.tv}}}];S.default=J,Y.exports=S.default},95:function(Y,S,x){S.__esModule=!0,S.default=void 0;var C,T=(C=x(17))&&C.__esModule?C:{default:C},b=x(18),J=[{test:function(w){return w.getBrowserName(!0)==="microsoft edge"},describe:function(w){if(/\sedg\//i.test(w))return{name:b.ENGINE_MAP.Blink};var n=T.default.getFirstMatch(/edge\/(\d+(\.?_?\d+)+)/i,w);return{name:b.ENGINE_MAP.EdgeHTML,version:n}}},{test:[/trident/i],describe:function(w){var n={name:b.ENGINE_MAP.Trident},f=T.default.getFirstMatch(/trident\/(\d+(\.?_?\d+)+)/i,w);return f&&(n.version=f),n}},{test:function(w){return w.test(/presto/i)},describe:function(w){var n={name:b.ENGINE_MAP.Presto},f=T.default.getFirstMatch(/presto\/(\d+(\.?_?\d+)+)/i,w);return f&&(n.version=f),n}},{test:function(w){var n=w.test(/gecko/i),f=w.test(/like gecko/i);return n&&!f},describe:function(w){var n={name:b.ENGINE_MAP.Gecko},f=T.default.getFirstMatch(/gecko\/(\d+(\.?_?\d+)+)/i,w);return f&&(n.version=f),n}},{test:[/(apple)?webkit\/537\.36/i],describe:function(){return{name:b.ENGINE_MAP.Blink}}},{test:[/(apple)?webkit/i],describe:function(w){var n={name:b.ENGINE_MAP.WebKit},f=T.default.getFirstMatch(/webkit\/(\d+(\.?_?\d+)+)/i,w);return f&&(n.version=f),n}}];S.default=J,Y.exports=S.default}})}))}),6939:(function(oe,Y,S){(function(x,C,T){oe.exports=C(S(9021),S(7165))})(this,function(x){return x.mode.CTR=(function(){var C=x.lib.BlockCipherMode.extend(),T=C.Encryptor=C.extend({processBlock:function(b,J){var w=this._cipher,n=w.blockSize,f=this._iv,U=this._counter;f&&(U=this._counter=f.slice(0),this._iv=void 0);var q=U.slice(0);w.encryptBlock(q,0),U[n-1]=U[n-1]+1|0;for(var g=0;g<n;g++)b[J+g]^=q[g]}});return C.Decryptor=T,C})(),x.mode.CTR})}),6993:((oe,Y,S)=>{var x=S(5546);function C(){var T,b,J=typeof Symbol=="function"?Symbol:{},w=J.iterator||"@@iterator",n=J.toStringTag||"@@toStringTag";function f(y,d,R,m){var P=d&&d.prototype instanceof q?d:q,H=Object.create(P.prototype);return x(H,"_invoke",(function(B,$,L){var z,V,X,G=0,ae=L||[],Q=!1,le={p:0,n:0,v:T,a:pe,f:pe.bind(T,4),d:function(ne,Oe){return z=ne,V=0,X=T,le.n=Oe,U}};function pe(ue,ne){for(V=ue,X=ne,b=0;!Q&&G&&!Oe&&b<ae.length;b++){var Oe,ye=ae[b],_e=le.p,Se=ye[2];ue>3?(Oe=Se===ne)&&(X=ye[(V=ye[4])?5:(V=3,3)],ye[4]=ye[5]=T):ye[0]<=_e&&((Oe=ue<2&&_e<ye[1])?(V=0,le.v=ne,le.n=ye[1]):_e<Se&&(Oe=ue<3||ye[0]>ne||ne>Se)&&(ye[4]=ue,ye[5]=ne,le.n=Se,V=0))}if(Oe||ue>1)return U;throw Q=!0,ne}return function(ue,ne,Oe){if(G>1)throw TypeError("Generator is already running");for(Q&&ne===1&&pe(ne,Oe),V=ne,X=Oe;(b=V<2?T:X)||!Q;){z||(V?V<3?(V>1&&(le.n=-1),pe(V,X)):le.n=X:le.v=X);try{if(G=2,z){if(V||(ue="next"),b=z[ue]){if(!(b=b.call(z,X)))throw TypeError("iterator result is not an object");if(!b.done)return b;X=b.value,V<2&&(V=0)}else V===1&&(b=z.return)&&b.call(z),V<2&&(X=TypeError("The iterator does not provide a '"+ue+"' method"),V=1);z=T}else if((b=(Q=le.n<0)?X:B.call($,le))!==U)break}catch(ye){z=T,V=1,X=ye}finally{G=1}}return{value:b,done:Q}}})(y,R,m),!0),H}var U={};function q(){}function g(){}function h(){}b=Object.getPrototypeOf;var k=[][w]?b(b([][w]())):(x(b={},w,function(){return this}),b),W=h.prototype=q.prototype=Object.create(k);function j(y){return Object.setPrototypeOf?Object.setPrototypeOf(y,h):(y.__proto__=h,x(y,n,"GeneratorFunction")),y.prototype=Object.create(W),y}return g.prototype=h,x(W,"constructor",h),x(h,"constructor",g),g.displayName="GeneratorFunction",x(h,n,"GeneratorFunction"),x(W),x(W,n,"Generator"),x(W,w,function(){return this}),x(W,"toString",function(){return"[object Generator]"}),(oe.exports=C=function(){return{w:f,m:j}},oe.exports.__esModule=!0,oe.exports.default=oe.exports)()}oe.exports=C,oe.exports.__esModule=!0,oe.exports.default=oe.exports}),7007:(oe=>{var Y=typeof Reflect=="object"?Reflect:null,S=Y&&typeof Y.apply=="function"?Y.apply:function(P,H,B){return Function.prototype.apply.call(P,H,B)},x;Y&&typeof Y.ownKeys=="function"?x=Y.ownKeys:Object.getOwnPropertySymbols?x=function(P){return Object.getOwnPropertyNames(P).concat(Object.getOwnPropertySymbols(P))}:x=function(P){return Object.getOwnPropertyNames(P)};function C(m){console&&console.warn&&console.warn(m)}var T=Number.isNaN||function(P){return P!==P};function b(){b.init.call(this)}oe.exports=b,oe.exports.once=y,b.EventEmitter=b,b.prototype._events=void 0,b.prototype._eventsCount=0,b.prototype._maxListeners=void 0;var J=10;function w(m){if(typeof m!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof m)}Object.defineProperty(b,"defaultMaxListeners",{enumerable:!0,get:function(){return J},set:function(m){if(typeof m!="number"||m<0||T(m))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+m+".");J=m}}),b.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},b.prototype.setMaxListeners=function(P){if(typeof P!="number"||P<0||T(P))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+P+".");return this._maxListeners=P,this};function n(m){return m._maxListeners===void 0?b.defaultMaxListeners:m._maxListeners}b.prototype.getMaxListeners=function(){return n(this)},b.prototype.emit=function(P){for(var H=[],B=1;B<arguments.length;B++)H.push(arguments[B]);var $=P==="error",L=this._events;if(L!==void 0)$=$&&L.error===void 0;else if(!$)return!1;if($){var z;if(H.length>0&&(z=H[0]),z instanceof Error)throw z;var V=new Error("Unhandled error."+(z?" ("+z.message+")":""));throw V.context=z,V}var X=L[P];if(X===void 0)return!1;if(typeof X=="function")S(X,this,H);else for(var G=X.length,ae=k(X,G),B=0;B<G;++B)S(ae[B],this,H);return!0};function f(m,P,H,B){var $,L,z;if(w(H),L=m._events,L===void 0?(L=m._events=Object.create(null),m._eventsCount=0):(L.newListener!==void 0&&(m.emit("newListener",P,H.listener?H.listener:H),L=m._events),z=L[P]),z===void 0)z=L[P]=H,++m._eventsCount;else if(typeof z=="function"?z=L[P]=B?[H,z]:[z,H]:B?z.unshift(H):z.push(H),$=n(m),$>0&&z.length>$&&!z.warned){z.warned=!0;var V=new Error("Possible EventEmitter memory leak detected. "+z.length+" "+String(P)+" listeners added. Use emitter.setMaxListeners() to increase limit");V.name="MaxListenersExceededWarning",V.emitter=m,V.type=P,V.count=z.length,C(V)}return m}b.prototype.addListener=function(P,H){return f(this,P,H,!1)},b.prototype.on=b.prototype.addListener,b.prototype.prependListener=function(P,H){return f(this,P,H,!0)};function U(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function q(m,P,H){var B={fired:!1,wrapFn:void 0,target:m,type:P,listener:H},$=U.bind(B);return $.listener=H,B.wrapFn=$,$}b.prototype.once=function(P,H){return w(H),this.on(P,q(this,P,H)),this},b.prototype.prependOnceListener=function(P,H){return w(H),this.prependListener(P,q(this,P,H)),this},b.prototype.removeListener=function(P,H){var B,$,L,z,V;if(w(H),$=this._events,$===void 0)return this;if(B=$[P],B===void 0)return this;if(B===H||B.listener===H)--this._eventsCount===0?this._events=Object.create(null):(delete $[P],$.removeListener&&this.emit("removeListener",P,B.listener||H));else if(typeof B!="function"){for(L=-1,z=B.length-1;z>=0;z--)if(B[z]===H||B[z].listener===H){V=B[z].listener,L=z;break}if(L<0)return this;L===0?B.shift():W(B,L),B.length===1&&($[P]=B[0]),$.removeListener!==void 0&&this.emit("removeListener",P,V||H)}return this},b.prototype.off=b.prototype.removeListener,b.prototype.removeAllListeners=function(P){var H,B,$;if(B=this._events,B===void 0)return this;if(B.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):B[P]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete B[P]),this;if(arguments.length===0){var L=Object.keys(B),z;for($=0;$<L.length;++$)z=L[$],z!=="removeListener"&&this.removeAllListeners(z);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(H=B[P],typeof H=="function")this.removeListener(P,H);else if(H!==void 0)for($=H.length-1;$>=0;$--)this.removeListener(P,H[$]);return this};function g(m,P,H){var B=m._events;if(B===void 0)return[];var $=B[P];return $===void 0?[]:typeof $=="function"?H?[$.listener||$]:[$]:H?j($):k($,$.length)}b.prototype.listeners=function(P){return g(this,P,!0)},b.prototype.rawListeners=function(P){return g(this,P,!1)},b.listenerCount=function(m,P){return typeof m.listenerCount=="function"?m.listenerCount(P):h.call(m,P)},b.prototype.listenerCount=h;function h(m){var P=this._events;if(P!==void 0){var H=P[m];if(typeof H=="function")return 1;if(H!==void 0)return H.length}return 0}b.prototype.eventNames=function(){return this._eventsCount>0?x(this._events):[]};function k(m,P){for(var H=new Array(P),B=0;B<P;++B)H[B]=m[B];return H}function W(m,P){for(;P+1<m.length;P++)m[P]=m[P+1];m.pop()}function j(m){for(var P=new Array(m.length),H=0;H<P.length;++H)P[H]=m[H].listener||m[H];return P}function y(m,P){return new Promise(function(H,B){function $(z){m.removeListener(P,L),B(z)}function L(){typeof m.removeListener=="function"&&m.removeListener("error",$),H([].slice.call(arguments))}R(m,P,L,{once:!0}),P!=="error"&&d(m,$,{once:!0})})}function d(m,P,H){typeof m.on=="function"&&R(m,"error",P,H)}function R(m,P,H,B){if(typeof m.on=="function")B.once?m.once(P,H):m.on(P,H);else if(typeof m.addEventListener=="function")m.addEventListener(P,function $(L){B.once&&m.removeEventListener(P,$),H(L)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof m)}}),7080:((oe,Y,S)=>{S.d(Y,{q:()=>C,s:()=>x});var x={INVALID_API_KEY:4001,INVALID_TOKEN:4002,INVALID_MEETING_ID:4003,INVALID_PARTICIPANT_ID:4004,DUPLICATE_PARTICIPANT:4005,ACCOUNT_DEACTIVATED:4006,ACCOUNT_DISCONTINUED:4007,INVALID_PERMISSIONS:4008,MAX_PARTCIPANT_REACHED:4009,MAX_SPEAKER_REACHED:4010,START_RECORDING_FAILED:4011,STOP_RECORDING_FAILED:4012,START_LIVESTREAM_FAILED:4013,STOP_LIVESTREAM_FAILED:4014,INVALID_LIVESTREAM_CONFIG:4015,START_HLS_FAILED:4016,STOP_HLS_FAILED:4017,START_TRANSCRIPTION_FAILED:4031,STOP_TRANSCRIPTION_FAILED:4032,START_TRANSLATION_FAILED:4042,STOP_TRANSLATION_FAILED:4043,CHANGE_TRANSLATION_LANGUAGE_FAILED:4044,RECORDING_FAILED:5001,LIVESTREAM_FAILED:5002,HLS_FAILED:5003,TRANSCRIPTION_FAILED:5007,TRANSLATION_FAILED:5015,ERROR_GET_VIDEO_MEDIA:3011,ERROR_GET_AUDIO_MEDIA:3012,ERROR_GET_DISPLAY_MEDIA:3013,ERROR_GET_VIDEO_MEDIA_PERMISSION_DENIED:3014,ERROR_GET_AUDIO_MEDIA_PERMISSION_DENIED:3015,ERROR_GET_DISPLAY_MEDIA_PERMISSION_DENIED:3016,ERROR_CAMERA_ACCESS_DENIED_OR_DISMISSED:3017,ERROR_MICROPHONE_ACCESS_DENIED_OR_DISMISSED:3018,ERROR_CAMERA_PERMISSION_DENIED_BY_OS:3019,ERROR_MICROPHONE_PERMISSION_DENIED_BY_OS:3020,ERROR_CAMERA_NOT_FOUND:3021,ERROR_MICROPHONE_NOT_FOUND:3022,ERROR_CAMERA_IN_USE:3023,ERROR_MICROPHONE_IN_USE:3024,ERROR_CAMERA_PERMISSION_OR_AUTOPLAY_ISSUE:3025,ERROR_VIDEO_SOURCE_INITIATION_FAILED:3026,ERROR_WEBCAM_TRACK_ENDED:3027,ERROR_MICROPHONE_TRACK_ENDED:3028,ERROR_INVALID_CUSTOM_VIDEO_TRACK:3029,ERROR_INVALID_CUSTOM_AUDIO_TRACK:3030,ERROR_CUSTOM_VIDEO_TRACK_ENDED:3031,ERROR_CUSTOM_AUDIO_TRACK_ENDED:3032,ERROR_CAMERA_ACCESS_UNAVAILABLE:3033,ERROR_MICROPHONE_ACCESS_UNAVAILABLE:3034,ERROR_ACTION_PERFORMED_BEFORE_MEETING_JOINED:3035,ERROR_RN_CAMERA_ACCESS_DENIED_OR_DISMISSED:3036,ERROR_RN_CAMERA_NOT_FOUND:3037,ERROR_RN_MIC_ACCESS_DENIED_OR_DISMISSED:3038,ERROR_RN_MIC_NOT_FOUND:3039,ERROR_RN_CAMERA_ACCESS_UNAVAILABLE:3040,ERROR_RN_MIC_ACCESS_UNAVAILABLE:3041,ERROR_RN_CAMERA_TRACK_ENDED:3042,ERROR_RN_MIC_TRACK_ENDED:3043},C={ERROR_GET_VIDEO_MEDIA:{code:3011,message:"Your browser/Device does not support Video."},ERROR_GET_AUDIO_MEDIA:{code:3012,message:"Your browser/Device does not support Audio."},ERROR_GET_DISPLAY_MEDIA:{code:3013,message:"Your browser/Device does not support Screen Sharing."},ERROR_GET_VIDEO_MEDIA_PERMISSION_DENIED:{code:3014,message:"Video capture permission denied."},ERROR_GET_AUDIO_MEDIA_PERMISSION_DENIED:{code:3015,message:"Audio capture permission denied."},ERROR_GET_DISPLAY_MEDIA_PERMISSION_DENIED:{code:3016,message:"Screen sharing permission denied."},ERROR_CAMERA_ACCESS_DENIED_OR_DISMISSED:{code:3017,message:"Oops! It seems like camera access was denied or dismissed. To proceed, kindly grant access through your browser settings."},ERROR_MICROPHONE_ACCESS_DENIED_OR_DISMISSED:{code:3018,message:"Oops! It seems like microphone access was denied or dismissed. To proceed, kindly grant access through your browser settings."},ERROR_CAMERA_PERMISSION_DENIED_BY_OS:{code:3019,message:"Camera permission denied by OS system settings. Please check the system settings and grant permission for this browser."},ERROR_MICROPHONE_PERMISSION_DENIED_BY_OS:{code:3020,message:"Microphone permission denied by OS system settings. Please check the system settings and grant permission for this browser."},ERROR_CAMERA_NOT_FOUND:{code:3021,message:"Please ensure your camera is connected and turned on, and that the camera driver is installed and up-to-date."},ERROR_MICROPHONE_NOT_FOUND:{code:3022,message:"Please ensure your microphone is connected and turned on."},ERROR_CAMERA_IN_USE:{code:3023,message:"The camera is being used by another application. Please close any programs utilizing the camera, such as video conferencing tools, screen recording software, or other browsers. Restart your browser and attempt again."},ERROR_MICROPHONE_IN_USE:{code:3024,message:"The microphone is being used by another application. Please close any programs utilizing the microphone, such as video conferencing tools, screen recording software, or other browsers. Restart your browser and attempt again."},ERROR_CAMERA_PERMISSION_OR_AUTOPLAY_ISSUE:{code:3025,message:"It seems like there's an issue with camera permission or video autoplay, you can check out this link for details: http://tinyurl.com/autoplay-issue"},ERROR_VIDEO_SOURCE_INITIATION_FAILED:{code:3026,message:"Unable to initiate video source. Please verify browser settings for video permissions."},ERROR_WEBCAM_TRACK_ENDED:{code:3027,message:"Webcam track has ended or the webcam is disconnected. Please ensure your webcam is properly connected and try restarting it."},ERROR_MICROPHONE_TRACK_ENDED:{code:3028,message:"Microphone track has ended or the microphone is disconnected. Please check your microphone connection and try again."},ERROR_INVALID_CUSTOM_VIDEO_TRACK:{code:3029,message:"The provided custom video track is invalid; reverting to the default video track. Please ensure that the video track meets the required specifications."},ERROR_INVALID_CUSTOM_AUDIO_TRACK:{code:3030,message:"The provided custom audio track is invalid; reverting to the default audio track. Please ensure that the audio track meets the required specifications."},ERROR_CUSTOM_VIDEO_TRACK_ENDED:{code:3031,message:"The provided custom video track is in an ended state. Please verify the video track's status, and try again."},ERROR_CUSTOM_AUDIO_TRACK_ENDED:{code:3032,message:"The provided custom audio track is in an ended state. Please verify the audio track's status, and try again."},ERROR_CAMERA_ACCESS_UNAVAILABLE:{code:3033,message:"Camera access unavailable: Please ensure your device is compatible and that you're on a secure website (https://)."},ERROR_MICROPHONE_ACCESS_UNAVAILABLE:{code:3034,message:"Microphone access unavailable: Please ensure your device is compatible and that you're on a secure website (https://)."},ERROR_ACTION_PERFORMED_BEFORE_MEETING_JOINED:{code:3035,message:"Oops! Something went wrong. The room was in a connecting state, and during that time, an action encountered an issue. Please try again after joining a meeting."},ERROR_RN_CAMERA_ACCESS_DENIED_OR_DISMISSED:{code:3036,message:"Oops! It seems like camera access was denied or dismissed. To proceed, kindly grant access through your App settings."},ERROR_RN_CAMERA_NOT_FOUND:{code:3037,message:"Please ensure your camera is connected and turned on"},ERROR_RN_MIC_ACCESS_DENIED_OR_DISMISSED:{code:3038,message:"Oops! It seems like mic access was denied or dismissed. To proceed, kindly grant access through your App settings."},ERROR_RN_MIC_NOT_FOUND:{code:3039,message:"Please ensure your mic is connected and turned on"},ERROR_RN_CAMERA_ACCESS_UNAVAILABLE:{code:3040,message:"Camera access unavailable: Please ensure your device is compatible."},ERROR_RN_MIC_ACCESS_UNAVAILABLE:{code:3041,message:"Microphone access unavailable: Please ensure your device is compatible."},ERROR_RN_CAMERA_TRACK_ENDED:{code:3042,message:"Camera track has ended. Please make sure your camera is turned on or try restarting it."},ERROR_RN_MIC_TRACK_ENDED:{code:3043,message:"Microphone track has ended or the microphone is disconnected. Please check your microphone connection and try again."}}}),7165:(function(oe,Y,S){(function(x,C,T){oe.exports=C(S(9021),S(9506))})(this,function(x){x.lib.Cipher||(function(C){var T=x,b=T.lib,J=b.Base,w=b.WordArray,n=b.BufferedBlockAlgorithm,f=T.enc;f.Utf8;var U=f.Base64,q=T.algo,g=q.EvpKDF,h=b.Cipher=n.extend({cfg:J.extend(),createEncryptor:function(z,V){return this.create(this._ENC_XFORM_MODE,z,V)},createDecryptor:function(z,V){return this.create(this._DEC_XFORM_MODE,z,V)},init:function(z,V,X){this.cfg=this.cfg.extend(X),this._xformMode=z,this._key=V,this.reset()},reset:function(){n.reset.call(this),this._doReset()},process:function(z){return this._append(z),this._process()},finalize:function(z){z&&this._append(z);var V=this._doFinalize();return V},keySize:128/32,ivSize:128/32,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:(function(){function z(V){return typeof V=="string"?L:H}return function(V){return{encrypt:function(X,G,ae){return z(G).encrypt(V,X,G,ae)},decrypt:function(X,G,ae){return z(G).decrypt(V,X,G,ae)}}}})()});b.StreamCipher=h.extend({_doFinalize:function(){var z=this._process(!0);return z},blockSize:1});var k=T.mode={},W=b.BlockCipherMode=J.extend({createEncryptor:function(z,V){return this.Encryptor.create(z,V)},createDecryptor:function(z,V){return this.Decryptor.create(z,V)},init:function(z,V){this._cipher=z,this._iv=V}}),j=k.CBC=(function(){var z=W.extend();z.Encryptor=z.extend({processBlock:function(X,G){var ae=this._cipher,Q=ae.blockSize;V.call(this,X,G,Q),ae.encryptBlock(X,G),this._prevBlock=X.slice(G,G+Q)}}),z.Decryptor=z.extend({processBlock:function(X,G){var ae=this._cipher,Q=ae.blockSize,le=X.slice(G,G+Q);ae.decryptBlock(X,G),V.call(this,X,G,Q),this._prevBlock=le}});function V(X,G,ae){var Q,le=this._iv;le?(Q=le,this._iv=C):Q=this._prevBlock;for(var pe=0;pe<ae;pe++)X[G+pe]^=Q[pe]}return z})(),y=T.pad={},d=y.Pkcs7={pad:function(z,V){for(var X=V*4,G=X-z.sigBytes%X,ae=G<<24|G<<16|G<<8|G,Q=[],le=0;le<G;le+=4)Q.push(ae);var pe=w.create(Q,G);z.concat(pe)},unpad:function(z){var V=z.words[z.sigBytes-1>>>2]&255;z.sigBytes-=V}};b.BlockCipher=h.extend({cfg:h.cfg.extend({mode:j,padding:d}),reset:function(){var z;h.reset.call(this);var V=this.cfg,X=V.iv,G=V.mode;this._xformMode==this._ENC_XFORM_MODE?z=G.createEncryptor:(z=G.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==z?this._mode.init(this,X&&X.words):(this._mode=z.call(G,this,X&&X.words),this._mode.__creator=z)},_doProcessBlock:function(z,V){this._mode.processBlock(z,V)},_doFinalize:function(){var z,V=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(V.pad(this._data,this.blockSize),z=this._process(!0)):(z=this._process(!0),V.unpad(z)),z},blockSize:4});var R=b.CipherParams=J.extend({init:function(z){this.mixIn(z)},toString:function(z){return(z||this.formatter).stringify(this)}}),m=T.format={},P=m.OpenSSL={stringify:function(z){var V,X=z.ciphertext,G=z.salt;return G?V=w.create([1398893684,1701076831]).concat(G).concat(X):V=X,V.toString(U)},parse:function(z){var V,X=U.parse(z),G=X.words;return G[0]==1398893684&&G[1]==1701076831&&(V=w.create(G.slice(2,4)),G.splice(0,4),X.sigBytes-=16),R.create({ciphertext:X,salt:V})}},H=b.SerializableCipher=J.extend({cfg:J.extend({format:P}),encrypt:function(z,V,X,G){G=this.cfg.extend(G);var ae=z.createEncryptor(X,G),Q=ae.finalize(V),le=ae.cfg;return R.create({ciphertext:Q,key:X,iv:le.iv,algorithm:z,mode:le.mode,padding:le.padding,blockSize:z.blockSize,formatter:G.format})},decrypt:function(z,V,X,G){G=this.cfg.extend(G),V=this._parse(V,G.format);var ae=z.createDecryptor(X,G).finalize(V.ciphertext);return ae},_parse:function(z,V){return typeof z=="string"?V.parse(z,this):z}}),B=T.kdf={},$=B.OpenSSL={execute:function(z,V,X,G,ae){if(G||(G=w.random(64/8)),ae)var Q=g.create({keySize:V+X,hasher:ae}).compute(z,G);else var Q=g.create({keySize:V+X}).compute(z,G);var le=w.create(Q.words.slice(V),X*4);return Q.sigBytes=V*4,R.create({key:Q,iv:le,salt:G})}},L=b.PasswordBasedCipher=H.extend({cfg:H.cfg.extend({kdf:$}),encrypt:function(z,V,X,G){G=this.cfg.extend(G);var ae=G.kdf.execute(X,z.keySize,z.ivSize,G.salt,G.hasher);G.iv=ae.iv;var Q=H.encrypt.call(this,z,V,ae.key,G);return Q.mixIn(ae),Q},decrypt:function(z,V,X,G){G=this.cfg.extend(G),V=this._parse(V,G.format);var ae=G.kdf.execute(X,z.keySize,z.ivSize,V.salt,G.hasher);G.iv=ae.iv;var Q=H.decrypt.call(this,z,V,ae.key,G);return Q}})})()})}),7193:(function(oe,Y,S){(function(x,C,T){oe.exports=C(S(9021),S(754),S(4636),S(9506),S(7165))})(this,function(x){return(function(){var C=x,T=C.lib,b=T.StreamCipher,J=C.algo,w=J.RC4=b.extend({_doReset:function(){for(var U=this._key,q=U.words,g=U.sigBytes,h=this._S=[],k=0;k<256;k++)h[k]=k;for(var k=0,W=0;k<256;k++){var j=k%g,y=q[j>>>2]>>>24-j%4*8&255;W=(W+h[k]+y)%256;var d=h[k];h[k]=h[W],h[W]=d}this._i=this._j=0},_doProcessBlock:function(U,q){U[q]^=n.call(this)},keySize:256/32,ivSize:0});function n(){for(var U=this._S,q=this._i,g=this._j,h=0,k=0;k<4;k++){q=(q+1)%256,g=(g+U[q])%256;var W=U[q];U[q]=U[g],U[g]=W,h|=U[(U[q]+U[g])%256]<<24-k*8}return this._i=q,this._j=g,h}C.RC4=b._createHelper(w);var f=J.RC4Drop=w.extend({cfg:w.cfg.extend({drop:192}),_doReset:function(){w._doReset.call(this);for(var U=this.cfg.drop;U>0;U--)n.call(this)}});C.RC4Drop=b._createHelper(f)})(),x.RC4})}),7363:((oe,Y,S)=>{var x=S(5020),C=S(3804),T=S(5602);Y.grammar=T,Y.write=C,Y.parse=x.parse,Y.parseParams=x.parseParams,Y.parseFmtpConfig=x.parseFmtpConfig,Y.parsePayloads=x.parsePayloads,Y.parseRemoteCandidates=x.parseRemoteCandidates,Y.parseImageAttributes=x.parseImageAttributes,Y.parseSimulcastStreamList=x.parseSimulcastStreamList}),7504:((oe,Y,S)=>{Object.defineProperty(Y,"__esModule",{value:!0}),Y.DataProducer=void 0;const x=S(2994),C=S(3953),T=S(4893),b=new x.Logger("DataProducer");class J extends C.EnhancedEventEmitter{_id;_dataChannel;_closed=!1;_sctpStreamParameters;_appData;_observer=new C.EnhancedEventEmitter;constructor({id:n,dataChannel:f,sctpStreamParameters:U,appData:q}){super(),b.debug("constructor()"),this._id=n,this._dataChannel=f,this._sctpStreamParameters=U,this._appData=q??{},this.handleDataChannel()}get id(){return this._id}get closed(){return this._closed}get sctpStreamParameters(){return this._sctpStreamParameters}get readyState(){return this._dataChannel.readyState}get label(){return this._dataChannel.label}get protocol(){return this._dataChannel.protocol}get bufferedAmount(){return this._dataChannel.bufferedAmount}get bufferedAmountLowThreshold(){return this._dataChannel.bufferedAmountLowThreshold}set bufferedAmountLowThreshold(n){this._dataChannel.bufferedAmountLowThreshold=n}get appData(){return this._appData}set appData(n){this._appData=n}get observer(){return this._observer}close(){this._closed||(b.debug("close()"),this._closed=!0,this._dataChannel.close(),this.emit("@close"),this._observer.safeEmit("close"),super.close(),this._observer.close())}transportClosed(){this._closed||(b.debug("transportClosed()"),this._closed=!0,this._dataChannel.close(),this.safeEmit("transportclose"),this._observer.safeEmit("close"))}send(n){if(b.debug("send()"),this._closed)throw new T.InvalidStateError("closed");this._dataChannel.send(n)}handleDataChannel(){this._dataChannel.addEventListener("open",()=>{this._closed||(b.debug('DataChannel "open" event'),this.safeEmit("open"))}),this._dataChannel.addEventListener("error",n=>{if(this._closed)return;const f=n.error??new Error("unknown DataChannel error");n.error?.errorDetail==="sctp-failure"?b.error("DataChannel SCTP error [sctpCauseCode:%s]: %s",n.error?.sctpCauseCode,n.error.message):b.error('DataChannel "error" event: %o',f),this.safeEmit("error",f)}),this._dataChannel.addEventListener("close",()=>{this._closed||(b.warn('DataChannel "close" event'),this._closed=!0,this.emit("@close"),this.safeEmit("close"),this._observer.safeEmit("close"))}),this._dataChannel.addEventListener("message",()=>{this._closed||b.warn('DataChannel "message" event in a DataProducer, message discarded')}),this._dataChannel.addEventListener("bufferedamountlow",()=>{this._closed||this.safeEmit("bufferedamountlow")})}}Y.DataProducer=J}),7628:(function(oe,Y,S){(function(x,C,T){oe.exports=C(S(9021),S(754),S(4636),S(9506),S(7165))})(this,function(x){return(function(){var C=x,T=C.lib,b=T.WordArray,J=T.BlockCipher,w=C.algo,n=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],f=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],U=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],q=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],g=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],h=w.DES=J.extend({_doReset:function(){for(var y=this._key,d=y.words,R=[],m=0;m<56;m++){var P=n[m]-1;R[m]=d[P>>>5]>>>31-P%32&1}for(var H=this._subKeys=[],B=0;B<16;B++){for(var $=H[B]=[],L=U[B],m=0;m<24;m++)$[m/6|0]|=R[(f[m]-1+L)%28]<<31-m%6,$[4+(m/6|0)]|=R[28+(f[m+24]-1+L)%28]<<31-m%6;$[0]=$[0]<<1|$[0]>>>31;for(var m=1;m<7;m++)$[m]=$[m]>>>(m-1)*4+3;$[7]=$[7]<<5|$[7]>>>27}for(var z=this._invSubKeys=[],m=0;m<16;m++)z[m]=H[15-m]},encryptBlock:function(y,d){this._doCryptBlock(y,d,this._subKeys)},decryptBlock:function(y,d){this._doCryptBlock(y,d,this._invSubKeys)},_doCryptBlock:function(y,d,R){this._lBlock=y[d],this._rBlock=y[d+1],k.call(this,4,252645135),k.call(this,16,65535),W.call(this,2,858993459),W.call(this,8,16711935),k.call(this,1,1431655765);for(var m=0;m<16;m++){for(var P=R[m],H=this._lBlock,B=this._rBlock,$=0,L=0;L<8;L++)$|=q[L][((B^P[L])&g[L])>>>0];this._lBlock=B,this._rBlock=H^$}var z=this._lBlock;this._lBlock=this._rBlock,this._rBlock=z,k.call(this,1,1431655765),W.call(this,8,16711935),W.call(this,2,858993459),k.call(this,16,65535),k.call(this,4,252645135),y[d]=this._lBlock,y[d+1]=this._rBlock},keySize:64/32,ivSize:64/32,blockSize:64/32});function k(y,d){var R=(this._lBlock>>>y^this._rBlock)&d;this._rBlock^=R,this._lBlock^=R<<y}function W(y,d){var R=(this._rBlock>>>y^this._lBlock)&d;this._lBlock^=R,this._rBlock^=R<<y}C.DES=J._createHelper(h);var j=w.TripleDES=J.extend({_doReset:function(){var y=this._key,d=y.words;if(d.length!==2&&d.length!==4&&d.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var R=d.slice(0,2),m=d.length<4?d.slice(0,2):d.slice(2,4),P=d.length<6?d.slice(0,2):d.slice(4,6);this._des1=h.createEncryptor(b.create(R)),this._des2=h.createEncryptor(b.create(m)),this._des3=h.createEncryptor(b.create(P))},encryptBlock:function(y,d){this._des1.encryptBlock(y,d),this._des2.decryptBlock(y,d),this._des3.encryptBlock(y,d)},decryptBlock:function(y,d){this._des3.decryptBlock(y,d),this._des2.encryptBlock(y,d),this._des1.decryptBlock(y,d)},keySize:192/32,ivSize:64/32,blockSize:64/32});C.TripleDES=J._createHelper(j)})(),x.TripleDES})}),7654:((oe,Y,S)=>{var x="Expected a function",C="__lodash_hash_undefined__",T="[object Function]",b="[object GeneratorFunction]",J=/[\\^$.*+?()[\]{}|]/g,w=/^\[object .+?Constructor\]$/,n=typeof S.g=="object"&&S.g&&S.g.Object===Object&&S.g,f=typeof self=="object"&&self&&self.Object===Object&&self,U=n||f||Function("return this")();function q(nt,et){return nt?.[et]}function g(nt){var et=!1;if(nt!=null&&typeof nt.toString!="function")try{et=!!(nt+"")}catch{}return et}var h=Array.prototype,k=Function.prototype,W=Object.prototype,j=U["__core-js_shared__"],y=(function(){var nt=/[^.]+$/.exec(j&&j.keys&&j.keys.IE_PROTO||"");return nt?"Symbol(src)_1."+nt:""})(),d=k.toString,R=W.hasOwnProperty,m=W.toString,P=RegExp("^"+d.call(R).replace(J,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),H=h.splice,B=qa(U,"Map"),$=qa(Object,"create");function L(nt){var et=-1,ir=nt?nt.length:0;for(this.clear();++et<ir;){var Lr=nt[et];this.set(Lr[0],Lr[1])}}function z(){this.__data__=$?$(null):{}}function V(nt){return this.has(nt)&&delete this.__data__[nt]}function X(nt){var et=this.__data__;if($){var ir=et[nt];return ir===C?void 0:ir}return R.call(et,nt)?et[nt]:void 0}function G(nt){var et=this.__data__;return $?et[nt]!==void 0:R.call(et,nt)}function ae(nt,et){var ir=this.__data__;return ir[nt]=$&&et===void 0?C:et,this}L.prototype.clear=z,L.prototype.delete=V,L.prototype.get=X,L.prototype.has=G,L.prototype.set=ae;function Q(nt){var et=-1,ir=nt?nt.length:0;for(this.clear();++et<ir;){var Lr=nt[et];this.set(Lr[0],Lr[1])}}function le(){this.__data__=[]}function pe(nt){var et=this.__data__,ir=gr(et,nt);if(ir<0)return!1;var Lr=et.length-1;return ir==Lr?et.pop():H.call(et,ir,1),!0}function ue(nt){var et=this.__data__,ir=gr(et,nt);return ir<0?void 0:et[ir][1]}function ne(nt){return gr(this.__data__,nt)>-1}function Oe(nt,et){var ir=this.__data__,Lr=gr(ir,nt);return Lr<0?ir.push([nt,et]):ir[Lr][1]=et,this}Q.prototype.clear=le,Q.prototype.delete=pe,Q.prototype.get=ue,Q.prototype.has=ne,Q.prototype.set=Oe;function ye(nt){var et=-1,ir=nt?nt.length:0;for(this.clear();++et<ir;){var Lr=nt[et];this.set(Lr[0],Lr[1])}}function _e(){this.__data__={hash:new L,map:new(B||Q),string:new L}}function Se(nt){return Pr(this,nt).delete(nt)}function ze(nt){return Pr(this,nt).get(nt)}function Vt(nt){return Pr(this,nt).has(nt)}function tr(nt,et){return Pr(this,nt).set(nt,et),this}ye.prototype.clear=_e,ye.prototype.delete=Se,ye.prototype.get=ze,ye.prototype.has=Vt,ye.prototype.set=tr;function gr(nt,et){for(var ir=nt.length;ir--;)if(Wa(nt[ir][0],et))return ir;return-1}function jt(nt){if(!pn(nt)||br(nt))return!1;var et=Gr(nt)||g(nt)?P:w;return et.test(zr(nt))}function Pr(nt,et){var ir=nt.__data__;return Ua(et)?ir[typeof et=="string"?"string":"hash"]:ir.map}function qa(nt,et){var ir=q(nt,et);return jt(ir)?ir:void 0}function Ua(nt){var et=typeof nt;return et=="string"||et=="number"||et=="symbol"||et=="boolean"?nt!=="__proto__":nt===null}function br(nt){return!!y&&y in nt}function zr(nt){if(nt!=null){try{return d.call(nt)}catch{}try{return nt+""}catch{}}return""}function ar(nt,et){if(typeof nt!="function"||et&&typeof et!="function")throw new TypeError(x);var ir=function(){var Lr=arguments,pa=et?et.apply(this,Lr):Lr[0],za=ir.cache;if(za.has(pa))return za.get(pa);var Za=nt.apply(this,Lr);return ir.cache=za.set(pa,Za),Za};return ir.cache=new(ar.Cache||ye),ir}ar.Cache=ye;function Wa(nt,et){return nt===et||nt!==nt&&et!==et}function Gr(nt){var et=pn(nt)?m.call(nt):"";return et==T||et==b}function pn(nt){var et=typeof nt;return!!nt&&(et=="object"||et=="function")}oe.exports=ar}),7800:((oe,Y,S)=>{S.d(Y,{A:()=>C});var x=S(3145);function C(T,b){if(T){if(typeof T=="string")return(0,x.A)(T,b);var J={}.toString.call(T).slice(8,-1);return J==="Object"&&T.constructor&&(J=T.constructor.name),J==="Map"||J==="Set"?Array.from(T):J==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(J)?(0,x.A)(T,b):void 0}}}),7833:((oe,Y,S)=>{Y.formatArgs=C,Y.save=T,Y.load=b,Y.useColors=x,Y.storage=J(),Y.destroy=(()=>{let n=!1;return()=>{n||(n=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),Y.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function x(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let n;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(n=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(n[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function C(n){if(n[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+n[0]+(this.useColors?"%c ":" ")+"+"+oe.exports.humanize(this.diff),!this.useColors)return;const f="color: "+this.color;n.splice(1,0,f,"color: inherit");let U=0,q=0;n[0].replace(/%[a-zA-Z%]/g,g=>{g!=="%%"&&(U++,g==="%c"&&(q=U))}),n.splice(q,0,f)}Y.log=console.debug||console.log||(()=>{});function T(n){try{n?Y.storage.setItem("debug",n):Y.storage.removeItem("debug")}catch{}}function b(){let n;try{n=Y.storage.getItem("debug")||Y.storage.getItem("DEBUG")}catch{}return!n&&typeof process<"u"&&"env"in process&&(n=ct.DEBUG),n}function J(){try{return localStorage}catch{}}oe.exports=S(736)(Y);const{formatters:w}=oe.exports;w.j=function(n){try{return JSON.stringify(n)}catch(f){return"[UnexpectedJSONParseError]: "+f.message}}}),8046:((oe,Y,S)=>{Object.defineProperty(Y,"__esModule",{value:!0}),Y.validateAndNormalizeRtpCapabilities=w,Y.validateAndNormalizeRtpParameters=n,Y.validateAndNormalizeSctpStreamParameters=f,Y.validateSctpCapabilities=U,Y.getExtendedRtpCapabilities=q,Y.getRecvRtpCapabilities=g,Y.getSendingRtpParameters=h,Y.getSendingRemoteRtpParameters=k,Y.reduceCodecs=W,Y.generateProbatorRtpParameters=j,Y.canSend=y,Y.canReceive=d;const x=S(3200),C=S(1765),T="probator",b=1234,J=127;function w(Q){if(typeof Q!="object")throw new TypeError("caps is not an object");if(Q.codecs&&!Array.isArray(Q.codecs))throw new TypeError("caps.codecs is not an array");Q.codecs||(Q.codecs=[]);for(const le of Q.codecs)R(le);if(Q.headerExtensions&&!Array.isArray(Q.headerExtensions))throw new TypeError("caps.headerExtensions is not an array");Q.headerExtensions||(Q.headerExtensions=[]);for(const le of Q.headerExtensions)P(le)}function n(Q){if(typeof Q!="object")throw new TypeError("params is not an object");if(Q.mid&&typeof Q.mid!="string")throw new TypeError("params.mid is not a string");if(!Array.isArray(Q.codecs))throw new TypeError("missing params.codecs");for(const le of Q.codecs)H(le);if(Q.headerExtensions&&!Array.isArray(Q.headerExtensions))throw new TypeError("params.headerExtensions is not an array");Q.headerExtensions||(Q.headerExtensions=[]);for(const le of Q.headerExtensions)B(le);if(Q.encodings&&!Array.isArray(Q.encodings))throw new TypeError("params.encodings is not an array");Q.encodings||(Q.encodings=[]);for(const le of Q.encodings)$(le);if(Q.rtcp&&typeof Q.rtcp!="object")throw new TypeError("params.rtcp is not an object");Q.rtcp||(Q.rtcp={}),L(Q.rtcp)}function f(Q){if(typeof Q!="object")throw new TypeError("params is not an object");if(typeof Q.streamId!="number")throw new TypeError("missing params.streamId");let le=!1;if(typeof Q.ordered=="boolean"?le=!0:Q.ordered=!0,Q.maxPacketLifeTime&&typeof Q.maxPacketLifeTime!="number")throw new TypeError("invalid params.maxPacketLifeTime");if(Q.maxRetransmits&&typeof Q.maxRetransmits!="number")throw new TypeError("invalid params.maxRetransmits");if(Q.maxPacketLifeTime&&Q.maxRetransmits)throw new TypeError("cannot provide both maxPacketLifeTime and maxRetransmits");if(le&&Q.ordered&&(Q.maxPacketLifeTime||Q.maxRetransmits))throw new TypeError("cannot be ordered with maxPacketLifeTime or maxRetransmits");if(!le&&(Q.maxPacketLifeTime||Q.maxRetransmits)&&(Q.ordered=!1),Q.label&&typeof Q.label!="string")throw new TypeError("invalid params.label");if(Q.protocol&&typeof Q.protocol!="string")throw new TypeError("invalid params.protocol")}function U(Q){if(typeof Q!="object")throw new TypeError("caps is not an object");if(!Q.numStreams||typeof Q.numStreams!="object")throw new TypeError("missing caps.numStreams");z(Q.numStreams)}function q(Q,le,pe){const ue={codecs:[],headerExtensions:[]};if(pe)for(const ne of Q.codecs??[]){if(V(ne))continue;const Oe=(le.codecs??[]).find(_e=>X(_e,ne,{strict:!0,modify:!0}));if(!Oe)continue;const ye={kind:ne.kind,mimeType:ne.mimeType,clockRate:ne.clockRate,channels:ne.channels,localPayloadType:ne.preferredPayloadType,localRtxPayloadType:void 0,remotePayloadType:Oe.preferredPayloadType,remoteRtxPayloadType:void 0,localParameters:ne.parameters??{},remoteParameters:Oe.parameters??{},rtcpFeedback:ae(ne,Oe)};ue.codecs.push(ye)}else for(const ne of le.codecs??[]){if(V(ne))continue;const Oe=(Q.codecs??[]).find(_e=>X(_e,ne,{strict:!0,modify:!0}));if(!Oe)continue;const ye={kind:Oe.kind,mimeType:Oe.mimeType,clockRate:Oe.clockRate,channels:Oe.channels,localPayloadType:Oe.preferredPayloadType,localRtxPayloadType:void 0,remotePayloadType:ne.preferredPayloadType,remoteRtxPayloadType:void 0,localParameters:Oe.parameters??{},remoteParameters:ne.parameters??{},rtcpFeedback:ae(Oe,ne)};ue.codecs.push(ye)}for(const ne of ue.codecs){const Oe=Q.codecs.find(_e=>V(_e)&&_e.parameters?.apt===ne.localPayloadType),ye=le.codecs.find(_e=>V(_e)&&_e.parameters?.apt===ne.remotePayloadType);Oe&&ye&&(ne.localRtxPayloadType=Oe.preferredPayloadType,ne.remoteRtxPayloadType=ye.preferredPayloadType)}for(const ne of le.headerExtensions){const Oe=Q.headerExtensions.find(_e=>G(_e,ne));if(!Oe)continue;const ye={kind:ne.kind,uri:ne.uri,sendId:Oe.preferredId,recvId:ne.preferredId,encrypt:Oe.preferredEncrypt??!1,direction:"sendrecv"};switch(ne.direction){case"sendrecv":{ye.direction="sendrecv";break}case"recvonly":{ye.direction="sendonly";break}case"sendonly":{ye.direction="recvonly";break}case"inactive":{ye.direction="inactive";break}}ue.headerExtensions.push(ye)}return ue}function g(Q){const le={codecs:[],headerExtensions:[]};for(const pe of Q.codecs){const ue={kind:pe.kind,mimeType:pe.mimeType,preferredPayloadType:pe.remotePayloadType,clockRate:pe.clockRate,channels:pe.channels,parameters:pe.localParameters,rtcpFeedback:pe.rtcpFeedback};if(le.codecs.push(ue),!pe.remoteRtxPayloadType)continue;const ne={kind:pe.kind,mimeType:`${pe.kind}/rtx`,preferredPayloadType:pe.remoteRtxPayloadType,clockRate:pe.clockRate,parameters:{apt:pe.remotePayloadType},rtcpFeedback:[]};le.codecs.push(ne)}for(const pe of Q.headerExtensions){if(pe.direction!=="sendrecv"&&pe.direction!=="recvonly")continue;const ue={kind:pe.kind,uri:pe.uri,preferredId:pe.recvId,preferredEncrypt:pe.encrypt??!1,direction:pe.direction};le.headerExtensions.push(ue)}return le}function h(Q,le){const pe={mid:void 0,codecs:[],headerExtensions:[],encodings:[],rtcp:{}};for(const ue of le.codecs){if(ue.kind!==Q)continue;const ne={mimeType:ue.mimeType,payloadType:ue.localPayloadType,clockRate:ue.clockRate,channels:ue.channels,parameters:ue.localParameters,rtcpFeedback:ue.rtcpFeedback};if(pe.codecs.push(ne),ue.localRtxPayloadType){const Oe={mimeType:`${ue.kind}/rtx`,payloadType:ue.localRtxPayloadType,clockRate:ue.clockRate,parameters:{apt:ue.localPayloadType},rtcpFeedback:[]};pe.codecs.push(Oe)}}for(const ue of le.headerExtensions){if(ue.kind&&ue.kind!==Q||ue.direction!=="sendrecv"&&ue.direction!=="sendonly")continue;const ne={uri:ue.uri,id:ue.sendId,encrypt:ue.encrypt,parameters:{}};pe.headerExtensions.push(ne)}return pe}function k(Q,le){const pe={mid:void 0,codecs:[],headerExtensions:[],encodings:[],rtcp:{}};for(const ue of le.codecs){if(ue.kind!==Q)continue;const ne={mimeType:ue.mimeType,payloadType:ue.localPayloadType,clockRate:ue.clockRate,channels:ue.channels,parameters:ue.remoteParameters,rtcpFeedback:ue.rtcpFeedback};if(pe.codecs.push(ne),ue.localRtxPayloadType){const Oe={mimeType:`${ue.kind}/rtx`,payloadType:ue.localRtxPayloadType,clockRate:ue.clockRate,parameters:{apt:ue.localPayloadType},rtcpFeedback:[]};pe.codecs.push(Oe)}}for(const ue of le.headerExtensions){if(ue.kind&&ue.kind!==Q||ue.direction!=="sendrecv"&&ue.direction!=="sendonly")continue;const ne={uri:ue.uri,id:ue.sendId,encrypt:ue.encrypt,parameters:{}};pe.headerExtensions.push(ne)}if(pe.headerExtensions.some(ue=>ue.uri==="http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01"))for(const ue of pe.codecs)ue.rtcpFeedback=(ue.rtcpFeedback??[]).filter(ne=>ne.type!=="goog-remb");else if(pe.headerExtensions.some(ue=>ue.uri==="http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time"))for(const ue of pe.codecs)ue.rtcpFeedback=(ue.rtcpFeedback??[]).filter(ne=>ne.type!=="transport-cc");else for(const ue of pe.codecs)ue.rtcpFeedback=(ue.rtcpFeedback??[]).filter(ne=>ne.type!=="transport-cc"&&ne.type!=="goog-remb");return pe}function W(Q,le){const pe=[];if(!le)pe.push(Q[0]),V(Q[1])&&pe.push(Q[1]);else{for(let ue=0;ue<Q.length;++ue)if(X(Q[ue],le,{strict:!0})){pe.push(Q[ue]),V(Q[ue+1])&&pe.push(Q[ue+1]);break}if(pe.length===0)throw new TypeError("no matching codec found")}return pe}function j(Q){Q=C.clone(Q),n(Q);const le={mid:T,codecs:[],headerExtensions:[],encodings:[{ssrc:b}],rtcp:{cname:"probator"}};return le.codecs.push(Q.codecs[0]),le.codecs[0].payloadType=J,le.headerExtensions=Q.headerExtensions,le}function y(Q,le){return(le.codecs??[]).some(pe=>pe.kind===Q)}function d(Q,le){if(n(Q),Q.codecs.length===0)return!1;const pe=Q.codecs[0];return(le.codecs??[]).some(ue=>ue.preferredPayloadType===pe.payloadType)}function R(Q){const le=new RegExp("^(audio|video)/(.+)","i");if(typeof Q!="object")throw new TypeError("codec is not an object");if(!Q.mimeType||typeof Q.mimeType!="string")throw new TypeError("missing codec.mimeType");const pe=le.exec(Q.mimeType);if(!pe)throw new TypeError("invalid codec.mimeType");if(Q.kind=pe[1].toLowerCase(),typeof Q.preferredPayloadType!="number")throw new TypeError("missing codec.preferredPayloadType");if(typeof Q.clockRate!="number")throw new TypeError("missing codec.clockRate");Q.kind==="audio"?typeof Q.channels!="number"&&(Q.channels=1):delete Q.channels,(!Q.parameters||typeof Q.parameters!="object")&&(Q.parameters={});for(const ue of Object.keys(Q.parameters)){let ne=Q.parameters[ue];if(ne===void 0&&(Q.parameters[ue]="",ne=""),typeof ne!="string"&&typeof ne!="number")throw new TypeError(`invalid codec parameter [key:${ue}s, value:${ne}]`);if(ue==="apt"&&typeof ne!="number")throw new TypeError("invalid codec apt parameter")}(!Q.rtcpFeedback||!Array.isArray(Q.rtcpFeedback))&&(Q.rtcpFeedback=[]);for(const ue of Q.rtcpFeedback)m(ue)}function m(Q){if(typeof Q!="object")throw new TypeError("fb is not an object");if(!Q.type||typeof Q.type!="string")throw new TypeError("missing fb.type");(!Q.parameter||typeof Q.parameter!="string")&&(Q.parameter="")}function P(Q){if(typeof Q!="object")throw new TypeError("ext is not an object");if(Q.kind!=="audio"&&Q.kind!=="video")throw new TypeError("invalid ext.kind");if(!Q.uri||typeof Q.uri!="string")throw new TypeError("missing ext.uri");if(typeof Q.preferredId!="number")throw new TypeError("missing ext.preferredId");if(Q.preferredEncrypt&&typeof Q.preferredEncrypt!="boolean")throw new TypeError("invalid ext.preferredEncrypt");if(Q.preferredEncrypt||(Q.preferredEncrypt=!1),Q.direction&&typeof Q.direction!="string")throw new TypeError("invalid ext.direction");Q.direction||(Q.direction="sendrecv")}function H(Q){const le=new RegExp("^(audio|video)/(.+)","i");if(typeof Q!="object")throw new TypeError("codec is not an object");if(!Q.mimeType||typeof Q.mimeType!="string")throw new TypeError("missing codec.mimeType");const pe=le.exec(Q.mimeType);if(!pe)throw new TypeError("invalid codec.mimeType");if(typeof Q.payloadType!="number")throw new TypeError("missing codec.payloadType");if(typeof Q.clockRate!="number")throw new TypeError("missing codec.clockRate");pe[1].toLowerCase()==="audio"?typeof Q.channels!="number"&&(Q.channels=1):delete Q.channels,(!Q.parameters||typeof Q.parameters!="object")&&(Q.parameters={});for(const ne of Object.keys(Q.parameters)){let Oe=Q.parameters[ne];if(Oe===void 0&&(Q.parameters[ne]="",Oe=""),typeof Oe!="string"&&typeof Oe!="number")throw new TypeError(`invalid codec parameter [key:${ne}s, value:${Oe}]`);if(ne==="apt"&&typeof Oe!="number")throw new TypeError("invalid codec apt parameter")}(!Q.rtcpFeedback||!Array.isArray(Q.rtcpFeedback))&&(Q.rtcpFeedback=[]);for(const ne of Q.rtcpFeedback)m(ne)}function B(Q){if(typeof Q!="object")throw new TypeError("ext is not an object");if(!Q.uri||typeof Q.uri!="string")throw new TypeError("missing ext.uri");if(typeof Q.id!="number")throw new TypeError("missing ext.id");if(Q.encrypt&&typeof Q.encrypt!="boolean")throw new TypeError("invalid ext.encrypt");Q.encrypt||(Q.encrypt=!1),(!Q.parameters||typeof Q.parameters!="object")&&(Q.parameters={});for(const le of Object.keys(Q.parameters)){let pe=Q.parameters[le];if(pe===void 0&&(Q.parameters[le]="",pe=""),typeof pe!="string"&&typeof pe!="number")throw new TypeError("invalid header extension parameter")}}function $(Q){if(typeof Q!="object")throw new TypeError("encoding is not an object");if(Q.ssrc&&typeof Q.ssrc!="number")throw new TypeError("invalid encoding.ssrc");if(Q.rid&&typeof Q.rid!="string")throw new TypeError("invalid encoding.rid");if(Q.rtx&&typeof Q.rtx!="object")throw new TypeError("invalid encoding.rtx");if(Q.rtx&&typeof Q.rtx.ssrc!="number")throw new TypeError("missing encoding.rtx.ssrc");if((!Q.dtx||typeof Q.dtx!="boolean")&&(Q.dtx=!1),Q.scalabilityMode&&typeof Q.scalabilityMode!="string")throw new TypeError("invalid encoding.scalabilityMode")}function L(Q){if(typeof Q!="object")throw new TypeError("rtcp is not an object");if(Q.cname&&typeof Q.cname!="string")throw new TypeError("invalid rtcp.cname");(!Q.reducedSize||typeof Q.reducedSize!="boolean")&&(Q.reducedSize=!0)}function z(Q){if(typeof Q!="object")throw new TypeError("numStreams is not an object");if(typeof Q.OS!="number")throw new TypeError("missing numStreams.OS");if(typeof Q.MIS!="number")throw new TypeError("missing numStreams.MIS")}function V(Q){return Q?/.+\/rtx$/i.test(Q.mimeType):!1}function X(Q,le,{strict:pe=!1,modify:ue=!1}={}){const ne=Q.mimeType.toLowerCase(),Oe=le.mimeType.toLowerCase();if(ne!==Oe||Q.clockRate!==le.clockRate||Q.channels!==le.channels)return!1;switch(ne){case"video/h264":{if(pe){const ye=Q.parameters["packetization-mode"]??0,_e=le.parameters["packetization-mode"]??0;if(ye!==_e||!x.isSameProfile(Q.parameters,le.parameters))return!1;let Se;try{Se=x.generateProfileLevelIdStringForAnswer(Q.parameters,le.parameters)}catch{return!1}ue&&(Se?(Q.parameters["profile-level-id"]=Se,le.parameters["profile-level-id"]=Se):(delete Q.parameters["profile-level-id"],delete le.parameters["profile-level-id"]))}break}case"video/vp9":{if(pe){const ye=Q.parameters["profile-id"]??0,_e=le.parameters["profile-id"]??0;if(ye!==_e)return!1}break}}return!0}function G(Q,le){return!(Q.kind&&le.kind&&Q.kind!==le.kind||Q.uri!==le.uri)}function ae(Q,le){const pe=[];for(const ue of Q.rtcpFeedback??[]){const ne=(le.rtcpFeedback??[]).find(Oe=>Oe.type===ue.type&&(Oe.parameter===ue.parameter||!Oe.parameter&&!ue.parameter));ne&&pe.push(ne)}return pe}}),8056:(function(oe,Y,S){(function(x,C){oe.exports=C(S(9021))})(this,function(x){return(function(C){var T=x,b=T.lib,J=b.WordArray,w=b.Hasher,n=T.algo,f=J.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),U=J.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),q=J.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),g=J.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),h=J.create([0,1518500249,1859775393,2400959708,2840853838]),k=J.create([1352829926,1548603684,1836072691,2053994217,0]),W=n.RIPEMD160=w.extend({_doReset:function(){this._hash=J.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(H,B){for(var $=0;$<16;$++){var L=B+$,z=H[L];H[L]=(z<<8|z>>>24)&16711935|(z<<24|z>>>8)&4278255360}var V=this._hash.words,X=h.words,G=k.words,ae=f.words,Q=U.words,le=q.words,pe=g.words,ue,ne,Oe,ye,_e,Se,ze,Vt,tr,gr;Se=ue=V[0],ze=ne=V[1],Vt=Oe=V[2],tr=ye=V[3],gr=_e=V[4];for(var jt,$=0;$<80;$+=1)jt=ue+H[B+ae[$]]|0,$<16?jt+=j(ne,Oe,ye)+X[0]:$<32?jt+=y(ne,Oe,ye)+X[1]:$<48?jt+=d(ne,Oe,ye)+X[2]:$<64?jt+=R(ne,Oe,ye)+X[3]:jt+=m(ne,Oe,ye)+X[4],jt=jt|0,jt=P(jt,le[$]),jt=jt+_e|0,ue=_e,_e=ye,ye=P(Oe,10),Oe=ne,ne=jt,jt=Se+H[B+Q[$]]|0,$<16?jt+=m(ze,Vt,tr)+G[0]:$<32?jt+=R(ze,Vt,tr)+G[1]:$<48?jt+=d(ze,Vt,tr)+G[2]:$<64?jt+=y(ze,Vt,tr)+G[3]:jt+=j(ze,Vt,tr)+G[4],jt=jt|0,jt=P(jt,pe[$]),jt=jt+gr|0,Se=gr,gr=tr,tr=P(Vt,10),Vt=ze,ze=jt;jt=V[1]+Oe+tr|0,V[1]=V[2]+ye+gr|0,V[2]=V[3]+_e+Se|0,V[3]=V[4]+ue+ze|0,V[4]=V[0]+ne+Vt|0,V[0]=jt},_doFinalize:function(){var H=this._data,B=H.words,$=this._nDataBytes*8,L=H.sigBytes*8;B[L>>>5]|=128<<24-L%32,B[(L+64>>>9<<4)+14]=($<<8|$>>>24)&16711935|($<<24|$>>>8)&4278255360,H.sigBytes=(B.length+1)*4,this._process();for(var z=this._hash,V=z.words,X=0;X<5;X++){var G=V[X];V[X]=(G<<8|G>>>24)&16711935|(G<<24|G>>>8)&4278255360}return z},clone:function(){var H=w.clone.call(this);return H._hash=this._hash.clone(),H}});function j(H,B,$){return H^B^$}function y(H,B,$){return H&B|~H&$}function d(H,B,$){return(H|~B)^$}function R(H,B,$){return H&$|B&~$}function m(H,B,$){return H^(B|~$)}function P(H,B){return H<<B|H>>>32-B}T.RIPEMD160=w._createHelper(W),T.HmacRIPEMD160=w._createHmacHelper(W)})(),x.RIPEMD160})}),8057:((oe,Y)=>{}),8124:(function(oe,Y,S){(function(x,C,T){oe.exports=C(S(9021),S(7165))})(this,function(x){return x.pad.NoPadding={pad:function(){},unpad:function(){}},x.pad.NoPadding})}),8274:((oe,Y,S)=>{Object.defineProperty(Y,"__esModule",{value:!0}),Y.Logger=void 0;const x=S(7833),C="awaitqueue";class T{_debug;_warn;_error;constructor(J){J?(this._debug=x(`${C}:${J}`),this._warn=x(`${C}:WARN:${J}`),this._error=x(`${C}:ERROR:${J}`)):(this._debug=x(C),this._warn=x(`${C}:WARN`),this._error=x(`${C}:ERROR`)),this._debug.log=console.info.bind(console),this._warn.log=console.warn.bind(console),this._error.log=console.error.bind(console)}get debug(){return this._debug}get warn(){return this._warn}get error(){return this._error}}Y.Logger=T}),8278:((oe,Y,S)=>{S.d(Y,{Ag:()=>b,Wm:()=>J,sn:()=>n,tr:()=>U});var x=S(467),C=S(4756),T=S.n(C);S(1806);function b(){return w()||J()}function J(){return typeof window.RTCRtpScriptTransform<"u"}function w(){return typeof window.RTCRtpSender<"u"&&typeof window.RTCRtpSender.prototype.createEncodedStreams<"u"}function n(g){return f.apply(this,arguments)}function f(){return f=(0,x.A)(T().mark(function g(h){var k,W;return T().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return k=new TextEncoder,j.next=1,crypto.subtle.importKey("raw",k.encode(h),{name:"PBKDF2"},!1,["deriveBits","deriveKey"]);case 1:return W=j.sent,j.abrupt("return",W);case 2:case"end":return j.stop()}},g)})),f.apply(this,arguments)}function U(g){return q.apply(this,arguments)}function q(){return q=(0,x.A)(T().mark(function g(h){var k;return T().wrap(function(W){for(;;)switch(W.prev=W.next){case 0:return W.next=1,crypto.subtle.importKey("raw",h,"HKDF",!1,["deriveBits","deriveKey"]);case 1:return k=W.sent,W.abrupt("return",k);case 2:case"end":return W.stop()}},g)})),q.apply(this,arguments)}}),8454:(function(oe,Y,S){(function(x,C,T){oe.exports=C(S(9021),S(7165))})(this,function(x){return x.mode.ECB=(function(){var C=x.lib.BlockCipherMode.extend();return C.Encryptor=C.extend({processBlock:function(T,b){this._cipher.encryptBlock(T,b)}}),C.Decryptor=C.extend({processBlock:function(T,b){this._cipher.decryptBlock(T,b)}}),C})(),x.mode.ECB})}),8624:((oe,Y,S)=>{S.r(Y),S.d(Y,{DOMException:()=>L,Headers:()=>U,Request:()=>m,Response:()=>B,fetch:()=>z});var x=typeof globalThis<"u"&&globalThis||typeof self<"u"&&self||typeof S.g<"u"&&S.g||{},C={searchParams:"URLSearchParams"in x,iterable:"Symbol"in x&&"iterator"in Symbol,blob:"FileReader"in x&&"Blob"in x&&(function(){try{return new Blob,!0}catch{return!1}})(),formData:"FormData"in x,arrayBuffer:"ArrayBuffer"in x};function T(V){return V&&DataView.prototype.isPrototypeOf(V)}if(C.arrayBuffer)var b=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],J=ArrayBuffer.isView||function(V){return V&&b.indexOf(Object.prototype.toString.call(V))>-1};function w(V){if(typeof V!="string"&&(V=String(V)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(V)||V==="")throw new TypeError('Invalid character in header field name: "'+V+'"');return V.toLowerCase()}function n(V){return typeof V!="string"&&(V=String(V)),V}function f(V){var X={next:function(){var G=V.shift();return{done:G===void 0,value:G}}};return C.iterable&&(X[Symbol.iterator]=function(){return X}),X}function U(V){this.map={},V instanceof U?V.forEach(function(X,G){this.append(G,X)},this):Array.isArray(V)?V.forEach(function(X){if(X.length!=2)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+X.length);this.append(X[0],X[1])},this):V&&Object.getOwnPropertyNames(V).forEach(function(X){this.append(X,V[X])},this)}U.prototype.append=function(V,X){V=w(V),X=n(X);var G=this.map[V];this.map[V]=G?G+", "+X:X},U.prototype.delete=function(V){delete this.map[w(V)]},U.prototype.get=function(V){return V=w(V),this.has(V)?this.map[V]:null},U.prototype.has=function(V){return this.map.hasOwnProperty(w(V))},U.prototype.set=function(V,X){this.map[w(V)]=n(X)},U.prototype.forEach=function(V,X){for(var G in this.map)this.map.hasOwnProperty(G)&&V.call(X,this.map[G],G,this)},U.prototype.keys=function(){var V=[];return this.forEach(function(X,G){V.push(G)}),f(V)},U.prototype.values=function(){var V=[];return this.forEach(function(X){V.push(X)}),f(V)},U.prototype.entries=function(){var V=[];return this.forEach(function(X,G){V.push([G,X])}),f(V)},C.iterable&&(U.prototype[Symbol.iterator]=U.prototype.entries);function q(V){if(!V._noBody){if(V.bodyUsed)return Promise.reject(new TypeError("Already read"));V.bodyUsed=!0}}function g(V){return new Promise(function(X,G){V.onload=function(){X(V.result)},V.onerror=function(){G(V.error)}})}function h(V){var X=new FileReader,G=g(X);return X.readAsArrayBuffer(V),G}function k(V){var X=new FileReader,G=g(X),ae=/charset=([A-Za-z0-9_-]+)/.exec(V.type),Q=ae?ae[1]:"utf-8";return X.readAsText(V,Q),G}function W(V){for(var X=new Uint8Array(V),G=new Array(X.length),ae=0;ae<X.length;ae++)G[ae]=String.fromCharCode(X[ae]);return G.join("")}function j(V){if(V.slice)return V.slice(0);var X=new Uint8Array(V.byteLength);return X.set(new Uint8Array(V)),X.buffer}function y(){return this.bodyUsed=!1,this._initBody=function(V){this.bodyUsed=this.bodyUsed,this._bodyInit=V,V?typeof V=="string"?this._bodyText=V:C.blob&&Blob.prototype.isPrototypeOf(V)?this._bodyBlob=V:C.formData&&FormData.prototype.isPrototypeOf(V)?this._bodyFormData=V:C.searchParams&&URLSearchParams.prototype.isPrototypeOf(V)?this._bodyText=V.toString():C.arrayBuffer&&C.blob&&T(V)?(this._bodyArrayBuffer=j(V.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):C.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(V)||J(V))?this._bodyArrayBuffer=j(V):this._bodyText=V=Object.prototype.toString.call(V):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||(typeof V=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):C.searchParams&&URLSearchParams.prototype.isPrototypeOf(V)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},C.blob&&(this.blob=function(){var V=q(this);if(V)return V;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer){var V=q(this);return V||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}else{if(C.blob)return this.blob().then(h);throw new Error("could not read as ArrayBuffer")}},this.text=function(){var V=q(this);if(V)return V;if(this._bodyBlob)return k(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(W(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},C.formData&&(this.formData=function(){return this.text().then(P)}),this.json=function(){return this.text().then(JSON.parse)},this}var d=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function R(V){var X=V.toUpperCase();return d.indexOf(X)>-1?X:V}function m(V,X){if(!(this instanceof m))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');X=X||{};var G=X.body;if(V instanceof m){if(V.bodyUsed)throw new TypeError("Already read");this.url=V.url,this.credentials=V.credentials,X.headers||(this.headers=new U(V.headers)),this.method=V.method,this.mode=V.mode,this.signal=V.signal,!G&&V._bodyInit!=null&&(G=V._bodyInit,V.bodyUsed=!0)}else this.url=String(V);if(this.credentials=X.credentials||this.credentials||"same-origin",(X.headers||!this.headers)&&(this.headers=new U(X.headers)),this.method=R(X.method||this.method||"GET"),this.mode=X.mode||this.mode||null,this.signal=X.signal||this.signal||(function(){if("AbortController"in x){var le=new AbortController;return le.signal}})(),this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&G)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(G),(this.method==="GET"||this.method==="HEAD")&&(X.cache==="no-store"||X.cache==="no-cache")){var ae=/([?&])_=[^&]*/;if(ae.test(this.url))this.url=this.url.replace(ae,"$1_="+new Date().getTime());else{var Q=/\?/;this.url+=(Q.test(this.url)?"&":"?")+"_="+new Date().getTime()}}}m.prototype.clone=function(){return new m(this,{body:this._bodyInit})};function P(V){var X=new FormData;return V.trim().split("&").forEach(function(G){if(G){var ae=G.split("="),Q=ae.shift().replace(/\+/g," "),le=ae.join("=").replace(/\+/g," ");X.append(decodeURIComponent(Q),decodeURIComponent(le))}}),X}function H(V){var X=new U,G=V.replace(/\r?\n[\t ]+/g," ");return G.split("\r").map(function(ae){return ae.indexOf(`
`)===0?ae.substr(1,ae.length):ae}).forEach(function(ae){var Q=ae.split(":"),le=Q.shift().trim();if(le){var pe=Q.join(":").trim();try{X.append(le,pe)}catch(ue){console.warn("Response "+ue.message)}}}),X}y.call(m.prototype);function B(V,X){if(!(this instanceof B))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(X||(X={}),this.type="default",this.status=X.status===void 0?200:X.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=X.statusText===void 0?"":""+X.statusText,this.headers=new U(X.headers),this.url=X.url||"",this._initBody(V)}y.call(B.prototype),B.prototype.clone=function(){return new B(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new U(this.headers),url:this.url})},B.error=function(){var V=new B(null,{status:200,statusText:""});return V.ok=!1,V.status=0,V.type="error",V};var $=[301,302,303,307,308];B.redirect=function(V,X){if($.indexOf(X)===-1)throw new RangeError("Invalid status code");return new B(null,{status:X,headers:{location:V}})};var L=x.DOMException;try{new L}catch{L=function(X,G){this.message=X,this.name=G;var ae=Error(X);this.stack=ae.stack},L.prototype=Object.create(Error.prototype),L.prototype.constructor=L}function z(V,X){return new Promise(function(G,ae){var Q=new m(V,X);if(Q.signal&&Q.signal.aborted)return ae(new L("Aborted","AbortError"));var le=new XMLHttpRequest;function pe(){le.abort()}le.onload=function(){var Oe={statusText:le.statusText,headers:H(le.getAllResponseHeaders()||"")};Q.url.indexOf("file://")===0&&(le.status<200||le.status>599)?Oe.status=200:Oe.status=le.status,Oe.url="responseURL"in le?le.responseURL:Oe.headers.get("X-Request-URL");var ye="response"in le?le.response:le.responseText;setTimeout(function(){G(new B(ye,Oe))},0)},le.onerror=function(){setTimeout(function(){ae(new TypeError("Network request failed"))},0)},le.ontimeout=function(){setTimeout(function(){ae(new TypeError("Network request timed out"))},0)},le.onabort=function(){setTimeout(function(){ae(new L("Aborted","AbortError"))},0)};function ue(Oe){try{return Oe===""&&x.location.href?x.location.href:Oe}catch{return Oe}}if(le.open(Q.method,ue(Q.url),!0),Q.credentials==="include"?le.withCredentials=!0:Q.credentials==="omit"&&(le.withCredentials=!1),"responseType"in le&&(C.blob?le.responseType="blob":C.arrayBuffer&&(le.responseType="arraybuffer")),X&&typeof X.headers=="object"&&!(X.headers instanceof U||x.Headers&&X.headers instanceof x.Headers)){var ne=[];Object.getOwnPropertyNames(X.headers).forEach(function(Oe){ne.push(w(Oe)),le.setRequestHeader(Oe,n(X.headers[Oe]))}),Q.headers.forEach(function(Oe,ye){ne.indexOf(ye)===-1&&le.setRequestHeader(ye,Oe)})}else Q.headers.forEach(function(Oe,ye){le.setRequestHeader(ye,Oe)});Q.signal&&(Q.signal.addEventListener("abort",pe),le.onreadystatechange=function(){le.readyState===4&&Q.signal.removeEventListener("abort",pe)}),le.send(typeof Q._bodyInit>"u"?null:Q._bodyInit)})}z.polyfill=!0,x.fetch||(x.fetch=z,x.Headers=U,x.Request=m,x.Response=B)}),8876:((oe,Y,S)=>{Object.defineProperty(Y,"__esModule",{value:!0}),Y.AwaitQueueRemovedTaskError=Y.AwaitQueueStoppedError=Y.AwaitQueue=void 0;var x=S(9275);Object.defineProperty(Y,"AwaitQueue",{enumerable:!0,get:function(){return x.AwaitQueue}});var C=S(4253);Object.defineProperty(Y,"AwaitQueueStoppedError",{enumerable:!0,get:function(){return C.AwaitQueueStoppedError}}),Object.defineProperty(Y,"AwaitQueueRemovedTaskError",{enumerable:!0,get:function(){return C.AwaitQueueRemovedTaskError}})}),9021:(function(oe,Y,S){(function(x,C){oe.exports=C()})(this,function(){var x=x||(function(C,T){var b;if(typeof window<"u"&&window.crypto&&(b=window.crypto),typeof self<"u"&&self.crypto&&(b=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(b=globalThis.crypto),!b&&typeof window<"u"&&window.msCrypto&&(b=window.msCrypto),!b&&typeof S.g<"u"&&S.g.crypto&&(b=S.g.crypto),!b)try{b=S(477)}catch{}var J=function(){if(b){if(typeof b.getRandomValues=="function")try{return b.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof b.randomBytes=="function")try{return b.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},w=Object.create||(function(){function d(){}return function(R){var m;return d.prototype=R,m=new d,d.prototype=null,m}})(),n={},f=n.lib={},U=f.Base=(function(){return{extend:function(d){var R=w(this);return d&&R.mixIn(d),(!R.hasOwnProperty("init")||this.init===R.init)&&(R.init=function(){R.$super.init.apply(this,arguments)}),R.init.prototype=R,R.$super=this,R},create:function(){var d=this.extend();return d.init.apply(d,arguments),d},init:function(){},mixIn:function(d){for(var R in d)d.hasOwnProperty(R)&&(this[R]=d[R]);d.hasOwnProperty("toString")&&(this.toString=d.toString)},clone:function(){return this.init.prototype.extend(this)}}})(),q=f.WordArray=U.extend({init:function(d,R){d=this.words=d||[],R!=T?this.sigBytes=R:this.sigBytes=d.length*4},toString:function(d){return(d||h).stringify(this)},concat:function(d){var R=this.words,m=d.words,P=this.sigBytes,H=d.sigBytes;if(this.clamp(),P%4)for(var B=0;B<H;B++){var $=m[B>>>2]>>>24-B%4*8&255;R[P+B>>>2]|=$<<24-(P+B)%4*8}else for(var L=0;L<H;L+=4)R[P+L>>>2]=m[L>>>2];return this.sigBytes+=H,this},clamp:function(){var d=this.words,R=this.sigBytes;d[R>>>2]&=4294967295<<32-R%4*8,d.length=C.ceil(R/4)},clone:function(){var d=U.clone.call(this);return d.words=this.words.slice(0),d},random:function(d){for(var R=[],m=0;m<d;m+=4)R.push(J());return new q.init(R,d)}}),g=n.enc={},h=g.Hex={stringify:function(d){for(var R=d.words,m=d.sigBytes,P=[],H=0;H<m;H++){var B=R[H>>>2]>>>24-H%4*8&255;P.push((B>>>4).toString(16)),P.push((B&15).toString(16))}return P.join("")},parse:function(d){for(var R=d.length,m=[],P=0;P<R;P+=2)m[P>>>3]|=parseInt(d.substr(P,2),16)<<24-P%8*4;return new q.init(m,R/2)}},k=g.Latin1={stringify:function(d){for(var R=d.words,m=d.sigBytes,P=[],H=0;H<m;H++){var B=R[H>>>2]>>>24-H%4*8&255;P.push(String.fromCharCode(B))}return P.join("")},parse:function(d){for(var R=d.length,m=[],P=0;P<R;P++)m[P>>>2]|=(d.charCodeAt(P)&255)<<24-P%4*8;return new q.init(m,R)}},W=g.Utf8={stringify:function(d){try{return decodeURIComponent(escape(k.stringify(d)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(d){return k.parse(unescape(encodeURIComponent(d)))}},j=f.BufferedBlockAlgorithm=U.extend({reset:function(){this._data=new q.init,this._nDataBytes=0},_append:function(d){typeof d=="string"&&(d=W.parse(d)),this._data.concat(d),this._nDataBytes+=d.sigBytes},_process:function(d){var R,m=this._data,P=m.words,H=m.sigBytes,B=this.blockSize,$=B*4,L=H/$;d?L=C.ceil(L):L=C.max((L|0)-this._minBufferSize,0);var z=L*B,V=C.min(z*4,H);if(z){for(var X=0;X<z;X+=B)this._doProcessBlock(P,X);R=P.splice(0,z),m.sigBytes-=V}return new q.init(R,V)},clone:function(){var d=U.clone.call(this);return d._data=this._data.clone(),d},_minBufferSize:0});f.Hasher=j.extend({cfg:U.extend(),init:function(d){this.cfg=this.cfg.extend(d),this.reset()},reset:function(){j.reset.call(this),this._doReset()},update:function(d){return this._append(d),this._process(),this},finalize:function(d){d&&this._append(d);var R=this._doFinalize();return R},blockSize:16,_createHelper:function(d){return function(R,m){return new d.init(m).finalize(R)}},_createHmacHelper:function(d){return function(R,m){return new y.HMAC.init(d,m).finalize(R)}}});var y=n.algo={};return n})(Math);return x})}),9027:((oe,Y,S)=>{S.d(Y,{$:()=>x});var x={networkPriorities:{audio:"high",dominatingVideo:"high",otherVideos:"medium",screenShare:"medium"},aspectRatios:{fourThree:{label:"fourThree",value:1.333},oneSixNine:{label:"oneSixNine",value:1.777}},audioProfiles:{speech_low_quality:{sampleRate:16e3,bitRate:24,sampleSize:16,stereo:!1,dtx:!0,fec:!0,maxPlaybackRate:16e3,packetTime:20,autoGainControl:!0,echoCancellation:!0,noiseSuppression:!0,channelCount:1},speech_standard:{sampleRate:32e3,bitRate:24,sampleSize:24,stereo:!1,dtx:!0,fec:!0,maxPlaybackRate:32e3,packetTime:30,autoGainControl:!0,echoCancellation:!0,noiseSuppression:!0,channelCount:1},music_standard:{sampleRate:48e3,bitRate:40,sampleSize:32,stereo:!1,dtx:!1,fec:!0,maxPlaybackRate:48e3,packetTime:40,autoGainControl:!1,echoCancellation:!1,noiseSuppression:!1,channelCount:1},standard_stereo:{sampleRate:48e3,sampleSize:32,bitRate:64,stereo:!0,dtx:!1,fec:!0,maxPlaybackRate:48e3,packetTime:40,autoGainControl:!1,echoCancellation:!1,noiseSuppression:!1,channelCount:2},high_quality:{sampleRate:48e3,sampleSize:32,bitRate:128,stereo:!1,dtx:!1,fec:!0,maxPlaybackRate:48e3,packetTime:60,autoGainControl:!1,echoCancellation:!1,noiseSuppression:!1,channelCount:1},high_quality_stereo:{sampleRate:48e3,sampleSize:32,bitRate:192,stereo:!0,dtx:!1,fec:!0,maxPlaybackRate:48e3,packetTime:60,autoGainControl:!1,echoCancellation:!1,noiseSuppression:!1,channelCount:2}},videoProfiles:{h90p_w160p:{width:160,height:90,bitrates:{web:{bandwidth_optimized:60*1e3,balanced:100*1e3,high_quality:150*1e3},"react-native":{bandwidth_optimized:60*1e3,balanced:100*1e3,high_quality:150*1e3},"web-iOS":{bandwidth_optimized:100,balanced:150,high_quality:200}},frameRate:15,aspectRatio:"oneSixNine"},h180p_w320p:{width:320,height:180,bitrates:{web:{bandwidth_optimized:100*1e3,balanced:150*1e3,high_quality:250*1e3},"react-native":{bandwidth_optimized:100*1e3,balanced:150*1e3,high_quality:250*1e3},"web-iOS":{bandwidth_optimized:150,balanced:200,high_quality:300}},frameRate:15,aspectRatio:"oneSixNine"},h216p_w384p:{width:384,height:216,bitrates:{web:{bandwidth_optimized:120*1e3,balanced:200*1e3,high_quality:350*1e3},"react-native":{bandwidth_optimized:120*1e3,balanced:200*1e3,high_quality:350*1e3},"web-iOS":{bandwidth_optimized:170,balanced:250,high_quality:450}},frameRate:15,aspectRatio:"oneSixNine"},h360p_w640p:{width:640,height:360,bitrates:{web:{bandwidth_optimized:200*1e3,balanced:400*1e3,high_quality:600*1e3},"react-native":{bandwidth_optimized:200*1e3,balanced:400*1e3,high_quality:600*1e3},"web-iOS":{bandwidth_optimized:400,balanced:650,high_quality:800}},frameRate:20,aspectRatio:"oneSixNine"},h540p_w960p:{width:960,height:540,bitrates:{web:{bandwidth_optimized:350*1e3,balanced:550*1e3,high_quality:800*1e3},"react-native":{bandwidth_optimized:350*1e3,balanced:550*1e3,high_quality:800*1e3},"web-iOS":{bandwidth_optimized:950,balanced:1150,high_quality:1400}},frameRate:25,aspectRatio:"oneSixNine"},h720p_w1280p:{width:1280,height:720,bitrates:{web:{bandwidth_optimized:1e3*1e3,balanced:1500*1e3,high_quality:2e3*1e3},"react-native":{bandwidth_optimized:1e3*1e3,balanced:1500*1e3,high_quality:2e3*1e3},"web-iOS":{bandwidth_optimized:1700,balanced:2400,high_quality:2800}},frameRate:30,aspectRatio:"oneSixNine"},h1080p_w1920p:{width:1920,height:1080,bitrates:{web:{bandwidth_optimized:1600*1e3,balanced:2200*1e3,high_quality:2700*1e3},"react-native":{bandwidth_optimized:1600*1e3,balanced:2200*1e3,high_quality:2700*1e3},"web-iOS":{bandwidth_optimized:3500,balanced:4e3,high_quality:4500}},frameRate:30,aspectRatio:"oneSixNine"},h1440p_w2560p:{width:2560,height:1440,bitrates:{web:{bandwidth_optimized:5e3*1e3,balanced:5500*1e3,high_quality:6e3*1e3},"react-native":{bandwidth_optimized:5e3*1e3,balanced:5500*1e3,high_quality:6e3*1e3},"web-iOS":{bandwidth_optimized:7500,balanced:8e3,high_quality:8500}},frameRate:30,aspectRatio:"oneSixNine"},h2160p_w3840p:{width:3840,height:2160,bitrates:{web:{bandwidth_optimized:8e3*1e3,balanced:8500*1e3,high_quality:9e3*1e3},"react-native":{bandwidth_optimized:8e3*1e3,balanced:8500*1e3,high_quality:9e3*1e3},"web-iOS":{bandwidth_optimized:9500,balanced:1e4,high_quality:10500}},frameRate:30,aspectRatio:"oneSixNine"},h120p_w160p:{width:160,height:120,bitrates:{web:{bandwidth_optimized:60*1e3,balanced:100*1e3,high_quality:150*1e3},"react-native":{bandwidth_optimized:60*1e3,balanced:100*1e3,high_quality:150*1e3},"web-iOS":{bandwidth_optimized:100,balanced:150,high_quality:200}},frameRate:15,aspectRatio:"fourThree"},h144p_w192p:{width:192,height:144,bitrates:{web:{bandwidth_optimized:60*1e3,balanced:100*1e3,high_quality:150*1e3},"react-native":{bandwidth_optimized:60*1e3,balanced:100*1e3,high_quality:150*1e3},"web-iOS":{bandwidth_optimized:150,balanced:200,high_quality:300}},frameRate:15,aspectRatio:"fourThree"},h180p_w240p:{width:240,height:180,bitrates:{web:{bandwidth_optimized:100*1e3,balanced:150*1e3,high_quality:250*1e3},"react-native":{bandwidth_optimized:100*1e3,balanced:150*1e3,high_quality:250*1e3},"web-iOS":{bandwidth_optimized:150,balanced:200,high_quality:300}},frameRate:15,aspectRatio:"fourThree"},h240p_w320p:{width:320,height:240,bitrates:{web:{bandwidth_optimized:120*1e3,balanced:200*1e3,high_quality:350*1e3},"react-native":{bandwidth_optimized:80*1e3,balanced:150*1e3,high_quality:300*1e3},"web-iOS":{bandwidth_optimized:170,balanced:250,high_quality:450}},frameRate:15,aspectRatio:"fourThree"},h360p_w480p:{width:480,height:360,bitrates:{web:{bandwidth_optimized:200*1e3,balanced:400*1e3,high_quality:600*1e3},"react-native":{bandwidth_optimized:200*1e3,balanced:400*1e3,high_quality:600*1e3},"web-iOS":{bandwidth_optimized:400,balanced:650,high_quality:800}},frameRate:20,aspectRatio:"fourThree"},h480p_w640p:{width:640,height:480,bitrates:{web:{bandwidth_optimized:300*1e3,balanced:500*1e3,high_quality:700*1e3},"react-native":{bandwidth_optimized:300*1e3,balanced:500*1e3,high_quality:700*1e3},"web-iOS":{bandwidth_optimized:550,balanced:750,high_quality:1e3}},frameRate:25,aspectRatio:"fourThree"},h540p_w720p:{width:720,height:540,bitrates:{web:{bandwidth_optimized:350*1e3,balanced:550*1e3,high_quality:800*1e3},"react-native":{bandwidth_optimized:350*1e3,balanced:550*1e3,high_quality:800*1e3},"web-iOS":{bandwidth_optimized:600,balanced:900,high_quality:1200}},frameRate:30,aspectRatio:"fourThree"},h720p_w960p:{width:960,height:720,bitrates:{web:{bandwidth_optimized:900*1e3,balanced:1300*1e3,high_quality:1600*1e3},"react-native":{bandwidth_optimized:800*1e3,balanced:1200*1e3,high_quality:1600*1e3},"web-iOS":{bandwidth_optimized:1600,balanced:2e3,high_quality:2350}},frameRate:30,aspectRatio:"fourThree"},h1080p_w1440p:{width:1440,height:1080,bitrates:{web:{bandwidth_optimized:1600*1e3,balanced:2200*1e3,high_quality:2700*1e3},"react-native":{bandwidth_optimized:1600*1e3,balanced:2200*1e3,high_quality:2700*1e3},"web-iOS":{bandwidth_optimized:3e3,balanced:3500,high_quality:4e3}},frameRate:30,aspectRatio:"fourThree"},h1440p_w1920p:{width:1920,height:1440,bitrates:{web:{bandwidth_optimized:3500*1e3,balanced:4e3*1e3,high_quality:4500*1e3},"react-native":{bandwidth_optimized:3500*1e3,balanced:4e3*1e3,high_quality:4500*1e3},"web-iOS":{bandwidth_optimized:6e3,balanced:6500,high_quality:7e3}},frameRate:30,aspectRatio:"fourThree"}},screenShareProfiles:{h360p_30fps:{resolution:{width:640,height:360},frameRate:30,bitrates:{high:4e5,medium:2e5,low:1e5}},h480p_15fps:{resolution:{width:854,height:480},frameRate:15,bitrates:{high:3e5,medium:15e4,low:75e3}},h480p_30fps:{resolution:{width:854,height:480},frameRate:30,bitrates:{high:5e5,medium:25e4,low:125e3}},h720p_5fps:{resolution:{width:1280,height:720},frameRate:5,bitrates:{high:4e5,medium:2e5,low:1e5}},h720p_15fps:{resolution:{width:1280,height:720},frameRate:15,bitrates:{high:1e6,medium:5e5,low:25e4}},h720p_30fps:{resolution:{width:1280,height:720},frameRate:30,bitrates:{high:15e5,medium:75e4,low:375e3}},h1080p_15fps:{resolution:{width:1920,height:1080},frameRate:15,bitrates:{high:15e5,medium:75e4,low:3e5}},h1080p_30fps:{resolution:{width:1920,height:1080},frameRate:30,bitrates:{high:2e6,medium:1e6,low:5e5}}},simulcastProfiles:{3840:[{scaleResolutionDownBy:12,maxBitRate:150*1e3},{scaleResolutionDownBy:6,maxBitRate:500*1e3},{scaleResolutionDownBy:1,maxBitRate:1e3*1e4}],1920:[{scaleResolutionDownBy:6,maxBitRate:150*1e3},{scaleResolutionDownBy:3,maxBitRate:500*1e3},{scaleResolutionDownBy:1,maxBitRate:350*1e4}],1280:[{scaleResolutionDownBy:4,maxBitRate:150*1e3},{scaleResolutionDownBy:2,maxBitRate:500*1e3},{scaleResolutionDownBy:1,maxBitRate:120*1e4}],640:[{scaleResolutionDownBy:2,maxBitRate:150*1e3},{scaleResolutionDownBy:1,maxBitRate:500*1e3}],320:[{scaleResolutionDownBy:1,maxBitRate:150*1e3}]},requestTimeout:2e4,requestRetries:3,transportOptions:{tcp:!0},videoKSVCEncodings:[{scalabilityMode:"S3T3_KEY"}],videoSVCEncodings:[{scalabilityMode:"S3T3",dtx:!0}]}}),9166:((oe,Y,S)=>{Object.defineProperty(Y,"__esModule",{value:!0}),Y.DataConsumer=void 0;const x=S(2994),C=S(3953),T=new x.Logger("DataConsumer");class b extends C.EnhancedEventEmitter{_id;_dataProducerId;_dataChannel;_closed=!1;_sctpStreamParameters;_appData;_observer=new C.EnhancedEventEmitter;constructor({id:w,dataProducerId:n,dataChannel:f,sctpStreamParameters:U,appData:q}){super(),T.debug("constructor()"),this._id=w,this._dataProducerId=n,this._dataChannel=f,this._sctpStreamParameters=U,this._appData=q??{},this.handleDataChannel()}get id(){return this._id}get dataProducerId(){return this._dataProducerId}get closed(){return this._closed}get sctpStreamParameters(){return this._sctpStreamParameters}get readyState(){return this._dataChannel.readyState}get label(){return this._dataChannel.label}get protocol(){return this._dataChannel.protocol}get binaryType(){return this._dataChannel.binaryType}set binaryType(w){this._dataChannel.binaryType=w}get appData(){return this._appData}set appData(w){this._appData=w}get observer(){return this._observer}close(){this._closed||(T.debug("close()"),this._closed=!0,this._dataChannel.close(),this.emit("@close"),this._observer.safeEmit("close"),super.close(),this._observer.close())}transportClosed(){this._closed||(T.debug("transportClosed()"),this._closed=!0,this._dataChannel.close(),this.safeEmit("transportclose"),this._observer.safeEmit("close"))}handleDataChannel(){this._dataChannel.addEventListener("open",()=>{this._closed||(T.debug('DataChannel "open" event'),this.safeEmit("open"))}),this._dataChannel.addEventListener("error",w=>{if(this._closed)return;const n=w.error??new Error("unknown DataChannel error");w.error?.errorDetail==="sctp-failure"?T.error("DataChannel SCTP error [sctpCauseCode:%s]: %s",w.error?.sctpCauseCode,w.error.message):T.error('DataChannel "error" event: %o',n),this.safeEmit("error",n)}),this._dataChannel.addEventListener("close",()=>{this._closed||(T.warn('DataChannel "close" event'),this._closed=!0,this.emit("@close"),this.safeEmit("close"),this._observer.safeEmit("close"))}),this._dataChannel.addEventListener("message",w=>{this._closed||this.safeEmit("message",w.data)})}}Y.DataConsumer=b}),9275:((oe,Y,S)=>{Object.defineProperty(Y,"__esModule",{value:!0}),Y.AwaitQueue=void 0;const x=S(8274),C=S(4253),T=new x.Logger("AwaitQueue");class b{pendingTasks=new Map;nextTaskId=0;constructor(){T.debug("constructor()")}get size(){return this.pendingTasks.size}async push(w,n,f){if(n=n??w.name,T.debug(`push() [name:${n}, options:%o]`,f),typeof w!="function")throw new TypeError("given task is not a function");if(n)try{Object.defineProperty(w,"name",{value:n})}catch{}return new Promise((U,q)=>{if(n&&f?.removeOngoingTasksWithSameName)for(const h of this.pendingTasks.values())h.name===n&&h.reject(new C.AwaitQueueRemovedTaskError,{canExecuteNextTask:!1});const g={id:this.nextTaskId++,task:w,name:n,enqueuedAt:Date.now(),executedAt:void 0,completed:!1,resolve:h=>{if(g.completed)return;g.completed=!0,this.pendingTasks.delete(g.id),T.debug(`resolving task [name:${g.name}]`),U(h);const[k]=this.pendingTasks.values();k&&!k.executedAt&&this.execute(k)},reject:(h,{canExecuteNextTask:k})=>{if(!g.completed&&(g.completed=!0,this.pendingTasks.delete(g.id),T.debug(`rejecting task [name:${g.name}]: %s`,String(h)),q(h),k)){const[W]=this.pendingTasks.values();W&&!W.executedAt&&this.execute(W)}}};this.pendingTasks.set(g.id,g),this.pendingTasks.size===1&&this.execute(g)})}stop(){T.debug("stop()");for(const w of this.pendingTasks.values())T.debug(`stop() | stopping task [name:${w.name}]`),w.reject(new C.AwaitQueueStoppedError,{canExecuteNextTask:!1})}remove(w){T.debug(`remove() [taskIdx:${w}]`);const n=Array.from(this.pendingTasks.values())[w];if(!n){T.debug(`stop() | no task with given idx [taskIdx:${w}]`);return}n.reject(new C.AwaitQueueRemovedTaskError,{canExecuteNextTask:!0})}dump(){const w=Date.now();let n=0;return Array.from(this.pendingTasks.values()).map(f=>({idx:n++,task:f.task,name:f.name,enqueuedTime:f.executedAt?f.executedAt-f.enqueuedAt:w-f.enqueuedAt,executionTime:f.executedAt?w-f.executedAt:0}))}async execute(w){if(T.debug(`execute() [name:${w.name}]`),w.executedAt)throw new Error("task already being executed");w.executedAt=Date.now();try{const n=await w.task();w.resolve(n)}catch(n){w.reject(n,{canExecuteNextTask:!0})}}}Y.AwaitQueue=b}),9506:(function(oe,Y,S){(function(x,C,T){oe.exports=C(S(9021),S(5471),S(1025))})(this,function(x){return(function(){var C=x,T=C.lib,b=T.Base,J=T.WordArray,w=C.algo,n=w.MD5,f=w.EvpKDF=b.extend({cfg:b.extend({keySize:128/32,hasher:n,iterations:1}),init:function(U){this.cfg=this.cfg.extend(U)},compute:function(U,q){for(var g,h=this.cfg,k=h.hasher.create(),W=J.create(),j=W.words,y=h.keySize,d=h.iterations;j.length<y;){g&&k.update(g),g=k.update(U).finalize(q),k.reset();for(var R=1;R<d;R++)g=k.finalize(g),k.reset();W.concat(g)}return W.sigBytes=y*4,W}});C.EvpKDF=function(U,q,g){return f.create(g).compute(U,q)}})(),x.EvpKDF})}),9557:(function(oe,Y,S){(function(x,C,T){oe.exports=C(S(9021),S(3240),S(1380))})(this,function(x){return(function(){var C=x,T=C.x64,b=T.Word,J=T.WordArray,w=C.algo,n=w.SHA512,f=w.SHA384=n.extend({_doReset:function(){this._hash=new J.init([new b.init(3418070365,3238371032),new b.init(1654270250,914150663),new b.init(2438529370,812702999),new b.init(355462360,4144912697),new b.init(1731405415,4290775857),new b.init(2394180231,1750603025),new b.init(3675008525,1694076839),new b.init(1203062813,3204075428)])},_doFinalize:function(){var U=n._doFinalize.call(this);return U.sigBytes-=16,U}});C.SHA384=n._createHelper(f),C.HmacSHA384=n._createHmacHelper(f)})(),x.SHA384})}),9633:((oe,Y,S)=>{S.d(Y,{l:()=>y});var x=S(467),C=S(3029),T=S(2901),b=S(388),J=S(3954),w=S(5501),n=S(4756),f=S.n(n),U=S(7007),q=S(1806),g=S(6746),h=S(8278);function k(d,R,m){return R=(0,J.A)(R),(0,b.A)(d,W()?Reflect.construct(R,m||[],(0,J.A)(d).constructor):R.apply(d,m))}function W(){try{var d=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(W=function(){return!!d})()}var j=(function(d){function R(){var m,P=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return(0,C.A)(this,R),m=k(this,R),m.onKeyRatcheted=function(H,B){console.debug("key ratcheted event received",{material:H,keyIndex:B})},m.keyInfoMap=new Map,m.options=Object.assign(Object.assign({},q.T4),P),m.on(g.fo.KeyRatcheted,m.onKeyRatcheted),m}return(0,w.A)(R,d),(0,T.A)(R,[{key:"onSetEncryptionKey",value:function(P,H,B){var $={key:P,participantIdentity:H,keyIndex:B};if(!this.options.sharedKey&&!H)throw new Error("participant identity needs to be passed for encryption key if sharedKey option is false");this.keyInfoMap.set("".concat(H??"shared","-").concat(B??0),$),this.emit(g.fo.SetKey,$)}},{key:"getKeys",value:function(){return Array.from(this.keyInfoMap.values())}},{key:"getOptions",value:function(){return this.options}},{key:"ratchetKey",value:function(P,H){this.emit(g.fo.RatchetRequest,P,H)}}])})(U.EventEmitter),y=(function(d){function R(){var m=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};(0,C.A)(this,R);var P=Object.assign(Object.assign({},m),{sharedKey:!0,ratchetWindowSize:0,failureTolerance:-1});return k(this,R,[P])}return(0,w.A)(R,d),(0,T.A)(R,[{key:"setSharedKey",value:(function(){var m=(0,x.A)(f().mark(function H(B){var $,L;return f().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:if(typeof B!="string"){z.next=2;break}return z.next=1,(0,h.sn)(B);case 1:L=z.sent,z.next=4;break;case 2:return z.next=3,(0,h.tr)(B);case 3:L=z.sent;case 4:$=L,this.onSetEncryptionKey($);case 5:case"end":return z.stop()}},H,this)}));function P(H){return m.apply(this,arguments)}return P})()}])})(j)}),9767:((oe,Y,S)=>{S.r(Y),S.d(Y,{default:()=>_c});var x={};S.r(x),S.d(x,{Decoder:()=>Jn,Encoder:()=>Va,PacketType:()=>Tr,protocol:()=>Pi});var C=S(5458);function T(F,o){if(F==null)return{};var u={};for(var v in F)if({}.hasOwnProperty.call(F,v)){if(o.indexOf(v)!==-1)continue;u[v]=F[v]}return u}function b(F,o){if(F==null)return{};var u,v,s=T(F,o);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(F);for(v=0;v<l.length;v++)u=l[v],o.indexOf(u)===-1&&{}.propertyIsEnumerable.call(F,u)&&(s[u]=F[u])}return s}var J=S(2284),w=S(296),n=S(467),f=S(3029),U=S(2901),q=S(4467),g=S(4756),h=S.n(g);const k=Object.create(null);k.open="0",k.close="1",k.ping="2",k.pong="3",k.message="4",k.upgrade="5",k.noop="6";const W=Object.create(null);Object.keys(k).forEach(F=>{W[k[F]]=F});const j={type:"error",data:"parser error"},y=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",d=typeof ArrayBuffer=="function",R=F=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(F):F&&F.buffer instanceof ArrayBuffer,m=({type:F,data:o},u,v)=>y&&o instanceof Blob?u?v(o):P(o,v):d&&(o instanceof ArrayBuffer||R(o))?u?v(o):P(new Blob([o]),v):v(k[F]+(o||"")),P=(F,o)=>{const u=new FileReader;return u.onload=function(){const v=u.result.split(",")[1];o("b"+(v||""))},u.readAsDataURL(F)};function H(F){return F instanceof Uint8Array?F:F instanceof ArrayBuffer?new Uint8Array(F):new Uint8Array(F.buffer,F.byteOffset,F.byteLength)}let B;function $(F,o){if(y&&F.data instanceof Blob)return F.data.arrayBuffer().then(H).then(o);if(d&&(F.data instanceof ArrayBuffer||R(F.data)))return o(H(F.data));m(F,!1,u=>{B||(B=new TextEncoder),o(B.encode(u))})}const L="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",z=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let F=0;F<L.length;F++)z[L.charCodeAt(F)]=F;const V=F=>{let o=F.length*.75,u=F.length,v,s=0,l,A,O,I;F[F.length-1]==="="&&(o--,F[F.length-2]==="="&&o--);const Z=new ArrayBuffer(o),ee=new Uint8Array(Z);for(v=0;v<u;v+=4)l=z[F.charCodeAt(v)],A=z[F.charCodeAt(v+1)],O=z[F.charCodeAt(v+2)],I=z[F.charCodeAt(v+3)],ee[s++]=l<<2|A>>4,ee[s++]=(A&15)<<4|O>>2,ee[s++]=(O&3)<<6|I&63;return Z},X=typeof ArrayBuffer=="function",G=(F,o)=>{if(typeof F!="string")return{type:"message",data:Q(F,o)};const u=F.charAt(0);return u==="b"?{type:"message",data:ae(F.substring(1),o)}:W[u]?F.length>1?{type:W[u],data:F.substring(1)}:{type:W[u]}:j},ae=(F,o)=>{if(X){const u=V(F);return Q(u,o)}else return{base64:!0,data:F}},Q=(F,o)=>{switch(o){case"blob":return F instanceof Blob?F:new Blob([F]);case"arraybuffer":default:return F instanceof ArrayBuffer?F:F.buffer}},le="",pe=(F,o)=>{const u=F.length,v=new Array(u);let s=0;F.forEach((l,A)=>{m(l,!1,O=>{v[A]=O,++s===u&&o(v.join(le))})})},ue=(F,o)=>{const u=F.split(le),v=[];for(let s=0;s<u.length;s++){const l=G(u[s],o);if(v.push(l),l.type==="error")break}return v};function ne(){return new TransformStream({transform(F,o){$(F,u=>{const v=u.length;let s;if(v<126)s=new Uint8Array(1),new DataView(s.buffer).setUint8(0,v);else if(v<65536){s=new Uint8Array(3);const l=new DataView(s.buffer);l.setUint8(0,126),l.setUint16(1,v)}else{s=new Uint8Array(9);const l=new DataView(s.buffer);l.setUint8(0,127),l.setBigUint64(1,BigInt(v))}F.data&&typeof F.data!="string"&&(s[0]|=128),o.enqueue(s),o.enqueue(u)})}})}let Oe;function ye(F){return F.reduce((o,u)=>o+u.length,0)}function _e(F,o){if(F[0].length===o)return F.shift();const u=new Uint8Array(o);let v=0;for(let s=0;s<o;s++)u[s]=F[0][v++],v===F[0].length&&(F.shift(),v=0);return F.length&&v<F[0].length&&(F[0]=F[0].slice(v)),u}function Se(F,o){Oe||(Oe=new TextDecoder);const u=[];let v=0,s=-1,l=!1;return new TransformStream({transform(A,O){for(u.push(A);;){if(v===0){if(ye(u)<1)break;const I=_e(u,1);l=(I[0]&128)===128,s=I[0]&127,s<126?v=3:s===126?v=1:v=2}else if(v===1){if(ye(u)<2)break;const I=_e(u,2);s=new DataView(I.buffer,I.byteOffset,I.length).getUint16(0),v=3}else if(v===2){if(ye(u)<8)break;const I=_e(u,8),Z=new DataView(I.buffer,I.byteOffset,I.length),ee=Z.getUint32(0);if(ee>Math.pow(2,21)-1){O.enqueue(j);break}s=ee*Math.pow(2,32)+Z.getUint32(4),v=3}else{if(ye(u)<s)break;const I=_e(u,s);O.enqueue(G(l?I:Oe.decode(I),o)),v=0}if(s===0||s>F){O.enqueue(j);break}}}})}const ze=4;function Vt(F){if(F)return tr(F)}function tr(F){for(var o in Vt.prototype)F[o]=Vt.prototype[o];return F}Vt.prototype.on=Vt.prototype.addEventListener=function(F,o){return this._callbacks=this._callbacks||{},(this._callbacks["$"+F]=this._callbacks["$"+F]||[]).push(o),this},Vt.prototype.once=function(F,o){function u(){this.off(F,u),o.apply(this,arguments)}return u.fn=o,this.on(F,u),this},Vt.prototype.off=Vt.prototype.removeListener=Vt.prototype.removeAllListeners=Vt.prototype.removeEventListener=function(F,o){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var u=this._callbacks["$"+F];if(!u)return this;if(arguments.length==1)return delete this._callbacks["$"+F],this;for(var v,s=0;s<u.length;s++)if(v=u[s],v===o||v.fn===o){u.splice(s,1);break}return u.length===0&&delete this._callbacks["$"+F],this},Vt.prototype.emit=function(F){this._callbacks=this._callbacks||{};for(var o=new Array(arguments.length-1),u=this._callbacks["$"+F],v=1;v<arguments.length;v++)o[v-1]=arguments[v];if(u){u=u.slice(0);for(var v=0,s=u.length;v<s;++v)u[v].apply(this,o)}return this},Vt.prototype.emitReserved=Vt.prototype.emit,Vt.prototype.listeners=function(F){return this._callbacks=this._callbacks||{},this._callbacks["$"+F]||[]},Vt.prototype.hasListeners=function(F){return!!this.listeners(F).length};const gr=typeof Promise=="function"&&typeof Promise.resolve=="function"?o=>Promise.resolve().then(o):(o,u)=>u(o,0),jt=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),Pr="arraybuffer";function qa(){}function Ua(F,...o){return o.reduce((u,v)=>(F.hasOwnProperty(v)&&(u[v]=F[v]),u),{})}const br=jt.setTimeout,zr=jt.clearTimeout;function ar(F,o){o.useNativeTimers?(F.setTimeoutFn=br.bind(jt),F.clearTimeoutFn=zr.bind(jt)):(F.setTimeoutFn=jt.setTimeout.bind(jt),F.clearTimeoutFn=jt.clearTimeout.bind(jt))}const Wa=1.33;function Gr(F){return typeof F=="string"?pn(F):Math.ceil((F.byteLength||F.size)*Wa)}function pn(F){let o=0,u=0;for(let v=0,s=F.length;v<s;v++)o=F.charCodeAt(v),o<128?u+=1:o<2048?u+=2:o<55296||o>=57344?u+=3:(v++,u+=4);return u}function nt(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function et(F){let o="";for(let u in F)F.hasOwnProperty(u)&&(o.length&&(o+="&"),o+=encodeURIComponent(u)+"="+encodeURIComponent(F[u]));return o}function ir(F){let o={},u=F.split("&");for(let v=0,s=u.length;v<s;v++){let l=u[v].split("=");o[decodeURIComponent(l[0])]=decodeURIComponent(l[1])}return o}class Lr extends Error{constructor(o,u,v){super(o),this.description=u,this.context=v,this.type="TransportError"}}class pa extends Vt{constructor(o){super(),this.writable=!1,ar(this,o),this.opts=o,this.query=o.query,this.socket=o.socket,this.supportsBinary=!o.forceBase64}onError(o,u,v){return super.emitReserved("error",new Lr(o,u,v)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(o){this.readyState==="open"&&this.write(o)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(o){const u=G(o,this.socket.binaryType);this.onPacket(u)}onPacket(o){super.emitReserved("packet",o)}onClose(o){this.readyState="closed",super.emitReserved("close",o)}pause(o){}createUri(o,u={}){return o+"://"+this._hostname()+this._port()+this.opts.path+this._query(u)}_hostname(){const o=this.opts.hostname;return o.indexOf(":")===-1?o:"["+o+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(o){const u=et(o);return u.length?"?"+u:""}}class za extends pa{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(o){this.readyState="pausing";const u=()=>{this.readyState="paused",o()};if(this._polling||!this.writable){let v=0;this._polling&&(v++,this.once("pollComplete",function(){--v||u()})),this.writable||(v++,this.once("drain",function(){--v||u()}))}else u()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(o){const u=v=>{if(this.readyState==="opening"&&v.type==="open"&&this.onOpen(),v.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(v)};ue(o,this.socket.binaryType).forEach(u),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const o=()=>{this.write([{type:"close"}])};this.readyState==="open"?o():this.once("open",o)}write(o){this.writable=!1,pe(o,u=>{this.doWrite(u,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const o=this.opts.secure?"https":"http",u=this.query||{};return this.opts.timestampRequests!==!1&&(u[this.opts.timestampParam]=nt()),!this.supportsBinary&&!u.sid&&(u.b64=1),this.createUri(o,u)}}let Za=!1;try{Za=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const zt=Za;function He(){}class yt extends za{constructor(o){if(super(o),typeof location<"u"){const u=location.protocol==="https:";let v=location.port;v||(v=u?"443":"80"),this.xd=typeof location<"u"&&o.hostname!==location.hostname||v!==o.port}}doWrite(o,u){const v=this.request({method:"POST",data:o});v.on("success",u),v.on("error",(s,l)=>{this.onError("xhr post error",s,l)})}doPoll(){const o=this.request();o.on("data",this.onData.bind(this)),o.on("error",(u,v)=>{this.onError("xhr poll error",u,v)}),this.pollXhr=o}}class Xe extends Vt{constructor(o,u,v){super(),this.createRequest=o,ar(this,v),this._opts=v,this._method=v.method||"GET",this._uri=u,this._data=v.data!==void 0?v.data:null,this._create()}_create(){var o;const u=Ua(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");u.xdomain=!!this._opts.xd;const v=this._xhr=this.createRequest(u);try{v.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){v.setDisableHeaderCheck&&v.setDisableHeaderCheck(!0);for(let s in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(s)&&v.setRequestHeader(s,this._opts.extraHeaders[s])}}catch{}if(this._method==="POST")try{v.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{v.setRequestHeader("Accept","*/*")}catch{}(o=this._opts.cookieJar)===null||o===void 0||o.addCookies(v),"withCredentials"in v&&(v.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(v.timeout=this._opts.requestTimeout),v.onreadystatechange=()=>{var s;v.readyState===3&&((s=this._opts.cookieJar)===null||s===void 0||s.parseCookies(v.getResponseHeader("set-cookie"))),v.readyState===4&&(v.status===200||v.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof v.status=="number"?v.status:0)},0))},v.send(this._data)}catch(s){this.setTimeoutFn(()=>{this._onError(s)},0);return}typeof document<"u"&&(this._index=Xe.requestsCount++,Xe.requests[this._index]=this)}_onError(o){this.emitReserved("error",o,this._xhr),this._cleanup(!0)}_cleanup(o){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=He,o)try{this._xhr.abort()}catch{}typeof document<"u"&&delete Xe.requests[this._index],this._xhr=null}}_onLoad(){const o=this._xhr.responseText;o!==null&&(this.emitReserved("data",o),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}if(Xe.requestsCount=0,Xe.requests={},typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",kt);else if(typeof addEventListener=="function"){const F="onpagehide"in jt?"pagehide":"unload";addEventListener(F,kt,!1)}}function kt(){for(let F in Xe.requests)Xe.requests.hasOwnProperty(F)&&Xe.requests[F].abort()}const Or=(function(){const F=fr({xdomain:!1});return F&&F.responseType!==null})();class Ce extends yt{constructor(o){super(o);const u=o&&o.forceBase64;this.supportsBinary=Or&&!u}request(o={}){return Object.assign(o,{xd:this.xd},this.opts),new Xe(fr,this.uri(),o)}}function fr(F){const o=F.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!o||zt))return new XMLHttpRequest}catch{}if(!o)try{return new jt[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const Sr=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class Rt extends pa{get name(){return"websocket"}doOpen(){const o=this.uri(),u=this.opts.protocols,v=Sr?{}:Ua(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(v.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(o,u,v)}catch(s){return this.emitReserved("error",s)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=o=>this.onClose({description:"websocket connection closed",context:o}),this.ws.onmessage=o=>this.onData(o.data),this.ws.onerror=o=>this.onError("websocket error",o)}write(o){this.writable=!1;for(let u=0;u<o.length;u++){const v=o[u],s=u===o.length-1;m(v,this.supportsBinary,l=>{try{this.doWrite(v,l)}catch{}s&&gr(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const o=this.opts.secure?"wss":"ws",u=this.query||{};return this.opts.timestampRequests&&(u[this.opts.timestampParam]=nt()),this.supportsBinary||(u.b64=1),this.createUri(o,u)}}const Rr=jt.WebSocket||jt.MozWebSocket;class aa extends Rt{createSocket(o,u,v){return Sr?new Rr(o,u,v):u?new Rr(o,u):new Rr(o)}doWrite(o,u){this.ws.send(u)}}class Ke extends pa{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(o){return this.emitReserved("error",o)}this._transport.closed.then(()=>{this.onClose()}).catch(o=>{this.onError("webtransport error",o)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(o=>{const u=Se(Number.MAX_SAFE_INTEGER,this.socket.binaryType),v=o.readable.pipeThrough(u).getReader(),s=ne();s.readable.pipeTo(o.writable),this._writer=s.writable.getWriter();const l=()=>{v.read().then(({done:O,value:I})=>{O||(this.onPacket(I),l())}).catch(O=>{})};l();const A={type:"open"};this.query.sid&&(A.data=`{"sid":"${this.query.sid}"}`),this._writer.write(A).then(()=>this.onOpen())})})}write(o){this.writable=!1;for(let u=0;u<o.length;u++){const v=o[u],s=u===o.length-1;this._writer.write(v).then(()=>{s&&gr(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var o;(o=this._transport)===null||o===void 0||o.close()}}const Xt={websocket:aa,webtransport:Ke,polling:Ce},Ht=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,Qt=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function rt(F){if(F.length>8e3)throw"URI too long";const o=F,u=F.indexOf("["),v=F.indexOf("]");u!=-1&&v!=-1&&(F=F.substring(0,u)+F.substring(u,v).replace(/:/g,";")+F.substring(v,F.length));let s=Ht.exec(F||""),l={},A=14;for(;A--;)l[Qt[A]]=s[A]||"";return u!=-1&&v!=-1&&(l.source=o,l.host=l.host.substring(1,l.host.length-1).replace(/;/g,":"),l.authority=l.authority.replace("[","").replace("]","").replace(/;/g,":"),l.ipv6uri=!0),l.pathNames=Tt(l,l.path),l.queryKey=yr(l,l.query),l}function Tt(F,o){const u=/\/{2,9}/g,v=o.replace(u,"/").split("/");return(o.slice(0,1)=="/"||o.length===0)&&v.splice(0,1),o.slice(-1)=="/"&&v.splice(v.length-1,1),v}function yr(F,o){const u={};return o.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(v,s,l){s&&(u[s]=l)}),u}const ur=typeof addEventListener=="function"&&typeof removeEventListener=="function",wr=[];ur&&addEventListener("offline",()=>{wr.forEach(F=>F())},!1);class $r extends Vt{constructor(o,u){if(super(),this.binaryType=Pr,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,o&&typeof o=="object"&&(u=o,o=null),o){const v=rt(o);u.hostname=v.host,u.secure=v.protocol==="https"||v.protocol==="wss",u.port=v.port,v.query&&(u.query=v.query)}else u.host&&(u.hostname=rt(u.host).host);ar(this,u),this.secure=u.secure!=null?u.secure:typeof location<"u"&&location.protocol==="https:",u.hostname&&!u.port&&(u.port=this.secure?"443":"80"),this.hostname=u.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=u.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},u.transports.forEach(v=>{const s=v.prototype.name;this.transports.push(s),this._transportsByName[s]=v}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},u),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=ir(this.opts.query)),ur&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},wr.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(o){const u=Object.assign({},this.opts.query);u.EIO=ze,u.transport=o,this.id&&(u.sid=this.id);const v=Object.assign({},this.opts,{query:u,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[o]);return new this._transportsByName[o](v)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const o=this.opts.rememberUpgrade&&$r.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const u=this.createTransport(o);u.open(),this.setTransport(u)}setTransport(o){this.transport&&this.transport.removeAllListeners(),this.transport=o,o.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",u=>this._onClose("transport close",u))}onOpen(){this.readyState="open",$r.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(o){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",o),this.emitReserved("heartbeat"),o.type){case"open":this.onHandshake(JSON.parse(o.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const u=new Error("server error");u.code=o.data,this._onError(u);break;case"message":this.emitReserved("data",o.data),this.emitReserved("message",o.data);break}}onHandshake(o){this.emitReserved("handshake",o),this.id=o.sid,this.transport.query.sid=o.sid,this._pingInterval=o.pingInterval,this._pingTimeout=o.pingTimeout,this._maxPayload=o.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const o=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+o,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},o),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const o=this._getWritablePackets();this.transport.send(o),this._prevBufferLen=o.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let u=1;for(let v=0;v<this.writeBuffer.length;v++){const s=this.writeBuffer[v].data;if(s&&(u+=Gr(s)),v>0&&u>this._maxPayload)return this.writeBuffer.slice(0,v);u+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const o=Date.now()>this._pingTimeoutTime;return o&&(this._pingTimeoutTime=0,gr(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),o}write(o,u,v){return this._sendPacket("message",o,u,v),this}send(o,u,v){return this._sendPacket("message",o,u,v),this}_sendPacket(o,u,v,s){if(typeof u=="function"&&(s=u,u=void 0),typeof v=="function"&&(s=v,v=null),this.readyState==="closing"||this.readyState==="closed")return;v=v||{},v.compress=v.compress!==!1;const l={type:o,data:u,options:v};this.emitReserved("packetCreate",l),this.writeBuffer.push(l),s&&this.once("flush",s),this.flush()}close(){const o=()=>{this._onClose("forced close"),this.transport.close()},u=()=>{this.off("upgrade",u),this.off("upgradeError",u),o()},v=()=>{this.once("upgrade",u),this.once("upgradeError",u)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?v():o()}):this.upgrading?v():o()),this}_onError(o){if($r.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",o),this._onClose("transport error",o)}_onClose(o,u){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),ur&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const v=wr.indexOf(this._offlineEventListener);v!==-1&&wr.splice(v,1)}this.readyState="closed",this.id=null,this.emitReserved("close",o,u),this.writeBuffer=[],this._prevBufferLen=0}}}$r.protocol=ze;class Ha extends $r{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let o=0;o<this._upgrades.length;o++)this._probe(this._upgrades[o])}_probe(o){let u=this.createTransport(o),v=!1;$r.priorWebsocketSuccess=!1;const s=()=>{v||(u.send([{type:"ping",data:"probe"}]),u.once("packet",te=>{if(!v)if(te.type==="pong"&&te.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",u),!u)return;$r.priorWebsocketSuccess=u.name==="websocket",this.transport.pause(()=>{v||this.readyState!=="closed"&&(ee(),this.setTransport(u),u.send([{type:"upgrade"}]),this.emitReserved("upgrade",u),u=null,this.upgrading=!1,this.flush())})}else{const fe=new Error("probe error");fe.transport=u.name,this.emitReserved("upgradeError",fe)}}))};function l(){v||(v=!0,ee(),u.close(),u=null)}const A=te=>{const fe=new Error("probe error: "+te);fe.transport=u.name,l(),this.emitReserved("upgradeError",fe)};function O(){A("transport closed")}function I(){A("socket closed")}function Z(te){u&&te.name!==u.name&&l()}const ee=()=>{u.removeListener("open",s),u.removeListener("error",A),u.removeListener("close",O),this.off("close",I),this.off("upgrading",Z)};u.once("open",s),u.once("error",A),u.once("close",O),this.once("close",I),this.once("upgrading",Z),this._upgrades.indexOf("webtransport")!==-1&&o!=="webtransport"?this.setTimeoutFn(()=>{v||u.open()},200):u.open()}onHandshake(o){this._upgrades=this._filterUpgrades(o.upgrades),super.onHandshake(o)}_filterUpgrades(o){const u=[];for(let v=0;v<o.length;v++)~this.transports.indexOf(o[v])&&u.push(o[v]);return u}}class nn extends Ha{constructor(o,u={}){const v=typeof o=="object"?o:u;(!v.transports||v.transports&&typeof v.transports[0]=="string")&&(v.transports=(v.transports||["polling","websocket","webtransport"]).map(s=>Xt[s]).filter(s=>!!s)),super(o,v)}}function qn(F,o="",u){let v=F;u=u||typeof location<"u"&&location,F==null&&(F=u.protocol+"//"+u.host),typeof F=="string"&&(F.charAt(0)==="/"&&(F.charAt(1)==="/"?F=u.protocol+F:F=u.host+F),/^(https?|wss?):\/\//.test(F)||(typeof u<"u"?F=u.protocol+"//"+F:F="https://"+F),v=rt(F)),v.port||(/^(http|ws)$/.test(v.protocol)?v.port="80":/^(http|ws)s$/.test(v.protocol)&&(v.port="443")),v.path=v.path||"/";const l=v.host.indexOf(":")!==-1?"["+v.host+"]":v.host;return v.id=v.protocol+"://"+l+":"+v.port+o,v.href=v.protocol+"://"+l+(u&&u.port===v.port?"":":"+v.port),v}const hn=typeof ArrayBuffer=="function",ca=F=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(F):F.buffer instanceof ArrayBuffer,Kr=Object.prototype.toString,Oa=typeof Blob=="function"||typeof Blob<"u"&&Kr.call(Blob)==="[object BlobConstructor]",jn=typeof File=="function"||typeof File<"u"&&Kr.call(File)==="[object FileConstructor]";function Qn(F){return hn&&(F instanceof ArrayBuffer||ca(F))||Oa&&F instanceof Blob||jn&&F instanceof File}function di(F,o){if(!F||typeof F!="object")return!1;if(Array.isArray(F)){for(let u=0,v=F.length;u<v;u++)if(di(F[u]))return!0;return!1}if(Qn(F))return!0;if(F.toJSON&&typeof F.toJSON=="function"&&arguments.length===1)return di(F.toJSON(),!0);for(const u in F)if(Object.prototype.hasOwnProperty.call(F,u)&&di(F[u]))return!0;return!1}function qi(F){const o=[],u=F.data,v=F;return v.data=sn(u,o),v.attachments=o.length,{packet:v,buffers:o}}function sn(F,o){if(!F)return F;if(Qn(F)){const u={_placeholder:!0,num:o.length};return o.push(F),u}else if(Array.isArray(F)){const u=new Array(F.length);for(let v=0;v<F.length;v++)u[v]=sn(F[v],o);return u}else if(typeof F=="object"&&!(F instanceof Date)){const u={};for(const v in F)Object.prototype.hasOwnProperty.call(F,v)&&(u[v]=sn(F[v],o));return u}return F}function Wi(F,o){return F.data=Xn(F.data,o),delete F.attachments,F}function Xn(F,o){if(!F)return F;if(F&&F._placeholder===!0){if(typeof F.num=="number"&&F.num>=0&&F.num<o.length)return o[F.num];throw new Error("illegal attachments")}else if(Array.isArray(F))for(let u=0;u<F.length;u++)F[u]=Xn(F[u],o);else if(typeof F=="object")for(const u in F)Object.prototype.hasOwnProperty.call(F,u)&&(F[u]=Xn(F[u],o));return F}const Ei=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],Pi=5;var Tr;(function(F){F[F.CONNECT=0]="CONNECT",F[F.DISCONNECT=1]="DISCONNECT",F[F.EVENT=2]="EVENT",F[F.ACK=3]="ACK",F[F.CONNECT_ERROR=4]="CONNECT_ERROR",F[F.BINARY_EVENT=5]="BINARY_EVENT",F[F.BINARY_ACK=6]="BINARY_ACK"})(Tr||(Tr={}));class Va{constructor(o){this.replacer=o}encode(o){return(o.type===Tr.EVENT||o.type===Tr.ACK)&&di(o)?this.encodeAsBinary({type:o.type===Tr.EVENT?Tr.BINARY_EVENT:Tr.BINARY_ACK,nsp:o.nsp,data:o.data,id:o.id}):[this.encodeAsString(o)]}encodeAsString(o){let u=""+o.type;return(o.type===Tr.BINARY_EVENT||o.type===Tr.BINARY_ACK)&&(u+=o.attachments+"-"),o.nsp&&o.nsp!=="/"&&(u+=o.nsp+","),o.id!=null&&(u+=o.id),o.data!=null&&(u+=JSON.stringify(o.data,this.replacer)),u}encodeAsBinary(o){const u=qi(o),v=this.encodeAsString(u.packet),s=u.buffers;return s.unshift(v),s}}function Li(F){return Object.prototype.toString.call(F)==="[object Object]"}class Jn extends Vt{constructor(o){super(),this.reviver=o}add(o){let u;if(typeof o=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");u=this.decodeString(o);const v=u.type===Tr.BINARY_EVENT;v||u.type===Tr.BINARY_ACK?(u.type=v?Tr.EVENT:Tr.ACK,this.reconstructor=new ha(u),u.attachments===0&&super.emitReserved("decoded",u)):super.emitReserved("decoded",u)}else if(Qn(o)||o.base64)if(this.reconstructor)u=this.reconstructor.takeBinaryData(o),u&&(this.reconstructor=null,super.emitReserved("decoded",u));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+o)}decodeString(o){let u=0;const v={type:Number(o.charAt(0))};if(Tr[v.type]===void 0)throw new Error("unknown packet type "+v.type);if(v.type===Tr.BINARY_EVENT||v.type===Tr.BINARY_ACK){const l=u+1;for(;o.charAt(++u)!=="-"&&u!=o.length;);const A=o.substring(l,u);if(A!=Number(A)||o.charAt(u)!=="-")throw new Error("Illegal attachments");v.attachments=Number(A)}if(o.charAt(u+1)==="/"){const l=u+1;for(;++u&&!(o.charAt(u)===","||u===o.length););v.nsp=o.substring(l,u)}else v.nsp="/";const s=o.charAt(u+1);if(s!==""&&Number(s)==s){const l=u+1;for(;++u;){const A=o.charAt(u);if(A==null||Number(A)!=A){--u;break}if(u===o.length)break}v.id=Number(o.substring(l,u+1))}if(o.charAt(++u)){const l=this.tryParse(o.substr(u));if(Jn.isPayloadValid(v.type,l))v.data=l;else throw new Error("invalid payload")}return v}tryParse(o){try{return JSON.parse(o,this.reviver)}catch{return!1}}static isPayloadValid(o,u){switch(o){case Tr.CONNECT:return Li(u);case Tr.DISCONNECT:return u===void 0;case Tr.CONNECT_ERROR:return typeof u=="string"||Li(u);case Tr.EVENT:case Tr.BINARY_EVENT:return Array.isArray(u)&&(typeof u[0]=="number"||typeof u[0]=="string"&&Ei.indexOf(u[0])===-1);case Tr.ACK:case Tr.BINARY_ACK:return Array.isArray(u)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class ha{constructor(o){this.packet=o,this.buffers=[],this.reconPack=o}takeBinaryData(o){if(this.buffers.push(o),this.buffers.length===this.reconPack.attachments){const u=Wi(this.reconPack,this.buffers);return this.finishedReconstruction(),u}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}function Ga(F,o,u){return F.on(o,u),function(){F.off(o,u)}}const ts=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class We extends Vt{constructor(o,u,v){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=o,this.nsp=u,v&&v.auth&&(this.auth=v.auth),this._opts=Object.assign({},v),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const o=this.io;this.subs=[Ga(o,"open",this.onopen.bind(this)),Ga(o,"packet",this.onpacket.bind(this)),Ga(o,"error",this.onerror.bind(this)),Ga(o,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...o){return o.unshift("message"),this.emit.apply(this,o),this}emit(o,...u){var v,s,l;if(ts.hasOwnProperty(o))throw new Error('"'+o.toString()+'" is a reserved event name');if(u.unshift(o),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(u),this;const A={type:Tr.EVENT,data:u};if(A.options={},A.options.compress=this.flags.compress!==!1,typeof u[u.length-1]=="function"){const ee=this.ids++,te=u.pop();this._registerAckCallback(ee,te),A.id=ee}const O=(s=(v=this.io.engine)===null||v===void 0?void 0:v.transport)===null||s===void 0?void 0:s.writable,I=this.connected&&!(!((l=this.io.engine)===null||l===void 0)&&l._hasPingExpired());return this.flags.volatile&&!O||(I?(this.notifyOutgoingListeners(A),this.packet(A)):this.sendBuffer.push(A)),this.flags={},this}_registerAckCallback(o,u){var v;const s=(v=this.flags.timeout)!==null&&v!==void 0?v:this._opts.ackTimeout;if(s===void 0){this.acks[o]=u;return}const l=this.io.setTimeoutFn(()=>{delete this.acks[o];for(let O=0;O<this.sendBuffer.length;O++)this.sendBuffer[O].id===o&&this.sendBuffer.splice(O,1);u.call(this,new Error("operation has timed out"))},s),A=(...O)=>{this.io.clearTimeoutFn(l),u.apply(this,O)};A.withError=!0,this.acks[o]=A}emitWithAck(o,...u){return new Promise((v,s)=>{const l=(A,O)=>A?s(A):v(O);l.withError=!0,u.push(l),this.emit(o,...u)})}_addToQueue(o){let u;typeof o[o.length-1]=="function"&&(u=o.pop());const v={id:this._queueSeq++,tryCount:0,pending:!1,args:o,flags:Object.assign({fromQueue:!0},this.flags)};o.push((s,...l)=>v!==this._queue[0]?void 0:(s!==null?v.tryCount>this._opts.retries&&(this._queue.shift(),u&&u(s)):(this._queue.shift(),u&&u(null,...l)),v.pending=!1,this._drainQueue())),this._queue.push(v),this._drainQueue()}_drainQueue(o=!1){if(!this.connected||this._queue.length===0)return;const u=this._queue[0];u.pending&&!o||(u.pending=!0,u.tryCount++,this.flags=u.flags,this.emit.apply(this,u.args))}packet(o){o.nsp=this.nsp,this.io._packet(o)}onopen(){typeof this.auth=="function"?this.auth(o=>{this._sendConnectPacket(o)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(o){this.packet({type:Tr.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},o):o})}onerror(o){this.connected||this.emitReserved("connect_error",o)}onclose(o,u){this.connected=!1,delete this.id,this.emitReserved("disconnect",o,u),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(o=>{if(!this.sendBuffer.some(v=>String(v.id)===o)){const v=this.acks[o];delete this.acks[o],v.withError&&v.call(this,new Error("socket has been disconnected"))}})}onpacket(o){if(o.nsp===this.nsp)switch(o.type){case Tr.CONNECT:o.data&&o.data.sid?this.onconnect(o.data.sid,o.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case Tr.EVENT:case Tr.BINARY_EVENT:this.onevent(o);break;case Tr.ACK:case Tr.BINARY_ACK:this.onack(o);break;case Tr.DISCONNECT:this.ondisconnect();break;case Tr.CONNECT_ERROR:this.destroy();const v=new Error(o.data.message);v.data=o.data.data,this.emitReserved("connect_error",v);break}}onevent(o){const u=o.data||[];o.id!=null&&u.push(this.ack(o.id)),this.connected?this.emitEvent(u):this.receiveBuffer.push(Object.freeze(u))}emitEvent(o){if(this._anyListeners&&this._anyListeners.length){const u=this._anyListeners.slice();for(const v of u)v.apply(this,o)}super.emit.apply(this,o),this._pid&&o.length&&typeof o[o.length-1]=="string"&&(this._lastOffset=o[o.length-1])}ack(o){const u=this;let v=!1;return function(...s){v||(v=!0,u.packet({type:Tr.ACK,id:o,data:s}))}}onack(o){const u=this.acks[o.id];typeof u=="function"&&(delete this.acks[o.id],u.withError&&o.data.unshift(null),u.apply(this,o.data))}onconnect(o,u){this.id=o,this.recovered=u&&this._pid===u,this._pid=u,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(o=>this.emitEvent(o)),this.receiveBuffer=[],this.sendBuffer.forEach(o=>{this.notifyOutgoingListeners(o),this.packet(o)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(o=>o()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:Tr.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(o){return this.flags.compress=o,this}get volatile(){return this.flags.volatile=!0,this}timeout(o){return this.flags.timeout=o,this}onAny(o){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(o),this}prependAny(o){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(o),this}offAny(o){if(!this._anyListeners)return this;if(o){const u=this._anyListeners;for(let v=0;v<u.length;v++)if(o===u[v])return u.splice(v,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(o){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(o),this}prependAnyOutgoing(o){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(o),this}offAnyOutgoing(o){if(!this._anyOutgoingListeners)return this;if(o){const u=this._anyOutgoingListeners;for(let v=0;v<u.length;v++)if(o===u[v])return u.splice(v,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(o){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const u=this._anyOutgoingListeners.slice();for(const v of u)v.apply(this,o.data)}}}function _t(F){F=F||{},this.ms=F.min||100,this.max=F.max||1e4,this.factor=F.factor||2,this.jitter=F.jitter>0&&F.jitter<=1?F.jitter:0,this.attempts=0}_t.prototype.duration=function(){var F=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var o=Math.random(),u=Math.floor(o*this.jitter*F);F=(Math.floor(o*10)&1)==0?F-u:F+u}return Math.min(F,this.max)|0},_t.prototype.reset=function(){this.attempts=0},_t.prototype.setMin=function(F){this.ms=F},_t.prototype.setMax=function(F){this.max=F},_t.prototype.setJitter=function(F){this.jitter=F};class Mt extends Vt{constructor(o,u){var v;super(),this.nsps={},this.subs=[],o&&typeof o=="object"&&(u=o,o=void 0),u=u||{},u.path=u.path||"/socket.io",this.opts=u,ar(this,u),this.reconnection(u.reconnection!==!1),this.reconnectionAttempts(u.reconnectionAttempts||1/0),this.reconnectionDelay(u.reconnectionDelay||1e3),this.reconnectionDelayMax(u.reconnectionDelayMax||5e3),this.randomizationFactor((v=u.randomizationFactor)!==null&&v!==void 0?v:.5),this.backoff=new _t({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(u.timeout==null?2e4:u.timeout),this._readyState="closed",this.uri=o;const s=u.parser||x;this.encoder=new s.Encoder,this.decoder=new s.Decoder,this._autoConnect=u.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(o){return arguments.length?(this._reconnection=!!o,o||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(o){return o===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=o,this)}reconnectionDelay(o){var u;return o===void 0?this._reconnectionDelay:(this._reconnectionDelay=o,(u=this.backoff)===null||u===void 0||u.setMin(o),this)}randomizationFactor(o){var u;return o===void 0?this._randomizationFactor:(this._randomizationFactor=o,(u=this.backoff)===null||u===void 0||u.setJitter(o),this)}reconnectionDelayMax(o){var u;return o===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=o,(u=this.backoff)===null||u===void 0||u.setMax(o),this)}timeout(o){return arguments.length?(this._timeout=o,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(o){if(~this._readyState.indexOf("open"))return this;this.engine=new nn(this.uri,this.opts);const u=this.engine,v=this;this._readyState="opening",this.skipReconnect=!1;const s=Ga(u,"open",function(){v.onopen(),o&&o()}),l=O=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",O),o?o(O):this.maybeReconnectOnOpen()},A=Ga(u,"error",l);if(this._timeout!==!1){const O=this._timeout,I=this.setTimeoutFn(()=>{s(),l(new Error("timeout")),u.close()},O);this.opts.autoUnref&&I.unref(),this.subs.push(()=>{this.clearTimeoutFn(I)})}return this.subs.push(s),this.subs.push(A),this}connect(o){return this.open(o)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const o=this.engine;this.subs.push(Ga(o,"ping",this.onping.bind(this)),Ga(o,"data",this.ondata.bind(this)),Ga(o,"error",this.onerror.bind(this)),Ga(o,"close",this.onclose.bind(this)),Ga(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(o){try{this.decoder.add(o)}catch(u){this.onclose("parse error",u)}}ondecoded(o){gr(()=>{this.emitReserved("packet",o)},this.setTimeoutFn)}onerror(o){this.emitReserved("error",o)}socket(o,u){let v=this.nsps[o];return v?this._autoConnect&&!v.active&&v.connect():(v=new We(this,o,u),this.nsps[o]=v),v}_destroy(o){const u=Object.keys(this.nsps);for(const v of u)if(this.nsps[v].active)return;this._close()}_packet(o){const u=this.encoder.encode(o);for(let v=0;v<u.length;v++)this.engine.write(u[v],o.options)}cleanup(){this.subs.forEach(o=>o()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(o,u){var v;this.cleanup(),(v=this.engine)===null||v===void 0||v.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",o,u),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const o=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const u=this.backoff.duration();this._reconnecting=!0;const v=this.setTimeoutFn(()=>{o.skipReconnect||(this.emitReserved("reconnect_attempt",o.backoff.attempts),!o.skipReconnect&&o.open(s=>{s?(o._reconnecting=!1,o.reconnect(),this.emitReserved("reconnect_error",s)):o.onreconnect()}))},u);this.opts.autoUnref&&v.unref(),this.subs.push(()=>{this.clearTimeoutFn(v)})}}onreconnect(){const o=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",o)}}const $t={};function Br(F,o){typeof F=="object"&&(o=F,F=void 0),o=o||{};const u=qn(F,o.path||"/socket.io"),v=u.source,s=u.id,l=u.path,A=$t[s]&&l in $t[s].nsps,O=o.forceNew||o["force new connection"]||o.multiplex===!1||A;let I;return O?I=new Mt(v,o):($t[s]||($t[s]=new Mt(v,o)),I=$t[s]),u.query&&!o.query&&(o.query=u.queryKey),I.socket(u.path,o)}Object.assign(Br,{Manager:Mt,Socket:We,io:Br,connect:Br});var jr=S(76),Dt=S(7833),Xr=S.n(Dt),Nr="mediasoup-demo",Ca=(function(){function F(o){(0,f.A)(this,F),o?(this._debug=Xr()("".concat(Nr,":").concat(o)),this._warn=Xr()("".concat(Nr,":WARN:").concat(o)),this._error=Xr()("".concat(Nr,":ERROR:").concat(o))):(this._debug=Xr()(Nr),this._warn=Xr()("".concat(Nr,":WARN")),this._error=Xr()("".concat(Nr,":ERROR"))),Xr().disable(),this._debug.log=console.info.bind(console),this._warn.log=console.warn.bind(console),this._error.log=console.error.bind(console)}return(0,U.A)(F,[{key:"debug",get:function(){return this._debug}},{key:"warn",get:function(){return this._warn}},{key:"error",get:function(){return this._error}}])})();function Ka(F,o){var u=Object.keys(F);if(Object.getOwnPropertySymbols){var v=Object.getOwnPropertySymbols(F);o&&(v=v.filter(function(s){return Object.getOwnPropertyDescriptor(F,s).enumerable})),u.push.apply(u,v)}return u}function Un(F){for(var o=1;o<arguments.length;o++){var u=arguments[o]!=null?arguments[o]:{};o%2?Ka(Object(u),!0).forEach(function(v){(0,q.A)(F,v,u[v])}):Object.getOwnPropertyDescriptors?Object.defineProperties(F,Object.getOwnPropertyDescriptors(u)):Ka(Object(u)).forEach(function(v){Object.defineProperty(F,v,Object.getOwnPropertyDescriptor(u,v))})}return F}var ni=S(1396),Ln=ni.enc.Latin1.parse("6gf9Oz5Y(6fOWPP@3XPv0Mwp51yfJ0HiZW^0*!9NdUuZ*VdKmRC@f))&^!Iriw)q"),pi=ni.enc.Latin1.parse("BHrabik^$W^y*HL@A*$4YKj(");function gs(F){return Gi.apply(this,arguments)}function Gi(){return Gi=(0,n.A)(h().mark(function F(o){var u,v,s,l,A,O,I,Z,ee,te,fe,Me,ke,$e,ot,Je,qe;return h().wrap(function(Ct){for(;;)switch(Ct.prev=Ct.next){case 0:return u=o.roomId,v=o.secret,s=o.signalingBaseUrl,l="call-api.videosdk.live",A=[],O=null,I={},Z={},ee={},te=null,fe=null,Me=null,Ct.next=1,fetch("https://".concat(s,"/infra/v1/meetings/init-config"),{method:"POST",headers:{Authorization:v,"Content-Type":"application/json"},body:JSON.stringify({roomId:u})}).then((function(){var gt=(0,n.A)(h().mark(function Et(it){var Pt;return h().wrap(function(pt){for(;;)switch(pt.prev=pt.next){case 0:return pt.next=1,it.json();case 1:return Pt=pt.sent,pt.abrupt("return",Un({success:it.status==200},Pt));case 2:case"end":return pt.stop()}},Et)}));return function(Et){return gt.apply(this,arguments)}})()).catch(function(gt){return{success:!1}});case 1:if(ke=Ct.sent,$e=ke.data,ot=ke.success,Je=ke.error,ot){Ct.next=2;break}throw Error(Je??"Error getting server configurations");case 2:return $e&&(l=$e.baseUrl,qe=$e.observability,A=wi($e.iceServers),O=qe.jwt,I=qe.traces,Z=qe.logs,ee=qe.metaData,te=$e.signalingUrl,Me=$e.socketPath,fe=$e.socketUrl),Ct.abrupt("return",{baseUrl:l,iceServers:A,observabilityJwt:O,traces:I,logs:Z,metaData:ee,signalingUrl:te,socketPath:Me,socketUrl:fe});case 3:case"end":return Ct.stop()}},F)})),Gi.apply(this,arguments)}function wi(F){try{var o=ni.AES.decrypt(F,Ln,{iv:pi,mode:ni.mode.CBC,padding:ni.pad.ZeroPadding}),u=o.toString(ni.enc.Utf8);return JSON.parse(u)}catch{return[]}}var ys=S(2215),rs=S.n(ys),Ri="mediasoup-demo.user",as="mediasoup-demo.devices";function xs(F){var o=F.displayName;rs().set(Ri,{displayName:o})}function Zn(){return rs().getJSON(as)}var Ys=S(2211),fo=S.n(Ys),Qs=function(o){return{type:"SET_ROOM_STATE",payload:{state:o}}},mo=function(o){return{type:"SET_ROOM_ACTIVE_SPEAKER",payload:{peerId:o}}},Ti=function(o){return{type:"SET_ROOM_STATS_PEER_ID",payload:{peerId:o}}},vo=function(o){var u=o.canSendMic,v=o.canSendWebcam;return{type:"SET_MEDIA_CAPABILITIES",payload:{canSendMic:u,canSendWebcam:v}}},xo=function(o){return{type:"SET_CAN_CHANGE_WEBCAM",payload:o}},ns=function(o){return{type:"SET_DISPLAY_NAME",payload:{displayName:o}}},Ni=function(o){return{type:"SET_AUDIO_ONLY_STATE",payload:{enabled:o}}},_s=function(o){return{type:"SET_AUDIO_ONLY_IN_PROGRESS",payload:{flag:o}}},Bs=function(o){return{type:"SET_AUDIO_MUTED_STATE",payload:{enabled:o}}},js=function(o){return{type:"SET_RESTART_ICE_IN_PROGRESS",payload:{flag:o}}},hi=function(o){return{type:"ADD_PRODUCER",payload:{producer:o}}},Nn=function(o){return{type:"REMOVE_PRODUCER",payload:{producerId:o}}},Bo=function(o){return{type:"SET_PRODUCER_PAUSED",payload:{producerId:o}}},is=function(o){return{type:"SET_PRODUCER_RESUMED",payload:{producerId:o}}},Ii=function(o,u){return{type:"SET_PRODUCER_TRACK",payload:{producerId:o,track:u}}},Us=function(o,u){return{type:"SET_PRODUCER_SCORE",payload:{producerId:o,score:u}}},Xs=function(o){return{type:"ADD_DATA_PRODUCER",payload:{dataProducer:o}}},go=function(o){return{type:"SET_WEBCAM_IN_PROGRESS",payload:{flag:o}}},bs=function(o){return{type:"SET_SHARE_IN_PROGRESS",payload:{flag:o}}},Rn=function(o){return{type:"ADD_PEER",payload:{peer:o}}},yo=function(o,u){return{type:"REMOVE_PEER",payload:{peerId:o,reason:u}}},Tn=function(o,u){return{type:"SET_PEER_DISPLAY_NAME",payload:{displayName:o,peerId:u}}},xi=function(o,u){return{type:"ADD_CONSUMER",payload:{consumer:o,peerId:u}}},Ss=function(o,u){return{type:"REMOVE_CONSUMER",payload:{consumerId:o,peerId:u}}},ss=function(o,u){return{type:"SET_CONSUMER_PAUSED",payload:{consumerId:o,originator:u}}},_o=function(o,u){return{type:"SET_CONSUMER_RESUMED",payload:{consumerId:o,originator:u}}},Js=function(o,u,v){return{type:"SET_CONSUMER_CURRENT_LAYERS",payload:{consumerId:o,spatialLayer:u,temporalLayer:v}}},Zs=function(o,u,v){return{type:"SET_CONSUMER_PREFERRED_LAYERS",payload:{consumerId:o,spatialLayer:u,temporalLayer:v}}},Es=function(o,u){return{type:"SET_CONSUMER_PRIORITY",payload:{consumerId:o,priority:u}}},Ci=function(o,u){return{type:"SET_CONSUMER_SCORE",payload:{consumerId:o,score:u}}},bo=function(o,u){return{type:"ADD_DATA_CONSUMER",payload:{dataConsumer:o,peerId:u}}},jo=function(o,u){return{type:"REMOVE_DATA_CONSUMER",payload:{dataConsumerId:o,peerId:u}}},Uo=function(o){return{type:"ADD_NOTIFICATION",payload:{notification:o}}},zo=function(o){return{type:"REMOVE_NOTIFICATION",payload:{notificationId:o}}},zs=function(){return{type:"REMOVE_ALL_NOTIFICATIONS"}},Er=function(o){var u=o.type,v=u===void 0?"info":u,s=o.text,l=o.title,A=o.timeout;if(!A)switch(v){case"info":A=3e3;break;case"error":A=5e3;break}var O={id:fo()({length:6}).toLowerCase(),type:v,title:l,text:s,timeout:A};return function(I){I(Uo(O)),setTimeout(function(){I(zo(O.id))},A)}},So=S(7007),Eo=S(1803),Hs=S(9027),xe=S(7080),se={CONNECTING:"CONNECTING",CONNECTED:"CONNECTED",RECONNECTING:"RECONNECTING",FAILED:"FAILED",DISCONNECTED:"DISCONNECTED"},we=S(1260),nr=S(5414),Jr=S(2107),_n=S(5071),Bi=8,oc=16,os=Array(32);function Gc(){for(var F=0;F<oc*2;F++)os[F]=Math.floor(Math.random()*16)+48,os[F]>=58&&(os[F]+=39);return String.fromCharCode.apply(null,os.slice(0,oc*2))}function wo(){for(var F=0;F<Bi*2;F++)os[F]=Math.floor(Math.random()*16)+48,os[F]>=58&&(os[F]+=39);return String.fromCharCode.apply(null,os.slice(0,Bi*2))}function ws(){var F=new Date().getTime(),o=F*1e6,u=o.toString().padEnd(19,"0");return Number(u)}function Kc(F){for(var o="0123456789abcdefghijklmnopqrstuvwxyz",u="",v=F;v>0;v--)u+=o[Math.floor(Math.random()*o.length)];return u}function cc(F,o){var u=Object.keys(F);if(Object.getOwnPropertySymbols){var v=Object.getOwnPropertySymbols(F);o&&(v=v.filter(function(s){return Object.getOwnPropertyDescriptor(F,s).enumerable})),u.push.apply(u,v)}return u}function Ro(F){for(var o=1;o<arguments.length;o++){var u=arguments[o]!=null?arguments[o]:{};o%2?cc(Object(u),!0).forEach(function(v){(0,q.A)(F,v,u[v])}):Object.getOwnPropertyDescriptors?Object.defineProperties(F,Object.getOwnPropertyDescriptors(u)):cc(Object(u)).forEach(function(v){Object.defineProperty(F,v,Object.getOwnPropertyDescriptor(u,v))})}return F}var Yc=(function(){function F(o){var u=this,v=o.roomId,s=o.peerId,l=o.sdkName,A=o.observabilityJwt,O=o.metaData,I=o.traces;(0,f.A)(this,F),this._traceId=Gc(),this._rootSpanId=wo(),this._observabilityJwt=A,this._tracesEnabled=I.enabled,this._tracesEndpoint=I.endPoint,this._sessionId;var Z=Kc(8);this._spans=[],this._traceJSON={resourceSpans:[{resource:{attributes:[{key:"service.name",value:{stringValue:"videosdk-otel"}},{key:"telemetry.sdk.language",value:{stringValue:"webjs"}},{key:"telemetry.sdk.name",value:{stringValue:"opentelemetry"}},{key:"telemetry.sdk.version",value:{stringValue:"1.14.0"}},{key:"sdk-version",value:{stringValue:"0.5.3"}}],droppedAttributesCount:0},scopeSpans:[{scope:{name:Z},spans:[]}]}]},this._tracesEnabled&&(this.addRootSpan(v,s,l,O),setInterval(function(){u.processQueue()},4e3))}return(0,U.A)(F,[{key:"setSessionId",value:(function(){var o=(0,n.A)(h().mark(function v(s){var l=this,A,O;return h().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:if(this._sessionId=s,A=this._spans.find(function(Z){return Z.spanId===l._rootSpanId}),A){I.next=1;break}return I.abrupt("return");case 1:O=A.attributes.find(function(Z){return Z.key==="sessionId"}),O?O.value.stringValue=s:A.attributes.push({key:"sessionId",value:{stringValue:s}});case 2:case"end":return I.stop()}},v,this)}));function u(v){return o.apply(this,arguments)}return u})()},{key:"addRootSpan",value:function(u,v,s,l){var A={traceId:this._traceId,spanId:this._rootSpanId,name:"room_".concat(u,"_peer_").concat(v,"_sdk_").concat(s),kind:1,startTimeUnixNano:ws(),endTimeUnixNano:ws(),attributes:[{key:"roomId",value:{stringValue:u}},{key:"peerId",value:{stringValue:v}},{key:"sdkName",value:{stringValue:s}},{key:"userId",value:{stringValue:l.userId}},{key:"email",value:{stringValue:l.email}}],droppedAttributesCount:0,events:[],droppedEventsCount:0,status:{code:0},links:[],droppedLinksCount:0};this._spans.push(A)}},{key:"addSpanToTrace",value:function(u){this._spans.push(u)}},{key:"trace",value:function(u){var v=u.spanName,s=u.attributes,l=s===void 0?{}:s,A=u.span,O=A===void 0?void 0:A;if(this._tracesEnabled){var I=wo(),Z=ws(),ee={traceId:this._traceId,spanId:I,parentSpanId:O||this._rootSpanId,name:v,kind:1,startTimeUnixNano:Z,droppedAttributesCount:0,events:[],droppedEventsCount:0,links:[],droppedLinksCount:0};return((0,J.A)(l)!=="object"||l===null||Array.isArray(l))&&(l={payload:l}),Object.keys(l).length>0&&(ee.attributes=Object.entries(l).map(function(te){var fe=(0,w.A)(te,2),Me=fe[0],ke=fe[1];return{key:Me,value:{stringValue:ke}}})),this.addSpanToTrace(ee),I}}},{key:"traceAutoComplete",value:function(u){var v=u.spanName,s=u.attributes,l=s===void 0?{}:s,A=u.status,O=A===void 0?1:A,I=u.span,Z=I===void 0?void 0:I,ee=u.message,te=ee===void 0?"SUCCESS":ee;if(this._tracesEnabled){var fe=wo(),Me=ws(),ke=ws(),$e={traceId:this._traceId,spanId:fe,parentSpanId:Z||this._rootSpanId,name:v,kind:1,startTimeUnixNano:Me,endTimeUnixNano:ke,droppedAttributesCount:0,events:[],droppedEventsCount:0,links:[],droppedLinksCount:0,status:{code:O,message:te}};((0,J.A)(l)!=="object"||l===null||Array.isArray(l))&&(l={payload:l}),Object.keys(l).length>0&&($e.attributes=Object.entries(l).map(function(ot){var Je=(0,w.A)(ot,2),qe=Je[0],Ct=Je[1];return{key:qe,value:{stringValue:Ct}}})),this.addSpanToTrace($e)}}},{key:"completeSpan",value:function(u){var v=this,s=u.span,l=u.status,A=u.message,O=u.attributes,I=O===void 0?{}:O;if(this._tracesEnabled){var Z=ws();this._spans=this._spans.map(function(ee){if(ee.spanId!==s)return ee;((0,J.A)(I)!=="object"||I===null||Array.isArray(I))&&(I={payload:I});var te=Object.entries(I).map(function(fe){var Me=(0,w.A)(fe,2),ke=Me[0],$e=Me[1];return{key:ke,value:{stringValue:$e}}});return v._sessionId&&te.push({key:"sessionId",value:{stringValue:v._sessionId}}),ee.attributes=ee.attributes?[].concat((0,C.A)(ee.attributes),(0,C.A)(te)):te,Ro(Ro({},ee),{},{status:{code:l,message:A},endTimeUnixNano:Z})})}}},{key:"processQueue",value:function(){var u=this;if(this._spans.length>0){var v;this._spans=this._spans.map(function(I){return I.endTimeUnixNano?I:Ro(Ro({},I),{},{endTimeUnixNano:ws()})});var s=this._spans.find(function(I){return I.spanId===u._rootSpanId}),l=s==null||(v=s.attributes)===null||v===void 0?void 0:v.some(function(I){return I.key==="sessionId"}),A=l?this._spans:this._spans.filter(function(I){return I.spanId!==u._rootSpanId});this._spans=l?[]:this._spans.filter(function(I){return I.spanId===u._rootSpanId}),this._traceJSON.resourceSpans[0].scopeSpans[0].spans=A;var O={method:"POST",headers:{Authorization:this._observabilityJwt,"Content-Type":"application/json"},body:JSON.stringify(this._traceJSON)};fetch(this._tracesEndpoint,O).then((function(){var I=(0,n.A)(h().mark(function Z(ee){return h().wrap(function(te){for(;;)switch(te.prev=te.next){case 0:return u._traceJSON.resourceSpans[0].scopeSpans[0].spans=[],te.next=1,ee.text();case 1:return te.abrupt("return",te.sent);case 2:case"end":return te.stop()}},Z)}));return function(Z){return I.apply(this,arguments)}})()).then(function(I){}).catch(function(I){u._spans=u._traceJSON.resourceSpans[0].scopeSpans[0].spans,console.error("There was a problem with the POST request:",I)})}}},{key:"getTraceId",value:function(){return this._traceId}},{key:"getCurrentSpanId",value:function(){return this._rootSpanId}}])})();function lc(F,o){var u=Object.keys(F);if(Object.getOwnPropertySymbols){var v=Object.getOwnPropertySymbols(F);o&&(v=v.filter(function(s){return Object.getOwnPropertyDescriptor(F,s).enumerable})),u.push.apply(u,v)}return u}function eo(F){for(var o=1;o<arguments.length;o++){var u=arguments[o]!=null?arguments[o]:{};o%2?lc(Object(u),!0).forEach(function(v){(0,q.A)(F,v,u[v])}):Object.getOwnPropertyDescriptors?Object.defineProperties(F,Object.getOwnPropertyDescriptors(u)):lc(Object(u)).forEach(function(v){Object.defineProperty(F,v,Object.getOwnPropertyDescriptor(u,v))})}return F}var uc=(function(){function F(o){var u=o.roomId,v=o.peerId,s=o.logs,l=o.observabilityJwt,A=o.deviceInfo,O=o.sessionId,I=o.debugMode;(0,f.A)(this,F);var Z=A.browserUserAgent,ee=A.deviceUserAgent,te=A.platform;this._peerId=v,this._roomId=u,this._logs=s,this._observabilityJwt=l,this._deviceInfo=A,this._sessionId=O,this._debugMode=I,this.browserOrDeviceInfo=Z?{browserName:Z.browser.name,browserVersion:Z.browser.version,osName:Z.os.name,osVersion:Z.os.version,platform:te}:ee?eo({platform:te},ee):null}return(0,U.A)(F,[{key:"pushLogs",value:(function(){var o=(0,n.A)(h().mark(function v(s){var l,A,O,I,Z,ee,te,fe,Me,ke,$e,ot;return h().wrap(function(Je){for(;;)switch(Je.prev=Je.next){case 0:if(l=s.logType,A=s.logText,O=s.attributes,I=s.dashboardLog,Z=I===void 0?!1:I,ee=s.traceId,te=ee===void 0?null:ee,fe=s.spanId,Me=fe===void 0?null:fe,ke=this._logs,$e=ke.enabled,ot=ke.endPoint,!$e){Je.next=2;break}return Je.next=1,fetch(ot,{method:"POST",headers:{Authorization:this._observabilityJwt,"Content-Type":"application/json"},body:JSON.stringify({logType:l,logText:A,attributes:eo(eo(eo(eo({},O),{},{roomId:this._roomId,peerId:this._peerId,SDK:"".concat(this._deviceInfo.sdkType,"-sdk"),SDK_VERSION:this._deviceInfo.sdkVersion,sessionId:this._sessionId},this.browserOrDeviceInfo),te&&{traceId:te}),Me&&{spanId:Me}),debugMode:this._debugMode,dashboardLog:Z})}).then(function(qe){return qe.json()}).catch(function(qe){return console.log("error",qe),{}});case 1:return Je.abrupt("return",Je.sent);case 2:return Je.abrupt("return",null);case 3:case"end":return Je.stop()}},v,this)}));function u(v){return o.apply(this,arguments)}return u})()}])})();S(4973);var dc=S(388),Rs=S(3954),Ts=S(5501),pc=S(3662);function hc(F){try{return Function.toString.call(F).indexOf("[native code]")!==-1}catch{return typeof F=="function"}}function Ho(){try{var F=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Ho=function(){return!!F})()}function Vo(F,o,u){if(Ho())return Reflect.construct.apply(null,arguments);var v=[null];v.push.apply(v,o);var s=new(F.bind.apply(F,v));return u&&(0,pc.A)(s,u.prototype),s}function to(F){var o=typeof Map=="function"?new Map:void 0;return to=function(v){if(v===null||!hc(v))return v;if(typeof v!="function")throw new TypeError("Super expression must either be null or a function");if(o!==void 0){if(o.has(v))return o.get(v);o.set(v,s)}function s(){return Vo(v,arguments,(0,Rs.A)(this).constructor)}return s.prototype=Object.create(v.prototype,{constructor:{value:s,enumerable:!1,writable:!0,configurable:!0}}),(0,pc.A)(s,v)},to(F)}function Fo(F,o,u){return o=(0,Rs.A)(o),(0,dc.A)(F,Cs()?Reflect.construct(o,u||[],(0,Rs.A)(F).constructor):o.apply(F,u))}function Cs(){try{var F=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Cs=function(){return!!F})()}var Qc=(function(F){function o(u,v){var s;return(0,f.A)(this,o),s=Fo(this,o,[v||"an error has occured"]),(0,q.A)(s,"code",void 0),s.name="VideoSdkError",s.code=u,s}return(0,Ts.A)(o,F),(0,U.A)(o)})(to(Error)),fc;(function(F){F[F.InvalidKey=0]="InvalidKey",F[F.MissingKey=1]="MissingKey",F[F.InternalError=2]="InternalError"})(fc||(fc={}));var Xc=(function(F){function o(u){var v;return(0,f.A)(this,o),v=Fo(this,o,[21,u??"device is unsupported"]),v.name="DeviceUnsupportedError",v}return(0,Ts.A)(o,F),(0,U.A)(o)})(Qc),fi=S(1806),Wn=S(6746),cs=S(8278);function To(F,o){return F?o=="audio"?"shareAudio":"share":o}function Bl(F,o){var u=typeof Symbol<"u"&&F[Symbol.iterator]||F["@@iterator"];if(!u){if(Array.isArray(F)||(u=mc(F))||o){u&&(F=u);var v=0,s=function(){};return{s,n:function(){return v>=F.length?{done:!0}:{done:!1,value:F[v++]}},e:function(Z){throw Z},f:s}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var l,A=!0,O=!1;return{s:function(){u=u.call(F)},n:function(){var Z=u.next();return A=Z.done,Z},e:function(Z){O=!0,l=Z},f:function(){try{A||u.return==null||u.return()}finally{if(O)throw l}}}}function mc(F,o){if(F){if(typeof F=="string")return Jc(F,o);var u={}.toString.call(F).slice(8,-1);return u==="Object"&&F.constructor&&(u=F.constructor.name),u==="Map"||u==="Set"?Array.from(F):u==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(u)?Jc(F,o):void 0}}function Jc(F,o){(o==null||o>F.length)&&(o=F.length);for(var u=0,v=Array(o);u<o;u++)v[u]=F[u];return v}function ea(F,o,u){return o=(0,Rs.A)(o),(0,dc.A)(F,vc()?Reflect.construct(o,[],(0,Rs.A)(F).constructor):o.apply(F,u))}function vc(){try{var F=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(vc=function(){return!!F})()}var Zc=(function(F){function o(u){var v;return(0,f.A)(this,o),v=ea(this,o),v.onWorkerMessage=function(s){var l,A=s.data,O=A.kind,I=A.data;switch(O){case"error":console.error(I.error.message),v.emit(Wn.KS.EncryptionError,I.error);break;case"initAck":I.enabled&&v.keyProvider.getKeys().forEach(function(ee){v.postKey(ee)});break;case"enable":if(I.enabled&&v.keyProvider.getKeys().forEach(function(ee){v.postKey(ee)}),v.encryptionEnabled!==I.enabled&&I.participantIdentity===v.room._peerId)v.emit(Wn.KS.ParticipantEncryptionStatusChanged,I.enabled,v.room.localParticipant),v.encryptionEnabled=I.enabled;else if(I.participantIdentity){var Z=(l=v.room)===null||l===void 0?void 0:l.getParticipantByIdentity(I.participantIdentity);if(!Z)throw TypeError("couldn't set encryption status, participant not found".concat(I.participantIdentity));v.emit(Wn.KS.ParticipantEncryptionStatusChanged,I.enabled,Z)}break;case"ratchetKey":v.keyProvider.emit(Wn.fo.KeyRatcheted,I.material,I.keyIndex);break;case"e2eeStateChange":v.emit(Wn.KS.E2EEStateChange,I);break;default:console.log("unknown message kind",s);break}},v.onWorkerError=function(s){var l;console.error("Worker encountered an error:",s),console.error("Error message:",s.message),console.error("Error filename:",s.filename),console.error("Error line number:",s.lineno),console.error("Error stack:",(l=s.error)===null||l===void 0?void 0:l.stack)},v.keyProvider=u.keyProvider,v.worker=u.worker,v.encryptionEnabled=!1,v}return(0,Ts.A)(o,F),(0,U.A)(o,[{key:"setup",value:function(v){if(!(0,cs.Ag)())throw new Xc("tried to setup end-to-end encryption on an unsupported browser");if(console.info("setting up e2ee"),v!==this.room){this.room=v,this.setupEventListeners(v,this.keyProvider),this.handleE2EEManagerEvents();var s={kind:"init",data:{keyProviderOptions:this.keyProvider.getOptions()}};console.log("msg",s),this.worker&&(console.info("initializing worker",{worker:this.worker}),this.worker.onmessage=this.onWorkerMessage,this.worker.onerror=this.onWorkerError,this.worker.postMessage(s))}}},{key:"setParticipantCryptorEnabled",value:function(v,s){console.debug("set e2ee to ".concat(v," for participant ").concat(s)),this.postEnable(v,s)}},{key:"setSifTrailer",value:function(v){!v||v.length===0?console.warn("ignoring server sent trailer as it's empty"):this.postSifTrailer(v)}},{key:"setupEventListeners",value:function(v,s){var l=this;s.on(Wn.fo.SetKey,function(A){console.log("### keyInfo",A),l.postKey(A)}).on(Wn.fo.RatchetRequest,function(A,O){return l.postRatchetRequest(A,O)})}},{key:"postRatchetRequest",value:function(v,s){if(!this.worker)throw Error("could not ratchet key, worker is missing");var l={kind:"ratchetRequest",data:{participantIdentity:v,keyIndex:s}};this.worker.postMessage(l)}},{key:"postKey",value:function(v){var s=v.key,l=v.participantIdentity,A=v.keyIndex;if(!this.worker)throw Error("could not set key, worker is missing");var O={kind:"setKey",data:{participantIdentity:l,isPublisher:l===this.room._peerId,key:s,keyIndex:A}};this.worker.postMessage(O)}},{key:"postEnable",value:function(v,s){if(this.worker){var l={kind:"enable",data:{enabled:v,participantIdentity:s}};this.worker.postMessage(l)}else throw new ReferenceError("failed to enable e2ee, worker is not ready")}},{key:"postRTPMap",value:function(v){var s;if(!this.worker)throw TypeError("could not post rtp map, worker is missing");if(!(!((s=this.room)===null||s===void 0)&&s._peerId))throw TypeError("could not post rtp map, local participant identity is missing");var l={kind:"setRTPMap",data:{map:v,participantIdentity:this.room._peerId}};this.worker.postMessage(l)}},{key:"postSifTrailer",value:function(v){if(!this.worker)throw Error("could not post SIF trailer, worker is missing");var s={kind:"setSifTrailer",data:{trailer:v}};this.worker.postMessage(s)}},{key:"setupE2EEReceiver",value:function(v,s){var l;this.handleReceiver(v,v.rtpReceiver,v.track.id,s,this.extractCodec(v.rtpParameters.codecs),To((l=v.appData)===null||l===void 0?void 0:l.share,v.kind))}},{key:"setupE2EESender",value:function(v){var s;if(!v){console.error("Producer is required to setup E2EE sender");return}this.handleSender(v.rtpSender,v.track.id,this.extractCodec(v.rtpParameters.codecs),To((s=v.appData)===null||s===void 0?void 0:s.share,v.kind),this.room._peerId)}},{key:"handleReceiver",value:(function(){var u=(0,n.A)(h().mark(function s(l,A,O,I,Z,ee){var te,fe,Me,ke,$e,ot;return h().wrap(function(Je){for(;;)switch(Je.prev=Je.next){case 0:if(this.worker){Je.next=1;break}return Je.abrupt("return");case 1:if(!(0,cs.Wm)()){Je.next=2;break}te={kind:"decode",participantIdentity:I,trackId:l.track.id,codec:Z},A.transform=new RTCRtpScriptTransform(this.worker,te),Je.next=5;break;case 2:if(!(fi.$Q in A&&Z)){Je.next=3;break}return Me={kind:"updateCodec",data:{trackId:O,codec:Z,participantIdentity:I}},this.worker.postMessage(Me),Je.abrupt("return");case 3:if(ke=A.writableStream,$e=A.readableStream,!(!ke||!$e)){Je.next=4;break}return console.error("no writable or readable stream"),Je.abrupt("return");case 4:ot={kind:"decode",data:{readableStream:$e,writableStream:ke,trackId:O,codec:Z,participantIdentity:I,mediaKind:ee,peerId:(fe=l.appData)===null||fe===void 0?void 0:fe.peerId}},this.worker.postMessage(ot,[$e,ke]);case 5:A[fi.$Q]=!0;case 6:case"end":return Je.stop()}},s,this)}));function v(s,l,A,O,I,Z){return u.apply(this,arguments)}return v})()},{key:"handleSender",value:function(v,s,l,A,O){var I;if(fi.$Q in v||!this.worker){console.error("### sender already set up");return}if(!(!((I=this.room)===null||I===void 0)&&I._peerId)||this.room._peerId==="")throw TypeError("local identity needs to be known in order to set up encrypted sender");if((0,cs.Wm)()){console.info("### initialize script transform");var Z={kind:"encode",participantIdentity:this.room._peerId,trackId:s,codec:l,mediaKind:A,peerId:O};v.transform=new RTCRtpScriptTransform(this.worker,Z)}else try{var ee=v.senderStreams;if(ee){var te={kind:"encode",data:{readableStream:ee.readable,writableStream:ee.writable,codec:l,trackId:s,participantIdentity:this.room._peerId,mediaKind:A,peerId:O}};this.worker.postMessage(te,[ee.readable,ee.writable])}else console.error("Error no sender streams found")}catch(fe){console.log("Error in handle sender ",fe)}v[fi.$Q]=!0}},{key:"handleE2EEManagerEvents",value:function(){var v=this;this.on("NEW_CONSUMER",function(s){var l=s.consumer,A=s.peerId;console.log("NEW_CONSUMER",l),v.setupE2EEReceiver(l,A)}),this.on("NEW_PRODUCER",function(s){v.setupE2EESender(s)})}},{key:"extractCodec",value:function(v){var s="",l=Bl(v),A;try{for(l.s();!(A=l.n()).done;){var O=A.value,I=O.mimeType.split("/")[1].toLowerCase();if(this.kind==="audio"){if(fi.Ts.includes(I)){O=I;break}}else if(fi.ue.includes(I)){O=I;break}}}catch(Z){l.e(Z)}finally{l.f()}return s}}])})(So.EventEmitter),fl="https://cdn.videosdk.live/e2ee/0.0.1/bundle.js";function ml(){return gc.apply(this,arguments)}function gc(){return gc=(0,n.A)(h().mark(function F(){var o,u,v,s;return h().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=1,fetch(fl);case 1:if(o=l.sent,o.ok){l.next=2;break}throw new Error("Failed to load worker script: ".concat(o.statusText));case 2:return l.next=3,o.text();case 3:return u=l.sent,v=new Blob([u],{type:"application/javascript"}),s=URL.createObjectURL(v),l.abrupt("return",new Worker(s));case 4:case"end":return l.stop()}},F)})),gc.apply(this,arguments)}var el=S(9633),Ai=S(3115),Vs=S(2067),vl=S(6565),jl=["bitrates"];function Ya(F,o){var u=typeof Symbol<"u"&&F[Symbol.iterator]||F["@@iterator"];if(!u){if(Array.isArray(F)||(u=ro(F))||o){u&&(F=u);var v=0,s=function(){};return{s,n:function(){return v>=F.length?{done:!0}:{done:!1,value:F[v++]}},e:function(Z){throw Z},f:s}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var l,A=!0,O=!1;return{s:function(){u=u.call(F)},n:function(){var Z=u.next();return A=Z.done,Z},e:function(Z){O=!0,l=Z},f:function(){try{A||u.return==null||u.return()}finally{if(O)throw l}}}}function ro(F,o){if(F){if(typeof F=="string")return $o(F,o);var u={}.toString.call(F).slice(8,-1);return u==="Object"&&F.constructor&&(u=F.constructor.name),u==="Map"||u==="Set"?Array.from(F):u==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(u)?$o(F,o):void 0}}function $o(F,o){(o==null||o>F.length)&&(o=F.length);for(var u=0,v=Array(o);u<o;u++)v[u]=F[u];return v}function yc(F,o){var u=Object.keys(F);if(Object.getOwnPropertySymbols){var v=Object.getOwnPropertySymbols(F);o&&(v=v.filter(function(s){return Object.getOwnPropertyDescriptor(F,s).enumerable})),u.push.apply(u,v)}return u}function Zr(F){for(var o=1;o<arguments.length;o++){var u=arguments[o]!=null?arguments[o]:{};o%2?yc(Object(u),!0).forEach(function(v){(0,q.A)(F,v,u[v])}):Object.getOwnPropertyDescriptors?Object.defineProperties(F,Object.getOwnPropertyDescriptors(u)):yc(Object(u)).forEach(function(v){Object.defineProperty(F,v,Object.getOwnPropertyDescriptor(u,v))})}return F}function gl(F,o){Co(F,o),o.add(F)}function Co(F,o){if(o.has(F))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Ul(F,o,u){if(typeof F=="function"?F===o:F.has(o))return arguments.length<3?o:u;throw new TypeError("Private element is not present on this object")}var As={sd:{low:{s:0,t:2},med:{s:0,t:2},high:{s:1,t:2},s0t0:{s:0,t:0},s0t1:{s:0,t:1},s0t2:{s:0,t:2},s1t0:{s:1,t:0},s1t1:{s:1,t:1},s1t2:{s:1,t:2},s2t0:{s:2,t:0},s2t1:{s:2,t:1},s2t2:{s:2,t:2}},hd:{low:{s:0,t:2},med:{s:1,t:2},high:{s:2,t:2},s0t0:{s:0,t:0},s0t1:{s:0,t:1},s0t2:{s:0,t:2},s1t0:{s:1,t:0},s1t1:{s:1,t:1},s1t2:{s:1,t:2},s2t0:{s:2,t:0},s2t1:{s:2,t:1},s2t2:{s:2,t:2}}},qo={qvga:{width:{ideal:320},height:{ideal:240}},vga:{width:{ideal:640},height:{ideal:480}},sd:{width:{ideal:1280},height:{ideal:720},frameRate:{ideal:24}},hd:{width:{ideal:1280},height:{ideal:720},frameRate:{ideal:24}}},Wo={sd:[{scaleResolutionDownBy:6},{scaleResolutionDownBy:4},{scaleResolutionDownBy:2}],hd:[{scaleResolutionDownBy:4},{scaleResolutionDownBy:2},{scaleResolutionDownBy:1}]},tl=[{scalabilityMode:"S3T3_KEY"}],Go=[{dtx:!0,maxFramerate:30}],Te=new Ca("RoomClient"),Fe,Ki=new WeakSet,_c=(function(){function F(o){var u=o.roomId,v=o.peerId,s=o.secret,l=o.displayName,A=o.device,O=o.handlerName,I=o.useSimulcast,Z=o.forceTcp,ee=o.mode,te=o.forceH264,fe=o.forceVP9,Me=o.svc;o.datachannel;var ke=o.externalVideo,$e=o.micEnabled,ot=o.webcamEnabled,Je=o.maxResolution,qe=o.useSpartialLayerAnalytics,Ct=o._deviceInfo,gt=o.customCameraVideoTrack,Et=o.customMicrophoneAudioTrack,it=o.autoConsume,Pt=o.preferredProtocol,pt=o.signalingBaseUrl,Ge=o.metaData,At=o.translationLanguage,cr=o.speakingLanguage,qt=o.defaultCameraIndex,Jt=o.debugMode,Gt=o.keyProvider,ht=o.defaultCamera;(0,f.A)(this,F),gl(this,Ki),(0,q.A)(this,"e2eeManager",null),Te.debug('constructor() [roomId:"%s", peerId:"%s", displayName:"%s", device:%s]',u,v,l,A.flag),this.useSpartialLayerAnalytics=qe||!1,this._deviceInfo=Ct,this._eventEmitter=new So.EventEmitter,this._closed=!1,this._displayName=l,this._device=A,this._forceTcp=Z,this._preferredProtocol=Pt,this._defaultCamera=ht;var Zt,mr;switch(ee){case Jr.nI.CONFERENCE:case Jr.nI.SEND_AND_RECV:Zt=!0,mr=!0;break;case Jr.nI.RECV_ONLY:Zt=!1,mr=!0;break;default:Zt=!1,mr=!1}this._mode=ee,this._produce=Zt,this._consume=mr,this._forceH264=!!te,this._forceVP9=!!fe,this._micEnabled=!!$e,this._webcamEnabled=!!ot,this._externalVideo=null,this._externalVideoStream=null,this._nextDataChannelTestNumber=0,ke&&(this._externalVideo=document.createElement("video"),this._externalVideo.controls=!0,this._externalVideo.loop=!0,this._externalVideo.setAttribute("playsinline",""),this._externalVideo.src=ke,this._externalVideo.play().catch(function(bt){return Te.warn("externalVideo.play() failed:%o",bt)})),this._handlerName=O,this._useSimulcast=I,this._socketUrl="",this._secret=s,this._peerId=v,this._roomId=u,this._baseUrl="",this._webSocket=null,this._mediasoupDevice=null,this._sendTransport=null,this._recvTransport=null,this._micProducer=null,this._webcamProducer=null,this._shareProducer=null,this._shareAudioProducer=null,this._reliableDataProducer=null,this._unreliableDataProducer=null,this._consumers=new Map,this._dataConsumers=new Map,this._mics=new Map,this._mic={device:null},this._webcams=new Map,this._webcam={device:null,resolution:Je||"hd"},this._pinnedParticipants=new Map,Me&&(tl[0].scalabilityMode="".concat(Me,"_KEY")),this.customCameraVideoTrack=gt,this.customMicrophoneAudioTrack=Et,this._autoConsume=it,this._iceServers=[];var rr={refreshEvery:1e3,startAfter:1e3,verbose:!1};if(this._metrics=new nr.VideoSDKMetrics(rr),this._stats={},this._latestStats={},this._isWebsocketAlive=!1,this._pingWebsocketInterval=null,this._pingInternetInterval=null,this._pingWebsocketFailedCounter=0,this._pongInternetCounter=0,this._transportState="",this._openTelemetry=null,this._videosdkLogs=null,this._signalingBaseUrl=pt||"api.videosdk.live",this._metaData=Zr(Zr(Zr({},Ge??{}),At&&{translationLanguage:At}),cr&&{speakingLanguage:cr}),this._defaultCameraIndex=qt,this._translationLanguage=At,this._debugMode=!!Jt,this._meetingConnectionState=null,this._peerSpans=new Map,this._sendTransportInternal=null,Gt)if(Gt instanceof el.l)Ul(Ki,this,ao).call(this,Gt);else throw new Error("keyProvider should be an instance of ExternalE2EEKeyProvider")}return(0,U.A)(F,[{key:"on",value:function(u,v){this._eventEmitter.on(u,v)}},{key:"softClose",value:function(){var u;(u=this._videosdkLogs)===null||u===void 0||u.pushLogs({logText:"In softClose() Start ",logType:"INFO"});try{var v,s,l;this._eventEmitter.emit("REMOVE_PARTICIPANTS_FOR_SWITCH_MEETING"),(v=this._videosdkLogs)===null||v===void 0||v.pushLogs({logText:"In softClose() Consumer Cleanup ",logType:"INFO"});var A=Ya(this._consumers.values()),O;try{for(A.s();!(O=A.n()).done;){var I=O.value;I.close()}}catch(ee){A.e(ee)}finally{A.f()}(s=this._videosdkLogs)===null||s===void 0||s.pushLogs({logText:"In softClose(), Closed ".concat(this._consumers.size," media streams successfully"),logType:"INFO"}),(l=this._videosdkLogs)===null||l===void 0||l.pushLogs({logText:"In softClose(), Soft close completed successfully",logType:"INFO"})}catch(ee){var Z;(Z=this._videosdkLogs)===null||Z===void 0||Z.pushLogs({logText:"In softClose(), Soft close failed: ".concat(ee.message),logType:"ERROR"}),console.error(ee)}}},{key:"close",value:(function(){var o=(0,n.A)(h().mark(function v(s){var l,A,O,I,Z,ee,te,fe,Me,ke,$e,ot,Je,qe,Ct;return h().wrap(function(gt){for(;;)switch(gt.prev=gt.next){case 0:if(Z=s.sendLeft,ee=Z===void 0?!0:Z,te=s.manualCalled,fe=te===void 0?!1:te,Me=s.code,ke=s.meetingLeftReason,ee&&($e=(ot=this._openTelemetry)===null||ot===void 0?void 0:ot.trace({spanName:fe?"Leaving the meeting":"Closing the meeting"}),(Je=this._videosdkLogs)===null||Je===void 0||Je.pushLogs({logText:"Meeting is in CLOSING State",logType:"INFO"})),!fe){gt.next=2;break}return(qe=this._videosdkLogs)===null||qe===void 0||qe.pushLogs({logText:"Participant manually called the leave() method to exit the meeting",logType:"INFO"}),gt.next=1,this._socketRequest("definePeerLeftReason",{leaveReason:"MANUAL_LEAVE_CALLED"});case 1:ke=we.t.MANUAL_LEAVE_CALLED.message,Me=we.t.MANUAL_LEAVE_CALLED.code;case 2:if(!this._closed){gt.next=3;break}return gt.abrupt("return");case 3:this._closed=!0,this._pingWebsocketInterval&&clearInterval(this._pingWebsocketInterval),this._pingWebsocketInterval=null,this._pingInternetInterval&&clearInterval(this._pingInternetInterval),this._pingInternetInterval=null,this._sendTransportInternal&&clearInterval(this._sendTransportInternal),this._sendTransportInternal=null,this._webSocket.close(),this._metrics.running&&this._metrics.stopAllProbes(),Te.debug("close()"),Ct=(l=this._openTelemetry)===null||l===void 0?void 0:l.trace({spanName:"Closing Media Transports",span:$e}),this._sendTransport&&this._sendTransport.close(),this._recvTransport&&this._recvTransport.close(),(A=this._openTelemetry)===null||A===void 0||A.completeSpan({span:Ct,status:1,message:"Media Transports closed successfully"}),Fe.dispatch(Qs("closed")),ee&&this.emitMeetingStateChange(se.DISCONNECTED),(O=this._videosdkLogs)===null||O===void 0||O.pushLogs({logText:"Meeting is in CLOSED State",logType:"INFO"}),(I=this._openTelemetry)===null||I===void 0||I.traceAutoComplete({spanName:"Emitting MEETING_LEFT Event with meeting left reason : ".concat(ke,"(").concat(Me,")"),status:1,span:$e}),ee&&this._eventEmitter.emit("MEETING_LEFT",{message:ke||we.t.UNKNOWN.message,code:Me||we.t.UNKNOWN.code}),this._openTelemetry.completeSpan({span:$e,status:1,message:"".concat(fe?"Meeting left successfully":"Meeting closed successfully")});case 4:case"end":return gt.stop()}},v,this)}));function u(v){return o.apply(this,arguments)}return u})()},{key:"join",value:(function(){var o=(0,n.A)(h().mark(function v(){var s=this,l,A,O,I,Z,ee,te,fe,Me,ke,$e,ot,Je,qe,Ct,gt,Et,it,Pt,pt,Ge,At,cr,qt,Jt,Gt,ht,Zt,mr;return h().wrap(function(rr){for(;;)switch(rr.prev=rr.next){case 0:return rr.prev=0,rr.next=1,gs({roomId:this._roomId,secret:this._secret,signalingBaseUrl:this._signalingBaseUrl});case 1:if(I=rr.sent,Z=I.baseUrl,ee=I.iceServers,te=I.logs,fe=I.observabilityJwt,Me=I.traces,ke=I.metaData,$e=I.signalingUrl,ot=I.socketPath,Je=I.socketUrl,this._baseUrl=Z,this._socketUrl="wss://".concat(Je||this._baseUrl,"/?roomId=").concat(this._roomId,"&peerId=").concat(this._peerId,"&secret=").concat(this._secret,"&mode=").concat(this._mode,"&lib=socket"),this._iceServers=ee,this._tracesEnabled=Me.enabled,this._openTelemetry=new Yc((0,q.A)({roomId:this._roomId,peerId:this._peerId,sdkName:"".concat(this._deviceInfo.sdkType,"-sdk"),traces:Me,logs:te,observabilityJwt:fe,metaData:ke},"traces",Me)),this._videosdkLogs=new uc({roomId:this._roomId,peerId:this._peerId,sdkName:"".concat(this._deviceInfo.sdkType,"-sdk"),logs:te,observabilityJwt:fe,deviceInfo:this._deviceInfo,sessionId:this._sessionId,debugMode:this._debugMode}),this._deviceInfo.sdkType==="react-native"){rr.next=6;break}if(rr.prev=2,qe=[],this._micEnabled&&this._webcamEnabled?qe=[Ai.VideoSDK.Constants.permission.AUDIO_AND_VIDEO]:this._micEnabled?qe=[Ai.VideoSDK.Constants.permission.AUDIO]:this._webcamEnabled&&(qe=[Ai.VideoSDK.Constants.permission.VIDEO]),!(qe.length>0)){rr.next=4;break}return rr.next=3,Ai.VideoSDK.requestPermission(qe);case 3:Ct=rr.sent,gt=Ya(Ct);try{for(gt.s();!(Et=gt.n()).done;)Ge=(0,w.A)(Et.value,2),At=Ge[0],cr=Ge[1],qt=At===Ai.VideoSDK.Constants.permission.AUDIO?"Audio":At===Ai.VideoSDK.Constants.permission.VIDEO?"Video":"Audio and Video",Jt=(it=this._openTelemetry)===null||it===void 0?void 0:it.trace({spanName:"Checking ".concat(qt," permission"),span:Jt}),(Pt=this._openTelemetry)===null||Pt===void 0||Pt.traceAutoComplete({spanName:cr?"".concat(qt," permission granted."):"".concat(qt," permission denied!"),span:Jt,status:cr?1:2,attributes:{permissionType:qt,granted:cr}}),(pt=this._openTelemetry)===null||pt===void 0||pt.completeSpan({span:Jt})}catch(bt){gt.e(bt)}finally{gt.f()}case 4:rr.next=6;break;case 5:rr.prev=5,Zt=rr.catch(2),(Gt=this._openTelemetry)===null||Gt===void 0||Gt.completeSpan({message:"Permission check failed.",span:permissionSpan,status:2,attributes:{error:Zt.message}});case 6:this._joinSpan=(l=this._openTelemetry)===null||l===void 0?void 0:l.trace({spanName:"Joining the meeting",attributes:{DeviceInfo:JSON.stringify(this._deviceInfo),mode:this._mode,displayName:this._displayName,multiStream:this._useSimulcast,micEnabled:this._micEnabled,webcamEnabled:this._webcamEnabled,CustomVideoTrack:!!this.customCameraVideoTrack,CustomMicTrack:!!this.customMicrophoneAudioTrack,signalingUrl:$e||"signalingUrl not specified"}}),this._requestEntrySpan=null,this._webSocket=Br(this._socketUrl,{transports:["websocket"],reconnectionAttempts:10,reconnectionDelay:5e3,reconnection:!0,path:"".concat(ot??"","/socket.io")}),this.emitMeetingStateChange(se.CONNECTING),Fe.dispatch(Qs("connecting")),(A=this._openTelemetry)===null||A===void 0||A.traceAutoComplete({spanName:"Meeting is in CONNECTING State",span:this._joinSpan,status:1}),(O=this._videosdkLogs)===null||O===void 0||O.pushLogs({logText:"Meeting is in CONNECTING State",logType:"INFO"}),this._webSocket.on("connect",function(){}),this._webSocket.on("connectionSuccess",function(){var bt,Ze;s._isWebsocketAlive=!0,s._closed=!1,(s._mode===Jr.nI.RECV_ONLY||s._mode===Jr.nI.SIGNALLING_ONLY)&&s.emitMeetingStateChange(se.CONNECTED),(bt=s._openTelemetry)===null||bt===void 0||bt.traceAutoComplete({spanName:"Meeting is in CONNECTED State",span:s._joinSpan,status:1}),(Ze=s._videosdkLogs)===null||Ze===void 0||Ze.pushLogs({logText:"Meeting is in CONNECTED State",logType:"INFO"}),s.requestEntry()}),this._webSocket.on("disconnect",function(bt){if(bt==="transport close"||bt==="transport error"){if(s.customMicrophoneAudioTrack){var Ze;(Ze=s.customMicrophoneAudioTrack)===null||Ze===void 0||Ze.getTracks().forEach(function(Kt){Kt.stop()}),s.customMicrophoneAudioTrack=null}if(s.customCameraVideoTrack){var Ie;(Ie=s.customCameraVideoTrack)===null||Ie===void 0||Ie.getTracks().forEach(function(Kt){Kt.stop()}),s.customCameraVideoTrack=null}if(s._sendTransport){var Le;(Le=s._sendTransport)===null||Le===void 0||Le.close(),s._sendTransport=null}if(s._recvTransport){var Lt;(Lt=s._recvTransport)===null||Lt===void 0||Lt.close(),s._recvTransport=null}}}),this._webSocket.io.on("reconnect_failed",function(){s._closed||s.close({sendLeft:!0,meetingLeftReason:we.t.WEBSOCKET_CONNECTION_ATTEMPTS_EXHAUSTED.message,code:we.t.WEBSOCKET_CONNECTION_ATTEMPTS_EXHAUSTED.code})}),this._webSocket.on("connect_error",function(bt){if(s._webSocket.active&&s._webSocket.io._reconnecting){var Ze,Ie,Le,Lt;if((Ze=s._openTelemetry)===null||Ze===void 0||Ze.traceAutoComplete({spanName:"Reconnecting to the meeting",span:s._joinSpan,status:1}),(Ie=s._videosdkLogs)===null||Ie===void 0||Ie.pushLogs({logText:"Meeting is in RECONNECTING State",logType:"INFO",attributes:{error:bt.message}}),Fe.dispatch(Er({type:"error",text:"WebSocket Reconnecting"})),s.emitMeetingStateChange(se.RECONNECTING),s._sendTransport){var Kt;(Kt=s._sendTransport)===null||Kt===void 0||Kt.close(),s._sendTransport=null}if(s._recvTransport){var Yt;(Yt=s._recvTransport)===null||Yt===void 0||Yt.close(),s._recvTransport=null}(Le=s.customMicrophoneAudioTrack)===null||Le===void 0||Le.getTracks().forEach(function(vr){vr.stop()}),s.customMicrophoneAudioTrack=null,(Lt=s.customCameraVideoTrack)===null||Lt===void 0||Lt.getTracks().forEach(function(vr){vr.stop()}),s.customCameraVideoTrack=null}else console.log("Error while trying to reconnect",bt.message)}),this._webSocket.on("close",function(bt){var Ze=bt.reason?bt.reason:we.t.UNKNOWN;s._closed||s.close({sendLeft:!0,code:Ze.code,meetingLeftReason:Ze.message})}),this._webSocket.on("newConsumer",(function(){var bt=(0,n.A)(h().mark(function Ze(Ie,Le){var Lt,Kt,Yt,vr,kr,ta,Yr,Wt,Cr,er,Ur,Hr,Fa,fa,on,Qa,ma,la,xt,Mr,Vr,ra,va,na,ia,en,fn;return h().wrap(function(Aa){for(;;)switch(Aa.prev=Aa.next){case 0:if(Yt=Ie.peerId,vr=Ie.producerId,kr=Ie.id,ta=Ie.kind,Yr=Ie.rtpParameters,Wt=Ie.type,Cr=Ie.appData,er=Ie.producerPaused,Ur=s._peerSpans.get(Yt),Hr=(Lt=s._openTelemetry)===null||Lt===void 0?void 0:Lt.trace({spanName:"Receiving participant's ".concat(ta," stream"),span:Ur,attributes:{"peer.id":Yt,"Stream kind":ta}}),s._consume){Aa.next=1;break}return Le({errorCode:403,message:"I do not want to consume",method:"newConsumer"}),(Fa=s._openTelemetry)===null||Fa===void 0||Fa.completeSpan({span:Hr,status:2,message:"I do not want to consume"}),Aa.abrupt("return");case 1:return fa=(Kt=s._openTelemetry)===null||Kt===void 0?void 0:Kt.trace({spanName:"Setting up incoming media stream",span:Hr}),Aa.prev=2,Aa.next=3,s._recvTransport.consume({id:kr,producerId:vr,kind:ta,rtpParameters:Yr,appData:Zr(Zr({},Cr),{},{peerId:Yt}),onRtpReceiver:function(Sa){if(s.e2eeManager){var ua=Sa.writableStream,vn=Sa.readableStream;if(!ua||!vn){var Pa=Sa.createEncodedStreams();Sa.writableStream=Pa.writable,ua=Pa.writable,Sa.readableStream=Pa.readable,vn=Pa.readable}}}});case 3:xt=Aa.sent,Mr=jr.s$(xt.rtpParameters.encodings[0].scalabilityMode),Vr=Mr.spatialLayers,ra=Mr.temporalLayers,xt.spatialLayers=Vr,xt.temporalLayers=ra,xt.currentSpatialLayers=Vr-1,xt.currentTemporalLayers=ra-1,s._consumers.set(xt.id,xt),xt.on("transportclose",function(){s._consumers.delete(xt.id);var tn=Ss(xt.id,Yt);Fe.dispatch(tn),s._eventEmitter.emit(tn.type,tn.payload)}),(on=s._openTelemetry)===null||on===void 0||on.completeSpan({span:fa,status:1,message:"Participant's media stream received successfully."}),fa=(Qa=s._openTelemetry)===null||Qa===void 0?void 0:Qa.trace({spanName:"Sending Stream Enabled Event",span:Hr}),va=xi({id:xt.id,type:Wt,locallyPaused:!1,remotelyPaused:er,rtpParameters:xt.rtpParameters,spatialLayers:Vr,temporalLayers:ra,currentSpatialLayer:Vr-1,currentTemporalLayer:ra-1,preferredSpatialLayer:Vr-1,preferredTemporalLayer:ra-1,priority:1,codec:xt.rtpParameters.codecs[0].mimeType.split("/")[1],track:xt.track,appData:Cr,instance:xt,rtpReceiver:xt._rtpReceiver},Yt),Fe.dispatch(va),s._eventEmitter.emit(va.type,va.payload),Le(),xt.kind==="video"&&Fe.getState().me.audioOnly&&s._pauseConsumer(xt),(ma=s._openTelemetry)===null||ma===void 0||ma.completeSpan({span:fa,status:1,message:"Event Sent Successfully"}),(la=s._openTelemetry)===null||la===void 0||la.completeSpan({span:Hr,status:1,message:"New media stream received successfully",attributes:{}}),s.e2eeManager&&s.e2eeManager.emit("NEW_CONSUMER",{consumer:xt,peerId:s._peerId}),Aa.next=5;break;case 4:throw Aa.prev=4,fn=Aa.catch(2),(na=s._openTelemetry)===null||na===void 0||na.completeSpan({span:fa,status:2,message:"Unable to receive participant's media stream: ".concat(fn)}),(ia=s._openTelemetry)===null||ia===void 0||ia.completeSpan({span:Hr,status:2,message:"Unable to receive participant's media stream: ".concat(fn)}),Fe.dispatch(Er({type:"error",text:"Error receiving participant's media stream: ".concat(fn)})),(en=s._videosdkLogs)===null||en===void 0||en.pushLogs({logText:"Error receiving participant's media stream",logType:"ERROR",attributes:{error:fn.message}}),fn;case 5:case"end":return Aa.stop()}},Ze,null,[[2,4]])}));return function(Ze,Ie){return bt.apply(this,arguments)}})()),this._webSocket.on("newDataConsumer",(function(){var bt=(0,n.A)(h().mark(function Ze(Ie,Le){var Lt,Kt,Yt,vr,kr,ta,Yr,Wt,Cr;return h().wrap(function(er){for(;;)switch(er.prev=er.next){case 0:if(s._consume){er.next=1;break}return Le({errorCode:403,message:"I do not want to data consume",method:"newConsumer"}),er.abrupt("return");case 1:return Lt=Ie.peerId,Kt=Ie.dataProducerId,Yt=Ie.id,vr=Ie.sctpStreamParameters,kr=Ie.label,ta=Ie.protocol,Yr=Ie.appData,er.prev=2,er.next=3,s._recvTransport.consumeData({id:Yt,dataProducerId:Kt,sctpStreamParameters:vr,label:kr,protocol:ta,appData:Zr(Zr({},Yr),{},{peerId:Lt})});case 3:Wt=er.sent,s._dataConsumers.set(Wt.id,Wt),Wt.on("transportclose",function(){s._dataConsumers.delete(Wt.id)}),Wt.on("open",function(){Te.debug('DataConsumer "open" event')}),Wt.on("close",function(){Te.warn('DataConsumer "close" event'),s._dataConsumers.delete(Wt.id),Fe.dispatch(Er({type:"error",text:"DataConsumer closed"}))}),Wt.on("error",function(Ur){Te.error('DataConsumer "error" event:%o',Ur),Fe.dispatch(Er({type:"error",text:"DataConsumer error: ".concat(Ur)}))}),Wt.on("message",function(Ur){var Hr;if(Te.debug('DataConsumer "message" event [streamId:%d]',Wt.sctpStreamParameters.streamId),Ur instanceof ArrayBuffer){var Fa=new Uint8Array(Ur);Hr=Fa}else Hr=Ur;var fa=Fe.getState(),on=fa.peers,Qa=Object.keys(on).map(function(la){return on[la]}),ma=Qa.find(function(la){return la.dataConsumers.includes(Wt.id)});switch(Wt.label){case"reliable_data_producer":{if(!ma){Te.warn('DataConsumer "message" from unknown peer');break}Fe.dispatch(Er({title:"".concat(ma.displayName," says:"),text:Ur,timeout:5e3})),s._eventEmitter.emit("DATA",{payload:Hr,from:ma.id,timestamp:Date.now(),reliability:Vs.y.RELIABLE});break}case"unreliable_data_producer":{if(!ma){Te.warn('DataConsumer "message" from unknown peer');break}Fe.dispatch(Er({title:"".concat(ma.displayName," says:"),text:Ur,timeout:5e3})),s._eventEmitter.emit("DATA",{payload:Hr,from:ma.id,timestamp:Date.now(),reliability:Vs.y.UNRELIABLE});break}}}),Fe.dispatch(bo({id:Wt.id,sctpStreamParameters:Wt.sctpStreamParameters,label:Wt.label,protocol:Wt.protocol},Lt)),Le(),er.next=5;break;case 4:er.prev=4,Cr=er.catch(2),Te.error('"newDataConsumer" request failed:%o',Cr),Fe.dispatch(Er({type:"error",text:"Error creating a DataConsumer: ".concat(Cr)}));case 5:case"end":return er.stop()}},Ze,null,[[2,4]])}));return function(Ze,Ie){return bt.apply(this,arguments)}})()),this._webSocket.on("enableMic",(function(){var bt=(0,n.A)(h().mark(function Ze(Ie,Le){var Lt,Kt,Yt;return h().wrap(function(vr){for(;;)switch(vr.prev=vr.next){case 0:try{Kt=Ie.peerId,(Lt=s._openTelemetry)===null||Lt===void 0||Lt.traceAutoComplete({spanName:"Emitting MIC_REQUESTED event. Participant(".concat(Kt,") requested to enable mic."),status:1}),s._eventEmitter.emit("MIC_REQUESTED",{peerId:Kt}),Le()}catch(kr){Te.error('"enableMic" request failed:%o',kr),(Yt=s._videosdkLogs)===null||Yt===void 0||Yt.pushLogs({logText:"Error enableMic request failed",logType:"ERROR",attributes:{error:kr.message}}),s._emitError({code:3027,message:kr.message})}case 1:case"end":return vr.stop()}},Ze)}));return function(Ze,Ie){return bt.apply(this,arguments)}})()),this._webSocket.on("disableMic",(function(){var bt=(0,n.A)(h().mark(function Ze(Ie,Le){var Lt,Kt,Yt,vr,kr,ta,Yr;return h().wrap(function(Wt){for(;;)switch(Wt.prev=Wt.next){case 0:return Lt=Ie.peerId,Wt.prev=1,Kt=(Yt=s._openTelemetry)===null||Yt===void 0?void 0:Yt.trace({spanName:"Disabling Microphone as requested by Participant".concat(Lt)}),Wt.next=2,s.disableMic(!1,Kt);case 2:(vr=s._openTelemetry)===null||vr===void 0||vr.completeSpan({span:Kt,status:1,message:"Microphone disabled successfully"}),Le(),Wt.next=4;break;case 3:Wt.prev=3,Yr=Wt.catch(1),(kr=s._openTelemetry)===null||kr===void 0||kr.completeSpan({span:Kt,status:2,message:"Failed to disable microphone :: ".concat(Yr.message)}),(ta=s._videosdkLogs)===null||ta===void 0||ta.pushLogs({logText:"Error disableMic request failed",logType:"ERROR",attributes:{error:Yr.message}}),s._emitError({code:3028,message:Yr.message});case 4:case"end":return Wt.stop()}},Ze,null,[[1,3]])}));return function(Ze,Ie){return bt.apply(this,arguments)}})()),this._webSocket.on("enableWebcam",(function(){var bt=(0,n.A)(h().mark(function Ze(Ie,Le){var Lt,Kt,Yt;return h().wrap(function(vr){for(;;)switch(vr.prev=vr.next){case 0:try{Kt=Ie.peerId,(Lt=s._openTelemetry)===null||Lt===void 0||Lt.traceAutoComplete({spanName:"Emitting WEBCAM_REQUESTED event. Participant(".concat(Kt,") requested to enable webcam."),status:1}),s._eventEmitter.emit("WEBCAM_REQUESTED",{peerId:Kt}),Le()}catch(kr){Te.error('"enableWebcam" request failed:%o',kr),(Yt=s._videosdkLogs)===null||Yt===void 0||Yt.pushLogs({logText:"Error enableWebcam request failed",logType:"ERROR",attributes:{error:kr.message}}),s._emitError({code:3029,message:kr.message})}case 1:case"end":return vr.stop()}},Ze)}));return function(Ze,Ie){return bt.apply(this,arguments)}})()),this._webSocket.on("disableWebcam",(function(){var bt=(0,n.A)(h().mark(function Ze(Ie,Le){var Lt,Kt,Yt,vr,kr,ta,Yr;return h().wrap(function(Wt){for(;;)switch(Wt.prev=Wt.next){case 0:return Wt.prev=0,vr=Ie.peerId,Lt=(Kt=s._openTelemetry)===null||Kt===void 0?void 0:Kt.trace({spanName:"Disabling Webcam as requested by Participant".concat(vr)}),Wt.next=1,s.disableWebcam(Lt);case 1:(Yt=s._openTelemetry)===null||Yt===void 0||Yt.completeSpan({span:Lt,status:1,message:"Webcam disabled successfully"}),Le(),Wt.next=3;break;case 2:Wt.prev=2,Yr=Wt.catch(0),(kr=s._openTelemetry)===null||kr===void 0||kr.completeSpan({span:Lt,status:2,message:"Failed to disable webcam :: ".concat(Yr.message)}),(ta=s._videosdkLogs)===null||ta===void 0||ta.pushLogs({logText:"Error disableWebcam request failed",logType:"ERROR",attributes:{error:Yr.message}}),s._emitError({code:3030,message:Yr.message});case 3:case"end":return Wt.stop()}},Ze,null,[[0,2]])}));return function(Ze,Ie){return bt.apply(this,arguments)}})()),this._webSocket.on("pinStateChanged",(function(){var bt=(0,n.A)(h().mark(function Ze(Ie,Le){var Lt,Kt,Yt,vr,kr,ta,Yr,Wt,Cr,er;return h().wrap(function(Ur){for(;;)switch(Ur.prev=Ur.next){case 0:Ur.prev=0,vr=Ie.peerId,kr=Ie.state,ta=Ie.pinnedBy,Lt=(Kt=s._openTelemetry)===null||Kt===void 0?void 0:Kt.trace({spanName:"Pinning Participant(".concat(vr,") as requested by Participant").concat(ta),attributes:{requestData:JSON.stringify({peerId:vr,state:kr,pinnedBy:ta})}}),s._pinnedParticipants.has(vr)||s._pinnedParticipants.set(vr,{cam:!1,share:!1}),Yr=s._pinnedParticipants.get(vr),kr.cam!=null&&(Yr.cam=kr.cam),kr.share!=null&&(Yr.share=kr.share),s._pinnedParticipants.set(vr,Yr),s._eventEmitter.emit("PIN_STATE_CHANGED",{peerId:vr,state:kr,pinnedBy:ta}),Yr.share==!1&&Yr.cam==!1&&s._pinnedParticipants.delete(vr),(Yt=s._openTelemetry)===null||Yt===void 0||Yt.completeSpan({span:Lt,status:1,message:"Participant pinned succesfully",attributes:{_pinnedParticipants:JSON.stringify(s._pinnedParticipants)}}),Le(),Ur.next=2;break;case 1:throw Ur.prev=1,er=Ur.catch(0),(Wt=s._openTelemetry)===null||Wt===void 0||Wt.completeSpan({span:Lt,status:2,message:"Failed to pin participant. ".concat(er.message)}),(Cr=s._videosdkLogs)===null||Cr===void 0||Cr.pushLogs({logText:"Error pinStateChanged request failed",logType:"ERROR",attributes:{error:er.message}}),er;case 2:case"end":return Ur.stop()}},Ze,null,[[0,1]])}));return function(Ze,Ie){return bt.apply(this,arguments)}})()),this._webSocket.on("switchRoom",(function(){var bt=(0,n.A)(h().mark(function Ze(Ie,Le){return h().wrap(function(Lt){for(;;)switch(Lt.prev=Lt.next){case 0:s._eventEmitter.emit("SWITCH_ROOM",Ie),Le();case 1:case"end":return Lt.stop()}},Ze)}));return function(Ze,Ie){return bt.apply(this,arguments)}})()),this._webSocket.on("statsData",(function(){var bt=(0,n.A)(h().mark(function Ze(Ie,Le){return h().wrap(function(Lt){for(;;)switch(Lt.prev=Lt.next){case 0:Le({peerId:s._peerId,statsData:s._stats}),s._stats={};case 1:case"end":return Lt.stop()}},Ze)}));return function(Ze,Ie){return bt.apply(this,arguments)}})()),this._webSocket.on("notification",(function(){var bt=(0,n.A)(h().mark(function Ze(Ie){var Le,Lt,Kt,Yt,vr,kr,ta,Yr,Wt,Cr,er,Ur,Hr,Fa,fa,on,Qa,ma,la,xt,Mr,Vr,ra,va,na,ia,en,fn,Aa,tn,Sa,ua,vn,Pa,Yi,ki,Qi,ga,mi,ei,Ia,ti,cn,ri,ji,vi,Gn,ii,zn,Cn,La,bn,Sn,pr,ka,sa,Kn,si,In,xn,Ui,xa,gi,yi,ks,zi,oi,ls,Hn,gn,Vn,Hi,sr,qr,Na,An,Os,Xi,no,io,ci,rl,Fs,so,al,Ao,us,Fn,Oi,Ms,ko,Ko,Vi,_i,Xa,oo,Fi,dr,Ma,En,Oo,co,$s,lo,or;return h().wrap(function(It){for(;;)switch(It.prev=It.next){case 0:Le=Ie,Te.debug('proto "notification" event [method:%s, data:%o]',Ie.method,Le),or=Ie.method,It.next=or==="error"?1:or==="participantMediaStateChanged"?2:or==="producerScore"?3:or==="entryRequested"?4:or==="entryResponded"?5:or==="newPeer"?9:or==="peerClosed"?10:or==="peerDisplayNameChanged"?11:or==="consumerClosed"?12:or==="consumerPaused"?14:or==="consumerResumed"?16:or==="consumerLayersChanged"?18:or==="consumerScore"?20:or==="dataConsumerClosed"?21:or==="activeSpeaker"?23:or==="consumerResumedSubManager"?24:or==="consumerPausedSubManager"?25:or==="transcriptionStateChanged"?26:or==="transcriptionText"?27:or==="translationStateChanged"?28:or==="translationText"?29:or==="translationLanguageChanged"?30:or==="recordingStateChanged"?31:or==="recordingStarted"?32:or==="recordingStopped"?33:or==="livestreamStateChanged"?34:or==="livestreamStarted"?35:or==="livestreamStopped"?36:or==="hlsStateChanged"?37:or==="hlsPlayableStateChanged"?38:or==="hlsStarted"?39:or==="hlsStopped"?40:or==="whiteboardStarted"?41:or==="whiteboardStopped"?42:or==="addCharacter"?43:or==="removeCharacter"?44:or==="characterStateChanged"?45:or==="characterMessage"?46:or==="userMessage"?47:or==="characterData"?48:or==="characterError"?49:or==="videoStatusChanged"?50:or==="videoSeeked"?51:or==="connectionOpen"?52:or==="connectionClose"?53:or==="connectionChatMessage"?54:or==="connectionParticipantJoined"?55:or==="connectionParticipantLeft"?56:or==="pubsubMessage"?57:or==="realtimeStoreValueChanged"?58:or==="peerModeChanged"?59:or==="restartIce"?60:or==="mediaRelayStarted"?61:or==="mediaRelayStopped"?62:or==="mediaRelayError"?63:or==="mediaRelayRequestResponse"?64:or==="mediaRelayRequestReceived"?65:66;break;case 1:return Yt=Le,s._eventEmitter.emit("ERROR",Yt),(Lt=s._videosdkLogs)===null||Lt===void 0||Lt.pushLogs({logText:"Error in Meeting Session",logType:"ERROR",attributes:{error:Yt.message}}),(Kt=s._openTelemetry)===null||Kt===void 0||Kt.traceAutoComplete({spanName:"Emitting `ERROR` Event",attributes:{error:Yt.message},status:2}),It.abrupt("continue",67);case 2:try{vr=Le.peerId,kr=Le.kind,ta=Le.newState,s._eventEmitter.emit("PARTICIPANT_MEDIA_STATE_CHANGED",{peerId:vr,kind:kr,newState:ta}),vr!=s._peerId&&(Wt=s._peerSpans.get(vr),(Yr=s._openTelemetry)===null||Yr===void 0||Yr.traceAutoComplete({spanName:"Emitting MEDIA_STATUS_CHANGED event. Participant has ".concat(ta?"enabled":"disabled"," ").concat(kr),span:Wt,status:1,attributes:{"peer.id":vr,"media.kind":kr,"media.state":ta}}))}catch(Yo){Te.error('"newProducer" request failed:%o',Yo),(Cr=s._videosdkLogs)===null||Cr===void 0||Cr.pushLogs({logText:"Error newProducer request failed",logType:"ERROR",attributes:{error:Yo.message}})}case 3:return er=Le.producerId,Ur=Le.score,Fe.dispatch(Us(er,Ur)),It.abrupt("continue",67);case 4:return Fa=Le.id,fa=Le.name,on=(Hr=s._openTelemetry)===null||Hr===void 0?void 0:Hr.trace({spanName:"Entry Request from ".concat(fa),span:s._joinSpan,attributes:{data:JSON.stringify({id:Fa,name:fa})}}),Fa!==s._peerId?(s._eventEmitter.emit("ENTRY_REQUESTED",{id:Fa,name:fa}),(Qa=s._openTelemetry)===null||Qa===void 0||Qa.completeSpan({span:on,status:1,message:"ENTRY_REQUESTED event send succeessfully"})):(ma=s._openTelemetry)===null||ma===void 0||ma.completeSpan({span:on,status:2,message:"Failed to send ENTRY_REQUESTED event"}),It.abrupt("continue",67);case 5:if(xt=Le.id,Mr=Le.decision,Vr=Le.sessionId,ra=Le.switchingRoomId,va=(la=s._openTelemetry)===null||la===void 0?void 0:la.trace({spanName:"Entry responded",span:s._requestEntrySpan,attributes:{"peer.id":xt,"entry.decision":Mr,switching_room:!!ra}}),s._eventEmitter.emit("ENTRY_RESPONDED",{id:xt,decision:Mr}),!(xt===s._peerId&&Mr==="allowed")){It.next=7;break}if(!ra){It.next=6;break}return(en=s._openTelemetry)===null||en===void 0||en.completeSpan({span:va,status:1,message:"Switching room initiated"}),(fn=s._openTelemetry)===null||fn===void 0||fn.completeSpan({span:s._requestEntrySpan,status:1}),s.softClose(),s.switchingRoom(ra),It.abrupt("continue",67);case 6:s._videosdkLogs=new uc({roomId:s._roomId,peerId:s._peerId,logs:te,observabilityJwt:fe,deviceInfo:s._deviceInfo,sessionId:Vr,debugMode:s._debugMode}),s._openTelemetry.setSessionId(Vr),s.joinRoom(),(na=s._openTelemetry)===null||na===void 0||na.completeSpan({span:va,status:1,message:"Entry Responded Recieved"}),(ia=s._openTelemetry)===null||ia===void 0||ia.completeSpan({span:s._requestEntrySpan,status:1}),It.next=8;break;case 7:(Aa=s._openTelemetry)===null||Aa===void 0||Aa.completeSpan({span:s._joinSpan,status:2,message:"Join Request Denied"}),(tn=s._openTelemetry)===null||tn===void 0||tn.completeSpan({span:s._requestEntrySpan,status:2});case 8:return It.abrupt("continue",67);case 9:Sa=Le,ua=Rn(Zr(Zr({},Sa),{},{consumers:[],dataConsumers:[]})),Fe.dispatch(ua),s._eventEmitter.emit(ua.type,ua.payload),Fe.dispatch(Er({text:"".concat(Sa.displayName," has joined the room")}));try{Pa=(vn=s._openTelemetry)===null||vn===void 0?void 0:vn.trace({spanName:"Participant '".concat(Sa.displayName,"' joined the room"),attributes:{peerData:JSON.stringify(Sa),"peer.id":Sa.id,"peer.displayName":Sa.displayName}}),Pa&&(s._peerSpans.set(Sa.id,Pa),(Yi=s._openTelemetry)===null||Yi===void 0||Yi.completeSpan({span:Pa}))}catch(Yo){(ki=s._videosdkLogs)===null||ki===void 0||ki.pushLogs({logText:"Error Websocket Noti: newPeer",logType:"ERROR",attributes:{error:Yo.message}}),console.error(Yo)}return It.abrupt("continue",67);case 10:return ga=Le.peerId,mi=Le.reason,ei=yo(ga,mi),Fe.dispatch(ei),s._eventEmitter.emit(ei.type,ei.payload),(Qi=s._openTelemetry)===null||Qi===void 0||Qi.traceAutoComplete({span:s._peerSpans.get(ga),status:1,spanName:"Peer ".concat(ga," closed. Reason: ").concat(mi.message," (Code: ").concat(mi.code,")")}),It.abrupt("continue",67);case 11:return Ia=Le.peerId,ti=Le.displayName,cn=Le.oldDisplayName,Fe.dispatch(Tn(ti,Ia)),Fe.dispatch(Er({text:"".concat(cn," is now ").concat(ti)})),It.abrupt("continue",67);case 12:if(ji=Le.consumerId,vi=s._consumers.get(ji),vi){It.next=13;break}return It.abrupt("continue",67);case 13:return vi.close(),s._consumers.delete(ji),Gn=vi.appData.peerId,ii=Ss(ji,Gn),s._eventEmitter.emit("STREAM_STATE_CHANGED",{state:"ended",peerId:Gn,streamId:vi._track.id}),Fe.dispatch(ii),s._eventEmitter.emit(ii.type,ii.payload),zn=s._peerSpans.get(Gn),(ri=s._openTelemetry)===null||ri===void 0||ri.traceAutoComplete({spanName:"Participant stream ended",span:zn,attributes:{"peer.id":Gn,"Stream kind":vi.kind}}),It.abrupt("continue",67);case 14:if(La=Le.consumerId,bn=s._consumers.get(La),bn){It.next=15;break}return It.abrupt("continue",67);case 15:return bn.pause(),Fe.dispatch(ss(La,"remote")),s._eventEmitter.emit("CONSUMER_PAUSED",{consumerId:La,peerId:bn.appData.peerId}),Sn=s._peerSpans.get(bn.appData.peerId),(Cn=s._openTelemetry)===null||Cn===void 0||Cn.traceAutoComplete({spanName:"Participant stream paused",span:Sn,attributes:{"peer.id":bn.appData.peerId,"Stream kind":bn.kind}}),It.abrupt("continue",67);case 16:if(ka=Le.consumerId,sa=s._consumers.get(ka),s._eventEmitter.emit("STREAM_STATE_CHANGED",{state:"active",peerId:sa.appData.peerId,streamId:sa._track.id}),sa){It.next=17;break}return It.abrupt("continue",67);case 17:return sa.resume(),Fe.dispatch(_o(ka,"remote")),s._eventEmitter.emit("CONSUMER_RESUMED",{consumerId:ka,peerId:sa.appData.peerId}),Kn=s._peerSpans.get(sa.appData.peerId),(pr=s._openTelemetry)===null||pr===void 0||pr.traceAutoComplete({spanName:"Participant stream resumed",span:Kn,attributes:{"peer.id":sa.appData.peerId,"Stream kind":sa.kind}}),It.abrupt("continue",67);case 18:if(In=Le.consumerId,xn=Le.spatialLayer,Ui=Le.temporalLayer,xa=s._consumers.get(In),xa.currentSpatialLayer=xn,xa.currentTemporalLayer=Ui,xa){It.next=19;break}return It.abrupt("continue",67);case 19:return((si=xa.appData)===null||si===void 0||(si=si.encodings)===null||si===void 0?void 0:si.length)>1&&(s._eventEmitter.emit("VIDEO_QUALITY_CHANGED",{peerId:xa.appData.peerId,prevQuality:xa.spatialLayers-1-xa.currentSpatialLayer==0?"HIGH":xa.spatialLayers-1-xa.currentSpatialLayer==1?"MEDIUM":"LOW",currentQuality:xa.spatialLayers-1-xn==0?"HIGH":xa.spatialLayers-1-xn==1?"MEDIUM":"LOW"}),(gi=s._videosdkLogs)===null||gi===void 0||gi.pushLogs({logText:"Consumer Peer ".concat(xa.appData.peerId," changed to ").concat(xa.spatialLayers-1-xn==0?"HIGH":xa.spatialLayers-1-xn==1?"MEDIUM":"LOW",", previous quality was ").concat(xa.spatialLayers-1-xa.currentSpatialLayer==0?"HIGH":xa.spatialLayers-1-xa.currentSpatialLayer==1?"MEDIUM":"LOW"),logType:"INFO",attributes:{spatialLayer:xn,temporalLayer:Ui,consumerId:In}})),xa.currentSpatialLayer=xn,xa.currentTemporalLayer=Ui,Fe.dispatch(Js(In,xn,Ui)),s._peerSpans.get(xa.appData.peerId),It.abrupt("continue",67);case 20:return yi=Le.consumerId,ks=Le.score,Fe.dispatch(Ci(yi,ks)),It.abrupt("continue",67);case 21:if(zi=Le.dataConsumerId,oi=s._dataConsumers.get(zi),oi){It.next=22;break}return It.abrupt("continue",67);case 22:return oi.close(),s._dataConsumers.delete(zi),ls=oi.appData.peerId,Fe.dispatch(jo(zi,ls)),It.abrupt("continue",67);case 23:return Hn=Le.peerId,gn=mo(Hn),Fe.dispatch(gn),s._eventEmitter.emit(gn.type,gn.payload),It.abrupt("continue",67);case 24:return s._eventEmitter.emit("SUB_MANAGER_RESUMED",Le),It.abrupt("continue",67);case 25:return s._eventEmitter.emit("SUB_MANAGER_PAUSED",Le),It.abrupt("continue",67);case 26:return s._eventEmitter.emit("TRANSCRIPTION_STATE_CHANGED",Le),(Vn=s._openTelemetry)===null||Vn===void 0||Vn.traceAutoComplete({spanName:"Live transcription status changed to ".concat(Le.status.toLowerCase()),status:1,attributes:{eventPayload:JSON.stringify(Le)}}),It.abrupt("continue",67);case 27:return s._eventEmitter.emit("TRANSCRIPTION_TEXT",Le),It.abrupt("continue",67);case 28:return s._eventEmitter.emit("TRANSLATION_STATE_CHANGED",Le),(Hi=s._openTelemetry)===null||Hi===void 0||Hi.traceAutoComplete({spanName:"Translation State Changed to : ".concat(Le.status),status:1,attributes:{eventPayload:JSON.stringify(Le)}}),It.abrupt("continue",67);case 29:return s._translationLanguage==Le.language&&s._eventEmitter.emit("TRANSLATION_TEXT",Le),It.abrupt("continue",67);case 30:return s._eventEmitter.emit("TRANSLATION_LANGUAGE_CHANGED",Le),s._peerId==Le.peerId&&(s._translationLanguage=Le.language),It.abrupt("continue",67);case 31:return s._eventEmitter.emit("RECORDING_STATE_CHANGED",Le),(sr=s._openTelemetry)===null||sr===void 0||sr.traceAutoComplete({spanName:"Recording State Changed to `".concat(Le.status.toUpperCase(),"`"),status:1,attributes:{eventPayload:JSON.stringify(Le)}}),It.abrupt("continue",67);case 32:return s._eventEmitter.emit("RECORDING_STARTED",{}),It.abrupt("continue",67);case 33:return s._eventEmitter.emit("RECORDING_STOPPED",{}),It.abrupt("continue",67);case 34:return s._eventEmitter.emit("LIVESTREAM_STATE_CHANGED",Le),(qr=s._openTelemetry)===null||qr===void 0||qr.traceAutoComplete({spanName:"Meeting live stream state changed to ".concat(Le.status.toLowerCase()),attributes:{eventPayload:JSON.stringify(Le)},status:1}),It.abrupt("continue",67);case 35:return s._eventEmitter.emit("LIVESTREAM_STARTED",{}),It.abrupt("continue",67);case 36:return s._eventEmitter.emit("LIVESTREAM_STOPPED",{}),It.abrupt("continue",67);case 37:return s._eventEmitter.emit("HLS_STATE_CHANGED",Le),(Na=s._openTelemetry)===null||Na===void 0||Na.traceAutoComplete({spanName:"HLS streaming status changed to ".concat(Le.status.toLowerCase()),attributes:{eventPayload:JSON.stringify(Le)}}),It.abrupt("continue",67);case 38:return Le.isPlayable&&(s._eventEmitter.emit("HLS_STATE_CHANGED",Zr(Zr({},Le),{},{status:_n.V.HLS_PLAYABLE})),(An=s._openTelemetry)===null||An===void 0||An.traceAutoComplete({spanName:"HLS stream is now playable",status:1})),It.abrupt("continue",67);case 39:return Os=Le.downstreamUrl,s._eventEmitter.emit("HLS_STARTED",Os),It.abrupt("continue",67);case 40:return s._eventEmitter.emit("HLS_STOPPED",{}),It.abrupt("continue",67);case 41:return Xi=Le.state,no=Le.url,Xi?s._eventEmitter.emit("WHITEBOARD_STARTED",{state:Xi}):no&&s._eventEmitter.emit("WHITEBOARD_STARTED",{url:no}),It.abrupt("continue",67);case 42:return s._eventEmitter.emit("WHITEBOARD_STOPPED",{}),It.abrupt("continue",67);case 43:return ci=Le,rl=Rn(Zr(Zr({},ci),{},{consumers:[],dataConsumers:[]})),Fe.dispatch(rl),s._eventEmitter.emit("ADD_CHARACTER",Le),(io=s._openTelemetry)===null||io===void 0||io.traceAutoComplete({spanName:"Emitted ADD_CHARACTER : ".concat(Le),attributes:{data:JSON.stringify(Le)},status:1}),It.abrupt("continue",67);case 44:return so=Le.id,al=yo(so),Fe.dispatch(al),s._eventEmitter.emit("REMOVE_CHARACTER",Le),(Fs=s._openTelemetry)===null||Fs===void 0||Fs.traceAutoComplete({spanName:"Emitted REMOVE_CHARACTER : ".concat(Le),attributes:{data:JSON.stringify(Le)},status:1}),It.abrupt("continue",67);case 45:return s._eventEmitter.emit("CHARACTER_STATE_CHANGED",Le),(Ao=s._openTelemetry)===null||Ao===void 0||Ao.traceAutoComplete({spanName:"Emitted CHARACTER_STATE_CHANGED, status : ".concat(Le.status),attributes:{data:JSON.stringify(Le)},status:1}),It.abrupt("continue",67);case 46:return s._eventEmitter.emit("CHARACTER_MESSAGE",Le),It.abrupt("continue",67);case 47:return s._eventEmitter.emit("USER_MESSAGE",Le),It.abrupt("continue",67);case 48:return s._eventEmitter.emit("CHARACTER_DATA",Le),It.abrupt("continue",67);case 49:return s._eventEmitter.emit("CHARACTER_ERROR",Le),It.abrupt("continue",67);case 50:return s._eventEmitter.emit("VIDEO_STATE_CHANGED",Le),It.abrupt("continue",67);case 51:return us=Le.currentTime,s._eventEmitter.emit("VIDEO_SEEKED",{currentTime:us}),It.abrupt("continue",67);case 52:return s._eventEmitter.emit("CONNECTION_OPEN",Le),It.abrupt("continue",67);case 53:return s._eventEmitter.emit("CONNECTION_CLOSE",Le),It.abrupt("continue",67);case 54:return s._eventEmitter.emit("CONNECTION_CHAT_MESSAGE",Le),It.abrupt("continue",67);case 55:return s._eventEmitter.emit("CONNECTION_PARTICIPANT_JOIN",Le),It.abrupt("continue",67);case 56:return s._eventEmitter.emit("CONNECTION_PARTICIPANT_LEFT",Le),It.abrupt("continue",67);case 57:return s._eventEmitter.emit("PUBSUB_MESSAGE",Le),It.abrupt("continue",67);case 58:return s._eventEmitter.emit("REALTIMESTORE_VALUE_CHANGED",Le),It.abrupt("continue",67);case 59:return Oi=Le.peerId,Ms=Le.mode,s._eventEmitter.emit("PEER_MODE_CHANGED",Le),(Fn=s._openTelemetry)===null||Fn===void 0||Fn.traceAutoComplete({span:s._peerSpans.get(Oi),status:1,spanName:"Participant changed their mode to ".concat(Ms," ")}),It.abrupt("continue",67);case 60:return Ko=Le.transportId,Vi=Le.iceParameters,(ko=s._videosdkLogs)===null||ko===void 0||ko.pushLogs({logText:"Websocket Noti: restartIce for transportId :".concat(Ko),logType:"INFO"}),s.handleRemoteRestartIce({transportId:Ko,iceParameters:Vi,internalSpan}),It.abrupt("continue",67);case 61:return _i=Ie.meetingId,s._eventEmitter.emit("MEDIA_RELAY_STARTED",{meetingId:_i}),It.abrupt("continue",67);case 62:return Xa=Ie.meetingId,oo=Ie.reason,s._eventEmitter.emit("MEDIA_RELAY_STOPPED",{meetingId:Xa,reason:oo}),It.abrupt("continue",67);case 63:return Fi=Ie.meetingId,dr=Ie.reason,s._eventEmitter.emit("MEDIA_RELAY_ERROR",{meetingId:Fi,reason:dr}),It.abrupt("continue",67);case 64:return Ma=Ie.decision,En=Ie.decidedBy,Oo=Ie.meetingId,s._eventEmitter.emit("MEDIA_RELAY_REQUEST_RESPONSE",{decision:Ma,decidedBy:En,meetingId:Oo}),It.abrupt("continue",67);case 65:return co=Ie.peerId,$s=Ie.meetingId,lo=Ie.displayName,s._eventEmitter.emit("MEDIA_RELAY_REQUEST_RECEIVED",{peerId:co,meetingId:$s,displayName:lo}),It.abrupt("continue",67);case 66:Te.error('unknown Websocket notification.method "%s"',Ie.method);case 67:case"end":return It.stop()}},Ze)}));return function(Ze){return bt.apply(this,arguments)}})()),rr.next=8;break;case 7:rr.prev=7,mr=rr.catch(0),(ht=this._videosdkLogs)===null||ht===void 0||ht.pushLogs({logText:"Error initializing the meeting :: ".concat(mr),logType:"ERROR",attributes:{error:mr}}),this.emitMeetingStateChange(se.FAILED);case 8:case"end":return rr.stop()}},v,this,[[0,7],[2,5]])}));function u(){return o.apply(this,arguments)}return u})()},{key:"requestEntry",value:(function(){var o=(0,n.A)(h().mark(function v(){var s,l;return h().wrap(function(A){for(;;)switch(A.prev=A.next){case 0:return this._requestEntrySpan=(s=this._openTelemetry)===null||s===void 0?void 0:s.trace({spanName:"Requesting Entry",span:this._joinSpan}),A.prev=1,A.next=2,this._socketRequest("requestEntry",{name:this._displayName});case 2:A.next=4;break;case 3:A.prev=3,l=A.catch(1),this._openTelemetry.completeSpan({span:this._requestEntrySpan,message:"Failed to send entry request. Error: ".concat(l.message)});case 4:case"end":return A.stop()}},v,this,[[1,3]])}));function u(){return o.apply(this,arguments)}return u})()},{key:"respondEntry",value:(function(){var o=(0,n.A)(h().mark(function v(s,l){var A,O,I,Z,ee;return h().wrap(function(te){for(;;)switch(te.prev=te.next){case 0:return te.prev=0,A=(O=this._openTelemetry)===null||O===void 0?void 0:O.trace({spanName:"Responding Entry for ".concat(s),attributes:{peerId:s,decision:l},span:this._joinSpan}),te.next=1,this._socketRequest("respondEntry",{id:s,decision:l});case 1:(I=this._openTelemetry)===null||I===void 0||I.completeSpan({message:"Entry Responded Successfully",span:A,status:1}),te.next=3;break;case 2:te.prev=2,ee=te.catch(0),(Z=this._openTelemetry)===null||Z===void 0||Z.completeSpan({message:"Failed to respond entry for ".concat(s),span:A,status:1,attributes:{error:ee.message}});case 3:case"end":return te.stop()}},v,this,[[0,2]])}));function u(v,s){return o.apply(this,arguments)}return u})()},{key:"startTranscription",value:(function(){var o=(0,n.A)(h().mark(function v(s){var l,A,O,I,Z,ee;return h().wrap(function(te){for(;;)switch(te.prev=te.next){case 0:return Te.debug("startTranscription()"),A=(l=this._openTelemetry)===null||l===void 0?void 0:l.trace({spanName:"Requesting to start meeting transcription",attributes:{config:s?JSON.stringify(s):"Transcription configuration not specified"}}),te.prev=1,te.next=2,this._socketRequest("startTranscription",{config:s});case 2:(O=this._openTelemetry)===null||O===void 0||O.completeSpan({span:A,status:1,message:"Meeting transcription start request sent successfully"}),te.next=4;break;case 3:te.prev=3,ee=te.catch(1),Te.error("startTranscription() | failed:%o",ee),(I=this._openTelemetry)===null||I===void 0||I.completeSpan({span:A,status:2,message:"Failed to send meeting transcription start request. Error: ".concat(ee.message)}),(Z=this._videosdkLogs)===null||Z===void 0||Z.pushLogs({logText:"Error startTranscription() failed",logType:"ERROR",attributes:{error:ee.message}}),this._emitError({code:4031,message:ee.message});case 4:case"end":return te.stop()}},v,this,[[1,3]])}));function u(v){return o.apply(this,arguments)}return u})()},{key:"stopTranscription",value:(function(){var o=(0,n.A)(h().mark(function v(){var s,l,A,O,I,Z;return h().wrap(function(ee){for(;;)switch(ee.prev=ee.next){case 0:return Te.debug("stopTranscription()"),l=(s=this._openTelemetry)===null||s===void 0?void 0:s.trace({spanName:"Requesting to stop meeting transcription"}),ee.prev=1,ee.next=2,this._socketRequest("stopTranscription",{});case 2:(A=this._openTelemetry)===null||A===void 0||A.completeSpan({span:l,status:1,message:"Meeting transcription stop request sent successfully"}),ee.next=4;break;case 3:ee.prev=3,Z=ee.catch(1),(O=this._openTelemetry)===null||O===void 0||O.completeSpan({span:l,status:2,message:"Failed to send meeting transcription stop request. Error: ".concat(Z.message)}),(I=this._videosdkLogs)===null||I===void 0||I.pushLogs({logText:"Error stopTranscription() failed",logType:"ERROR",attributes:{error:Z.message}}),this._emitError({code:4032,message:Z.message});case 4:case"end":return ee.stop()}},v,this,[[1,3]])}));function u(){return o.apply(this,arguments)}return u})()},{key:"startTranslation",value:(function(){var o=(0,n.A)(h().mark(function v(s){var l,A,O,I,Z,ee;return h().wrap(function(te){for(;;)switch(te.prev=te.next){case 0:return Te.debug("startTranslation() called"),A=(l=this._openTelemetry)===null||l===void 0?void 0:l.trace({spanName:"Requesting to start meeting translation",attributes:{config:s?JSON.stringify(s):"Translation configuration not specified"}}),te.prev=1,te.next=2,this._socketRequest("startTranslation",{config:s});case 2:(O=this._openTelemetry)===null||O===void 0||O.completeSpan({span:A,status:1,message:"Meeting translation start request sent successfully"}),te.next=4;break;case 3:throw te.prev=3,ee=te.catch(1),Te.error("startTranslation() | failed:%o",ee),(I=this._openTelemetry)===null||I===void 0||I.completeSpan({span:A,status:2,message:"Failed to send meeting translation start request. Error: ".concat(ee.message)}),(Z=this._videosdkLogs)===null||Z===void 0||Z.pushLogs({logText:"Error startTranslation() failed",logType:"ERROR",attributes:{error:ee.message}}),this._emitError({code:4042,message:ee.message}),ee;case 4:case"end":return te.stop()}},v,this,[[1,3]])}));function u(v){return o.apply(this,arguments)}return u})()},{key:"changeTranslationLanguage",value:(function(){var o=(0,n.A)(h().mark(function v(s){var l,A,O,I,Z,ee;return h().wrap(function(te){for(;;)switch(te.prev=te.next){case 0:return Te.debug("changeTranslationLanguage() called"),A=(l=this._openTelemetry)===null||l===void 0?void 0:l.trace({spanName:"Requesting to change translation language",attributes:{language:s??"Language Not Specified"}}),te.prev=1,te.next=2,this._socketRequest("changeTranslationLanguage",{language:s});case 2:(O=this._openTelemetry)===null||O===void 0||O.completeSpan({span:A,status:1,message:"Translation language change request sent successfully"}),te.next=4;break;case 3:throw te.prev=3,ee=te.catch(1),Te.error("changeTranslationLanguage() | failed:%o",ee),(I=this._openTelemetry)===null||I===void 0||I.completeSpan({span:A,status:2,message:"Failed to send translation language change request. Error: ".concat(ee.message)}),(Z=this._videosdkLogs)===null||Z===void 0||Z.pushLogs({logText:"Error changeTranslationLanguage() failed",logType:"ERROR",attributes:{error:ee.message}}),this._emitError({code:4043,message:ee.message}),ee;case 4:case"end":return te.stop()}},v,this,[[1,3]])}));function u(v){return o.apply(this,arguments)}return u})()},{key:"stopTranslation",value:(function(){var o=(0,n.A)(h().mark(function v(){var s,l,A,O,I,Z;return h().wrap(function(ee){for(;;)switch(ee.prev=ee.next){case 0:return Te.debug("stopTranslation() called"),l=(s=this._openTelemetry)===null||s===void 0?void 0:s.trace({spanName:"Requesting to stop meeting translation"}),ee.prev=1,ee.next=2,this._socketRequest("stopTranslation",{});case 2:(A=this._openTelemetry)===null||A===void 0||A.completeSpan({span:l,status:1,message:"Meeting translation stop request sent successfully"}),ee.next=4;break;case 3:throw ee.prev=3,Z=ee.catch(1),(O=this._openTelemetry)===null||O===void 0||O.completeSpan({span:l,status:2,message:"Failed to send meeting translation stop request. Error: ".concat(Z.message)}),(I=this._videosdkLogs)===null||I===void 0||I.pushLogs({logText:"Error stopTranslation() failed",logType:"ERROR",attributes:{error:Z.message}}),this._emitError({code:4044,message:Z.message}),Z;case 4:case"end":return ee.stop()}},v,this,[[1,3]])}));function u(){return o.apply(this,arguments)}return u})()},{key:"pauseAllConsumers",value:(function(){var o=(0,n.A)(h().mark(function v(s){var l,A,O,I,Z,ee,te,fe,Me,ke,$e,ot,Je;return h().wrap(function(qe){for(;;)switch(qe.prev=qe.next){case 0:return A=(l=this._openTelemetry)===null||l===void 0?void 0:l.trace({spanName:"Requesting to pause all media streams",attributes:{kind:s||"Stream kind not specified"}}),qe.prev=1,qe.next=2,this._socketRequest("pauseAllConsumers",{kind:s===void 0?"all":s});case 2:if(Z=qe.sent,ee=!1,!((Z==null||(O=Z.consumersWithIssues)===null||O===void 0?void 0:O.length)>0)){qe.next=6;break}return qe.next=3,this._socketRequest("pauseAllConsumers",{kind:s===void 0?"all":s});case 3:if(fe=qe.sent,(fe==null||(te=fe.consumersWithIssues)===null||te===void 0?void 0:te.length)!==0){qe.next=4;break}ee=!0,qe.next=5;break;case 4:return(Me=this._openTelemetry)===null||Me===void 0||Me.completeSpan({span:A,status:1,message:"Failed to pause all media streams"}),qe.abrupt("return");case 5:qe.next=7;break;case 6:ee=!0;case 7:ee&&((ke=this._openTelemetry)===null||ke===void 0||ke.traceAutoComplete({spanName:"Emitting paused-all-streams event",span:A,status:1}),this._eventEmitter.emit("ALL_CONSUMERS_PAUSED",{kind:s})),(I=this._openTelemetry)===null||I===void 0||I.completeSpan({span:A,status:1,message:"All media streams ".concat(s&&"of ".concat(s)," paused successfully")}),qe.next=9;break;case 8:qe.prev=8,Je=qe.catch(1),Te.error("pauseAllConsumers() | failed:%o",Je),($e=this._openTelemetry)===null||$e===void 0||$e.completeSpan({span:A,status:2,message:"Failed to pause all media streams. Error : ".concat(Je.message)}),(ot=this._videosdkLogs)===null||ot===void 0||ot.pushLogs({logText:"Error pauseAllConsumers() failed",logType:"ERROR",attributes:{error:Je.message}});case 9:case"end":return qe.stop()}},v,this,[[1,8]])}));function u(v){return o.apply(this,arguments)}return u})()},{key:"resumeAllConsumers",value:(function(){var o=(0,n.A)(h().mark(function v(s){var l,A,O,I,Z,ee,te,fe,Me,ke,$e,ot,Je;return h().wrap(function(qe){for(;;)switch(qe.prev=qe.next){case 0:return O=(l=this._openTelemetry)===null||l===void 0?void 0:l.trace({spanName:"Requesting to resume all media streams",attributes:{kind:s||"Stream kind not specified"}}),qe.prev=1,qe.next=2,this._socketRequest("resumeAllConsumers",{kind:s===void 0?"all":s});case 2:if(Z=qe.sent,ee=!1,!((Z==null||(I=Z.consumersWithIssues)===null||I===void 0?void 0:I.length)>0)){qe.next=6;break}return qe.next=3,this._socketRequest("resumeAllConsumers",{kind:s===void 0?"all":s});case 3:if(fe=qe.sent,(fe==null||(te=fe.consumersWithIssues)===null||te===void 0?void 0:te.length)!==0){qe.next=4;break}ee=!0,qe.next=5;break;case 4:return(Me=this._openTelemetry)===null||Me===void 0||Me.completeSpan({span:O,status:1,message:"Failed to resume all media streams"}),qe.abrupt("return");case 5:qe.next=7;break;case 6:ee=!0;case 7:ee&&((ke=this._openTelemetry)===null||ke===void 0||ke.traceAutoComplete({spanName:"Emitting resumed-all-streams event",span:O,status:1}),this._eventEmitter.emit("ALL_CONSUMERS_RESUMED",{kind:s})),qe.next=9;break;case 8:qe.prev=8,Je=qe.catch(1),Te.error("resumeAllConsumers() | failed:%o",Je),($e=this._openTelemetry)===null||$e===void 0||$e.completeSpan({span:O,status:2,message:"Failed to resume all media streams. Error : ".concat(Je.message)}),(ot=this._videosdkLogs)===null||ot===void 0||ot.pushLogs({logText:"Error resumeAllConsumers() failed",logType:"ERROR",attributes:{error:Je.message}});case 9:(A=this._openTelemetry)===null||A===void 0||A.completeSpan({span:O,status:1,message:"All media streams resumed successfully"});case 10:case"end":return qe.stop()}},v,this,[[1,8]])}));function u(v){return o.apply(this,arguments)}return u})()},{key:"startRecording",value:(function(){var o=(0,n.A)(h().mark(function v(s,l,A,O){var I,Z,ee,te,fe,Me;return h().wrap(function(ke){for(;;)switch(ke.prev=ke.next){case 0:return Te.debug("startRecording()"),Z=(I=this._openTelemetry)===null||I===void 0?void 0:I.trace({spanName:"Requesting to start meeting recording",attributes:{webhookUrl:s||"Webhook URL not specified",awsDirPath:l||"AWS directory path not specified",config:A?JSON.stringify(A):"Recording configuration not specified",transcription:O?JSON.stringify(O):"Transcription configuration not specified"}}),ke.prev=1,ke.next=2,this._socketRequest("startRecording",{webhookUrl:s,awsDirPath:l,config:A,transcription:O});case 2:(ee=this._openTelemetry)===null||ee===void 0||ee.completeSpan({span:Z,status:1,message:"Meeting recording start request sent successfully"}),ke.next=4;break;case 3:ke.prev=3,Me=ke.catch(1),Te.error("startRecording() | failed: %o",Me),(te=this._openTelemetry)===null||te===void 0||te.completeSpan({span:Z,status:2,message:"Failed to send meeting recording start request. Error: ".concat(Me.message)}),(fe=this._videosdkLogs)===null||fe===void 0||fe.pushLogs({logText:"Error in startRecording()",logType:"ERROR",attributes:{error:Me.message},dashboardLog:!0}),this._emitError({code:4011,message:Me.message});case 4:case"end":return ke.stop()}},v,this,[[1,3]])}));function u(v,s,l,A){return o.apply(this,arguments)}return u})()},{key:"stopRecording",value:(function(){var o=(0,n.A)(h().mark(function v(){var s,l,A,O,I,Z;return h().wrap(function(ee){for(;;)switch(ee.prev=ee.next){case 0:if(!this._closed){ee.next=1;break}return ee.abrupt("return");case 1:return Te.debug("stopRecording()"),l=(s=this._openTelemetry)===null||s===void 0?void 0:s.trace({spanName:"Requesting to stop meeting recording"}),ee.prev=2,ee.next=3,this._socketRequest("stopRecording",{});case 3:(A=this._openTelemetry)===null||A===void 0||A.completeSpan({span:l,status:1,message:"Meeting recording stop request sent successfully"}),ee.next=5;break;case 4:ee.prev=4,Z=ee.catch(2),(O=this._openTelemetry)===null||O===void 0||O.completeSpan({span:l,status:2,message:"Failed to send meeting recording stop request. Error: ".concat(Z.message)}),(I=this._videosdkLogs)===null||I===void 0||I.pushLogs({logText:"Error stopRecording() failed",logType:"ERROR",attributes:{error:Z.message}}),this._emitError({code:4012,message:Z.message});case 5:case"end":return ee.stop()}},v,this,[[2,4]])}));function u(){return o.apply(this,arguments)}return u})()},{key:"startLivestream",value:(function(){var o=(0,n.A)(h().mark(function v(s,l){var A,O,I,Z,ee,te;return h().wrap(function(fe){for(;;)switch(fe.prev=fe.next){case 0:return Te.debug("startLivestream()"),O=(A=this._openTelemetry)===null||A===void 0?void 0:A.trace({spanName:"Requesting to start RTMP livestreaming",attributes:{outputs:s?JSON.stringify(s):"Outputs not specified",config:l?JSON.stringify(l):"Livestream config not specified"}}),fe.prev=1,fe.next=2,this._socketRequest("startLivestream",{outputs:s,config:l});case 2:(I=this._openTelemetry)===null||I===void 0||I.completeSpan({span:O,status:1,message:"RTMP Live streaming start request sent successfully"}),fe.next=4;break;case 3:fe.prev=3,te=fe.catch(1),(Z=this._openTelemetry)===null||Z===void 0||Z.completeSpan({span:O,status:2,message:"Failed to send RTMP live streaming start request. Error: ".concat(te.message)}),(ee=this._videosdkLogs)===null||ee===void 0||ee.pushLogs({logText:"Error startLivestream() failed",logType:"ERROR",attributes:{error:te.message}}),this._emitError({code:4013,message:te.message});case 4:case"end":return fe.stop()}},v,this,[[1,3]])}));function u(v,s){return o.apply(this,arguments)}return u})()},{key:"stopLivestream",value:(function(){var o=(0,n.A)(h().mark(function v(){var s,l,A,O,I,Z;return h().wrap(function(ee){for(;;)switch(ee.prev=ee.next){case 0:return Te.debug("stopLivestream()"),l=(s=this._openTelemetry)===null||s===void 0?void 0:s.trace({spanName:"Requesting to stop RTMP livestreaming"}),ee.prev=1,ee.next=2,this._socketRequest("stopLivestream",{});case 2:(A=this._openTelemetry)===null||A===void 0||A.completeSpan({span:l,status:1,message:"RTMP Live streaming stop request sent successfully"}),ee.next=4;break;case 3:ee.prev=3,Z=ee.catch(1),(O=this._videosdkLogs)===null||O===void 0||O.pushLogs({logText:"Error stopLivestream() failed",logType:"ERROR",attributes:{error:Z.message}}),(I=this._openTelemetry)===null||I===void 0||I.completeSpan({span:l,status:2,message:"Failed to send RTMP live streaming stop request. Error : ".concat(Z.message)}),this._emitError({code:4014,message:Z.message});case 4:case"end":return ee.stop()}},v,this,[[1,3]])}));function u(){return o.apply(this,arguments)}return u})()},{key:"startHls",value:(function(){var o=(0,n.A)(h().mark(function v(s,l){var A,O,I,Z,ee,te;return h().wrap(function(fe){for(;;)switch(fe.prev=fe.next){case 0:return s=s||{},l=l||{},Te.debug("startHls()"),O=(A=this._openTelemetry)===null||A===void 0?void 0:A.trace({spanName:"Requesting to start HLS streaming",attributes:{config:s?JSON.stringify(s):"HLS configuration not specified",transcription:l?JSON.stringify(l):"Transcription configuration not specified"}}),fe.prev=1,fe.next=2,this._socketRequest("startHls",{config:s,transcription:l});case 2:(I=this._openTelemetry)===null||I===void 0||I.completeSpan({span:O,status:1,message:"HLS streaming start request sent successfully"}),fe.next=4;break;case 3:fe.prev=3,te=fe.catch(1),(Z=this._videosdkLogs)===null||Z===void 0||Z.pushLogs({logText:"Error startHls() failed",logType:"ERROR",attributes:{error:te.message}}),(ee=this._openTelemetry)===null||ee===void 0||ee.completeSpan({span:O,status:2,message:"Failed to send HLS streaming start request. Error : ".concat(te.message)}),this._emitError({code:4016,message:te.message}),Te.error("startHls() | failed:%o",te);case 4:case"end":return fe.stop()}},v,this,[[1,3]])}));function u(v,s){return o.apply(this,arguments)}return u})()},{key:"stopHls",value:(function(){var o=(0,n.A)(h().mark(function v(){var s,l,A,O,I,Z;return h().wrap(function(ee){for(;;)switch(ee.prev=ee.next){case 0:return Te.debug("stopHls()"),l=(s=this._openTelemetry)===null||s===void 0?void 0:s.trace({spanName:"Requesting to stop HLS streaming"}),ee.prev=1,ee.next=2,this._socketRequest("stopHls",{});case 2:(A=this._openTelemetry)===null||A===void 0||A.completeSpan({span:l,status:1,message:"HLS streaming stop request sent successfully"}),ee.next=4;break;case 3:ee.prev=3,Z=ee.catch(1),(O=this._videosdkLogs)===null||O===void 0||O.pushLogs({logText:"Error stopHls() failed",logType:"ERROR",attributes:{error:Z.message}}),(I=this._openTelemetry)===null||I===void 0||I.completeSpan({span:l,status:2,message:"Failed to send HLS streaming stop request. Error ".concat(Z.message)}),this._emitError({code:4017,message:Z.message});case 4:case"end":return ee.stop()}},v,this,[[1,3]])}));function u(){return o.apply(this,arguments)}return u})()},{key:"startWhiteboard",value:(function(){var o=(0,n.A)(h().mark(function v(){var s,l,A,O,I;return h().wrap(function(Z){for(;;)switch(Z.prev=Z.next){case 0:return Te.debug("startWhiteboard()"),l=(s=this._openTelemetry)===null||s===void 0?void 0:s.trace({spanName:"Requesting to start whiteboard"}),Z.prev=1,Z.next=2,this._socketRequest("startWhiteboard",{version:"v2"});case 2:(A=this._openTelemetry)===null||A===void 0||A.completeSpan({span:l,status:1,message:"Whiteboard start request sent successfully"}),Z.next=4;break;case 3:Z.prev=3,I=Z.catch(1),Te.error("startWhiteboard() | failed:%o",I),(O=this._openTelemetry)===null||O===void 0||O.completeSpan({span:l,status:2,message:"Failed to send whiteboard start request. Error: ".concat(I.message)}),this._emitError({code:3021,message:I.message});case 4:case"end":return Z.stop()}},v,this,[[1,3]])}));function u(){return o.apply(this,arguments)}return u})()},{key:"stopWhiteboard",value:(function(){var o=(0,n.A)(h().mark(function v(){var s,l,A,O,I;return h().wrap(function(Z){for(;;)switch(Z.prev=Z.next){case 0:return Te.debug("stopWhiteboard()"),l=(s=this._openTelemetry)===null||s===void 0?void 0:s.trace({spanName:"Requesting to stop whiteboard"}),Z.prev=1,Z.next=2,this._socketRequest("stopWhiteboard",{});case 2:(A=this._openTelemetry)===null||A===void 0||A.completeSpan({span:l,status:1,message:"Whiteboard stop request sent successfully"}),Z.next=4;break;case 3:Z.prev=3,I=Z.catch(1),Te.error("stopWhiteboard() | failed:%o",I),(O=this._openTelemetry)===null||O===void 0||O.completeSpan({span:l,status:2,message:"Failed to send whiteboard stop request. Error: ".concat(I.message)}),this._emitError({code:3022,message:I.message});case 4:case"end":return Z.stop()}},v,this,[[1,3]])}));function u(){return o.apply(this,arguments)}return u})()},{key:"joinCharacter",value:(function(){var o=(0,n.A)(h().mark(function v(s){var l,A,O,I,Z,ee;return h().wrap(function(te){for(;;)switch(te.prev=te.next){case 0:return Te.debug("joinCharacter()"),O=(l=this._openTelemetry)===null||l===void 0?void 0:l.trace({spanName:"joinCharacter() Start",attributes:{config:s?JSON.stringify(s):"config Not Specify"}}),te.prev=1,te.next=2,this._socketRequest("joinCharacter",{config:s});case 2:return te.abrupt("return",te.sent);case 3:return te.prev=3,ee=te.catch(1),Te.error("joinCharacter() | failed:%o",ee),(I=this._openTelemetry)===null||I===void 0||I.completeSpan({span:O,status:2,message:"joinCharacter() failed"}),(Z=this._videosdkLogs)===null||Z===void 0||Z.pushLogs({logText:"Error joinCharacter() failed",logType:"ERROR",attributes:{error:ee.message}}),this._emitError({code:4033,message:ee.message}),(A=this._openTelemetry)===null||A===void 0||A.completeSpan({span:O,status:1,message:"joinCharacter() End"}),te.abrupt("return",!1);case 4:case"end":return te.stop()}},v,this,[[1,3]])}));function u(v){return o.apply(this,arguments)}return u})()},{key:"removeCharacter",value:(function(){var o=(0,n.A)(h().mark(function v(s){var l,A,O,I,Z,ee;return h().wrap(function(te){for(;;)switch(te.prev=te.next){case 0:return Te.debug("removeCharacter()"),O=(l=this._openTelemetry)===null||l===void 0?void 0:l.trace({spanName:"removeCharacter() Start"}),te.prev=1,te.next=2,this._socketRequest("leaveCharacter",{config:s});case 2:te.next=4;break;case 3:return te.prev=3,ee=te.catch(1),Te.error("removeCharacter() | failed:%o",ee),(I=this._openTelemetry)===null||I===void 0||I.completeSpan({span:O,status:2,message:"removeCharacter() failed"}),(Z=this._videosdkLogs)===null||Z===void 0||Z.pushLogs({logText:"Error removeCharacter() failed",logType:"ERROR",attributes:{error:ee.message}}),this._emitError({code:4034,message:ee.message}),te.abrupt("return",!1);case 4:return(A=this._openTelemetry)===null||A===void 0||A.completeSpan({span:O,status:1,message:"removeCharacter() End"}),te.abrupt("return",!0);case 5:case"end":return te.stop()}},v,this,[[1,3]])}));function u(v){return o.apply(this,arguments)}return u})()},{key:"sendCharacterMessage",value:(function(){var o=(0,n.A)(h().mark(function v(s){var l,A,O;return h().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:return l=s.interactionId,A=s.text,Te.debug("sendCharacterMessage()"),I.prev=1,I.next=2,this._socketRequest("sendCharacterMessage",{interactionId:l,text:A});case 2:I.next=4;break;case 3:I.prev=3,O=I.catch(1),Te.error("sendCharacterMessage() | failed:%o",O),this._emitError({code:4035,message:O.message});case 4:case"end":return I.stop()}},v,this,[[1,3]])}));function u(v){return o.apply(this,arguments)}return u})()},{key:"interruptCharacter",value:(function(){var o=(0,n.A)(h().mark(function v(s){var l,A;return h().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return l=s.interactionId,Te.debug("interruptCharacter()"),O.prev=1,O.next=2,this._socketRequest("interruptCharacter",{interactionId:l});case 2:O.next=4;break;case 3:O.prev=3,A=O.catch(1),Te.error("interruptCharacter() | failed:%o",A),this._emitError({code:4036,message:A.message});case 4:case"end":return O.stop()}},v,this,[[1,3]])}));function u(v){return o.apply(this,arguments)}return u})()},{key:"switchTo",value:(function(){var o=(0,n.A)(h().mark(function v(s){var l,A,O,I,Z,ee,te,fe,Me;return h().wrap(function(ke){for(;;)switch(ke.prev=ke.next){case 0:return A=s.meetingId,O=s.participantId,I=s.token,Z=(l=this._openTelemetry)===null||l===void 0?void 0:l.trace({spanName:"Requesting to switch meeting",attributes:{"peer.id":O||"Participant ID not specified",meetingId:A||"Meeting ID not specified"}}),ke.prev=1,ke.next=2,this._socketRequest("switchToMeeting",{meetingId:A,participantId:O,secret:I||this._secret});case 2:(ee=this._openTelemetry)===null||ee===void 0||ee.completeSpan({span:Z,status:1,message:"Meeting switch request sent successfully"}),ke.next=4;break;case 3:ke.prev=3,Me=ke.catch(1),(te=this._openTelemetry)===null||te===void 0||te.completeSpan({span:Z,status:2,message:"Failed to send meeting switch request. Error: ".concat(Me.message)}),(fe=this._videosdkLogs)===null||fe===void 0||fe.pushLogs({logText:"Error in switchTo()",logType:"ERROR",attributes:{error:Me.message},dashboardLog:!0});case 4:case"end":return ke.stop()}},v,this,[[1,3]])}));function u(v){return o.apply(this,arguments)}return u})()},{key:"pinStateChange",value:(function(){var o=(0,n.A)(h().mark(function v(s){var l,A,O,I,Z,ee,te,fe;return h().wrap(function(Me){for(;;)switch(Me.prev=Me.next){case 0:return A=s.peerId,O=s.state,I=(l=this._openTelemetry)===null||l===void 0?void 0:l.trace({spanName:"Requesting to change pin state",attributes:{state:O?JSON.stringify(O):"State not specified"}}),Me.prev=1,Me.next=2,this._socketRequest("pinStateChanged",{peerId:A,state:O});case 2:(Z=this._openTelemetry)===null||Z===void 0||Z.completeSpan({span:I,status:1,message:"Pin state change request sent successfully"}),Me.next=4;break;case 3:Me.prev=3,fe=Me.catch(1),Te.error("pinStateChange() | failed: %o",fe),(ee=this._openTelemetry)===null||ee===void 0||ee.completeSpan({span:I,status:2,message:"Failed to send pin state change request. Error: ".concat(fe.message)}),(te=this._videosdkLogs)===null||te===void 0||te.pushLogs({logText:"Error in pinStateChange()",logType:"ERROR",attributes:{error:fe.message},dashboardLog:!0});case 4:case"end":return Me.stop()}},v,this,[[1,3]])}));function u(v){return o.apply(this,arguments)}return u})()},{key:"startVideo",value:(function(){var o=(0,n.A)(h().mark(function v(s){var l,A,O,I;return h().wrap(function(Z){for(;;)switch(Z.prev=Z.next){case 0:return A=s.link,Te.debug("startVideo()"),(l=this._videosdkLogs)===null||l===void 0||l.pushLogs({logText:"startVideo() Calling",logType:"INFO"}),Z.prev=1,Z.next=2,this._socketRequest("startVideo",{link:A});case 2:Z.next=4;break;case 3:Z.prev=3,I=Z.catch(1),(O=this._videosdkLogs)===null||O===void 0||O.pushLogs({logText:"Error startVideo() failed",logType:"ERROR",attributes:{error:I.message}}),Te.error("startVideo() | failed:%o",I),this._emitError({code:3023,message:I.message});case 4:case"end":return Z.stop()}},v,this,[[1,3]])}));function u(v){return o.apply(this,arguments)}return u})()},{key:"stopVideo",value:(function(){var o=(0,n.A)(h().mark(function v(){var s,l,A;return h().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return Te.debug("stopVideo()"),(s=this._videosdkLogs)===null||s===void 0||s.pushLogs({logText:"stopVideo() Calling",logType:"INFO"}),O.prev=1,O.next=2,this._socketRequest("stopVideo",{});case 2:O.next=4;break;case 3:O.prev=3,A=O.catch(1),(l=this._videosdkLogs)===null||l===void 0||l.pushLogs({logText:"Error stopVideo() failed",logType:"ERROR",attributes:{error:A.message}}),Te.error("stopVideo() | failed:%o",A),this._emitError({code:3024,message:A.message});case 4:case"end":return O.stop()}},v,this,[[1,3]])}));function u(){return o.apply(this,arguments)}return u})()},{key:"pauseVideo",value:(function(){var o=(0,n.A)(h().mark(function v(s){var l;return h().wrap(function(A){for(;;)switch(A.prev=A.next){case 0:return Te.debug("pauseVideo()"),A.prev=1,A.next=2,this._socketRequest("pauseVideo",{currentTime:s});case 2:A.next=4;break;case 3:A.prev=3,l=A.catch(1),Te.error("pauseVideo() | failed:%o",l),this._emitError({code:3025,message:l.message});case 4:case"end":return A.stop()}},v,this,[[1,3]])}));function u(v){return o.apply(this,arguments)}return u})()},{key:"resumeVideo",value:(function(){var o=(0,n.A)(h().mark(function v(){var s;return h().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return Te.debug("resumeVideo()"),l.prev=1,l.next=2,this._socketRequest("resumeVideo",{});case 2:l.next=4;break;case 3:l.prev=3,s=l.catch(1),Te.error("resumeVideo() | failed:%o",s),this._emitError({code:3026,message:s.message});case 4:case"end":return l.stop()}},v,this,[[1,3]])}));function u(){return o.apply(this,arguments)}return u})()},{key:"seekVideo",value:(function(){var o=(0,n.A)(h().mark(function v(s){var l;return h().wrap(function(A){for(;;)switch(A.prev=A.next){case 0:return Te.debug("seekVideo()"),A.prev=1,A.next=2,this._socketRequest("seekVideo",{currentTime:s});case 2:A.next=4;break;case 3:A.prev=3,l=A.catch(1),Te.error("seekVideo() | failed:%o",l),this._emitError({code:3031,message:l.message});case 4:case"end":return A.stop()}},v,this,[[1,3]])}));function u(v){return o.apply(this,arguments)}return u})()},{key:"requestMediaRelay",value:(function(){var o=(0,n.A)(h().mark(function v(s,l,A){var O,I,Z,ee,te,fe;return h().wrap(function(Me){for(;;)switch(Me.prev=Me.next){case 0:return Te.debug("requestMediaRelay()"),I=(O=this._openTelemetry)===null||O===void 0?void 0:O.trace({spanName:"Requesting to send media relay request",attributes:{meetingId:s||"Meeting ID not specified",kinds:A?JSON.stringify(A):"Kinds not specified"}}),Me.prev=1,Me.next=2,this._socketRequest("mediaRelayRequestSent",{meetingId:s,secret:l??this._secret,kinds:A??["audio","video","share","share_audio"]});case 2:(Z=this._openTelemetry)===null||Z===void 0||Z.completeSpan({span:I,status:1,message:"Media relay request sent successfully"}),Me.next=4;break;case 3:Me.prev=3,fe=Me.catch(1),Te.error("requestMediaRelay() | failed:%o",fe),(ee=this._openTelemetry)===null||ee===void 0||ee.completeSpan({span:I,status:2,message:"Failed to send media relay request. Error: ".concat(fe.message)}),(te=this._videosdkLogs)===null||te===void 0||te.pushLogs({logText:"Error in requestMediaRelay()",logType:"ERROR",attributes:{error:fe.message}});case 4:case"end":return Me.stop()}},v,this,[[1,3]])}));function u(v,s,l){return o.apply(this,arguments)}return u})()},{key:"handleRelayRequestResponse",value:(function(){var o=(0,n.A)(h().mark(function v(s){var l,A,O,I,Z,ee,te,fe,Me;return h().wrap(function(ke){for(;;)switch(ke.prev=ke.next){case 0:return A=s.decision,O=s.peerId,I=s.meetingId,Te.debug("handleRelayRequestResponse()"),Z=(l=this._openTelemetry)===null||l===void 0?void 0:l.trace({spanName:"Requesting to respond to media relay request",attributes:{peerId:O||"Peer ID not specified",meetingId:I||"Meeting ID not specified",decision:A||"Decision not specified"}}),ke.prev=1,ke.next=2,this._socketRequest("respondToMediaRelayRequest",{decision:A,decidedBy:this._peerId,peerId:O,meetingId:I});case 2:(ee=this._openTelemetry)===null||ee===void 0||ee.completeSpan({span:Z,status:1,message:"Media relay response request sent successfully"}),ke.next=4;break;case 3:ke.prev=3,Me=ke.catch(1),Te.error("handleRelayRequestResponse() | failed:%o",Me),(te=this._openTelemetry)===null||te===void 0||te.completeSpan({span:Z,status:2,message:"Failed to send media relay response request. Error: ".concat(Me.message)}),(fe=this._videosdkLogs)===null||fe===void 0||fe.pushLogs({logText:"Error in handleRelayRequestResponse()",logType:"ERROR",attributes:{error:Me.message},dashboardLog:!0});case 4:case"end":return ke.stop()}},v,this,[[1,3]])}));function u(v){return o.apply(this,arguments)}return u})()},{key:"stopMediaRelay",value:(function(){var o=(0,n.A)(h().mark(function v(s){var l,A,O,I,Z,ee;return h().wrap(function(te){for(;;)switch(te.prev=te.next){case 0:return Te.debug("stopMediaRelay()"),A=(l=this._openTelemetry)===null||l===void 0?void 0:l.trace({spanName:"Requesting to stop media relay",attributes:{meetingId:s||"Meeting ID not specified"}}),te.prev=1,te.next=2,this._socketRequest("mediaRelayRequestStop",{meetingId:s});case 2:(O=this._openTelemetry)===null||O===void 0||O.completeSpan({span:A,status:1,message:"Media relay stop request sent successfully"}),te.next=4;break;case 3:te.prev=3,ee=te.catch(1),Te.error("stopMediaRelay() | failed:%o",ee),(I=this._openTelemetry)===null||I===void 0||I.completeSpan({span:A,status:2,message:"Failed to send media relay stop request. Error: ".concat(ee.message)}),(Z=this._videosdkLogs)===null||Z===void 0||Z.pushLogs({logText:"Error in stopMediaRelay()",logType:"ERROR",attributes:{error:ee.message},dashboardLog:!0});case 4:case"end":return te.stop()}},v,this,[[1,3]])}));function u(v){return o.apply(this,arguments)}return u})()},{key:"enableRelayMedia",value:(function(){var o=(0,n.A)(h().mark(function v(s,l){var A,O;return h().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:return I.prev=0,I.next=1,this._socketRequest("enableRelayMedia",{meetingId:s,kind:l});case 1:I.next=3;break;case 2:I.prev=2,O=I.catch(0),(A=this._videosdkLogs)===null||A===void 0||A.pushLogs({logText:"Error enableRelayMedia() failed",logType:"ERROR",attributes:{error:O.message}});case 3:case"end":return I.stop()}},v,this,[[0,2]])}));function u(v,s){return o.apply(this,arguments)}return u})()},{key:"disableRelayMedia",value:(function(){var o=(0,n.A)(h().mark(function v(s,l){var A,O;return h().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:return I.prev=0,I.next=1,this._socketRequest("disableRelayMedia",{meetingId:s,kind:l});case 1:I.next=3;break;case 2:I.prev=2,O=I.catch(0),(A=this._videosdkLogs)===null||A===void 0||A.pushLogs({logText:"Error disableRelayMedia() failed",logType:"ERROR",attributes:{error:O.message}});case 3:case"end":return I.stop()}},v,this,[[0,2]])}));function u(v,s){return o.apply(this,arguments)}return u})()},{key:"enableAdaptiveSubscription",value:(function(){var o=(0,n.A)(h().mark(function v(){var s,l,A,O,I,Z;return h().wrap(function(ee){for(;;)switch(ee.prev=ee.next){case 0:return Te.debug("enableAdaptiveSubscription()"),l=(s=this._openTelemetry)===null||s===void 0?void 0:s.trace({spanName:"Requesting to enable adaptive subscription"}),ee.prev=1,ee.next=2,this._socketRequest("enableAdaptiveSubscription");case 2:(A=this._openTelemetry)===null||A===void 0||A.completeSpan({span:l,status:1,message:"Adaptive subscription enable request sent successfully"}),ee.next=4;break;case 3:ee.prev=3,Z=ee.catch(1),Te.error("enableAdaptiveSubscription() | failed:%o",Z),(O=this._openTelemetry)===null||O===void 0||O.completeSpan({span:l,status:2,message:"Failed to send adaptive subscription enable request. Error: ".concat(Z.message)}),(I=this._videosdkLogs)===null||I===void 0||I.pushLogs({logText:"Error in enableAdaptiveSubscription()",logType:"ERROR",attributes:{error:Z.message},dashboardLog:!0});case 4:case"end":return ee.stop()}},v,this,[[1,3]])}));function u(){return o.apply(this,arguments)}return u})()},{key:"disableAdaptiveSubscription",value:(function(){var o=(0,n.A)(h().mark(function v(){var s,l,A,O,I,Z;return h().wrap(function(ee){for(;;)switch(ee.prev=ee.next){case 0:return Te.debug("disableAdaptiveSubscription()"),l=(s=this._openTelemetry)===null||s===void 0?void 0:s.trace({spanName:"Requesting to disable adaptive subscription"}),ee.prev=1,ee.next=2,this._socketRequest("disableAdaptiveSubscription");case 2:(A=this._openTelemetry)===null||A===void 0||A.completeSpan({span:l,status:1,message:"Adaptive subscription disable request sent successfully"}),ee.next=4;break;case 3:ee.prev=3,Z=ee.catch(1),Te.error("disableAdaptiveSubscription() | failed:%o",Z),(O=this._openTelemetry)===null||O===void 0||O.completeSpan({span:l,status:2,message:"Failed to send adaptive subscription disable request. Error: ".concat(Z.message)}),(I=this._videosdkLogs)===null||I===void 0||I.pushLogs({logText:"Error in disableAdaptiveSubscription()",logType:"ERROR",attributes:{error:Z.message},dashboardLog:!0});case 4:case"end":return ee.stop()}},v,this,[[1,3]])}));function u(){return o.apply(this,arguments)}return u})()},{key:"enablePeerMic",value:(function(){var o=(0,n.A)(h().mark(function v(s){var l,A,O,I,Z,ee;return h().wrap(function(te){for(;;)switch(te.prev=te.next){case 0:return Te.debug("enablePeerMic()"),A=(l=this._openTelemetry)===null||l===void 0?void 0:l.trace({spanName:"Requesting to enable peer(".concat(s,") microphone"),attributes:{peerId:s||"Peer ID not specified"}}),te.prev=1,te.next=2,this._socketRequest("enablePeerMic",{peerId:s});case 2:(O=this._openTelemetry)===null||O===void 0||O.completeSpan({span:A,status:1,message:"Peer microphone enable request sent successfully"}),te.next=4;break;case 3:te.prev=3,ee=te.catch(1),Te.error("enablePeerMic() | failed:%o",ee),(I=this._openTelemetry)===null||I===void 0||I.completeSpan({span:A,status:2,message:"Failed to send peer microphone enable request. Error: ".concat(ee.message)}),(Z=this._videosdkLogs)===null||Z===void 0||Z.pushLogs({logText:"Error in enablePeerMic()",logType:"ERROR",attributes:{error:ee.message}});case 4:case"end":return te.stop()}},v,this,[[1,3]])}));function u(v){return o.apply(this,arguments)}return u})()},{key:"disablePeerMic",value:(function(){var o=(0,n.A)(h().mark(function v(s){var l,A,O,I,Z,ee;return h().wrap(function(te){for(;;)switch(te.prev=te.next){case 0:return Te.debug("disablePeerMic()"),A=(l=this._openTelemetry)===null||l===void 0?void 0:l.trace({spanName:"Requesting to disable peer(".concat(s,") microphone"),attributes:{peerId:s||"Peer ID not specified"}}),te.prev=1,te.next=2,this._socketRequest("disablePeerMic",{peerId:s});case 2:(O=this._openTelemetry)===null||O===void 0||O.completeSpan({span:A,status:1,message:"Peer microphone disable request sent successfully"}),te.next=4;break;case 3:te.prev=3,ee=te.catch(1),Te.error("disablePeerMic() | failed:%o",ee),(I=this._openTelemetry)===null||I===void 0||I.completeSpan({span:A,status:2,message:"Failed to send peer microphone disable request. Error: ".concat(ee.message)}),(Z=this._videosdkLogs)===null||Z===void 0||Z.pushLogs({logText:"Error in disablePeerMic()",logType:"ERROR",attributes:{error:ee.message}});case 4:case"end":return te.stop()}},v,this,[[1,3]])}));function u(v){return o.apply(this,arguments)}return u})()},{key:"consumeWebcamStreams",value:(function(){var o=(0,n.A)(h().mark(function v(s){var l,A,O;return h().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:if(!this._closed){I.next=1;break}return I.abrupt("return");case 1:return Te.debug("consumeWebcamStreams()"),(l=this._videosdkLogs)===null||l===void 0||l.pushLogs({logText:"consumeWebcamStreams() Calling",logType:"INFO",attributes:{peerId:s}}),I.prev=2,I.next=3,this._socketRequest("consumeVideoStreams",{peerId:s});case 3:I.next=5;break;case 4:I.prev=4,O=I.catch(2),(A=this._videosdkLogs)===null||A===void 0||A.pushLogs({logText:"Error consumeWebcamStreams() failed",logType:"ERROR",attributes:{error:O.message}}),Te.error("consumeWebcamStreams() | failed:%o",O);case 5:case"end":return I.stop()}},v,this,[[2,4]])}));function u(v){return o.apply(this,arguments)}return u})()},{key:"consumeMicStreams",value:(function(){var o=(0,n.A)(h().mark(function v(s){var l,A,O;return h().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:return Te.debug("consumeMicStreams()"),(l=this._videosdkLogs)===null||l===void 0||l.pushLogs({logText:"consumeMicStreams() Calling",logType:"INFO",attributes:{peerId:s}}),I.prev=1,I.next=2,this._socketRequest("consumeAudioStreams",{peerId:s});case 2:I.next=4;break;case 3:I.prev=3,O=I.catch(1),(A=this._videosdkLogs)===null||A===void 0||A.pushLogs({logText:"Error consumeMicStreams() failed",logType:"ERROR",attributes:{error:O.message}}),Te.error("consumeMicStreams() | failed:%o",O);case 4:case"end":return I.stop()}},v,this,[[1,3]])}));function u(v){return o.apply(this,arguments)}return u})()},{key:"stopConsumingMicStreams",value:(function(){var o=(0,n.A)(h().mark(function v(s){var l,A,O;return h().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:if(!this._closed){I.next=1;break}return I.abrupt("return");case 1:return Te.debug("stopConsumingAudioStreams()"),I.prev=2,I.next=3,this._socketRequest("stopConsumingAudioStreams",{peerId:s});case 3:(l=this._videosdkLogs)===null||l===void 0||l.pushLogs({logText:"stopConsumingAudioStreams() Calling",logType:"INFO",attributes:{peerId:s}}),I.next=5;break;case 4:I.prev=4,O=I.catch(2),(A=this._videosdkLogs)===null||A===void 0||A.pushLogs({logText:"Error stopConsumingMicStreams() failed",logType:"ERROR",attributes:{error:O.message}}),Te.error("stopConsumingMicStreams() | failed:%o",O);case 5:case"end":return I.stop()}},v,this,[[2,4]])}));function u(v){return o.apply(this,arguments)}return u})()},{key:"stopConsumingWebcamStreams",value:(function(){var o=(0,n.A)(h().mark(function v(s){var l,A,O;return h().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:return Te.debug("stopConsumingWebcamStreams()"),(l=this._videosdkLogs)===null||l===void 0||l.pushLogs({logText:"stopConsumingWebcamStreams() Calling",logType:"INFO",attributes:{peerId:s}}),I.prev=1,I.next=2,this._socketRequest("stopConsumingVideoStreams",{peerId:s});case 2:I.next=4;break;case 3:I.prev=3,O=I.catch(1),(A=this._videosdkLogs)===null||A===void 0||A.pushLogs({logText:"Error stopConsumingWebcamStreams() failed",logType:"ERROR",attributes:{error:O.message}}),Te.error("stopConsumingWebcamStreams() | failed:%o",O);case 4:case"end":return I.stop()}},v,this,[[1,3]])}));function u(v){return o.apply(this,arguments)}return u})()},{key:"changeMode",value:(function(){var o=(0,n.A)(h().mark(function v(s){var l,A=this,O,I,Z,ee,te,fe,Me,ke,$e,ot,Je,qe,Ct,gt,Et,it,Pt,pt,Ge,At,cr,qt,Jt,Gt,ht,Zt,mr,rr,bt;return h().wrap(function(Ze){for(;;)switch(Ze.prev=Ze.next){case 0:if(O=(l=this._openTelemetry)===null||l===void 0?void 0:l.trace({spanName:"Changing mode to ".concat(s)}),I=this._mode,Ze.prev=1,I!==s){Ze.next=2;break}throw(te=this._openTelemetry)===null||te===void 0||te.completeSpan({span:O,status:2,message:"Participant is already in ".concat(s," mode")}),(fe=this._videosdkLogs)===null||fe===void 0||fe.pushLogs({logText:"You are already in ".concat(s," mode"),logType:"INFO"}),new Error("You are already in ".concat(s," mode"));case 2:if(Me=(function(){var Ie=(0,n.A)(h().mark(function Le(Lt,Kt){return h().wrap(function(Yt){for(;;)switch(Yt.prev=Yt.next){case 0:return Yt.next=1,A._socketRequest("createWebRtcTransport",{preferredProtocol:A._preferredProtocol,producing:Lt,consuming:Kt,sctpCapabilities:A._mediasoupDevice.sctpCapabilities});case 1:return Yt.abrupt("return",Yt.sent);case 2:case"end":return Yt.stop()}},Le)}));return function(Lt,Kt){return Ie.apply(this,arguments)}})(),!(0,Jr.kR)(s)){Ze.next=10;break}return this._consume=!0,this._produce=!0,this._mode=s,this._mediasoupDevice=new jr.pF({handlerName:this._handlerName}),Ct=(ke=this._openTelemetry)===null||ke===void 0?void 0:ke.trace({spanName:"Loading device capabilities",span:O}),Ze.next=3,this._socketRequest("getRouterRtpCapabilities");case 3:return gt=Ze.sent,gt.headerExtensions=($e=gt.headerExtensions)===null||$e===void 0?void 0:$e.filter(function(Ie){return Ie.uri!="urn:3gpp:video-orientation"}),Ze.next=4,this._mediasoupDevice.load({routerRtpCapabilities:gt});case 4:if((ot=this._openTelemetry)===null||ot===void 0||ot.completeSpan({span:Ct,status:1,attributes:{routerRtpCapabilities:JSON.stringify(gt).toString()},message:"Device Capabilities Loaded"}),!this._produce){Ze.next=6;break}return Ze.next=5,Me(!0,!1);case 5:Et=Ze.sent,this.createProducerTransport(Et,O);case 6:if(!(I!==Jr.nI.RECV_ONLY&&this._consume)){Ze.next=8;break}return Ze.next=7,Me(!1,!0);case 7:it=Ze.sent,this.createConsumerTransport(it,O);case 8:return Z=(Je=this._openTelemetry)===null||Je===void 0?void 0:Je.trace({spanName:"Requesting to change mode",span:O,attributes:{mode:s}}),Ze.next=9,this._socketRequest("changeMode",{mode:s});case 9:(qe=this._openTelemetry)===null||qe===void 0||qe.completeSpan({span:Z,status:1,message:"Change Mode request sent successfully"}),this._produce&&(Fe.dispatch(vo({canSendMic:this._mediasoupDevice.canProduce("audio"),canSendWebcam:this._mediasoupDevice.canProduce("video")})),this._micEnabled?this.enableMic(this.customMicrophoneAudioTrack,O):this.customMicrophoneAudioTrack&&this.customMicrophoneAudioTrack.getTracks().forEach(function(Ie){Ie.stop()}),this._webcamEnabled?this.enableWebcam(this.customCameraVideoTrack,O):this.customCameraVideoTrack&&this.customCameraVideoTrack.getTracks().forEach(function(Ie){Ie.stop()}),this.enableChatDataProducer()),window.SHOW_INFO&&(Pt=Fe.getState(),pt=Pt.me,Fe.dispatch(Ti(pt.id))),Ze.next=17;break;case 10:if(!((0,Jr.kR)(I)&&s===Jr.nI.RECV_ONLY)){Ze.next=12;break}return this._produce=!1,this._mode=s,this._openTelemetry.traceAutoComplete({spanName:"Closing Media Transports and Disposing Media Tracks",span:O,status:1}),this._closeProducersAndTransport(),Z=(Ge=this._openTelemetry)===null||Ge===void 0?void 0:Ge.trace({spanName:"Requesting to change mode",span:O,attributes:{mode:s}}),Ze.next=11,this._socketRequest("changeMode",{mode:s});case 11:(At=this._openTelemetry)===null||At===void 0||At.completeSpan({span:Z,status:1,message:"Change Mode request sent successfully"}),Ze.next=17;break;case 12:if(!((0,Jr.wZ)(I)&&s===Jr.nI.RECV_ONLY)){Ze.next=15;break}return this._consume=!0,this._mode=s,Ze.next=13,this._setupWebrtcTransport(O);case 13:return Z=(cr=this._openTelemetry)===null||cr===void 0?void 0:cr.trace({spanName:"Requesting to change mode",span:O,attributes:{mode:s}}),Ze.next=14,this._socketRequest("changeMode",{mode:s});case 14:(qt=this._openTelemetry)===null||qt===void 0||qt.completeSpan({span:Z,status:1,message:"Change Mode request sent successfully"}),window.SHOW_INFO&&(Jt=Fe.getState(),Gt=Jt.me,Fe.dispatch(Ti(Gt.id))),Ze.next=17;break;case 15:if(!(0,Jr.wZ)(s)){Ze.next=17;break}return Z=(ht=this._openTelemetry)===null||ht===void 0?void 0:ht.trace({spanName:"Requesting to change mode",span:O,attributes:{mode:s}}),Ze.next=16,this._socketRequest("changeMode",{mode:s});case 16:(Zt=this._openTelemetry)===null||Zt===void 0||Zt.completeSpan({span:Z,status:1,message:"Change Mode request sent successfully"}),this._consume=!1,this._produce=!1,this._mode=s,this._openTelemetry.traceAutoComplete({spanName:"Closing Media Transports",span:O,status:1}),this._dataConsumers.clear(),this._closeTransports();case 17:(ee=this._openTelemetry)===null||ee===void 0||ee.completeSpan({span:O,status:1,message:"Changed mode to ".concat(s," successfully")}),Ze.next=19;break;case 18:Ze.prev=18,bt=Ze.catch(1),(mr=this._videosdkLogs)===null||mr===void 0||mr.pushLogs({logText:"Error changeMode(".concat(s,") | failed"),logType:"ERROR",attributes:{error:bt.message}}),(rr=this._openTelemetry)===null||rr===void 0||rr.completeSpan({span:O,status:2,message:"Failed to change mode to ".concat(s,". Error : ").concat(bt.message)});case 19:case"end":return Ze.stop()}},v,this,[[1,18]])}));function u(v){return o.apply(this,arguments)}return u})()},{key:"_closeProducersAndTransport",value:function(){var u;this._webcamProducer&&(this._webcamProducer.close(),this._webcamProducer=null),this._micProducer&&(this._micProducer.close(),this._micProducer=null),this._shareProducer&&(this._shareProducer.close(),this._shareProducer=null),this._shareAudioProducer&&(this._shareAudioProducer.close(),this._shareAudioProducer=null),(u=this._sendTransport)===null||u===void 0||u.close(),this._sendTransport=null}},{key:"_closeTransports",value:function(){if(this._sendTransport){var u;(u=this._sendTransport)===null||u===void 0||u.close(),this._sendTransport=null}if(this._recvTransport){var v;(v=this._recvTransport)===null||v===void 0||v.close(),this._recvTransport=null}}},{key:"_setupWebrtcTransport",value:(function(){var o=(0,n.A)(h().mark(function v(s){var l,A,O,I,Z,ee;return h().wrap(function(te){for(;;)switch(te.prev=te.next){case 0:return this._mediasoupDevice=new jr.pF({handlerName:this._handlerName}),I=(l=this._openTelemetry)===null||l===void 0?void 0:l.trace({spanName:"Loading device capabilities",span:s}),te.next=1,this._socketRequest("getRouterRtpCapabilities");case 1:return Z=te.sent,Z.headerExtensions=(A=Z.headerExtensions)===null||A===void 0?void 0:A.filter(function(fe){return fe.uri!="urn:3gpp:video-orientation"}),te.next=2,this._mediasoupDevice.load({routerRtpCapabilities:Z});case 2:return(O=this._openTelemetry)===null||O===void 0||O.completeSpan({span:I,status:1,attributes:{routerRtpCapabilities:JSON.stringify(Z).toString()},message:"Device Capabilities Loaded"}),te.next=3,this._socketRequest("createWebRtcTransport",{preferredProtocol:this._preferredProtocol,producing:!1,consuming:!0,sctpCapabilities:this._mediasoupDevice.sctpCapabilities});case 3:ee=te.sent,this.createConsumerTransport(ee,s);case 4:case"end":return te.stop()}},v,this)}));function u(v){return o.apply(this,arguments)}return u})()},{key:"enablePeerWebcam",value:(function(){var o=(0,n.A)(h().mark(function v(s){var l,A,O,I,Z,ee;return h().wrap(function(te){for(;;)switch(te.prev=te.next){case 0:return Te.debug("enablePeerWebcam()"),A=(l=this._openTelemetry)===null||l===void 0?void 0:l.trace({spanName:"Requesting to enable peer(".concat(s,") webcam"),attributes:{peerId:s||"Peer ID not specified"}}),te.prev=1,te.next=2,this._socketRequest("enablePeerWebcam",{peerId:s});case 2:(O=this._openTelemetry)===null||O===void 0||O.completeSpan({span:A,status:1,message:"Peer webcam enable request sent successfully"}),te.next=4;break;case 3:te.prev=3,ee=te.catch(1),Te.error("enablePeerWebcam() | failed:%o",ee),(I=this._openTelemetry)===null||I===void 0||I.completeSpan({span:A,status:2,message:"Failed to send peer webcam enable request. Error: ".concat(ee.message)}),(Z=this._videosdkLogs)===null||Z===void 0||Z.pushLogs({logText:"Error in enablePeerWebcam()",logType:"ERROR",attributes:{error:ee.message}});case 4:case"end":return te.stop()}},v,this,[[1,3]])}));function u(v){return o.apply(this,arguments)}return u})()},{key:"disablePeerWebcam",value:(function(){var o=(0,n.A)(h().mark(function v(s){var l,A,O,I,Z,ee;return h().wrap(function(te){for(;;)switch(te.prev=te.next){case 0:return Te.debug("disablePeerWebcam()"),A=(l=this._openTelemetry)===null||l===void 0?void 0:l.trace({spanName:"Requesting to disable peer(".concat(s,") webcam"),attributes:{peerId:s||"Peer ID not specified"}}),te.prev=1,te.next=2,this._socketRequest("disablePeerWebcam",{peerId:s});case 2:(O=this._openTelemetry)===null||O===void 0||O.completeSpan({span:A,status:1,message:"Peer webcam disable request sent successfully"}),te.next=4;break;case 3:te.prev=3,ee=te.catch(1),Te.error("disablePeerWebcam() | failed:%o",ee),(I=this._openTelemetry)===null||I===void 0||I.completeSpan({span:A,status:2,message:"Failed to send peer webcam disable request. Error: ".concat(ee.message)}),(Z=this._videosdkLogs)===null||Z===void 0||Z.pushLogs({logText:"Error in disablePeerWebcam()",logType:"ERROR",attributes:{error:ee.message}});case 4:case"end":return te.stop()}},v,this,[[1,3]])}));function u(v){return o.apply(this,arguments)}return u})()},{key:"getMicStats",value:function(u){var v=this;if(this._micProducer){var s=0;u.onStatsCollected=function(l){if(v._stats.producerStats||(v._stats.producerStats={}),v._stats.producerStats.audio||(v._stats.producerStats.audio=[]),v._micProducer){var A;v._latestStats[(A=v._micProducer)===null||A===void 0?void 0:A.id]=[]}l.audio.forEach(function(O){if(v._micProducer){var I;v._latestStats[(I=v._micProducer)===null||I===void 0?void 0:I.id].push(O)}}),s%5==0&&v._micProducer!=null&&v._stats.producerStats.audio.push(Zr({timestamp:new Date},v._latestStats[v._micProducer.id]?v._latestStats[v._micProducer.id][0]:{})),s++}}}},{key:"enableMic",value:(function(){var o=(0,n.A)(h().mark(function v(){var s,l=this,A,O,I,Z,ee,te,fe,Me,ke,$e,ot,Je,qe,Ct,gt,Et,it,Pt,pt,Ge,At,cr,qt,Jt,Gt,ht,Zt,mr,rr,bt,Ze,Ie,Le,Lt,Kt,Yt,vr,kr,ta,Yr,Wt,Cr,er,Ur,Hr,Fa,fa,on,Qa,ma,la,xt,Mr,Vr,ra,va,na,ia,en,fn,Aa,tn,Sa,ua,vn,Pa,Yi,ki,Qi,ga,mi,ei,Ia,ti,cn,ri,ji,vi,Gn,ii,zn,Cn=arguments,La,bn,Sn;return h().wrap(function(pr){for(;;)switch(pr.prev=pr.next){case 0:if(ee=Cn.length>0&&Cn[0]!==void 0?Cn[0]:void 0,te=Cn.length>1&&Cn[1]!==void 0?Cn[1]:void 0,fe=(s=this._openTelemetry)===null||s===void 0?void 0:s.trace({spanName:"Enabling microphone with".concat(ee?" ":"out ","Custom Audio Track"),attributes:{customAudioConfig:ee?JSON.stringify(ee):"Custom Track not provided"},span:te||null}),Te.debug("enableMic()"),this._micEnabled=!0,!this._micProducer){pr.next=4;break}if(ee&&ee.getTracks().forEach(function(ka){ka.stop()}),ke=(Me=this._openTelemetry)===null||Me===void 0?void 0:Me.trace({spanName:"Starting Audio Stream transmission",span:fe}),this._micProducer.resume(),$e=this._micProducer,!this._sendTransport){pr.next=2;break}return pr.next=1,this._sendTransport.produce({track:this._micProducer.track,encodings:this._micProducer._appData.encodings,codecOptions:this._micProducer._appData.codecOptions,appData:{isEncrypted:this.isE2EEEnabled},onRtpSender:function(sa){l.e2eeManager&&(sa.senderStreams=sa.createEncodedStreams())}});case 1:this._micProducer=pr.sent,this.e2eeManager&&this.e2eeManager.emit("NEW_PRODUCER",this._micProducer),this._micProducer?(Ct=hi({id:this._micProducer.id,paused:this._micProducer.paused,track:this._micProducer.track,rtpParameters:this._micProducer.rtpParameters,codec:this._micProducer.rtpParameters.codecs[0].mimeType.split("/")[1],encodings:$e._appData.encodings,codecOptions:$e._appData.codecOptions,instance:this._micProducer,rtpSender:this._micProducer.rtpSender}),this._micProducer.track.getConstraints().deviceId&&(this._mic.device=this._mics.get(this._micProducer.track.getConstraints().deviceId)),Fe.dispatch(Ct),(ot=this._openTelemetry)===null||ot===void 0||ot.completeSpan({span:ke,status:1,message:"Audio Stream transmission started successfully"}),(Je=this._openTelemetry)===null||Je===void 0||Je.traceAutoComplete({spanName:"Emitting STREAM_ENABLED event",span:fe,status:1}),this._eventEmitter.emit(Ct.type,Ct.payload),(qe=this._openTelemetry)===null||qe===void 0||qe.completeSpan({span:fe,status:1,message:"Microphone turned on successfully"})):((gt=this._openTelemetry)===null||gt===void 0||gt.completeSpan({span:ke,status:2,message:"Error in enableMic() :: microphone transmission failed to initialize"}),(Et=this._openTelemetry)===null||Et===void 0||Et.completeSpan({span:fe,status:2,message:"Error in enableMic() :: microphone transmission failed to initialize"})),pr.next=3;break;case 2:return(it=this._videosdkLogs)===null||it===void 0||it.pushLogs({logText:xe.q.ERROR_ACTION_PERFORMED_BEFORE_MEETING_JOINED.message,attributes:{error:"Error in enableMic() :: Transport is not setup"},logType:"ERROR",dashboardLog:!0}),(Pt=this._openTelemetry)===null||Pt===void 0||Pt.completeSpan({span:ke,status:2,message:"Error in enableMic() :: Tried to enable mic while room was in a connecting state. "}),(pt=this._openTelemetry)===null||pt===void 0||pt.completeSpan({span:fe,status:2,message:"Error in enableMic() :: Tried to enable mic while room was in a connecting state. "}),this._emitError(xe.q.ERROR_ACTION_PERFORMED_BEFORE_MEETING_JOINED),pr.abrupt("return");case 3:return Ge=this._metrics.addNewProbe(this._micProducer,{name:"mic_producer"}),this._micProducer.observer.on("pause",function(){Ge?.stop(),l._latestStats[l._micProducer.id]=[],l._metrics.removeExistingProbe(Ge)}),this._micProducer.observer.on("close",function(){Ge?.stop(),l._latestStats[l._micProducer.id]=[],l._metrics.removeExistingProbe(Ge)}),this.getMicStats(Ge),Ge.start(),pr.abrupt("return");case 4:if(!this._mediasoupDevice){pr.next=6;break}if(this._mediasoupDevice.canProduce("audio")){pr.next=5;break}return qt=this._deviceInfo.sdkType=="react-native"?xe.q.ERROR_RN_MIC_ACCESS_UNAVAILABLE.message:xe.q.ERROR_MICROPHONE_ACCESS_UNAVAILABLE.message,(At=this._videosdkLogs)===null||At===void 0||At.pushLogs({logText:qt,attributes:{error:"Error in enableMic() :: Microphone access unavailable"},logType:"ERROR",dashboardLog:!0}),Te.error("enableMic() | cannot produce audio"),(cr=this._openTelemetry)===null||cr===void 0||cr.completeSpan({span:fe,status:2,message:"".concat(qt)}),pr.abrupt("return");case 5:pr.next=7;break;case 6:return(Jt=this._videosdkLogs)===null||Jt===void 0||Jt.pushLogs({logText:"Oops! Something went wrong, and we're unable to enable the mic. Please try again.",logType:"ERROR",attributes:{error:"Error in enableMic(): Something went wrong."},dashboardLog:!0}),(Gt=this._openTelemetry)===null||Gt===void 0||Gt.completeSpan({span:fe,status:2,message:"Error in enableMic() :: mediasoupDevice is undefined"}),pr.abrupt("return");case 7:if(pr.prev=7,this._externalVideo){pr.next=23;break}return Te.debug("enableMic() | calling getUserMedia()"),pr.next=8,this._updateMics(fe);case 8:if(this._mic.device){pr.next=9;break}throw Ie="Whoops! No Microphone Found: We couldn't find your microphone. Is it plugged in and turned on? If so, try restarting your computer or checking your device settings. Also, ensure you're on a secure website (https://).",new Error(Ie);case 9:try{ee&&(Zt=(Le=this._openTelemetry)===null||Le===void 0?void 0:Le.trace({spanName:"Utilising provided custom track",span:fe,attributes:{customVideoTrackConfig:ee?JSON.stringify(ee):"Custom Track not provided"}}),ht=ee.getAudioTracks()[0],ht.readyState=="ended"&&(ht=null,Yt=xe.q.ERROR_CUSTOM_AUDIO_TRACK_ENDED,(Kt=this._videosdkLogs)===null||Kt===void 0||Kt.pushLogs({logText:Yt.message,logType:"INFO",attributes:{error:"In enableMic() :: Invalid Custom Track Passed"},dashboardLog:!0}),this._openTelemetry.completeSpan({message:"Invalid Custom Audio Track Passed. Reverting to default.",span:Zt,status:2}),this._emitError(Yt)),(Lt=this._openTelemetry)===null||Lt===void 0||Lt.completeSpan({span:Zt,status:1}))}catch(ka){kr=xe.q.ERROR_INVALID_CUSTOM_AUDIO_TRACK,(vr=this._videosdkLogs)===null||vr===void 0||vr.pushLogs({logText:kr.message,logType:"INFO",attributes:{error:"In enableMic() :: Invalid Custom Track Passed"}}),this._emitError(kr),console.log("Invalid Custom Audio Track Passed. Reverting to default Error: ".concat(ka)),this._openTelemetry.completeSpan({span:Zt,message:"Invalid Custom Audio Track Passed. Reverting to default Error: ".concat(ka),status:2})}if(ht){pr.next=22;break}return Yr=(ta=this._openTelemetry)===null||ta===void 0?void 0:ta.trace({spanName:"Creating Audio Track ".concat(this._mic.device.deviceId?"using device: ".concat(this._mic.device.label):""," "),span:fe}),Cr=null,pr.prev=10,pr.next=11,navigator.mediaDevices.getUserMedia({audio:{deviceId:this._mic.device.deviceId?{exact:this._mic.device.deviceId}:void 0,channelCount:1,noiseSuppression:!0,echoCancellation:!0,googEchoCancellation:!0,googEchoCancellation2:!0,googAutoGainControl:!0,googAutoGainControl2:!0,googNoiseSuppression:!0,googNoiseSuppression2:!0,googHighpassFilter:!0}});case 11:Wt=pr.sent,Cr=JSON.stringify({micId:this._mic.device.deviceId?{exact:this._mic.device.deviceId}:void 0}),ht=Wt.getAudioTracks()[0],(er=this._openTelemetry)===null||er===void 0||er.completeSpan({message:"Default Microphone Track Generated",span:Yr,attributes:{customAudioTrackConfig:Cr},status:1}),pr.next=22;break;case 12:if(pr.prev=12,La=pr.catch(10),(Ur=this._openTelemetry)===null||Ur===void 0||Ur.completeSpan({message:"Error while creating Audio Track in enableMic() :: ".concat(La.message),span:Yr,status:2}),La.name!=="SecurityError"){pr.next=13;break}fa=xe.q.ERROR_RN_MIC_ACCESS_DENIED_OR_DISMISSED,on=fa.message,this._emitError(fa),(Hr=this._videosdkLogs)===null||Hr===void 0||Hr.pushLogs({logText:on,logType:"ERROR",attributes:{error:"Error in enableMic() :: Microphone Permission Denied or Dismissed"},dashboardLog:!0}),(Fa=this._openTelemetry)===null||Fa===void 0||Fa.completeSpan({message:"Error while creating Audio Track in enableMic() :: ".concat(on),span:fe,status:2}),pr.next=21;break;case 13:if(La.name!=="DOMException"){pr.next=14;break}la=xe.q.ERROR_RN_MIC_NOT_FOUND,xt=la.message,this._emitError(la),(Qa=this._videosdkLogs)===null||Qa===void 0||Qa.pushLogs({logText:xt,logType:"ERROR",attributes:{error:"Error in enableMic() :: No Microphone Device Found"},dashboardLog:!0}),(ma=this._openTelemetry)===null||ma===void 0||ma.completeSpan({message:"Error while creating Audio Track in enableMic() :: ".concat(xt),span:fe,status:2}),pr.next=21;break;case 14:if(!(La instanceof DOMException)){pr.next=20;break}bn=La.name,pr.next=bn==="NotAllowedError"?15:bn==="NotReadableError"?16:bn==="NotFoundError"?17:18;break;case 15:return Mr=this.handleNotAllowedError(La,this._openTelemetry,this._videosdkLogs,fe,"audio"),this._emitError(Mr),pr.abrupt("continue",19);case 16:return Vr=this.handleNotReadableError(La,this._openTelemetry,this._videosdkLogs,fe,"audio"),this._emitError(Vr),pr.abrupt("continue",19);case 17:return ra=xe.q.ERROR_MICROPHONE_NOT_FOUND,navigator&&navigator.userAgent&&navigator.userAgent.indexOf("Firefox")!=-1&&(ra=xe.q.ERROR_MICROPHONE_PERMISSION_DENIED_BY_OS),va=ra.message,this._emitError(ra),(A=this._videosdkLogs)===null||A===void 0||A.pushLogs({logText:va,logType:"ERROR",attributes:{error:"Error in enableMic() :: No Microphone Device Found"},dashboardLog:!0}),(O=this._openTelemetry)===null||O===void 0||O.completeSpan({message:"Error while creating Audio Track in enableMic() :: ".concat(va),span:fe,status:2}),pr.abrupt("continue",19);case 18:return na="An error occurred in creating audio track, ".concat(La.message),(I=this._videosdkLogs)===null||I===void 0||I.pushLogs({logText:La.message,logType:"ERROR",attributes:{error:"Error in enableMic() :: ".concat(na)},dashboardLog:!0}),(Z=this._openTelemetry)===null||Z===void 0||Z.completeSpan({message:"Error while creating Audio Track in enableMic() :: ".concat(na),span:fe,status:2}),pr.abrupt("continue",19);case 19:pr.next=21;break;case 20:fn="An error occurred in creating audio track, ".concat(La.message),(ia=this._videosdkLogs)===null||ia===void 0||ia.pushLogs({logText:La.message,logType:"ERROR",attributes:{error:"Error in enableMic() :: ".concat(fn)},dashboardLog:!0}),(en=this._openTelemetry)===null||en===void 0||en.completeSpan({message:"Error while creating Audio Track in enableMic() :: ".concat(fn),span:fe,status:2});case 21:return pr.abrupt("return");case 22:pr.next=25;break;case 23:return pr.next=24,this._getExternalVideoStream();case 24:Aa=pr.sent,ht=Aa.getAudioTracks()[0].clone();case 25:if(tn=(mr=this._openTelemetry)===null||mr===void 0?void 0:mr.trace({spanName:"Generating configurations for sending Audio Stream",span:fe}),Sa={opusStereo:1,opusDtx:1},ht&&(ua=ht.encoderConfig?Hs.$.audioProfiles[ht.encoderConfig]:Hs.$.audioProfiles.speech_standard,Sa={opusStereo:ua.stereo?1:0,opusFec:ua.fec?1:0,opusDtx:ua.dtx?1:0,opusMaxPlaybackRate:ua.maxPlaybackRate,opusPtime:ua.packetTime}),vn="high",Pa=[{networkPriority:vn}],Yi={encodings:Pa,codecOptions:Sa},(rr=this._openTelemetry)===null||rr===void 0||rr.completeSpan({span:tn,status:1,message:"Audio stream configurations generated",attributes:{appData:JSON.stringify(Yi)}}),(bt=ht)===null||bt===void 0||bt.addEventListener("ended",function(){console.log("Track Ended Error");try{var ka,sa,Kn=l._deviceInfo.sdkType=="react-native"?xe.q.ERROR_RN_MIC_TRACK_ENDED:xe.q.ERROR_MICROPHONE_TRACK_ENDED;(ka=l._videosdkLogs)===null||ka===void 0||ka.pushLogs({logText:Kn.message,logType:"ERROR",attributes:{error:"Error Track Ended :: ".concat(Kn.message)},dashboardLog:!0}),(sa=l._openTelemetry)===null||sa===void 0||sa.traceAutoComplete({spanName:"Microphone track ended or Microphone disconnected!",span:fe,message:Kn.message,status:2}),Fe.dispatch(Er({type:"error",text:"Microphone disconnected!"})),l.disableMic(!0,fe).catch(function(){})}catch(si){console.error(si)}}),tn=(Ze=this._openTelemetry)===null||Ze===void 0?void 0:Ze.trace({spanName:"Starting Audio Stream transmission",span:fe}),!this._sendTransport){pr.next=27;break}return pr.next=26,this._sendTransport.produce({track:ht,encodings:Pa,codecOptions:Sa,appData:Zr(Zr({},Yi),{},{isEncrypted:this.isE2EEEnabled}),onRtpSender:function(sa){l.e2eeManager&&(sa.senderStreams=sa.createEncodedStreams())}});case 26:this._micProducer=pr.sent,this.e2eeManager&&this.e2eeManager.emit("NEW_PRODUCER",this._micProducer),pr.next=28;break;case 27:return(ki=this._videosdkLogs)===null||ki===void 0||ki.pushLogs({logText:xe.q.ERROR_ACTION_PERFORMED_BEFORE_MEETING_JOINED.message,attributes:{error:"Error in enableMic() :: Transport is not setup"},logType:"ERROR",dashboardLog:!0}),(Qi=this._openTelemetry)===null||Qi===void 0||Qi.completeSpan({span:tn,status:2,message:"Error in enableMic() :: Tried to enable mic while room was in a connecting state. "}),(ga=this._openTelemetry)===null||ga===void 0||ga.completeSpan({span:fe,status:2,message:"Error in enableMic() :: Tried to enable mic while room was in a connecting state. "}),this._emitError(xe.q.ERROR_ACTION_PERFORMED_BEFORE_MEETING_JOINED),pr.abrupt("return");case 28:this._micProducer?(ht.getConstraints().deviceId&&(this._mic.device=this._mics.get(ht.getConstraints().deviceId)),ti=hi({id:this._micProducer.id,paused:this._micProducer.paused,track:this._micProducer.track,rtpParameters:this._micProducer.rtpParameters,codec:this._micProducer.rtpParameters.codecs[0].mimeType.split("/")[1],encodings:Pa,codecOptions:Sa,instance:this._micProducer,rtpSender:this._micProducer.rtpSender}),Fe.dispatch(ti),(mi=this._openTelemetry)===null||mi===void 0||mi.completeSpan({span:tn,status:1,message:"Audio Stream transmission started successfully"}),(ei=this._openTelemetry)===null||ei===void 0||ei.traceAutoComplete({spanName:"Emitting STREAM_ENABLED event",span:fe,status:1}),this._eventEmitter.emit(ti.type,ti.payload),cn=this._metrics.addNewProbe(this._micProducer,{name:"mic_producer"}),cn.start(),this.getMicStats(cn),this._micProducer.on("transportclose",function(){var ka,sa=Nn(l._micProducer.id);Fe.dispatch(sa),l._eventEmitter.emit(sa.type,sa.payload),(ka=l._micProducer)===null||ka===void 0||ka.close(),l._micProducer=null}),this._micProducer.observer.on("pause",function(){cn?.stop(),l._latestStats[l._micProducer.id]=[],l._metrics.removeExistingProbe(cn)}),this._micProducer.observer.on("close",function(){cn?.stop(),l._latestStats[l._micProducer.id]=[],l._metrics.removeExistingProbe(cn)}),this._micProducer.on("trackended",function(){var ka,sa,Kn=l._deviceInfo.sdkType=="react-native"?xe.q.ERROR_RN_MIC_TRACK_ENDED:xe.q.ERROR_MICROPHONE_TRACK_ENDED;(ka=l._videosdkLogs)===null||ka===void 0||ka.pushLogs({logText:Kn.message,logType:"ERROR",attributes:{error:"Error in enableMic() :: ".concat(Kn.message)},dashboardLog:!0}),(sa=l._openTelemetry)===null||sa===void 0||sa.traceAutoComplete({spanName:"Microphone track ended or Microphone disconnected!",span:fe,message:Kn.message,status:2}),Fe.dispatch(Er({type:"error",text:"Microphone disconnected!"})),l.disableMic(!0,fe).catch(function(){})}),(Ia=this._openTelemetry)===null||Ia===void 0||Ia.completeSpan({span:fe,status:1,message:"Microphone turned on successfully"})):((ri=this._videosdkLogs)===null||ri===void 0||ri.pushLogs({logText:"Oops! Something went wrong, and we're unable to enable the mic. Please try again.",logType:"ERROR",attributes:{error:"Error in enableMic(): Something went wrong."},dashboardLog:!0}),(ji=this._openTelemetry)===null||ji===void 0||ji.completeSpan({span:tn,status:2,message:"Error in enableMic() :: microphone transmission failed to initialize"}),(vi=this._openTelemetry)===null||vi===void 0||vi.completeSpan({span:fe,status:2,message:"Error in enableMic() :: microphone transmission failed to initialize"})),pr.next=31;break;case 29:return pr.prev=29,Sn=pr.catch(7),(Gn=this._openTelemetry)===null||Gn===void 0||Gn.completeSpan({span:internalSpan,status:2,message:"Error in enableMic() :: occurred in creating microphone transmission, ".concat(Sn.message)}),(ii=this._openTelemetry)===null||ii===void 0||ii.completeSpan({span:fe,status:2,message:"Error in enableMic :: ".concat(Sn.message)}),(zn=this._videosdkLogs)===null||zn===void 0||zn.pushLogs({logText:Sn.message,logType:"ERROR",attributes:{error:"Error in enableMic() :: ".concat(Sn.message)},dashboardLog:!0}),Te.error("enableMic() | failed:%o",Sn),Fe.dispatch(Er({type:"error",text:"Error enabling microphone: ".concat(Sn)})),pr.next=30,this._socketRequest("produceError",{mediaType:"audio",message:Sn.message});case 30:ht&&ht.stop();case 31:case"end":return pr.stop()}},v,this,[[7,29],[10,12]])}));function u(){return o.apply(this,arguments)}return u})()},{key:"disableMic",value:(function(){var o=(0,n.A)(h().mark(function v(){var s,l,A,O,I,Z,ee,te,fe,Me,ke,$e,ot,Je,qe,Ct,gt,Et,it,Pt,pt,Ge,At,cr,qt,Jt,Gt,ht,Zt,mr,rr=arguments,bt,Ze;return h().wrap(function(Ie){for(;;)switch(Ie.prev=Ie.next){case 0:if(ee=rr.length>0&&rr[0]!==void 0?rr[0]:!1,te=rr.length>1&&rr[1]!==void 0?rr[1]:void 0,Te.debug("disableMic()"),fe=(s=this._openTelemetry)===null||s===void 0?void 0:s.trace({spanName:"Disabling Microphone",status:1,span:te||null}),this._micProducer){Ie.next=1;break}return(Me=this._openTelemetry)===null||Me===void 0||Me.completeSpan({span:fe,status:2,message:"Microphone is already disabled"}),(ke=this._videosdkLogs)===null||ke===void 0||ke.pushLogs({logText:"Attempted to call disableMic() multiple times",attributes:{error:"Error in disableMic() :: Microphone is already disabled"},logType:"ERROR",dashboardLog:!0}),Ie.abrupt("return");case 1:if($e=(l=this._openTelemetry)===null||l===void 0?void 0:l.trace({spanName:"Disposing Audio Track",span:fe,status:1}),this._micEnabled=!1,!(this._micProducer&&!ee)){Ie.next=6;break}return this._micProducer.pause(),Ct=Nn(this._micProducer.id),(ot=this._openTelemetry)===null||ot===void 0||ot.completeSpan({span:$e,status:1,message:"Audio track disposed successfully",attributes:JSON.stringify({closeProducer:ee})}),Fe.dispatch(Ct),(Je=this._openTelemetry)===null||Je===void 0||Je.traceAutoComplete({spanName:"Emitting STREAM_DISABLED event",span:fe,status:1}),this._eventEmitter.emit(Ct.type,Ct.payload),Ie.prev=2,gt=(Et=this._openTelemetry)===null||Et===void 0?void 0:Et.trace({spanName:"Stopping Audio Stream transmission",span:fe}),Ie.next=3,this._socketRequest("closeProducer",{producerId:this._micProducer.id});case 3:this._openTelemetry.completeSpan({span:gt,message:"Audio Stream transmission stopped successfully",status:1}),Ie.next=5;break;case 4:Ie.prev=4,bt=Ie.catch(2),Fe.dispatch(Er({type:"error",text:"Error closing server-side mic Producer: ".concat(bt)})),Ge="Error in disableMic() :: Failed to close server-side microphone producer. closeProducer status: ".concat(ee),(it=this._openTelemetry)===null||it===void 0||it.completeSpan({span:gt,status:2,message:"Failed to stop Audio Stream transmission: ".concat(bt)}),(Pt=this._openTelemetry)===null||Pt===void 0||Pt.completeSpan({span:fe,status:2,message:"Failed to disable mic: ".concat(bt)}),(pt=this._videosdkLogs)===null||pt===void 0||pt.pushLogs({logText:Ge,logType:"ERROR",attributes:{error:bt.message},dashboardLog:!0});case 5:return(qe=this._openTelemetry)===null||qe===void 0||qe.completeSpan({span:fe,status:1,message:"Microphone disabled successfully"}),Ie.abrupt("return");case 6:return $e=(A=this._openTelemetry)===null||A===void 0?void 0:A.trace({spanName:"Disposing Audio Track",span:fe,status:1,attributes:{audioTrackConfig:(O=this._micProducer)!==null&&O!==void 0&&O.track?JSON.stringify((function(Le){return{kind:Le.kind,id:Le.id,label:Le.label}})(this._micProducer.track)):"Track not provided"}}),this._micProducer.close(),At=Nn(this._micProducer.id),(I=this._openTelemetry)===null||I===void 0||I.completeSpan({span:$e,status:1,message:"Audio track disposed successfully",attributes:JSON.stringify({closeProducer:ee})}),Fe.dispatch(At),(Z=this._openTelemetry)===null||Z===void 0||Z.traceAutoComplete({spanName:"Emitting STREAM_DISABLED event",span:fe,status:1}),this._eventEmitter.emit(At.type,At.payload),Ie.prev=7,cr=(qt=this._openTelemetry)===null||qt===void 0?void 0:qt.trace({spanName:"Stopping Audio Stream transmission",span:fe}),Ie.next=8,this._socketRequest("closeProducer",{producerId:this._micProducer.id});case 8:this._openTelemetry.completeSpan({span:cr,message:"Audio Stream transmission stopped successfully",status:1}),this._micProducer=null,(Jt=this._openTelemetry)===null||Jt===void 0||Jt.completeSpan({span:fe,status:1,message:"Microphone disabled successfully"}),Ie.next=10;break;case 9:Ie.prev=9,Ze=Ie.catch(7),Fe.dispatch(Er({type:"error",text:"Error closing server-side mic Producer: ".concat(Ze)})),mr="Error in disableMic() :: Failed to close server-side microphone producer. closeProducer status: ".concat(ee),(Gt=this._openTelemetry)===null||Gt===void 0||Gt.completeSpan({span:cr,status:2,message:"Failed to stop Audio Stream transmission: ".concat(Ze)}),(ht=this._openTelemetry)===null||ht===void 0||ht.completeSpan({span:fe,status:2,message:"Failed to disable mic: ".concat(Ze)}),(Zt=this._videosdkLogs)===null||Zt===void 0||Zt.pushLogs({logText:mr,logType:"ERROR",attributes:{error:Ze.message},dashboardLog:!0});case 10:case"end":return Ie.stop()}},v,this,[[2,4],[7,9]])}));function u(){return o.apply(this,arguments)}return u})()},{key:"muteMic",value:(function(){var o=(0,n.A)(h().mark(function v(){var s,l;return h().wrap(function(A){for(;;)switch(A.prev=A.next){case 0:return Te.debug("muteMic()"),this._micEnabled=!1,this._micProducer.pause(),A.prev=1,A.next=2,this._socketRequest("pauseProducer",{producerId:this._micProducer.id});case 2:Fe.dispatch(Bo(this._micProducer.id)),A.next=4;break;case 3:A.prev=3,l=A.catch(1),Te.error("muteMic() | failed: %o",l),(s=this._videosdkLogs)===null||s===void 0||s.pushLogs({logText:"Error pausing server-side mic Producer",logType:"ERROR",attributes:{error:l.message}}),Fe.dispatch(Er({type:"error",text:"Error pausing server-side mic Producer: ".concat(l)}));case 4:case"end":return A.stop()}},v,this,[[1,3]])}));function u(){return o.apply(this,arguments)}return u})()},{key:"unmuteMic",value:(function(){var o=(0,n.A)(h().mark(function v(){var s,l;return h().wrap(function(A){for(;;)switch(A.prev=A.next){case 0:return Te.debug("unmuteMic()"),this._micEnabled=!0,this._micProducer.resume(),A.prev=1,A.next=2,this._socketRequest("resumeProducer",{producerId:this._micProducer.id});case 2:Fe.dispatch(is(this._micProducer.id)),A.next=4;break;case 3:A.prev=3,l=A.catch(1),Te.error("unmuteMic() | failed: %o",l),(s=this._videosdkLogs)===null||s===void 0||s.pushLogs({logText:"Error resuming server-side mic Producer",logType:"ERROR",attributes:{error:l.message}}),Fe.dispatch(Er({type:"error",text:"Error resuming server-side mic Producer: ".concat(l)}));case 4:case"end":return A.stop()}},v,this,[[1,3]])}));function u(){return o.apply(this,arguments)}return u})()},{key:"enableWebcam",value:(function(){var o=(0,n.A)(h().mark(function v(){var s,l,A,O,I,Z=this,ee,te,fe,Me,ke,$e,ot,Je,qe,Ct,gt,Et,it,Pt,pt,Ge,At,cr,qt,Jt,Gt,ht,Zt,mr,rr,bt,Ze,Ie,Le,Lt,Kt,Yt,vr,kr,ta,Yr,Wt,Cr,er,Ur,Hr,Fa,fa,on,Qa,ma,la,xt,Mr,Vr,ra,va,na,ia,en,fn,Aa,tn,Sa,ua,vn,Pa,Yi,ki,Qi,ga,mi,ei,Ia,ti,cn,ri,ji,vi,Gn,ii,zn,Cn,La,bn,Sn,pr,ka,sa,Kn,si,In,xn,Ui,xa,gi,yi,ks,zi,oi,ls,Hn=arguments,gn,Vn,Hi;return h().wrap(function(sr){for(;;)switch(sr.prev=sr.next){case 0:if(ee=Hn.length>0&&Hn[0]!==void 0?Hn[0]:void 0,te=Hn.length>1&&Hn[1]!==void 0?Hn[1]:void 0,fe=(s=this._openTelemetry)===null||s===void 0?void 0:s.trace({spanName:"Enabling Webcam with".concat(ee?" ":"out ","Custom Video Track"),attributes:{customVideoConfig:ee?JSON.stringify(ee):"Custom Track not provided"},span:te||null}),Te.debug("enableWebcam()"),this._webcamEnabled=!0,!this._webcamProducer){sr.next=1;break}return(Me=this._openTelemetry)===null||Me===void 0||Me.completeSpan({span:fe,status:2,message:"Webcam is already enabled"}),(ke=this._videosdkLogs)===null||ke===void 0||ke.pushLogs({logText:"Attempted to call enableWebcam() multiple times",attributes:{error:"Error in enableWebcam() :: Webcam is already enabled"},logType:"ERROR",dashboardLog:!0}),sr.abrupt("return");case 1:if($e=Fe.getState(),ot=$e.me,!ot.webcamInProgress){sr.next=2;break}return(Je=this._openTelemetry)===null||Je===void 0||Je.completeSpan({span:fe,status:2,message:"Error in enableWebcam(): Webcam enabling process is already in progress."}),(qe=this._videosdkLogs)===null||qe===void 0||qe.pushLogs({logText:"Attempted to call enableWebcam() multiple times",attributes:{error:"Webcam enabling process is already in progress"},logType:"ERROR",dashboardLog:!0}),sr.abrupt("return");case 2:if(!this._mediasoupDevice){sr.next=4;break}if(this._mediasoupDevice.canProduce("video")){sr.next=3;break}return Et=this._deviceInfo.sdkType=="react-native"?xe.q.ERROR_RN_CAMERA_ACCESS_UNAVAILABLE.message:xe.q.ERROR_CAMERA_ACCESS_UNAVAILABLE.message,(Ct=this._openTelemetry)===null||Ct===void 0||Ct.completeSpan({span:fe,status:2,message:"".concat(Et)}),(gt=this._videosdkLogs)===null||gt===void 0||gt.pushLogs({logText:Et,attributes:{error:"Error in enableWebcam() :: Camera access unavailable"},logType:"ERROR",dashboardLog:!0}),Te.error("enableWebcam() | cannot produce video"),sr.abrupt("return");case 3:sr.next=5;break;case 4:return(it=this._videosdkLogs)===null||it===void 0||it.pushLogs({logText:"Oops! Something went wrong, and we're unable to enable the webcam. Please try again.",logType:"ERROR",attributes:{error:"Error in enableWebcam(): Something went wrong."}}),(Pt=this._openTelemetry)===null||Pt===void 0||Pt.completeSpan({span:fe,status:2,message:"Error in enableWebcam() :: mediasoupDevice is undefined"}),sr.abrupt("return");case 5:if(Fe.dispatch(go(!0)),cr=this._webcam.resolution,sr.prev=6,this._externalVideo){sr.next=25;break}return sr.next=7,this._updateWebcams(fe);case 7:if(Ge=this._webcam.device,Ge){sr.next=8;break}throw rr="Whoops! No Webcam Found: We couldn't find your camera. Is it plugged in and turned on? If so, try restarting your computer or checking your device settings. If you need help, check out troubleshooter at https://test.8x8.vc/. Also, ensure you're on a secure website (https://).",new Error(rr);case 8:Te.debug("enableWebcam() | calling getUserMedia()");try{ee&&(At=(bt=this._openTelemetry)===null||bt===void 0?void 0:bt.trace({spanName:"Utilising provided custom track",span:fe,attributes:{customVideoTrackConfig:ee?JSON.stringify(ee):"Custom Track not provided"}}),pt=ee.getVideoTracks()[0],pt.readyState=="ended"&&(pt=null,Le=xe.q.ERROR_CUSTOM_VIDEO_TRACK_ENDED,(Ie=this._videosdkLogs)===null||Ie===void 0||Ie.pushLogs({logText:Le.message,logType:"INFO",attributes:{error:"In enableWebcam() :: Invalid Custom Track Passed"},dashboardLog:!0}),this._openTelemetry.completeSpan({span:At,message:"Invalid Custom Video Track Passed. Reverting to default.",status:2}),this._emitError(Le)),(Ze=this._openTelemetry)===null||Ze===void 0||Ze.completeSpan({span:At,status:1}))}catch(qr){Kt=xe.q.ERROR_INVALID_CUSTOM_VIDEO_TRACK,(Lt=this._videosdkLogs)===null||Lt===void 0||Lt.pushLogs({logText:Kt.message,logType:"INFO",attributes:{error:"In enableWebcam() :: Invalid Custom Track Passed"}}),this._openTelemetry.completeSpan({span:At,message:"Invalid Custom Video Track Passed. Reverting to default Error: ".concat(qr),status:2}),this._emitError(Kt),console.log("Invalid Custom Video Track Passed. Reverting to default Error: ".concat(qr))}if(pt){sr.next=24;break}if(At=(Yt=this._openTelemetry)===null||Yt===void 0?void 0:Yt.trace({spanName:"Creating Video Track using device: ".concat(Ge.label),span:fe}),vr=null,sr.prev=9,this._webcam.resolution!="hd"){sr.next=11;break}return sr.next=10,Ai.VideoSDK.createCameraVideoTrack({cameraId:Ge.deviceId,encoderConfig:"h720p_w1280p",multiStream:this._useSimulcast,facingMode:Ge.facing});case 10:ee=sr.sent,vr=JSON.stringify({encoderConfig:"h720p_w1280p",multiStream:this._useSimulcast,cameraId:Ge.deviceId}),sr.next=13;break;case 11:return sr.next=12,Ai.VideoSDK.createCameraVideoTrack({cameraId:Ge.deviceId,encoderConfig:"h540p_w960p",multiStream:this._useSimulcast,facingMode:Ge.facing});case 12:ee=sr.sent,vr=JSON.stringify({encoderConfig:"h540p_w960p",multiStream:this._useSimulcast,cameraId:Ge.deviceId});case 13:pt=ee.getVideoTracks()[0],(kr=this._openTelemetry)===null||kr===void 0||kr.completeSpan({message:"Default Camera Track Generated",span:At,attributes:{customVideoTrackConfig:vr},status:1}),sr.next=24;break;case 14:if(sr.prev=14,gn=sr.catch(9),(ta=this._openTelemetry)===null||ta===void 0||ta.completeSpan({message:"Error while creating Video Track in enableWebcam() :: ".concat(gn.message),span:At,status:2}),gn.name!=="SecurityError"){sr.next=15;break}Cr=xe.q.ERROR_RN_CAMERA_ACCESS_DENIED_OR_DISMISSED,er=Cr.message,this._emitError(Cr),(Yr=this._videosdkLogs)===null||Yr===void 0||Yr.pushLogs({logText:er,logType:"ERROR",attributes:{error:"Error in enableWebcam() :: Camera Permission Denied or Dismissed"},dashboardLog:!0}),(Wt=this._openTelemetry)===null||Wt===void 0||Wt.completeSpan({message:"Error while creating Video Track in enableWebcam() :: ".concat(er),span:fe,status:2}),sr.next=23;break;case 15:if(gn.name!=="DOMException"){sr.next=16;break}Fa=xe.q.ERROR_RN_CAMERA_NOT_FOUND,fa=Fa.message,this._emitError(Fa),(Ur=this._videosdkLogs)===null||Ur===void 0||Ur.pushLogs({logText:fa,logType:"ERROR",attributes:{error:"Error in enableWebcam() :: No Camra Device Found"},dashboardLog:!0}),(Hr=this._openTelemetry)===null||Hr===void 0||Hr.completeSpan({message:"Error while creating Video Track in enableWebcam() :: ".concat(fa),span:fe,status:2}),sr.next=23;break;case 16:if(!(gn instanceof DOMException)){sr.next=22;break}Vn=gn.name,sr.next=Vn==="NotAllowedError"?17:Vn==="NotReadableError"?18:Vn==="NotFoundError"?19:20;break;case 17:return on=this.handleNotAllowedError(gn,this._openTelemetry,this._videosdkLogs,fe,"video"),this._emitError(on),sr.abrupt("continue",21);case 18:return Qa=this.handleNotReadableError(gn,this._openTelemetry,this._videosdkLogs,fe,"video"),this._emitError(Qa),sr.abrupt("continue",21);case 19:return ma=xe.q.ERROR_CAMERA_NOT_FOUND,navigator&&navigator.userAgent&&navigator.userAgent.indexOf("Firefox")!=-1&&(ma=xe.q.ERROR_CAMERA_PERMISSION_DENIED_BY_OS),la=ma.message,this._emitError(ma),(l=this._videosdkLogs)===null||l===void 0||l.pushLogs({logText:la,logType:"ERROR",attributes:{error:"Error in enableWebcam() :: No Webcam Device Found"},dashboardLog:!0}),(A=this._openTelemetry)===null||A===void 0||A.completeSpan({message:"Error while creating Video Track in enableWebcam() :: ".concat(la),span:fe,status:2}),sr.abrupt("continue",21);case 20:return xt="An error occurred in creating Video Track, ".concat(gn.message),(O=this._videosdkLogs)===null||O===void 0||O.pushLogs({logText:gn.message,logType:"ERROR",attributes:{error:"Error in enableWebcam() :: ".concat(xt)},dashboardLog:!0}),(I=this._openTelemetry)===null||I===void 0||I.completeSpan({message:"Error while creating Video Track in enableWebcam() :: ".concat(xt),span:fe,status:2}),sr.abrupt("continue",21);case 21:sr.next=23;break;case 22:ra="An error occurred in creating Video Track, ".concat(gn.message),(Mr=this._videosdkLogs)===null||Mr===void 0||Mr.pushLogs({logText:gn.message,logType:"ERROR",attributes:{error:"Error in enableWebcam() :: ".concat(ra)},dashboardLog:!0}),(Vr=this._openTelemetry)===null||Vr===void 0||Vr.completeSpan({message:"Error while creating Video Track in enableWebcam() :: ".concat(ra),span:fe,status:2});case 23:return sr.abrupt("return");case 24:sr.next=27;break;case 25:return Ge={label:"external video"},sr.next=26,this._getExternalVideoStream();case 26:va=sr.sent,pt=va.getVideoTracks()[0].clone();case 27:if(na=(qt=this._openTelemetry)===null||qt===void 0?void 0:qt.trace({spanName:"Generating configurations for sending Video Stream",span:fe}),!this._forceH264){sr.next=29;break}if(en=this._mediasoupDevice.rtpCapabilities.codecs.find(function(qr){return qr.mimeType.toLowerCase()==="video/h264"}),en){sr.next=28;break}throw fn="The desired H.264 codec and configuration are not supported",new Error(fn);case 28:sr.next=30;break;case 29:if(!this._forceVP9){sr.next=30;break}if(en=this._mediasoupDevice.rtpCapabilities.codecs.find(function(qr){return qr.mimeType.toLowerCase()==="video/vp9"}),en){sr.next=30;break}throw Aa="The desired VP9 codec and configuration are not supported",new Error(Aa);case 30:if(pt){vn=pt.getConstraints(),Pa=((tn=this._deviceInfo)===null||tn===void 0?void 0:tn.sdkType)==="react-native"&&((Sa=this._deviceInfo)===null||Sa===void 0?void 0:Sa.platform)==="ios",Yi=((ua=this._deviceInfo)===null||ua===void 0?void 0:ua.sdkType)==="react-native"?"react-native":"web",ki=(0,J.A)(vn.width)==="object"?Object.values(vn.width)[0]:vn.width,Qi=(0,J.A)(vn.height)==="object"?Object.values(vn.height)[0]:vn.height;try{ia=(0,Eo.v7)(!1,ki,Qi,(ga=ee)===null||ga===void 0?void 0:ga.encoderConfig,{simulcast:(mi=ee)===null||mi===void 0?void 0:mi.multiStream},Pa,Yi,(ei=ee)===null||ei===void 0?void 0:ei.bitrateMode,(Ia=ee)===null||Ia===void 0?void 0:Ia.maxLayer)}catch(qr){ia=null,(ti=this._videosdkLogs)===null||ti===void 0||ti.pushLogs({logText:"Error in enableWebcam() :: Something went wrong while computing encoding",logType:"ERROR",attributes:{error:"".concat(qr.message)},dashboardLog:!0})}}else this._useSimulcast&&(cn=this._mediasoupDevice.rtpCapabilities.codecs.find(function(qr){return qr.kind==="video"}),this._forceVP9&&en||cn.mimeType.toLowerCase()==="video/vp9"?ia=tl:ia=Wo[this._webcam.resolution]);ri={videoGoogleStartBitrate:1e3},ji=((Jt=this._deviceInfo)===null||Jt===void 0||(Jt=Jt.browserUserAgent)===null||Jt===void 0||(Jt=Jt.os)===null||Jt===void 0?void 0:Jt.name)==="iOS",vi=((Gt=this._deviceInfo)===null||Gt===void 0||(Gt=Gt.browserUserAgent)===null||Gt===void 0||(Gt=Gt.browser)===null||Gt===void 0?void 0:Gt.name)==="Safari",(ji||vi)&&ia!=null&&(ii=((Gn=ee)===null||Gn===void 0?void 0:Gn.bitrateMode)||vl.x.BALANCED,zn=ia[ia.length-1].bitrates["web-iOS"][ii],ri={videoGoogleMaxBitrate:zn,videoGoogleStartBitrate:1e3}),Cn=(ht=ia)===null||ht===void 0?void 0:ht.map(function(qr){qr.bitrates;var Na=b(qr,jl);return Na}),La={};try{La={encodings:Cn,width:ee?(bn=pt)===null||bn===void 0?void 0:bn.getConstraints().width:qo[cr].width.ideal,height:ee?(Sn=pt)===null||Sn===void 0?void 0:Sn.getConstraints().height:qo[cr].height.ideal}}catch(qr){(pr=this._videosdkLogs)===null||pr===void 0||pr.pushLogs({logText:qr.message,logType:"INFO",attributes:{error:"In enableWebcam() :: ".concat(qr.message)},dashboardLog:!0}),console.log(qr)}if((Zt=this._openTelemetry)===null||Zt===void 0||Zt.completeSpan({span:na,status:1,message:"Video stream configurations generated",attributes:{appData:JSON.stringify(La)}}),na=(mr=this._openTelemetry)===null||mr===void 0?void 0:mr.trace({spanName:"Starting Video Stream transmission (".concat(La.width,"x").concat(La.height,"), simulcast: ").concat(ee.multiStream),span:fe}),!this._sendTransport){sr.next=32;break}return sr.next=31,this._sendTransport.produce({track:pt,encodings:ia,codecOptions:ri,codec:en,appData:Zr(Zr({},La),{},{isEncrypted:this.isE2EEEnabled}),onRtpSender:function(Na){Z.e2eeManager&&(Na.senderStreams=Na.createEncodedStreams())}});case 31:this._webcamProducer=sr.sent,this.e2eeManager&&this.e2eeManager.emit("NEW_PRODUCER",this._webcamProducer),sr.next=33;break;case 32:return(ka=this._videosdkLogs)===null||ka===void 0||ka.pushLogs({logText:xe.q.ERROR_ACTION_PERFORMED_BEFORE_MEETING_JOINED.message,attributes:{error:"Error in enableWebcam() :: Transport is not setup"},logType:"ERROR",dashboardLog:!0}),(sa=this._openTelemetry)===null||sa===void 0||sa.completeSpan({span:na,status:2,message:"Error in enableWebcam() :: Tried to enable webcam while room was in a connecting state. "}),(Kn=this._openTelemetry)===null||Kn===void 0||Kn.completeSpan({span:fe,status:2,message:"Error in enableWebcam() :: Tried to enable webcam while room was in a connecting state. "}),this._emitError(xe.q.ERROR_ACTION_PERFORMED_BEFORE_MEETING_JOINED),sr.abrupt("return");case 33:pt.getSettings().deviceId&&(this._webcam.device=this._webcams.get(pt.getSettings().deviceId)),this._webcamProducer?(Ui=hi({id:this._webcamProducer.id,deviceLabel:Ge.label,type:this._getWebcamType(Ge),paused:this._webcamProducer.paused,track:this._webcamProducer.track,rtpParameters:this._webcamProducer.rtpParameters,codec:this._webcamProducer.rtpParameters.codecs[0].mimeType.split("/")[1],instance:this._webcamProducer,rtpSender:this._webcamProducer.rtpSender}),Fe.dispatch(Ui),(si=this._openTelemetry)===null||si===void 0||si.completeSpan({span:na,status:1,message:"Video Stream transmission started successfully"}),(In=this._openTelemetry)===null||In===void 0||In.traceAutoComplete({spanName:"Emitting STREAM_ENABLED event",span:fe,status:1}),this._eventEmitter.emit(Ui.type,Ui.payload),xa=0,gi=this._metrics.addNewProbe(this._webcamProducer,"producer"),gi.onStatsCollected=function(qr){try{if(Z._stats.producerStats||(Z._stats.producerStats={}),Z._stats.producerStats.video||(Z._stats.producerStats.video=[]),Z._webcamProducer){var Na;Z._latestStats[(Na=Z._webcamProducer)===null||Na===void 0?void 0:Na.id]=[]}qr.video.forEach(function(Os){var Xi;Z._latestStats[(Xi=Z._webcamProducer)===null||Xi===void 0?void 0:Xi.id].push(Os)}),xa%5==0&&Z._webcamProducer!=null&&Z._stats.producerStats.video.push({timestamp:new Date,stats:Z._latestStats[Z._webcamProducer.id]}),xa++}catch(Os){var An;(An=Z._videosdkLogs)===null||An===void 0||An.pushLogs({logText:"Error PRODUCER Stats ERROR",logType:"ERROR",attributes:{error:Os.message}})}},gi.start(),this._webcamProducer.observer.on("close",function(){gi.stop(),Z._metrics.removeExistingProbe(gi)}),this._webcamProducer.on("transportclose",function(){var qr,Na=Nn(Z._webcamProducer.id);Fe.dispatch(Na),Z._eventEmitter.emit(Na.type,Na.payload),(qr=Z._webcamProducer)===null||qr===void 0||qr.close(),Z._webcamProducer=null}),this._webcamProducer.on("trackended",function(){var qr,Na,An=Z._deviceInfo.sdkType=="react-native"?xe.q.ERROR_RN_CAMERA_TRACK_ENDED:xe.q.ERROR_WEBCAM_TRACK_ENDED;(qr=Z._videosdkLogs)===null||qr===void 0||qr.pushLogs({logText:An.message,logType:"ERROR",attributes:{error:"Error in enableWebcam() :: ".concat(An.message)},dashboardLog:!0}),(Na=Z._openTelemetry)===null||Na===void 0||Na.traceAutoComplete({spanName:"Webcam track ended or Webcam disconnected!",span:fe,message:An.message,status:2}),Fe.dispatch(Er({type:"error",text:"Webcam disconnected!"})),Z.disableWebcam(fe).catch(function(){})}),(xn=this._openTelemetry)===null||xn===void 0||xn.completeSpan({span:fe,status:1,message:"Webcam turned on successfully"})):((yi=this._videosdkLogs)===null||yi===void 0||yi.pushLogs({logText:"Oops! Something went wrong, and we're unable to enable the webcam. Please try again.",logType:"ERROR",attributes:{error:"Error in enableWebcam(): Something went wrong."},dashboardLog:!0}),(ks=this._openTelemetry)===null||ks===void 0||ks.completeSpan({span:na,status:2,message:"Error in enableWebcam() :: camera transmission failed to initialize"}),(zi=this._openTelemetry)===null||zi===void 0||zi.completeSpan({span:fe,status:2,message:"Error in enableWebcam() :: camera transmission failed to initialize"})),sr.next=36;break;case 34:return sr.prev=34,Hi=sr.catch(6),(oi=this._videosdkLogs)===null||oi===void 0||oi.pushLogs({logText:Hi.message,logType:"ERROR",attributes:{error:"Error in enableWebcam() :: ".concat(Hi.message)},dashboardLog:!0}),(ls=this._openTelemetry)===null||ls===void 0||ls.completeSpan({span:fe,status:2,message:"Error in enableWebcam() :: ".concat(Hi.message)}),Fe.dispatch(Er({type:"error",text:"Error enabling webcam: ".concat(Hi)})),sr.next=35,this._socketRequest("produceError",{mediaType:"video",message:Hi.message});case 35:pt&&pt.stop();case 36:Fe.dispatch(go(!1));case 37:case"end":return sr.stop()}},v,this,[[6,34],[9,14]])}));function u(){return o.apply(this,arguments)}return u})()},{key:"handleNotAllowedError",value:function(u,v,s,l,A){var O={};return u.message==="Permission denied"||u.message==="Permission dismissed"?O=A==="video"?xe.q.ERROR_CAMERA_ACCESS_DENIED_OR_DISMISSED:xe.q.ERROR_MICROPHONE_ACCESS_DENIED_OR_DISMISSED:u.message.includes("The request is not allowed by the user agent")?O=A==="video"?xe.q.ERROR_CAMERA_PERMISSION_OR_AUTOPLAY_ISSUE:xe.q.ERROR_MICROPHONE_ACCESS_DENIED_OR_DISMISSED:u.message==="Permission denied by system"?O=A==="video"?xe.q.ERROR_CAMERA_PERMISSION_DENIED_BY_OS:xe.q.ERROR_MICROPHONE_PERMISSION_DENIED_BY_OS:O=A==="video"?xe.q.ERROR_GET_VIDEO_MEDIA_PERMISSION_DENIED:xe.q.ERROR_GET_AUDIO_MEDIA_PERMISSION_DENIED,s.pushLogs({logText:O.message,logType:"ERROR",attributes:{error:"Error in ".concat(A==="video"?"enableWebcam()":"enableMic()"," :: ").concat(u.message)},dashboardLog:!0}),v.completeSpan({message:A==="video"?"Error in enableWebcam() :: occurred in creating Video Track, ".concat(O.message):"Error in enableMic() :: occurred in creating audio track, ".concat(O.message),span:l,status:2}),O}},{key:"handleNotReadableError",value:function(u,v,s,l,A){var O={};return u.message==="Device in use"?O=A==="video"?xe.q.ERROR_CAMERA_IN_USE:xe.q.ERROR_MICROPHONE_IN_USE:O=A==="video"?xe.q.ERROR_VIDEO_SOURCE_INITIATION_FAILED:xe.q.ERROR_MICROPHONE_IN_USE,s.pushLogs({logText:O.message,logType:"ERROR",attributes:{error:"Error in ".concat(A==="video"?"enableWebcam()":"enableMic()"," :: ").concat(u.message)},dashboardLog:!0}),v.completeSpan({message:A==="video"?"Error in enableWebcam() :: occurred in creating Video Track, ".concat(O.message):"Error in enableMic() :: occurred in creating audio track, ".concat(O.message),span:l,status:2}),O}},{key:"disableWebcam",value:(function(){var o=(0,n.A)(h().mark(function v(){var s,l,A,O,I,Z,ee,te,fe,Me,ke,$e,ot,Je,qe,Ct,gt,Et=arguments,it;return h().wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:if(Z=Et.length>0&&Et[0]!==void 0?Et[0]:void 0,ee=(s=this._openTelemetry)===null||s===void 0?void 0:s.trace({spanName:"Disabling Webcam",span:Z||null}),Te.debug("disableWebcam()"),this._webcamEnabled=!1,this._webcamProducer){Pt.next=1;break}return(te=this._openTelemetry)===null||te===void 0||te.completeSpan({span:ee,status:2,message:"Webcam is already disabled"}),(fe=this._videosdkLogs)===null||fe===void 0||fe.pushLogs({logText:"Attempted to call disableWebcam() multiple times",attributes:{error:"Error in disableWebcam() :: Webcam is already disabled"},logType:"ERROR",dashboardLog:!0}),Pt.abrupt("return");case 1:return Me=(l=this._openTelemetry)===null||l===void 0?void 0:l.trace({spanName:"Disposing Video Track",span:ee,status:1,attributes:{videoTrackConfig:(A=this._webcamProducer)!==null&&A!==void 0&&A.track?JSON.stringify((function(pt){return{kind:pt.kind,id:pt.id,label:pt.label}})(this._webcamProducer.track)):"Track not provided"}}),this._webcamProducer.close(),ke=Nn(this._webcamProducer.id),(O=this._openTelemetry)===null||O===void 0||O.completeSpan({span:Me,status:1,message:"Video track disposed successfully"}),Fe.dispatch(ke),(I=this._openTelemetry)===null||I===void 0||I.traceAutoComplete({spanName:"Emitting STREAM_DISABLED event",span:ee,status:1}),this._eventEmitter.emit(ke.type,ke.payload),Pt.prev=2,$e=(ot=this._openTelemetry)===null||ot===void 0?void 0:ot.trace({spanName:"Stopping Video Stream transmission",span:ee}),Pt.next=3,this._socketRequest("closeProducer",{producerId:this._webcamProducer.id});case 3:this._openTelemetry.completeSpan({span:$e,message:"Video Stream transmission stopped successfully",status:1}),this._webcamProducer=null,(Je=this._openTelemetry)===null||Je===void 0||Je.completeSpan({span:ee,status:1,message:"Webcam disabled successfully"}),Pt.next=5;break;case 4:Pt.prev=4,it=Pt.catch(2),(qe=this._videosdkLogs)===null||qe===void 0||qe.pushLogs({logText:"Error in disableWebcam() :: Failed to close server-side webcam producer",logType:"ERROR",attributes:{error:it.message},dashboardLog:!0}),(Ct=this._openTelemetry)===null||Ct===void 0||Ct.completeSpan({span:$e,status:2,message:"Failed to stop Video Stream transmission: ".concat(it)}),(gt=this._openTelemetry)===null||gt===void 0||gt.completeSpan({span:ee,status:2,message:"Failed to disable webcam: ".concat(it)}),Fe.dispatch(Er({type:"error",text:"Error closing server-side webcam Producer: ".concat(it)}));case 5:case"end":return Pt.stop()}},v,this,[[2,4]])}));function u(){return o.apply(this,arguments)}return u})()},{key:"getMics",value:(function(){var o=(0,n.A)(h().mark(function v(){var s,l,A,O,I;return h().wrap(function(Z){for(;;)switch(Z.prev=Z.next){case 0:return l=(s=this._openTelemetry)===null||s===void 0?void 0:s.trace({spanName:"Getting Microphones"}),A=[],Z.prev=1,Z.next=2,this._updateMics(l);case 2:this._mics.forEach(function(ee,te){A.push({deviceId:te,label:ee.label})}),this._openTelemetry.completeSpan({status:1,span:l,message:"Microphone list fetched successfully"}),Z.next=4;break;case 3:Z.prev=3,I=Z.catch(1),Te.error("getMics() | Error",I),(O=this._videosdkLogs)===null||O===void 0||O.pushLogs({logText:I.message,logType:"ERROR",attributes:{error:"Error in getMics() :: Not able to get Mic List"},dashboardLog:!0}),this._openTelemetry.completeSpan({status:2,span:l,message:"Error in getMics() :: ".concat(I.message)});case 4:return Z.abrupt("return",A);case 5:case"end":return Z.stop()}},v,this,[[1,3]])}));function u(){return o.apply(this,arguments)}return u})()},{key:"changeMic",value:(function(){var o=(0,n.A)(h().mark(function v(s){var l,A,O,I,Z,ee,te,fe,Me,ke,$e,ot,Je,qe,Ct,gt,Et;return h().wrap(function(it){for(;;)switch(it.prev=it.next){case 0:if(A=(l=this._openTelemetry)===null||l===void 0?void 0:l.trace({spanName:"Changing Microphone",attributes:{inputType:(0,J.A)(s),micId:typeof s=="string"?s:"none",customTrackInfo:(0,J.A)(s)==="object"?JSON.stringify(s):"none"}}),it.prev=1,(0,J.A)(s)!="object"){it.next=7;break}return it.prev=2,it.next=3,this.disableMic(!0,A);case 3:return it.next=4,this.enableMic(s,A);case 4:this._openTelemetry.completeSpan({span:A,status:1,message:"Microphone changed successfully"}),it.next=6;break;case 5:it.prev=5,gt=it.catch(2),this._openTelemetry.completeSpan({span:A,status:2,message:"Error changing microphone with the given configuration :: ".concat(gt.message)});case 6:it.next=12;break;case 7:return ee=s,it.next=8,this._updateMics(A);case 8:if(te=(O=this._openTelemetry)===null||O===void 0?void 0:O.trace({spanName:"Selecting microphone device to switch to",span:A}),fe=Array.from(this._mics.keys()),Me=fe.length,ke=this._mic.device?this._mic.device.deviceId:void 0,ee!=null&&ee!=null?$e=fe.indexOf(ee):($e=fe.indexOf(ke),$e<Me-1?$e++:$e=0),this._mic.device=this._mics.get(fe[$e]),this._mic.device){it.next=9;break}throw(ot=this._videosdkLogs)===null||ot===void 0||ot.pushLogs({logText:"Error changeMic : No mic Found",logType:"ERROR"}),(Je=this._openTelemetry)===null||Je===void 0||Je.completeSpan({span:te,status:2,message:"Failed to select Microphone device. ".concat(s?"Microphone Device with deviceId (".concat(s,") does not exist."):"No webcam device found")}),new Error("No microphone device found");case 9:return(I=this._openTelemetry)===null||I===void 0||I.completeSpan({span:te,status:1,message:"Microphone device selected successfully",attributes:{selectedMicrophone:this._mic.device?JSON.stringify(this._mic.device):"No microphone devices found"}}),it.next=10,this.disableMic(!0,A);case 10:return it.next=11,this.enableMic(void 0,A);case 11:(Z=this._openTelemetry)===null||Z===void 0||Z.completeSpan({span:A,status:1,message:"Microphone changed successfully"});case 12:it.next=14;break;case 13:it.prev=13,Et=it.catch(1),(qe=this._openTelemetry)===null||qe===void 0||qe.completeSpan({span:A,status:2,message:"Something went wrong while changing microphone. Error : ".concat(Et.message)}),(Ct=this._videosdkLogs)===null||Ct===void 0||Ct.pushLogs({logText:"Error changeMic() | Error",logType:"ERROR",attributes:{error:Et.message}});case 14:case"end":return it.stop()}},v,this,[[1,13],[2,5]])}));function u(v){return o.apply(this,arguments)}return u})()},{key:"getWebcams",value:(function(){var o=(0,n.A)(h().mark(function v(){var s,l,A,O,I;return h().wrap(function(Z){for(;;)switch(Z.prev=Z.next){case 0:return l=(s=this._openTelemetry)===null||s===void 0?void 0:s.trace({spanName:"Getting Webcams"}),A=[],Z.prev=1,Z.next=2,this._updateWebcams(l);case 2:this._webcams.forEach(function(ee,te){A.push({deviceId:te,label:ee.label,facingMode:ee.facing||"environment"})}),this._openTelemetry.completeSpan({status:1,span:l,message:"Webcams fetched successfully"}),Z.next=4;break;case 3:Z.prev=3,I=Z.catch(1),Te.error("getWebcams() | failed %o",I),(O=this._videosdkLogs)===null||O===void 0||O.pushLogs({logText:I.message,logType:"ERROR",attributes:{error:"Error in getWebcams() :: Not able to get Webcam List"},dashboardLog:!0}),this._openTelemetry.completeSpan({status:2,span:l,message:"Error in getWebcams() :: ".concat(I.message)});case 4:return Z.abrupt("return",A);case 5:case"end":return Z.stop()}},v,this,[[1,3]])}));function u(){return o.apply(this,arguments)}return u})()},{key:"replaceWebcamStream",value:(function(){var o=(0,n.A)(h().mark(function v(s){var l;return h().wrap(function(A){for(;;)switch(A.prev=A.next){case 0:if(!this._webcamProducer){A.next=2;break}return l=s.getVideoTracks()[0],A.next=1,this._webcamProducer.replaceTrack({track:l});case 1:this._eventEmitter.emit("UPDATE_PRODUCER",{producer:this._webcamProducer}),A.next=4;break;case 2:return A.next=3,this.disableWebcam();case 3:return A.next=4,this.enableWebcam(s);case 4:case"end":return A.stop()}},v,this)}));function u(v){return o.apply(this,arguments)}return u})()},{key:"changeWebcam",value:(function(){var o=(0,n.A)(h().mark(function v(s){var l,A,O,I,Z,ee,te,fe,Me,ke,$e,ot,Je,qe,Ct,gt,Et;return h().wrap(function(it){for(;;)switch(it.prev=it.next){case 0:if(A=(l=this._openTelemetry)===null||l===void 0?void 0:l.trace({spanName:"Changing Webcam",attributes:{inputType:(0,J.A)(s),webcamId:typeof s=="string"?s:"none",customTrackInfo:(0,J.A)(s)==="object"?JSON.stringify(s):"none"}}),(0,J.A)(s)!=="object"){it.next=6;break}return it.prev=1,it.next=2,this.disableWebcam(A);case 2:return it.next=3,this.enableWebcam(s,A);case 3:this._openTelemetry.completeSpan({span:A,status:1,message:"Webcam changed successfully"}),it.next=5;break;case 4:it.prev=4,gt=it.catch(1),Te.error("changeWebcam() | failed: %o",gt),(O=this._videosdkLogs)===null||O===void 0||O.pushLogs({logText:"Error Could not change webcam",logType:"ERROR",attributes:{object:JSON.stringify(s),error:gt.message}}),this._openTelemetry.completeSpan({span:A,status:2,message:"Error changing webcam with the given configuration :: ".concat(gt.message)}),Fe.dispatch(Er({type:"error",text:"Could not change webcam: ".concat(gt)}));case 5:it.next=12;break;case 6:return it.prev=6,it.next=7,this._updateWebcams(A);case 7:if(te=(I=this._openTelemetry)===null||I===void 0?void 0:I.trace({spanName:"Selecting webcam device to switch to",span:A}),fe=Array.from(this._webcams.keys()),Me=fe.length,ke=this._webcam.device?this._webcam.device.deviceId:void 0,s!=null&&s!=null?$e=fe.indexOf(s):($e=fe.indexOf(ke),$e<Me-1?$e++:$e=0),this._webcam.device=this._webcams.get(fe[$e]),Te.debug("changeWebcam() | new selected webcam [device:%o]",this._webcam.device),this._webcam.resolution=this._webcam.resolution||"hd",this._webcam.device){it.next=8;break}throw(ot=this._videosdkLogs)===null||ot===void 0||ot.pushLogs({logText:"Error changeWebcam : No webcam Found",logType:"ERROR"}),(Je=this._openTelemetry)===null||Je===void 0||Je.completeSpan({span:te,status:2,message:"Failed to select Webcam device. ".concat(s?"Webcam Device with deviceId (".concat(s,") does not exist."):"No webcam device found")}),new Error("No webcam device found");case 8:return(Z=this._openTelemetry)===null||Z===void 0||Z.completeSpan({span:te,status:1,message:"Webcam device selected successfully",attributes:{selectedWebcam:this._webcam.device?JSON.stringify(this._webcam.device):"No webcam devices found"}}),it.next=9,this.disableWebcam(A);case 9:return it.next=10,this.enableWebcam(void 0,A);case 10:return(ee=this._openTelemetry)===null||ee===void 0||ee.completeSpan({span:A,status:1,message:"Webcam changed successfully"}),it.abrupt("return");case 11:it.prev=11,Et=it.catch(6),Te.error("changeWebcam() | failed: %o",Et),(qe=this._videosdkLogs)===null||qe===void 0||qe.pushLogs({logText:"Error Could not change webcam",logType:"ERROR",attributes:{object:JSON.stringify(s),error:Et.message}}),(Ct=this._openTelemetry)===null||Ct===void 0||Ct.completeSpan({span:A,status:2,message:"Something went wrong while changing webcam. Error : ".concat(Et.message)}),Fe.dispatch(Er({type:"error",text:"Could not change webcam: ".concat(Et)}));case 12:case"end":return it.stop()}},v,this,[[1,4],[6,11]])}));function u(v){return o.apply(this,arguments)}return u})()},{key:"changeWebcamResolution",value:(function(){var o=(0,n.A)(h().mark(function v(){var s,l,A,O,I,Z,ee;return h().wrap(function(te){for(;;)switch(te.prev=te.next){case 0:Te.debug("changeWebcamResolution()"),te.prev=1,I=this._webcam.resolution,te.next=I==="qvga"?2:I==="vga"?3:I==="hd"?4:5;break;case 2:return this._webcam.resolution="vga",te.abrupt("continue",6);case 3:return this._webcam.resolution="hd",te.abrupt("continue",6);case 4:return this._webcam.resolution="qvga",te.abrupt("continue",6);case 5:this._webcam.resolution="hd";case 6:return Te.debug("changeWebcamResolution() | calling getUserMedia()"),te.prev=7,te.next=8,navigator.mediaDevices.getUserMedia({video:Zr({deviceId:{exact:this._webcam.device.deviceId}},qo[this._webcam.resolution])});case 8:s=te.sent,te.next=10;break;case 9:return te.prev=9,Z=te.catch(7),(l=this._videosdkLogs)===null||l===void 0||l.pushLogs({logText:"Error in getUserMedia for changeWebcamResolution",logType:"ERROR",attributes:{error:JSON.stringify(Z)}}),Z.message==="Permission denied"||Z.name==="NotAllowedError"?this._emitError(xe.q.ERROR_GET_VIDEO_MEDIA_PERMISSION_DENIED):this._emitError(xe.q.ERROR_GET_VIDEO_MEDIA),te.abrupt("return");case 10:return A=s.getVideoTracks()[0],te.next=11,this._webcamProducer.replaceTrack({track:A});case 11:Fe.dispatch(Ii(this._webcamProducer.id,A)),te.next=13;break;case 12:te.prev=12,ee=te.catch(1),Te.error("changeWebcamResolution() | failed: %o",ee),(O=this._videosdkLogs)===null||O===void 0||O.pushLogs({logText:"Error Could not change webcam resolution",logType:"ERROR",attributes:{error:ee.message}}),Fe.dispatch(Er({type:"error",text:"Could not change webcam resolution: ".concat(ee)}));case 13:case"end":return te.stop()}},v,this,[[1,12],[7,9]])}));function u(){return o.apply(this,arguments)}return u})()},{key:"enableShare",value:(function(){var o=(0,n.A)(h().mark(function v(){var s,l=this,A,O,I,Z,ee,te,fe,Me,ke,$e,ot,Je,qe,Ct,gt,Et,it,Pt,pt,Ge,At,cr,qt,Jt,Gt,ht,Zt,mr,rr,bt,Ze,Ie,Le,Lt,Kt,Yt,vr,kr,ta,Yr,Wt,Cr,er,Ur,Hr,Fa,fa,on=arguments,Qa,ma,la;return h().wrap(function(xt){for(;;)switch(xt.prev=xt.next){case 0:if(A=on.length>0&&on[0]!==void 0?on[0]:void 0,O=(s=this._openTelemetry)===null||s===void 0?void 0:s.trace({spanName:"Enabling Screen Share with".concat(A?" ":"out ","Custom Screen Sharing Track"),attributes:{customShareConfig:A?JSON.stringify(A):"Custom Track not provided"}}),Te.debug("enableShare()"),!this._shareProducer){xt.next=1;break}return(I=this._openTelemetry)===null||I===void 0||I.completeSpan({span:O,status:2,message:"Screen sharing is already enabled"}),(Z=this._videosdkLogs)===null||Z===void 0||Z.pushLogs({logText:"Attempted to call enableScreenShare() multiple times",attributes:{error:"Error in enableScreenShare() :: Screen Sharing is already enabled"},logType:"ERROR",dashboardLog:!0}),xt.abrupt("return");case 1:if(this._mediasoupDevice.canProduce("video")){xt.next=2;break}return(ee=this._openTelemetry)===null||ee===void 0||ee.completeSpan({span:O,status:2,message:"Device is not capable of producing video for screen sharing."}),Te.error("enableShare() | cannot produce video"),xt.abrupt("return");case 2:if(ke=[],Fe.dispatch(bs(!0)),xt.prev=3,Te.debug("enableShare() | calling getUserMedia()"),!(A&&A.active)){xt.next=4;break}Me=(Et=this._openTelemetry)===null||Et===void 0?void 0:Et.trace({spanName:"Utilising provided custom track",span:O,attributes:{customScreenShareTrackConfig:A?JSON.stringify(A):"Custom Track not provided"}}),te=A.getVideoTracks()[0],fe=A.getAudioTracks()[0],A.multiStream?(it=te.getConstraints(),Pt=it.height,pt=it.frameRate,Ge=Hs.$.screenShareProfiles["h".concat(Pt,"p_").concat(pt,"fps")],At=[{maxBitrate:Ge.bitrates.high,maxFramerate:pt,scalabilityMode:"S3T3",dtx:!0},{maxBitrate:Ge.bitrates.medium,maxFramerate:pt,scalabilityMode:"S2T3",dtx:!0},{maxBitrate:Ge.bitrates.low,maxFramerate:pt,scalabilityMode:"S1T3",dtx:!0}],ke=At):ke=Go,xt.next=10;break;case 4:return Me=(cr=this._openTelemetry)===null||cr===void 0?void 0:cr.trace({spanName:"Creating Screenshare Track",span:O}),xt.prev=5,xt.next=6,navigator.mediaDevices.getDisplayMedia({audio:!0,video:{width:{max:1920},height:{max:1080},frameRate:{max:10}}});case 6:Jt=xt.sent,xt.next=8;break;case 7:return xt.prev=7,Qa=xt.catch(5),(Gt=this._videosdkLogs)===null||Gt===void 0||Gt.pushLogs({logText:"Error in getDisplayMedia for screen share",logType:"ERROR",attributes:{error:JSON.stringify(Qa)}}),(ht=this._openTelemetry)===null||ht===void 0||ht.completeSpan({message:"Error occured while creating Screenshare track :".concat(Qa),span:Me,status:2}),(Zt=this._openTelemetry)===null||Zt===void 0||Zt.completeSpan({span:O,status:2,message:"Error in getDisplayMedia for screen share ".concat(Qa)}),Qa.message==="Permission denied"||Qa.name==="NotAllowedError"?this._emitError(xe.q.ERROR_GET_DISPLAY_MEDIA_PERMISSION_DENIED):this._emitError(xe.q.ERROR_GET_DISPLAY_MEDIA),xt.abrupt("return");case 8:if(Jt){xt.next=9;break}return Fe.dispatch(bs(!1)),(mr=this._openTelemetry)===null||mr===void 0||mr.completeSpan({message:"Error occured while creating Screenshare track : Stream not found.",span:Me,status:2}),(rr=this._openTelemetry)===null||rr===void 0||rr.completeSpan({span:O,status:2,message:"Stream not found"}),xt.abrupt("return");case 9:te=Jt.getVideoTracks()[0],fe=Jt.getAudioTracks()[0],ke=Go,(qt=this._openTelemetry)===null||qt===void 0||qt.completeSpan({message:A?"":"Screenshare Track Generated",span:Me,attributes:{customScreenshareTrackConfig:JSON.stringify(A||{audio:!0,video:{width:1920,height:1080,frameRate:10}})},status:1});case 10:if(bt=($e=this._openTelemetry)===null||$e===void 0?void 0:$e.trace({spanName:"Generating configurations for sending Screenshare Stream",span:O}),Ie={videoGoogleStartBitrate:1e3},!this._forceH264){xt.next=12;break}if(Ze=this._mediasoupDevice.rtpCapabilities.codecs.find(function(Mr){return Mr.mimeType.toLowerCase()==="video/h264"}),Ze){xt.next=11;break}throw(Le=this._videosdkLogs)===null||Le===void 0||Le.pushLogs({logText:"Error EnableShare : desired H264 codec+configuration is not supported",logType:"ERROR"}),new Error("desired H264 codec+configuration is not supported");case 11:xt.next=13;break;case 12:if(!this._forceVP9){xt.next=13;break}if(Ze=this._mediasoupDevice.rtpCapabilities.codecs.find(function(Mr){return Mr.mimeType.toLowerCase()==="video/vp9"}),Ze){xt.next=13;break}throw(Lt=this._videosdkLogs)===null||Lt===void 0||Lt.pushLogs({logText:"Error EnableShare :desired VP9 codec+configuration is not supported",logType:"ERROR"}),new Error("desired VP9 codec+configuration is not supported");case 13:return(ot=this._openTelemetry)===null||ot===void 0||ot.completeSpan({span:bt,status:1,message:"Screenshare stream configuration generated",attributes:{appData:JSON.stringify({encodings:ke.length>0?ke:Go,codecOptions:Ie,codec:Ze})}}),bt=(Je=this._openTelemetry)===null||Je===void 0?void 0:Je.trace({spanName:"Starting Screen Share Stream transmission",span:O}),xt.next=14,this._sendTransport.produce({track:te,encodings:ke.length>0?ke:Go,codecOptions:Ie,codec:Ze,appData:{share:!0,isEncrypted:this.isE2EEEnabled},onRtpSender:function(Vr){l.e2eeManager&&(Vr.senderStreams=Vr.createEncodedStreams())}});case 14:if(this._shareProducer=xt.sent,this.e2eeManager&&this.e2eeManager.emit("NEW_PRODUCER",this._shareProducer),Kt=hi({id:this._shareProducer.id,type:"share",paused:this._shareProducer.paused,track:this._shareProducer.track,rtpParameters:this._shareProducer.rtpParameters,codec:this._shareProducer.rtpParameters.codecs[0].mimeType.split("/")[1],appData:{share:!0,isEncrypted:this.isE2EEEnabled},instance:this._shareProducer,rtpSender:this._shareProducer.rtpSender}),Fe.dispatch(Kt),(qe=this._openTelemetry)===null||qe===void 0||qe.completeSpan({span:bt,status:1,message:"Screen share transmission started successfully"}),(Ct=this._openTelemetry)===null||Ct===void 0||Ct.traceAutoComplete({spanName:"Emitting STREAM_ENABLED event",span:O,status:1}),this._eventEmitter.emit(Kt.type,Kt.payload),this._shareProducer.on("transportclose",function(){var Mr,Vr=Nn(l._shareProducer.id);Fe.dispatch(Vr),l._eventEmitter.emit(Vr.type,Vr.payload),(Mr=l._shareProducer)===null||Mr===void 0||Mr.close(),l._shareProducer=null}),this._shareProducer.on("trackended",function(){var Mr;(Mr=l._openTelemetry)===null||Mr===void 0||Mr.traceAutoComplete({spanName:"Screen share track ended or Share disconnected!",span:O,status:2}),Fe.dispatch(Er({type:"error",text:"Share disconnected!"})),l.disableShare().catch(function(){})}),!fe){xt.next=19;break}return xt.prev=15,ta={opusStereo:1,opusDtx:1},bt=(Yt=this._openTelemetry)===null||Yt===void 0?void 0:Yt.trace({spanName:"Starting Screen Share Audio Stream transmission",span:O}),xt.next=16,this._sendTransport.produce({track:fe,codecOptions:ta,appData:{share:!0,isEncrypted:this.isE2EEEnabled},onRtpSender:function(Vr){l.e2eeManager&&(Vr.senderStreams=Vr.createEncodedStreams())}});case 16:this._shareAudioProducer=xt.sent,Yr=hi({id:this._shareAudioProducer.id,type:"share",paused:this._shareAudioProducer.paused,track:this._shareAudioProducer.track,rtpParameters:this._shareAudioProducer.rtpParameters,codec:this._shareAudioProducer.rtpParameters.codecs[0].mimeType.split("/")[1],appData:{share:!0,isEncrypted:this.isE2EEEnabled},instance:this._shareAudioProducer,rtpSender:this._shareAudioProducer.rtpSender}),Fe.dispatch(Yr),(vr=this._openTelemetry)===null||vr===void 0||vr.completeSpan({span:bt,status:1,message:"Screen Share Audio Stream transmission started successfully"}),this.e2eeManager&&this.e2eeManager.emit("NEW_PRODUCER",this._shareAudioProducer),(kr=this._openTelemetry)===null||kr===void 0||kr.traceAutoComplete({spanName:"Emitting STREAM_ENABLED event",span:O,status:1}),this._eventEmitter.emit(Yr.type,Yr.payload),this._shareAudioProducer.on("transportclose",function(){var Mr,Vr=Nn(l._shareAudioProducer.id);Fe.dispatch(Vr),l._eventEmitter.emit(Vr.type,Vr.payload),(Mr=l._shareAudioProducer)===null||Mr===void 0||Mr.close(),l._shareAudioProducer=null}),this._shareAudioProducer.on("trackended",function(){var Mr;(Mr=l._openTelemetry)===null||Mr===void 0||Mr.traceAutoComplete({spanName:"Screen share audio track ended",span:O,status:2}),Fe.dispatch(Er({type:"error",text:"Share disconnected!"}))}),xt.next=19;break;case 17:return xt.prev=17,ma=xt.catch(15),xt.next=18,this._socketRequest("produceError",{mediaType:"shareAudio",message:ma.message});case 18:(Wt=this._videosdkLogs)===null||Wt===void 0||Wt.pushLogs({logText:"Error in shareAudio produceError",logType:"ERROR",attributes:{error:ma.message}});case 19:(gt=this._openTelemetry)===null||gt===void 0||gt.completeSpan({span:O,status:1,message:"Screen Share enabled successfully"}),xt.next=22;break;case 20:return xt.prev=20,la=xt.catch(3),Te.error("enableShare() | failed:%o",la),(Cr=this._openTelemetry)===null||Cr===void 0||Cr.completeSpan({span:O,status:2,attributes:{error:la.message},message:"Error in enableScreenShare() : Screenshare stream could not be produced"}),console.log("screen share catch",la.message),(er=this._videosdkLogs)===null||er===void 0||er.pushLogs({logText:"Error in enableShare video produceError",logType:"ERROR",attributes:{error:la.message}}),la.name!=="NotAllowedError"&&Fe.dispatch(Er({type:"error",text:"Error sharing: ".concat(la)})),xt.next=21,this._socketRequest("produceError",{mediaType:"share",message:la.message});case 21:te&&te.stop(),fe&&fe.stop();case 22:Fe.dispatch(bs(!1)),this._shareProducer&&(Ur=0,Hr=this._metrics.addNewProbe(this._shareProducer,"share_producer"),Hr.onStatsCollected=function(Mr){try{if(l._stats.producerStats||(l._stats.producerStats={}),l._stats.producerStats.share||(l._stats.producerStats.share=[]),l._shareProducer){var Vr;l._latestStats[(Vr=l._shareProducer)===null||Vr===void 0?void 0:Vr.id]=[]}Mr.video.forEach(function(va){if(l._shareProducer){var na;l._latestStats[(na=l._shareProducer)===null||na===void 0?void 0:na.id].push(va)}}),Ur%5==0&&l._shareProducer!=null&&l._stats.producerStats.share.push({timestamp:new Date,stats:l._latestStats[l._shareProducer.id]}),Ur++}catch(va){var ra;(ra=l._videosdkLogs)===null||ra===void 0||ra.pushLogs({logText:"Error PRODUCER Stats ERROR",logType:"ERROR",attributes:{error:va.message}})}},Hr.start(),this._shareProducer.observer.on("close",function(){Hr.stop(),l._metrics.removeExistingProbe(Hr)})),this._shareAudioProducer&&(Fa=0,fa=this._metrics.addNewProbe(this._shareAudioProducer,"share_audio_producer"),fa.onStatsCollected=function(Mr){try{if(l._stats.producerStats||(l._stats.producerStats={}),l._stats.producerStats.shareAudio||(l._stats.producerStats.shareAudio=[]),l._shareAudioProducer){var Vr;l._latestStats[(Vr=l._shareAudioProducer)===null||Vr===void 0?void 0:Vr.id]=[]}Mr.audio.forEach(function(va){if(l._shareAudioProducer){var na;l._latestStats[(na=l._shareAudioProducer)===null||na===void 0?void 0:na.id].push(va)}}),Fa%5==0&&l._shareAudioProducer!=null&&l._stats.producerStats.shareAudio.push(Zr({timestamp:new Date},l._latestStats[l._shareAudioProducer.id]?l._latestStats[l._shareAudioProducer.id][0]:{})),Fa++}catch(va){var ra;(ra=l._videosdkLogs)===null||ra===void 0||ra.pushLogs({logText:"Error PRODUCER Stats ERROR",logType:"ERROR",attributes:{error:va.message}})}},fa.start(),this._shareAudioProducer.observer.on("close",function(){fa.stop(),l._metrics.removeExistingProbe(fa)}));case 23:case"end":return xt.stop()}},v,this,[[3,20],[5,7],[15,17]])}));function u(){return o.apply(this,arguments)}return u})()},{key:"disableShare",value:(function(){var o=(0,n.A)(h().mark(function v(){var s,l,A,O,I,Z,ee,te,fe,Me,ke,$e,ot,Je,qe,Ct,gt,Et,it,Pt,pt;return h().wrap(function(Ge){for(;;)switch(Ge.prev=Ge.next){case 0:if(Te.debug("disableShare()"),ee=(s=this._openTelemetry)===null||s===void 0?void 0:s.trace({spanName:"Disabling Screen Share",status:1}),this._shareProducer){Ge.next=1;break}return(te=this._openTelemetry)===null||te===void 0||te.completeSpan({span:ee,status:2,message:"Screen sharing is already disabled"}),Ge.abrupt("return");case 1:return fe=(l=this._openTelemetry)===null||l===void 0?void 0:l.trace({spanName:"Disposing Screenshare Track",span:ee,attributes:{shareTrackConfig:(A=this._shareProducer)!==null&&A!==void 0&&A.track?JSON.stringify((function(At){return{kind:At.kind,id:At.id,label:At.label}})(this._shareProducer.track)):"Track not provided"}}),this._shareProducer.close(),Me=Nn(this._shareProducer.id),(O=this._openTelemetry)===null||O===void 0||O.completeSpan({span:fe,status:1,message:"Screenshare track disposed successfully"}),Fe.dispatch(Me),(I=this._openTelemetry)===null||I===void 0||I.traceAutoComplete({spanName:"Emitting STREAM_DISABLED event",span:ee,status:1}),this._eventEmitter.emit(Me.type,Me.payload),this._shareAudioProducer&&(qe=(ke=this._openTelemetry)===null||ke===void 0?void 0:ke.trace({spanName:"Disposing Screenshare Audio Track",span:ee,attributes:{shareAudioTrackConfig:($e=this._shareAudioProducer)!==null&&$e!==void 0&&$e.track?JSON.stringify((function(At){return{kind:At.kind,id:At.id,label:At.label}})(this._shareAudioProducer.track)):"Track not provided"}}),this._shareAudioProducer.close(),Me=Nn(this._shareAudioProducer.id),(ot=this._openTelemetry)===null||ot===void 0||ot.completeSpan({span:qe,status:1,message:"Screenshare Audio Track disposed successfully"}),Fe.dispatch(Me),(Je=this._openTelemetry)===null||Je===void 0||Je.traceAutoComplete({spanName:"Emitting STREAM_DISABLED event",span:ee,status:1}),this._eventEmitter.emit(Me.type,Me.payload)),Ge.prev=2,Ct=(gt=this._openTelemetry)===null||gt===void 0?void 0:gt.trace({spanName:"Stopping Screenshare Stream transmission",span:ee}),Ge.next=3,this._socketRequest("closeProducer",{producerId:this._shareProducer.id});case 3:if(!this._shareAudioProducer){Ge.next=4;break}return this._openTelemetry.traceAutoComplete({spanName:"Stopping Screenshare Audio Stream transmission",span:Ct}),Ge.next=4,this._socketRequest("closeProducer",{producerId:this._shareAudioProducer.id});case 4:this._openTelemetry.completeSpan({span:Ct,message:this._shareAudioProducer?"Screenshare Stream and Screenshare Audio Stream transmission stopped successfully":"Screenshare Stream transmission stopped successfully",status:1}),Ge.next=6;break;case 5:Ge.prev=5,pt=Ge.catch(2),Fe.dispatch(Er({type:"error",text:"Error closing server-side share Producer: ".concat(pt)})),(Et=this._openTelemetry)===null||Et===void 0||Et.completeSpan({span:Ct,status:2,message:"Failed to stop Screenshare Stream transmission: ".concat(pt)}),(it=this._openTelemetry)===null||it===void 0||it.completeSpan({span:ee,status:2,message:"Error closing server-side screen share producer ".concat(pt)}),(Pt=this._videosdkLogs)===null||Pt===void 0||Pt.pushLogs({logText:"Error closing server-side share Producer",logType:"ERROR",attributes:{error:pt.message}});case 6:this._shareProducer=null,this._shareAudioProducer=null,(Z=this._openTelemetry)===null||Z===void 0||Z.completeSpan({span:ee,status:1,message:"Screen share disabled successfully"});case 7:case"end":return Ge.stop()}},v,this,[[2,5]])}));function u(){return o.apply(this,arguments)}return u})()},{key:"enableAudioOnly",value:(function(){var o=(0,n.A)(h().mark(function v(){var s,l,A,O;return h().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:Te.debug("enableAudioOnly()"),Fe.dispatch(_s(!0)),this.disableWebcam(),s=Ya(this._consumers.values()),I.prev=1,s.s();case 2:if((l=s.n()).done){I.next=5;break}if(A=l.value,A.kind==="video"){I.next=3;break}return I.abrupt("continue",4);case 3:this._pauseConsumer(A);case 4:I.next=2;break;case 5:I.next=7;break;case 6:I.prev=6,O=I.catch(1),s.e(O);case 7:return I.prev=7,s.f(),I.finish(7);case 8:Fe.dispatch(Ni(!0)),Fe.dispatch(_s(!1));case 9:case"end":return I.stop()}},v,this,[[1,6,7,8]])}));function u(){return o.apply(this,arguments)}return u})()},{key:"disableAudioOnly",value:(function(){var o=(0,n.A)(h().mark(function v(){var s,l,A,O;return h().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:Te.debug("disableAudioOnly()"),Fe.dispatch(_s(!0)),!this._webcamProducer&&this._produce&&(Zn()||{}).webcamEnabled&&this.enableWebcam(),s=Ya(this._consumers.values()),I.prev=1,s.s();case 2:if((l=s.n()).done){I.next=5;break}if(A=l.value,A.kind==="video"){I.next=3;break}return I.abrupt("continue",4);case 3:this._resumeConsumer(A);case 4:I.next=2;break;case 5:I.next=7;break;case 6:I.prev=6,O=I.catch(1),s.e(O);case 7:return I.prev=7,s.f(),I.finish(7);case 8:Fe.dispatch(Ni(!1)),Fe.dispatch(_s(!1));case 9:case"end":return I.stop()}},v,this,[[1,6,7,8]])}));function u(){return o.apply(this,arguments)}return u})()},{key:"muteAudio",value:(function(){var o=(0,n.A)(h().mark(function v(){return h().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:Te.debug("muteAudio()"),Fe.dispatch(Bs(!0));case 1:case"end":return s.stop()}},v)}));function u(){return o.apply(this,arguments)}return u})()},{key:"unmuteAudio",value:(function(){var o=(0,n.A)(h().mark(function v(){return h().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:Te.debug("unmuteAudio()"),Fe.dispatch(Bs(!1));case 1:case"end":return s.stop()}},v)}));function u(){return o.apply(this,arguments)}return u})()},{key:"handleRemoteRestartIce",value:(function(){var o=(0,n.A)(h().mark(function v(s){var l,A,O,I,Z,ee;return h().wrap(function(te){for(;;)switch(te.prev=te.next){case 0:return O=s.iceParameters,I=s.transportId,s.internalSpan,I===((l=this._sendTransport)===null||l===void 0?void 0:l.id)&&this._sendTransport.restartIce({iceParameters:O}),I===((A=this._recvTransport)===null||A===void 0?void 0:A.id)&&this._recvTransport.restartIce({iceParameters:O}),te.prev=1,te.next=2,this._socketRequest("iceRestarted",{transportId:I});case 2:te.next=4;break;case 3:te.prev=3,ee=te.catch(1),(Z=this._videosdkLogs)===null||Z===void 0||Z.pushLogs({logText:"Error handleRemoteRestartIce() ICE restart failed",logType:"ERROR",attributes:{error:ee.message}}),Fe.dispatch(Er({type:"error",text:"ICE restart failed: ".concat(ee)}));case 4:case"end":return te.stop()}},v,this,[[1,3]])}));function u(v){return o.apply(this,arguments)}return u})()},{key:"restartIce",value:(function(){var o=(0,n.A)(h().mark(function v(){var s,l,A,O;return h().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:if(Te.debug("restartIce()"),Fe.dispatch(js(!0)),I.prev=1,!this._sendTransport){I.next=3;break}return I.next=2,this._socketRequest("restartIce",{transportId:this._sendTransport.id});case 2:return s=I.sent,I.next=3,this._sendTransport.restartIce({iceParameters:s});case 3:if(!this._recvTransport){I.next=5;break}return I.next=4,this._socketRequest("restartIce",{transportId:this._recvTransport.id});case 4:return l=I.sent,I.next=5,this._recvTransport.restartIce({iceParameters:l});case 5:Fe.dispatch(Er({text:"ICE restarted"})),I.next=7;break;case 6:I.prev=6,O=I.catch(1),Te.error("restartIce() | failed:%o",O),Fe.dispatch(Er({type:"error",text:"ICE restart failed: ".concat(O)})),(A=this._videosdkLogs)===null||A===void 0||A.pushLogs({logText:"Error restartIce() ICE restart failed",logType:"ERROR",attributes:{error:O.message}});case 7:Fe.dispatch(js(!1));case 8:case"end":return I.stop()}},v,this,[[1,6]])}));function u(){return o.apply(this,arguments)}return u})()},{key:"_socketRequest",value:(function(){var o=(0,n.A)(h().mark(function v(s){var l=this,A,O=arguments;return h().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:return A=O.length>1&&O[1]!==void 0?O[1]:{},I.abrupt("return",new Promise(function(Z,ee){l._webSocket.emit("request",{method:s,request:!0,data:A},function(te){te!=null&&te.error?ee(new Error(te.error)):Z(te.data)})}));case 1:case"end":return I.stop()}},v)}));function u(v){return o.apply(this,arguments)}return u})()},{key:"_socketRequestForPubsub",value:(function(){var o=(0,n.A)(h().mark(function v(s){var l=this,A,O=arguments;return h().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:return A=O.length>1&&O[1]!==void 0?O[1]:{},I.abrupt("return",new Promise(function(Z,ee){l._webSocket.timeout(3e4).emit("request",{method:s,request:!0,data:A},function(te,fe){if(te)return ee(te);fe!=null&&fe.error?ee(new Error(fe.error)):Z(fe.data)})}));case 1:case"end":return I.stop()}},v)}));function u(v){return o.apply(this,arguments)}return u})()},{key:"setMaxSendingSpatialLayer",value:(function(){var o=(0,n.A)(h().mark(function v(s){var l,A;return h().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:if(Te.debug("setMaxSendingSpatialLayer() [spatialLayer:%s]",s),O.prev=1,!this._webcamProducer){O.next=3;break}return O.next=2,this._webcamProducer.setMaxSpatialLayer(s);case 2:O.next=4;break;case 3:if(!this._shareProducer){O.next=4;break}return O.next=4,this._shareProducer.setMaxSpatialLayer(s);case 4:O.next=6;break;case 5:O.prev=5,A=O.catch(1),Te.error("setMaxSendingSpatialLayer() | failed:%o",A),(l=this._videosdkLogs)===null||l===void 0||l.pushLogs({logText:"Error setting max sending video spatial layer",logType:"ERROR",attributes:{error:A.message}}),Fe.dispatch(Er({type:"error",text:"Error setting max sending video spatial layer: ".concat(A)}));case 6:case"end":return O.stop()}},v,this,[[1,5]])}));function u(v){return o.apply(this,arguments)}return u})()},{key:"setWebcamQuality",value:(function(){var o=(0,n.A)(h().mark(function v(s){var l,A,O;return h().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:if(l=this._openTelemetry.trace({spanName:"Setting Webcam Quality to ".concat(s)}),this._webcamProducer){I.next=1;break}return I.abrupt("return");case 1:if(A=this._webcam.resolution,O=As[A][s].s,this._webcamProducer.maxSpatialLayer!=O){I.next=2;break}return I.abrupt("return");case 2:return I.next=3,this._webcamProducer.setMaxSpatialLayer(O);case 3:this._openTelemetry.completeSpan({span:l,status:1,message:"Webcam Quality successfully set to ".concat(s)});case 4:case"end":return I.stop()}},v,this)}));function u(v){return o.apply(this,arguments)}return u})()},{key:"setConsumerScreenShareQuality",value:(function(){var o=(0,n.A)(h().mark(function v(s,l,A){var O,I,Z,ee,te,fe,Me,ke;return h().wrap(function($e){for(;;)switch($e.prev=$e.next){case 0:return ee=this._peerSpans.get(A),te=(O=this._openTelemetry)===null||O===void 0?void 0:O.trace({spanName:"Setting Screen Share Quality to ".concat(l),span:ee}),fe={high:{spatialLayer:2,temporalLayer:2},med:{spatialLayer:1,temporalLayer:2},low:{spatialLayer:0,temporalLayer:2}},Me=fe[l]||fe.high,ke=(I=this._openTelemetry)===null||I===void 0?void 0:I.trace({spanName:"Fetching Screen share spatial & temporal layer settings",span:te,attributes:{selectedQuality:JSON.stringify(Me)}}),$e.next=1,this.setConsumerPreferredLayers(s,Me.spatialLayer,Me.temporalLayer,ke);case 1:(Z=this._openTelemetry)===null||Z===void 0||Z.completeSpan({message:"Screen share quality set successfully",span:te,status:1});case 2:case"end":return $e.stop()}},v,this)}));function u(v,s,l){return o.apply(this,arguments)}return u})()},{key:"setConsumerQuality",value:(function(){var o=(0,n.A)(h().mark(function v(s,l,A){var O,I,Z,ee,te,fe,Me,ke,$e;return h().wrap(function(ot){for(;;)switch(ot.prev=ot.next){case 0:return ee=this._webcam.resolution,te=this._peerSpans.get(A),fe=(O=this._openTelemetry)===null||O===void 0?void 0:O.trace({spanName:"Setting Webcam Quality to ".concat(l),span:te}),Me=As[ee][l].s,ke=As[ee][l].t,$e=(I=this._openTelemetry)===null||I===void 0?void 0:I.trace({spanName:"Fetching Webcam spatial & temporal layer settings",span:fe,attributes:{quality:l}}),ot.next=1,this.setConsumerPreferredLayers(s,Me,ke,$e);case 1:(Z=this._openTelemetry)===null||Z===void 0||Z.completeSpan({message:"Webcam quality set successfully",span:fe,status:1});case 2:case"end":return ot.stop()}},v,this)}));function u(v,s,l){return o.apply(this,arguments)}return u})()},{key:"setViewPort",value:(function(){var o=(0,n.A)(h().mark(function v(s,l,A,O){var I,Z,ee,te,fe,Me,ke,$e,ot,Je;return h().wrap(function(qe){for(;;)switch(qe.prev=qe.next){case 0:if(this._consumers.get(s.id)){qe.next=1;break}return qe.abrupt("return");case 1:if(te=this._peerSpans.get(O),fe=(I=this._openTelemetry)===null||I===void 0?void 0:I.trace({spanName:"Setting ViewPort",span:te,attributes:{viewportWidth:JSON.stringify(l),viewportHeight:JSON.stringify(A)}}),Me=(Z=this._openTelemetry)===null||Z===void 0?void 0:Z.trace({spanName:"Fetching spatial & temporal layer settings",span:fe}),ke=(0,Eo.ed)(this._consumers.get(s.id),l,A),$e=ke.consumerId,ot=ke.newPreferredSpatialLayer,Je=ke.newPreferredTemporalLayer,!(ot===s.preferredSpatialLayer&&Je===s.preferredTemporalLayer)){qe.next=2;break}return this._openTelemetry.completeSpan({span:Me}),qe.abrupt("return");case 2:if(!$e){qe.next=3;break}return qe.next=3,this.setConsumerPreferredLayers($e,ot,Je,Me);case 3:(ee=this._openTelemetry)===null||ee===void 0||ee.completeSpan({message:"Viewport set successfully",span:fe,status:1});case 4:case"end":return qe.stop()}},v,this)}));function u(v,s,l,A){return o.apply(this,arguments)}return u})()},{key:"setConsumerPreferredLayers",value:(function(){var o=(0,n.A)(h().mark(function v(s,l,A,O){var I,Z,ee;return h().wrap(function(te){for(;;)switch(te.prev=te.next){case 0:return this._openTelemetry.traceAutoComplete({spanName:"Setting preferred spatial and temporal layers",span:O||null,attributes:{spatialLayers:String(l),temporalLayers:String(A)}}),Te.debug("setConsumerPreferredLayers() [consumerId:%s, spatialLayer:%s, temporalLayer:%s]",s,l,A),te.prev=1,I=this._consumers.get(s),I.spatialLayers>1&&(I.preferredSpatialLayer=l,I.preferredTemporalLayer=A),te.next=2,this._socketRequest("setConsumerPreferredLayers",{consumerId:s,spatialLayer:l,temporalLayer:A});case 2:this._openTelemetry.completeSpan({span:O,message:"Preferred layers set successfully",status:1}),Fe.dispatch(Zs(s,l,A)),te.next=4;break;case 3:te.prev=3,ee=te.catch(1),Te.error("setConsumerPreferredLayers() | failed:%o",ee),(Z=this._videosdkLogs)===null||Z===void 0||Z.pushLogs({logText:"Error setting Consumer preferred layers:",logType:"ERROR",attributes:{error:ee.message}}),this._openTelemetry.completeSpan({span:O,message:"Failed to set preferred layers: ".concat(ee.message),status:2}),Fe.dispatch(Er({type:"error",text:"Error setting Consumer preferred layers: ".concat(ee)}));case 4:case"end":return te.stop()}},v,this,[[1,3]])}));function u(v,s,l,A){return o.apply(this,arguments)}return u})()},{key:"setConsumerPriority",value:(function(){var o=(0,n.A)(h().mark(function v(s,l){var A,O;return h().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:return Te.debug("setConsumerPriority() [consumerId:%s, priority:%d]",s,l),I.prev=1,I.next=2,this._socketRequest("setConsumerPriority",{consumerId:s,priority:l});case 2:Fe.dispatch(Es(s,l)),I.next=4;break;case 3:I.prev=3,O=I.catch(1),Te.error("setConsumerPriority() | failed:%o",O),(A=this._videosdkLogs)===null||A===void 0||A.pushLogs({logText:"Error setting Consumer priority",logType:"ERROR",attributes:{error:O.message}}),Fe.dispatch(Er({type:"error",text:"Error setting Consumer priority: ".concat(O)}));case 4:case"end":return I.stop()}},v,this,[[1,3]])}));function u(v,s){return o.apply(this,arguments)}return u})()},{key:"requestConsumerKeyFrame",value:(function(){var o=(0,n.A)(h().mark(function v(s){var l,A;return h().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return Te.debug("requestConsumerKeyFrame() [consumerId:%s]",s),O.prev=1,O.next=2,this._socketRequest("requestConsumerKeyFrame",{consumerId:s});case 2:Fe.dispatch(Er({text:"Keyframe requested for video consumer"})),O.next=4;break;case 3:O.prev=3,A=O.catch(1),Te.error("requestConsumerKeyFrame() | failed:%o",A),(l=this._videosdkLogs)===null||l===void 0||l.pushLogs({logText:"Error requesting key frame for Consumer",logType:"ERROR",attributes:{error:A.message}}),Fe.dispatch(Er({type:"error",text:"Error requesting key frame for Consumer: ".concat(A)}));case 4:case"end":return O.stop()}},v,this,[[1,3]])}));function u(v){return o.apply(this,arguments)}return u})()},{key:"enableChatDataProducer",value:(function(){var o=(0,n.A)(h().mark(function v(){var s=this,l,A;return h().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return Te.debug("enableChatDataProducer()"),O.prev=1,O.next=2,this._sendTransport.produceData({ordered:!0,maxRetransmits:5,label:"reliable_data_producer",appData:{info:"my-chat-DataProducer"}});case 2:return this._reliableDataProducer=O.sent,this._reliableDataProducer.bufferedAmountLowThreshold=65535,O.next=3,this._sendTransport.produceData({ordered:!1,label:"unreliable_data_producer",appData:{info:"my-chat-DataProducer"}});case 3:this._unreliableDataProducer=O.sent,this._unreliableDataProducer.bufferedAmountLowThreshold=65535,Fe.dispatch(Xs({id:this._reliableDataProducer.id,sctpStreamParameters:this._reliableDataProducer.sctpStreamParameters,label:this._reliableDataProducer.label,protocol:this._reliableDataProducer.protocol})),this._reliableDataProducer.on("transportclose",function(){s._reliableDataProducer=null}),this._reliableDataProducer.on("open",function(){Te.debug('chat DataProducer "open" event')}),this._reliableDataProducer.on("close",function(){Te.error('chat DataProducer "close" event'),s._reliableDataProducer=null,Fe.dispatch(Er({type:"error",text:"Chat DataProducer closed"}))}),this._reliableDataProducer.on("error",function(I){Te.error('chat DataProducer "error" event:%o',I),Fe.dispatch(Er({type:"error",text:"Chat DataProducer error: ".concat(I)}))}),Fe.dispatch(Xs({id:this._unreliableDataProducer.id,sctpStreamParameters:this._unreliableDataProducer.sctpStreamParameters,label:this._unreliableDataProducer.label,protocol:this._unreliableDataProducer.protocol})),this._unreliableDataProducer.on("transportclose",function(){s._unreliableDataProducer=null}),this._unreliableDataProducer.on("open",function(){Te.debug('unreliable DataProducer "open" event')}),this._unreliableDataProducer.on("close",function(){Te.error('unreliable DataProducer "close" event'),s._unreliableDataProducer=null,Fe.dispatch(Er({type:"error",text:"unreliable DataProducer closed"}))}),this._unreliableDataProducer.on("error",function(I){Te.error('unreliable DataProducer "error" event:%o',I),Fe.dispatch(Er({type:"error",text:"unreliable DataProducer error: ".concat(I)}))}),O.next=5;break;case 4:throw O.prev=4,A=O.catch(1),Te.error("enableChatDataProducer() | failed:%o",A),(l=this._videosdkLogs)===null||l===void 0||l.pushLogs({logText:"Error enabling chat DataProducer",logType:"ERROR",attributes:{error:A.message}}),Fe.dispatch(Er({type:"error",text:"Error enabling chat DataProducer: ".concat(A)})),A;case 5:case"end":return O.stop()}},v,this,[[1,4]])}));function u(){return o.apply(this,arguments)}return u})()},{key:"send",value:(function(){var o=(0,n.A)(h().mark(function v(s){var l=this,A,O,I,Z=arguments,ee;return h().wrap(function(te){for(;;)switch(te.prev=te.next){case 0:if(A=Z.length>1&&Z[1]!==void 0?Z[1]:{reliability:Vs.y.RELIABLE},te.prev=1,O=typeof s=="string"||s instanceof Blob||s instanceof ArrayBuffer||ArrayBuffer.isView(s),O){te.next=2;break}throw new TypeError("Invalid payload type. Expected string | Blob | ArrayBuffer | ArrayBufferView");case 2:if(I=0,typeof s=="string"?I=new TextEncoder().encode(s).length:s instanceof Blob?I=s.size:(s instanceof ArrayBuffer||ArrayBuffer.isView(s))&&(I=s.byteLength),!(I>15360)){te.next=3;break}throw new Error("Payload too large: ".concat(I," bytes. Max allowed is 15 KiB."));case 3:if(!(!this._sendTransport||this._sendTransport.connectionState!=="connected")){te.next=4;break}throw new Error("Cannot send message, Network is not available.");case 4:if(A.reliability!==Vs.y.RELIABLE){te.next=6;break}if(!(this._reliableDataProducer.bufferedAmount>this._reliableDataProducer.bufferedAmountLowThreshold)){te.next=5;break}return Te.warn("Buffer full, waiting to resume"),te.abrupt("return",new Promise(function(fe,Me){var ke=function(){try{l._reliableDataProducer.send(s),fe(!0)}catch(ot){Me(ot)}finally{l._reliableDataProducer.off("bufferedamountlow",ke)}};l._reliableDataProducer.on("bufferedamountlow",ke)}));case 5:return this._reliableDataProducer.send(s),te.abrupt("return",!0);case 6:if(A.reliability!==Vs.y.UNRELIABLE){te.next=8;break}if(!(this._unreliableDataProducer.bufferedAmount>this._unreliableDataProducer.bufferedAmountLowThreshold)){te.next=7;break}return Te.warn("Buffer full, waiting to resume"),te.abrupt("return",new Promise(function(fe,Me){var ke=function(){try{l._unreliableDataProducer.send(s),fe(!0)}catch(ot){Me(ot)}finally{l._unreliableDataProducer.off("bufferedamountlow",ke)}};l._unreliableDataProducer.on("bufferedamountlow",ke)}));case 7:return this._unreliableDataProducer.send(s),te.abrupt("return",!0);case 8:te.next=10;break;case 9:throw te.prev=9,ee=te.catch(1),Te.error("DataProducer.send() failed:%o",ee),Fe.dispatch(Er({type:"error",text:"DataProducer.send() failed: ".concat(ee)})),ee;case 10:case"end":return te.stop()}},v,this,[[1,9]])}));function u(v){return o.apply(this,arguments)}return u})()},{key:"changeDisplayName",value:(function(){var o=(0,n.A)(h().mark(function v(s){var l;return h().wrap(function(A){for(;;)switch(A.prev=A.next){case 0:return Te.debug('changeDisplayName() [displayName:"%s"]',s),xs({displayName:s}),A.prev=1,A.next=2,this._socketRequest("changeDisplayName",{displayName:s});case 2:this._displayName=s,Fe.dispatch(ns(s)),Fe.dispatch(Er({text:"Display name changed"})),A.next=4;break;case 3:A.prev=3,l=A.catch(1),Te.error("changeDisplayName() | failed: %o",l),Fe.dispatch(Er({type:"error",text:"Could not change display name: ".concat(l)})),Fe.dispatch(ns());case 4:case"end":return A.stop()}},v,this,[[1,3]])}));function u(v){return o.apply(this,arguments)}return u})()},{key:"openConnection",value:(function(){var o=(0,n.A)(h().mark(function v(s){var l,A;return h().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return l=s.roomId,A=s.payload,O.next=1,this._socketRequest("openConnection",{roomId:l,payload:A}).catch(function(I){throw new Error(I)});case 1:case"end":return O.stop()}},v,this)}));function u(v){return o.apply(this,arguments)}return u})()},{key:"closeConnection",value:(function(){var o=(0,n.A)(h().mark(function v(s){return h().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=1,this._socketRequest("closeConnection",{roomId:s});case 1:case"end":return l.stop()}},v,this)}));function u(v){return o.apply(this,arguments)}return u})()},{key:"switchPeerRoom",value:(function(){var o=(0,n.A)(h().mark(function v(s){var l,A,O,I;return h().wrap(function(Z){for(;;)switch(Z.prev=Z.next){case 0:return l=s.peerId,A=s.roomId,O=s.payload,I=s.token,Z.next=1,this._socketRequest("switchPeerRoom",{roomId:A,peerId:l,payload:O,token:I});case 1:case"end":return Z.stop()}},v,this)}));function u(v){return o.apply(this,arguments)}return u})()},{key:"connectionSwitchPeerRoom",value:(function(){var o=(0,n.A)(h().mark(function v(s){var l,A,O,I,Z;return h().wrap(function(ee){for(;;)switch(ee.prev=ee.next){case 0:return l=s.roomId,A=s.connectionRoomId,O=s.peerId,I=s.payload,Z=s.token,ee.next=1,this._socketRequest("connectionSwitchPeerRoom",{roomId:l,connectionRoomId:A,peerId:O,payload:I,token:Z});case 1:case"end":return ee.stop()}},v,this)}));function u(v){return o.apply(this,arguments)}return u})()},{key:"connectionSendChatMessage",value:(function(){var o=(0,n.A)(h().mark(function v(s){var l,A;return h().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return l=s.roomId,A=s.message,O.next=1,this._socketRequest("connectionSendChatMessage",{roomId:l,message:A});case 1:case"end":return O.stop()}},v,this)}));function u(v){return o.apply(this,arguments)}return u})()},{key:"connectionEndMeeting",value:(function(){var o=(0,n.A)(h().mark(function v(s){var l;return h().wrap(function(A){for(;;)switch(A.prev=A.next){case 0:return l=s.roomId,A.next=1,this._socketRequest("connectionCloseRoom",{roomId:l});case 1:case"end":return A.stop()}},v,this)}));function u(v){return o.apply(this,arguments)}return u})()},{key:"setValue",value:(function(){var o=(0,n.A)(h().mark(function v(s,l){var A,O,I;return h().wrap(function(Z){for(;;)switch(Z.prev=Z.next){case 0:if(Z.prev=0,s!=null){Z.next=1;break}throw new Error("The 'key' parameter is required.");case 1:if(typeof s=="string"){Z.next=2;break}throw new TypeError("Invalid type for 'key'. Expected a string.");case 2:if(!(l!==null&&typeof l!="string")){Z.next=3;break}throw new TypeError("Invalid type for 'value'. Expected a string or null.");case 3:if(l===null){Z.next=4;break}if(A=new TextEncoder().encode(l).length,!(A>1024)){Z.next=4;break}throw new Error("Payload too large: ".concat(A," bytes. Maximum allowed size is 1024 bytes (1KB)."));case 4:return Z.next=5,this._socketRequest("realtimeStoreSet",{key:s,value:l});case 5:if(O=Z.sent,O.status!=="error"){Z.next=6;break}throw new Error(O.message?O.message:"Something went wrong while setting value in Realtime Store");case 6:Z.next=8;break;case 7:throw Z.prev=7,I=Z.catch(0),console.error("Failed to set value for key '".concat(s,"':"),I.message),I;case 8:case"end":return Z.stop()}},v,this,[[0,7]])}));function u(v,s){return o.apply(this,arguments)}return u})()},{key:"getValue",value:(function(){var o=(0,n.A)(h().mark(function v(s){var l,A;return h().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:if(O.prev=0,s!=null){O.next=1;break}throw new Error("The 'key' parameter is required.");case 1:if(typeof s=="string"){O.next=2;break}throw new TypeError("Invalid type for 'key'. Expected a string.");case 2:return O.next=3,this._socketRequest("realtimeStoreGet",{key:s});case 3:if(l=O.sent,!(l&&l.status==="ok"&&l.value)){O.next=4;break}return O.abrupt("return",l.value);case 4:if(l.status!=="error"){O.next=5;break}throw new Error(l.message?l.message:"Something went wrong while getting value from Realtime Store");case 5:return O.abrupt("return",null);case 6:throw O.prev=6,A=O.catch(0),console.error("Failed to get value for key '".concat(s,"':"),A.message),A;case 7:case"end":return O.stop()}},v,this,[[0,6]])}));function u(v){return o.apply(this,arguments)}return u})()},{key:"observe",value:(function(){var o=(0,n.A)(h().mark(function v(s){var l,A,O;return h().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:if(!this._closed){I.next=1;break}return I.abrupt("return");case 1:return I.prev=1,I.next=2,this._socketRequest("realtimeStoreObserve",{key:s});case 2:(l=this._videosdkLogs)===null||l===void 0||l.pushLogs({logText:"RealtimeStore observation started successfully for key '".concat(s,"'."),logType:"INFO"}),I.next=4;break;case 3:throw I.prev=3,O=I.catch(1),(A=this._videosdkLogs)===null||A===void 0||A.pushLogs({logText:"Error observe() | failed",logType:"ERROR",attributes:{error:O.message}}),O;case 4:case"end":return I.stop()}},v,this,[[1,3]])}));function u(v){return o.apply(this,arguments)}return u})()},{key:"stopObserving",value:(function(){var o=(0,n.A)(h().mark(function v(s){var l,A,O;return h().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:if(!this._closed){I.next=1;break}return I.abrupt("return");case 1:return I.prev=1,I.next=2,this._socketRequest("realtimeStoreStopObserve",{key:s});case 2:(l=this._videosdkLogs)===null||l===void 0||l.pushLogs({logText:"RealtimeStore observation stopped successfully for key '".concat(s,"'."),logType:"INFO"}),I.next=4;break;case 3:throw I.prev=3,O=I.catch(1),(A=this._videosdkLogs)===null||A===void 0||A.pushLogs({logText:"Error stopObserving() | failed",logType:"ERROR",attributes:{error:O.message}}),O;case 4:case"end":return I.stop()}},v,this,[[1,3]])}));function u(v){return o.apply(this,arguments)}return u})()},{key:"pubsubPublish",value:(function(){var o=(0,n.A)(h().mark(function v(s,l,A,O){var I,Z,ee,te,fe,Me,ke;return h().wrap(function($e){for(;;)switch($e.prev=$e.next){case 0:if($e.prev=0,A!=null&&A.sendOnly){if(I=A.sendOnly,Z=[],I){ee=Ya(I);try{for(ee.s();!(te=ee.n()).done;)fe=te.value,fe&&Z.push(fe.toString())}catch(ot){ee.e(ot)}finally{ee.f()}}A.sendOnly=Z}return $e.next=1,this._socketRequestForPubsub("pubsubPublish",{topic:s,message:l,options:A,payload:O});case 1:$e.next=3;break;case 2:throw $e.prev=2,ke=$e.catch(0),(Me=this._videosdkLogs)===null||Me===void 0||Me.pushLogs({logText:"Error pubsubPublish() | failed",logType:"ERROR",attributes:{error:ke.message}}),Te.error("pubsubPublish() | failed: %o",ke),new Error("".concat(ke.message==="operation has timed out"?"Message publishing timed out. Please check your network connection and try again.":"Pubsub Publish Error : ".concat(ke.message)));case 3:case"end":return $e.stop()}},v,this,[[0,2]])}));function u(v,s,l,A){return o.apply(this,arguments)}return u})()},{key:"pubsubSubscribe",value:(function(){var o=(0,n.A)(h().mark(function v(s){var l,A,O;return h().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:if(!this._closed){I.next=1;break}return I.abrupt("return");case 1:return I.prev=1,I.next=2,this._socketRequest("pubsubSubscribe",{topic:s});case 2:return l=I.sent,I.abrupt("return",l);case 3:I.prev=3,O=I.catch(1),(A=this._videosdkLogs)===null||A===void 0||A.pushLogs({logText:"Error pubsubSubscribe() | failed",logType:"ERROR",attributes:{error:O.message}}),Te.error("pubsubSubscribe() | failed: %o",O);case 4:case"end":return I.stop()}},v,this,[[1,3]])}));function u(v){return o.apply(this,arguments)}return u})()},{key:"pubsubUnsubscribe",value:(function(){var o=(0,n.A)(h().mark(function v(s){var l,A,O;return h().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:if(!this._closed){I.next=1;break}return I.abrupt("return");case 1:return I.prev=1,I.next=2,this._socketRequest("pubsubUnsubscribe",{topic:s});case 2:(l=this._videosdkLogs)===null||l===void 0||l.pushLogs({logText:"Pubsub Unsubscribing Successfully for topic ".concat(s),logType:"INFO"}),I.next=4;break;case 3:I.prev=3,O=I.catch(1),(A=this._videosdkLogs)===null||A===void 0||A.pushLogs({logText:"Error pubsubUnsubscribe() | failed",logType:"ERROR",attributes:{error:O.message}}),Te.error("pubsubUnsubscribe() | failed: %o",O);case 4:case"end":return I.stop()}},v,this,[[1,3]])}));function u(v){return o.apply(this,arguments)}return u})()},{key:"closeRoom",value:(function(){var o=(0,n.A)(h().mark(function v(){var s,l,A;return h().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return O.prev=0,s=(l=this._openTelemetry)===null||l===void 0?void 0:l.trace({spanName:"Closing room (requested by peer: ".concat(this._peerId,")")}),O.next=1,this._socketRequest("closeRoom",{});case 1:this._openTelemetry.completeSpan({span:s,status:1,message:"Room closed successfully."}),O.next=3;break;case 2:O.prev=2,A=O.catch(0),this._openTelemetry.completeSpan({span:s,status:2,message:"Failed to close room",attributes:{error:A.message}});case 3:case"end":return O.stop()}},v,this,[[0,2]])}));function u(){return o.apply(this,arguments)}return u})()},{key:"removePeer",value:(function(){var o=(0,n.A)(h().mark(function v(s){var l,A,O,I;return h().wrap(function(Z){for(;;)switch(Z.prev=Z.next){case 0:if(A=this._peerSpans.get(s),O=(l=this._openTelemetry)===null||l===void 0?void 0:l.trace({spanName:"Removing peer ".concat(s),span:A}),Z.prev=1,s!=null){Z.next=2;break}return Z.abrupt("return");case 2:return Z.next=3,this._socketRequest("removePeer",{peerId:s});case 3:this._openTelemetry.completeSpan({span:O,status:1,message:"Peer removed successfully"}),Z.next=5;break;case 4:Z.prev=4,I=Z.catch(1),this._openTelemetry.completeSpan({span:O,status:2,message:"Failed to remove peer. Error : ".concat(I.message)});case 5:case"end":return Z.stop()}},v,this,[[1,4]])}));function u(v){return o.apply(this,arguments)}return u})()},{key:"getSendTransportRemoteStats",value:(function(){var o=(0,n.A)(h().mark(function v(){return h().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(Te.debug("getSendTransportRemoteStats()"),this._sendTransport){s.next=1;break}return s.abrupt("return");case 1:return s.abrupt("return",this._socketRequest("getTransportStats",{transportId:this._sendTransport.id}));case 2:case"end":return s.stop()}},v,this)}));function u(){return o.apply(this,arguments)}return u})()},{key:"getRecvTransportRemoteStats",value:(function(){var o=(0,n.A)(h().mark(function v(){return h().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(Te.debug("getRecvTransportRemoteStats()"),this._recvTransport){s.next=1;break}return s.abrupt("return");case 1:return s.abrupt("return",this._socketRequest("getTransportStats",{transportId:this._recvTransport.id}));case 2:case"end":return s.stop()}},v,this)}));function u(){return o.apply(this,arguments)}return u})()},{key:"getAudioRemoteStats",value:(function(){var o=(0,n.A)(h().mark(function v(){var s;return h().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(Te.debug("getAudioRemoteStats()"),s=this._micProducer,s){l.next=1;break}return l.abrupt("return");case 1:return l.abrupt("return",this._latestStats[s.id]);case 2:case"end":return l.stop()}},v,this)}));function u(){return o.apply(this,arguments)}return u})()},{key:"getVideoRemoteStats",value:(function(){var o=(0,n.A)(h().mark(function v(){var s;return h().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(Te.debug("getVideoRemoteStats()"),s=this._webcamProducer,s){l.next=1;break}return l.abrupt("return");case 1:return l.abrupt("return",this._latestStats[s.id]);case 2:case"end":return l.stop()}},v,this)}));function u(){return o.apply(this,arguments)}return u})()},{key:"getShareRemoteStats",value:(function(){var o=(0,n.A)(h().mark(function v(){var s;return h().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(Te.debug("getVideoRemoteStats()"),s=this._shareProducer,s){l.next=1;break}return l.abrupt("return");case 1:return l.abrupt("return",this._latestStats[s.id]);case 2:case"end":return l.stop()}},v,this)}));function u(){return o.apply(this,arguments)}return u})()},{key:"getShareAudioRemoteStats",value:(function(){var o=(0,n.A)(h().mark(function v(){var s;return h().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(s=this._shareAudioProducer,s){l.next=1;break}return l.abrupt("return");case 1:return l.abrupt("return",this._latestStats[s.id]);case 2:case"end":return l.stop()}},v,this)}));function u(){return o.apply(this,arguments)}return u})()},{key:"getConsumerRemoteStats",value:(function(){var o=(0,n.A)(h().mark(function v(s){var l,A;return h().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:if(Te.debug("getConsumerRemoteStats()"),l=this._consumers.get(s),l){O.next=1;break}return O.abrupt("return");case 1:return this._latestStats[s]&&(this._latestStats[s][0].currentSpatialLayer=l.currentSpatialLayer,this._latestStats[s][0].currentTemporalLayer=l.currentTemporalLayer,this._latestStats[s][0].preferredSpatialLayer=l.preferredSpatialLayer,this._latestStats[s][0].preferredTemporalLayer=l.preferredTemporalLayer),A=l.track.id.replace(/[{}]/g,""),O.abrupt("return",this._latestStats[A]);case 2:case"end":return O.stop()}},v,this)}));function u(v){return o.apply(this,arguments)}return u})()},{key:"getChatDataProducerRemoteStats",value:(function(){var o=(0,n.A)(h().mark(function v(){var s;return h().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(Te.debug("getChatDataProducerRemoteStats()"),s=this._reliableDataProducer,s){l.next=1;break}return l.abrupt("return");case 1:return l.abrupt("return",this._socketRequest("getDataProducerStats",{dataProducerId:s.id}));case 2:case"end":return l.stop()}},v,this)}));function u(){return o.apply(this,arguments)}return u})()},{key:"getDataConsumerRemoteStats",value:(function(){var o=(0,n.A)(h().mark(function v(s){var l;return h().wrap(function(A){for(;;)switch(A.prev=A.next){case 0:if(Te.debug("getDataConsumerRemoteStats()"),l=this._dataConsumers.get(s),l){A.next=1;break}return A.abrupt("return");case 1:return A.abrupt("return",this._socketRequest("getDataConsumerStats",{dataConsumerId:s}));case 2:case"end":return A.stop()}},v,this)}));function u(v){return o.apply(this,arguments)}return u})()},{key:"getSendTransportLocalStats",value:(function(){var o=(0,n.A)(h().mark(function v(){return h().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(Te.debug("getSendTransportLocalStats()"),this._sendTransport){s.next=1;break}return s.abrupt("return");case 1:return s.abrupt("return",this._sendTransport.getStats());case 2:case"end":return s.stop()}},v,this)}));function u(){return o.apply(this,arguments)}return u})()},{key:"getRecvTransportLocalStats",value:(function(){var o=(0,n.A)(h().mark(function v(){return h().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(Te.debug("getRecvTransportLocalStats()"),this._recvTransport){s.next=1;break}return s.abrupt("return");case 1:return s.abrupt("return",this._recvTransport.getStats());case 2:case"end":return s.stop()}},v,this)}));function u(){return o.apply(this,arguments)}return u})()},{key:"getAudioLocalStats",value:(function(){var o=(0,n.A)(h().mark(function v(){return h().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(Te.debug("getAudioLocalStats()"),this._micProducer){s.next=1;break}return s.abrupt("return");case 1:return s.abrupt("return",this._micProducer.getStats());case 2:case"end":return s.stop()}},v,this)}));function u(){return o.apply(this,arguments)}return u})()},{key:"getVideoLocalStats",value:(function(){var o=(0,n.A)(h().mark(function v(){var s;return h().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(Te.debug("getVideoLocalStats()"),s=this._webcamProducer||this._shareProducer,s){l.next=1;break}return l.abrupt("return");case 1:return l.abrupt("return",s.getStats());case 2:case"end":return l.stop()}},v,this)}));function u(){return o.apply(this,arguments)}return u})()},{key:"getConsumerLocalStats",value:(function(){var o=(0,n.A)(h().mark(function v(s){var l;return h().wrap(function(A){for(;;)switch(A.prev=A.next){case 0:if(l=this._consumers.get(s),l){A.next=1;break}return A.abrupt("return");case 1:return A.abrupt("return",l.getStats());case 2:case"end":return A.stop()}},v,this)}));function u(v){return o.apply(this,arguments)}return u})()},{key:"getTransportRemoteStats",value:(function(){var o=(0,n.A)(h().mark(function v(s){var l,A,O,I,Z;return h().wrap(function(ee){for(;;)switch(ee.prev=ee.next){case 0:if(O=s.participantId,O){ee.next=1;break}return ee.abrupt("return");case 1:return ee.next=2,this._socketRequest("getTransportStats",{peerId:O});case 2:return I=ee.sent,Z={availableBitrate:I==null||(l=I.recv)===null||l===void 0?void 0:l.availableBitrate,targetBitrate:I==null||(A=I.recv)===null||A===void 0?void 0:A.targetBitrate},ee.abrupt("return",Z);case 3:case"end":return ee.stop()}},v,this)}));function u(v){return o.apply(this,arguments)}return u})()},{key:"applyNetworkThrottle",value:(function(){var o=(0,n.A)(h().mark(function v(s){var l,A,O,I,Z;return h().wrap(function(ee){for(;;)switch(ee.prev=ee.next){case 0:return l=s.uplink,A=s.downlink,O=s.rtt,I=s.secret,Te.debug("applyNetworkThrottle() [uplink:%s, downlink:%s, rtt:%s]",l,A,O),ee.prev=1,ee.next=2,this._socketRequest("applyNetworkThrottle",{uplink:l,downlink:A,rtt:O,secret:I});case 2:ee.next=4;break;case 3:ee.prev=3,Z=ee.catch(1),Te.error("applyNetworkThrottle() | failed:%o",Z),Fe.dispatch(Er({type:"error",text:"Error applying network throttle: ".concat(Z)}));case 4:case"end":return ee.stop()}},v,this,[[1,3]])}));function u(v){return o.apply(this,arguments)}return u})()},{key:"resetNetworkThrottle",value:(function(){var o=(0,n.A)(h().mark(function v(s){var l,A,O,I;return h().wrap(function(Z){for(;;)switch(Z.prev=Z.next){case 0:return l=s.silent,A=l===void 0?!1:l,O=s.secret,Te.debug("resetNetworkThrottle()"),Z.prev=1,Z.next=2,this._socketRequest("resetNetworkThrottle",{secret:O});case 2:Z.next=4;break;case 3:Z.prev=3,I=Z.catch(1),A||(Te.error("resetNetworkThrottle() | failed:%o",I),Fe.dispatch(Er({type:"error",text:"Error resetting network throttle: ".concat(I)})));case 4:case"end":return Z.stop()}},v,this,[[1,3]])}));function u(v){return o.apply(this,arguments)}return u})()},{key:"createProducerTransport",value:(function(){var o=(0,n.A)(h().mark(function v(s,l){var A,O=this,I,Z,ee,te,fe,Me,ke,$e,ot,Je,qe,Ct,gt;return h().wrap(function(Et){for(;;)switch(Et.prev=Et.next){case 0:Z=s.id,ee=s.iceParameters,te=s.iceCandidates,fe=s.dtlsParameters,Me=s.sctpParameters,ke=(A=this._openTelemetry)===null||A===void 0?void 0:A.trace({spanName:"Creating Send Media Transport",span:l||null}),this._sendTransport=this._mediasoupDevice.createSendTransport({id:Z,iceParameters:ee,iceCandidates:te,dtlsParameters:fe,sctpParameters:Me,iceServers:this._iceServers}),$e=new Map,ot=new Map,qe=!1,Ct=!1,gt=!1,this._sendTransportInternal=setInterval((0,n.A)(h().mark(function it(){var Pt,pt,Ge,At,cr,qt,Jt,Gt,ht,Zt,mr,rr,bt;return h().wrap(function(Ze){for(;;)switch(Ze.prev=Ze.next){case 0:return Pt=[],Ze.prev=1,Ze.next=2,(Ge=O._sendTransport)===null||Ge===void 0?void 0:Ge.getStats();case 2:pt=Ze.sent,Ze.next=4;break;case 3:return Ze.prev=3,bt=Ze.catch(1),console.error("Error fetching stats:",bt),Ze.abrupt("return");case 4:try{pt.forEach(function(Ie){try{if(Ie.type==="outbound-rtp"){var Le={qualityLimitationReason:Ie.qualityLimitationReason};$e.set(Ie.id,Le)}if(Ie.type==="remote-inbound-rtp"&&Ie.totalRoundTripTime&&Ie.roundTripTimeMeasurements){var Lt=ot.get(Ie.id);Lt||(Lt={totalRoundTripTime:0,roundTripTimeMeasurements:0},ot.set(Ie.id,Lt));var Kt=Ie.roundTripTimeMeasurements-Lt.roundTripTimeMeasurements,Yt=Ie.totalRoundTripTime-Lt.totalRoundTripTime;if(Kt>0&&Yt>0){var vr=Yt/Kt;Lt.totalRoundTripTime=Ie.totalRoundTripTime,Lt.roundTripTimeMeasurements=Ie.roundTripTimeMeasurements,Pt.push(vr*1e3)}}}catch{}});try{At=Pt.reduce(function(Ie,Le){return Ie+Le},0)/Pt.length,Number.isNaN(At)||(Je||(Je=At),cr=(0,C.A)($e.values()).some(function(Ie){return Ie.qualityLimitationReason==="bandwidth"}),qt=(0,C.A)($e.values()).some(function(Ie){return Ie.qualityLimitationReason==="cpu"}),!qe&&cr&&At-Je>50?((Jt=O._videosdkLogs)===null||Jt===void 0||Jt.pushLogs({logType:"WARN",attributes:{avgRoundTripTimeInMs:At,ewmaRttInMs:Je},logText:"Send Transport Congestion detected, the network is bandwidth limited and the round trip time is increasing (ewmaRtt: ".concat(Je,", avgRoundTripTime: ").concat(At,")")}),qe=!0,O._eventEmitter.emit("QUALITY_LIMITATION_INTERNAL",{type:"congestion",state:"detected",timestamp:new Date().getTime()})):qe&&At-Je<30&&((Gt=O._videosdkLogs)===null||Gt===void 0||Gt.pushLogs({logType:"INFO",attributes:{avgRoundTripTimeInMs:At,ewmaRttInMs:Je},logText:"Send Transport  Congestion resolved, the round trip time is back to normal (ewmaRtt: ".concat(Je,", avgRoundTripTime: ").concat(At,")")}),qe=!1,O._eventEmitter.emit("QUALITY_LIMITATION_INTERNAL",{type:"congestion",state:"resolved",timestamp:new Date().getTime()})),cr&&!gt?((ht=O._videosdkLogs)===null||ht===void 0||ht.pushLogs({logType:"WARN",logText:"Bandwidth Limitation detected"}),O._eventEmitter.emit("QUALITY_LIMITATION_INTERNAL",{type:"bandwidth",state:"detected",timestamp:new Date().getTime()}),gt=!0):!cr&&gt&&((Zt=O._videosdkLogs)===null||Zt===void 0||Zt.pushLogs({logType:"INFO",logText:"Bandwidth Limitation resolved"}),O._eventEmitter.emit("QUALITY_LIMITATION_INTERNAL",{type:"bandwidth",state:"resolved",timestamp:new Date().getTime()}),gt=!1),Je=.9*Je+.1*At,!Ct&&qt?(O._eventEmitter.emit("QUALITY_LIMITATION_INTERNAL",{type:"cpu",state:"detected",timestamp:new Date().getTime()}),(mr=O._videosdkLogs)===null||mr===void 0||mr.pushLogs({logType:"WARN",logText:"CPU Limitation detected"}),Ct=!0):Ct&&!qt&&(O._eventEmitter.emit("QUALITY_LIMITATION_INTERNAL",{type:"cpu",state:"resolved",timestamp:new Date().getTime()}),(rr=O._videosdkLogs)===null||rr===void 0||rr.pushLogs({logType:"INFO",logText:"CPU Limitation resolved"}),Ct=!1))}catch{}}catch{}case 5:case"end":return Ze.stop()}},it,null,[[1,3]])})),1e3),this._sendTransport.on("connect",function(it,Pt,pt){var Ge,At=it.dtlsParameters;(Ge=O._openTelemetry)===null||Ge===void 0||Ge.traceAutoComplete({spanName:"Media Transport is about to establish the ICE+DTLS connection",span:ke,status:1}),O._socketRequest("connectWebRtcTransport",{transportId:O._sendTransport.id,dtlsParameters:At}).then(function(){Pt()}).catch(function(cr){pt(cr)})}),this._sendTransport.on("produce",(function(){var it=(0,n.A)(h().mark(function Pt(pt,Ge,At){var cr,qt,Jt,Gt,ht,Zt,mr,rr;return h().wrap(function(bt){for(;;)switch(bt.prev=bt.next){case 0:return cr=pt.kind,qt=pt.rtpParameters,Jt=pt.appData,bt.prev=1,(Gt=O._openTelemetry)===null||Gt===void 0||Gt.traceAutoComplete({spanName:"Transmiting information about a new ".concat(cr," track"),span:ke,status:1}),bt.next=2,O._socketRequest("produce",{transportId:O._sendTransport.id,kind:cr,rtpParameters:qt,appData:Jt});case 2:ht=bt.sent,Zt=ht.id,Ge({id:Zt}),bt.next=4;break;case 3:bt.prev=3,rr=bt.catch(1),(mr=O._videosdkLogs)===null||mr===void 0||mr.pushLogs({logText:'Error this._sendTransport "produce" Event catch',logType:"ERROR",attributes:{error:rr.message}}),At(rr);case 4:case"end":return bt.stop()}},Pt,null,[[1,3]])}));return function(Pt,pt,Ge){return it.apply(this,arguments)}})()),this._sendTransport.on("producedata",(function(){var it=(0,n.A)(h().mark(function Pt(pt,Ge,At){var cr,qt,Jt,Gt,ht,Zt,mr,rr;return h().wrap(function(bt){for(;;)switch(bt.prev=bt.next){case 0:return cr=pt.sctpStreamParameters,qt=pt.label,Jt=pt.protocol,Gt=pt.appData,bt.prev=1,bt.next=2,O._socketRequest("produceData",{transportId:O._sendTransport.id,sctpStreamParameters:cr,label:qt,protocol:Jt,appData:Gt});case 2:ht=bt.sent,Zt=ht.id,Ge({id:Zt}),bt.next=4;break;case 3:bt.prev=3,rr=bt.catch(1),(mr=O._videosdkLogs)===null||mr===void 0||mr.pushLogs({logText:"Error producedata event catch",logType:"ERROR",attributes:{error:rr.message}}),At(rr);case 4:case"end":return bt.stop()}},Pt,null,[[1,3]])}));return function(Pt,pt,Ge){return it.apply(this,arguments)}})()),this._sendTransport.on("connectionstatechange",(function(){var it=(0,n.A)(h().mark(function Pt(pt){var Ge,At,cr,qt,Jt;return h().wrap(function(Gt){for(;;)switch(Gt.prev=Gt.next){case 0:return Jt=Array,Gt.next=1,O._sendTransport.getStats();case 1:At=Jt.from.call(Jt,Gt.sent).filter(function(ht){var Zt=(0,w.A)(ht,2),mr=Zt[1];return mr.type==="local-candidate"||mr.type==="remote-candidate"}).map(function(ht){var Zt=(0,w.A)(ht,2),mr=Zt[1];return mr}),At.length>0&&((cr=O._videosdkLogs)===null||cr===void 0||cr.pushLogs({logText:'Send Transport State Change "'.concat(pt,'" candidates'),logType:"INFO",attributes:{candidates:JSON.stringify(At)}})),pt==="connected"&&O.emitMeetingStateChange(se.CONNECTED),(Ge=O._openTelemetry)===null||Ge===void 0||Ge.traceAutoComplete({spanName:"Media Transport state changed to ".concat(pt.toUpperCase()),span:ke,status:1}),pt==="failed"&&((qt=O._videosdkLogs)===null||qt===void 0||qt.pushLogs({logText:"ERROR_MEETING_MEDIA_CONNECTION_FAILED",logType:"ERROR",attributes:{error:"Unable to connect to the meeting or media. Please check your network connection, ensure your firewall or security settings are not blocking the application, or try connecting using a different network."},dashboardLog:!0}),O.restartIce()),O._transportState=pt;case 2:case"end":return Gt.stop()}},Pt)}));return function(Pt){return it.apply(this,arguments)}})()),(I=this._openTelemetry)===null||I===void 0||I.completeSpan({span:ke,status:1,message:"Send Transport Created Successfully"});case 1:case"end":return Et.stop()}},v,this)}));function u(v,s){return o.apply(this,arguments)}return u})()},{key:"createConsumerTransport",value:(function(){var o=(0,n.A)(h().mark(function v(s,l){var A,O=this,I,Z,ee,te,fe,Me,ke,$e,ot,Je,qe,Ct,gt;return h().wrap(function(Et){for(;;)switch(Et.prev=Et.next){case 0:Z=s.id,ee=s.iceParameters,te=s.iceCandidates,fe=s.dtlsParameters,Me=s.sctpParameters,ke=(A=this._openTelemetry)===null||A===void 0?void 0:A.trace({spanName:"Creating Recieve Media Transport",span:l||null}),this._recvTransport=this._mediasoupDevice.createRecvTransport({id:Z,iceParameters:ee,iceCandidates:te,dtlsParameters:fe,sctpParameters:Me,iceServers:this._iceServers}),this._recvTransport.on("connect",function(it,Pt,pt){var Ge,At=it.dtlsParameters;(Ge=O._openTelemetry)===null||Ge===void 0||Ge.traceAutoComplete({spanName:"Media Transport is about to establish the ICE+DTLS connection",span:ke,status:1}),O._socketRequest("connectWebRtcTransport",{transportId:O._recvTransport.id,dtlsParameters:At}).then(function(){Pt()}).catch(function(cr){pt(cr)})}),this._recvTransport.on("connectionstatechange",(function(){var it=(0,n.A)(h().mark(function Pt(pt){var Ge,At,cr,qt;return h().wrap(function(Jt){for(;;)switch(Jt.prev=Jt.next){case 0:return qt=Array,Jt.next=1,O._recvTransport.getStats();case 1:At=qt.from.call(qt,Jt.sent).filter(function(Gt){var ht=(0,w.A)(Gt,2),Zt=ht[1];return Zt.type==="local-candidate"||Zt.type==="remote-candidate"}).map(function(Gt){var ht=(0,w.A)(Gt,2),Zt=ht[1];return Zt}),At.length>0&&((cr=O._videosdkLogs)===null||cr===void 0||cr.pushLogs({logText:'Recv Transport State Change "'.concat(pt,'" candidates'),logType:"INFO",attributes:{candidates:JSON.stringify(At)}})),(Ge=O._openTelemetry)===null||Ge===void 0||Ge.traceAutoComplete({spanName:"Media Transport state changed to ".concat(pt.toUpperCase()),span:ke,status:1}),pt==="failed"&&O.restartIce(),O._transportState=pt;case 2:case"end":return Jt.stop()}},Pt)}));return function(Pt){return it.apply(this,arguments)}})()),$e=0,ot=this._metrics.addNewProbe(this._recvTransport,"transport"),Je=new Map,qe=new Map,Ct=new Map,gt=new Set,ot.onStatsCollected=function(it){try{var Pt=function(cr,qt,Jt){O._stats.consumerStats||(O._stats.consumerStats={});var Gt=qt.appData.peerId;O._stats.consumerStats[Gt]||(O._stats.consumerStats[Gt]={}),O._stats.consumerStats[Gt][Jt]||(O._stats.consumerStats[Gt][Jt]=[]),O._latestStats[qt.track.id.replace(/[{}]/g,"")]=[cr],$e%5===0&&O._stats.consumerStats[Gt][Jt].push(cr)},pt=function(cr){it[cr].forEach(function(qt){var Jt=Ya(O._consumers),Gt;try{for(Jt.s();!(Gt=Jt.n()).done;){var ht=(0,w.A)(Gt.value,2),Zt=ht[0],mr=ht[1],rr=mr.track.id.replace(/[{}]/g,"");if(rr===qt.trackId){var bt=mr.appData.share?mr.kind==="audio"?"shareAudio":"share":mr.kind;if(Pt(qt,mr,bt),bt==="audio"||bt==="shareAudio")return;if(qt.bitrate>0)Je.has(rr)&&Je.delete(rr);else{var Ze=Je.get(rr);Ze?Ze.detected+5e3<Date.now()&&O._eventEmitter.emit("STREAM_STATE_CHANGED",{state:"stuck",peerId:mr.appData.peerId,streamId:rr}):Je.set(rr,{detected:Date.now()})}var Ie=qt.trackId,Le=qt.freezeCount;if(!Ie||Le===void 0)return;var Lt=qe.get(Ie);if(Lt===void 0){qe.set(Ie,Le);return}if(Le>Lt)O._eventEmitter.emit("STREAM_STATE_CHANGED",{state:"freeze-detected",peerId:mr.appData.peerId,streamId:rr}),Ct.set(Ie,Date.now()),gt.delete(Ie);else{var Kt=Ct.get(Ie);if(Kt&&!gt.has(Ie)){var Yt=Date.now()-Kt;Yt>5e3&&(O._eventEmitter.emit("STREAM_STATE_CHANGED",{state:"freeze-resolved",peerId:mr.appData.peerId,streamId:rr}),gt.add(Ie))}}qe.set(Ie,Le)}}}catch(vr){Jt.e(vr)}finally{Jt.f()}})};pt("audio"),pt("video"),$e++}catch(At){var Ge;(Ge=O._videosdkLogs)===null||Ge===void 0||Ge.pushLogs({logText:"Error CONSUMER Stats ERROR",logType:"ERROR",attributes:{error:At.message}}),console.log("CONSUMER CATCH",At)}},ot.start(),this._recvTransport.observer.on("close",function(){ot.stop(),O._metrics.removeExistingProbe(ot)}),(I=this._openTelemetry)===null||I===void 0||I.completeSpan({span:ke,status:1,message:"Recieve Transport Created Successfully"});case 1:case"end":return Et.stop()}},v,this)}));function u(v,s){return o.apply(this,arguments)}return u})()},{key:"emitMeetingStateChange",value:function(u){this._eventEmitter.emit("MEETING_STATE_CHANGED",{state:u}),this._meetingConnectionState=u}},{key:"joinRoom",value:(function(){var o=(0,n.A)(h().mark(function v(){var s,l,A,O,I,Z,ee,te,fe,Me,ke,$e,ot,Je,qe,Ct,gt,Et,it,Pt,pt,Ge,At,cr,qt,Jt,Gt;return h().wrap(function(ht){for(;;)switch(ht.prev=ht.next){case 0:return Te.debug("joinRoom()"),ht.prev=1,te=(s=this._openTelemetry)===null||s===void 0?void 0:s.trace({spanName:"Loading device capabilities",span:this._joinSpan}),this._mediasoupDevice=new jr.pF({handlerName:this._handlerName}),ht.next=2,this._socketRequest("getRouterRtpCapabilities");case 2:return fe=ht.sent,fe.headerExtensions=(l=fe.headerExtensions)===null||l===void 0?void 0:l.filter(function(Zt){return Zt.uri!="urn:3gpp:video-orientation"}),ht.next=3,this._mediasoupDevice.load({routerRtpCapabilities:fe});case 3:if((A=this._openTelemetry)===null||A===void 0||A.completeSpan({span:te,status:1,attributes:{routerRtpCapabilities:JSON.stringify(fe).toString()},message:"Device Capabilities Loaded"}),!this._produce){ht.next=5;break}return ht.next=4,this._socketRequest("createWebRtcTransport",{preferredProtocol:this._preferredProtocol,producing:!0,consuming:!1,sctpCapabilities:this._mediasoupDevice.sctpCapabilities});case 4:Me=ht.sent,this.createProducerTransport(Me,this._joinSpan);case 5:if(!this._consume){ht.next=7;break}return ht.next=6,this._socketRequest("createWebRtcTransport",{preferredProtocol:this._preferredProtocol,producing:!1,consuming:!0,sctpCapabilities:this._mediasoupDevice.sctpCapabilities});case 6:ke=ht.sent,this.createConsumerTransport(ke,this._joinSpan);case 7:return ht.next=8,this._socketRequest("join",{displayName:this._displayName,device:this._device,secret:this._secret,rtpCapabilities:(O=this._mediasoupDevice)===null||O===void 0?void 0:O.rtpCapabilities,sctpCapabilities:(I=this._mediasoupDevice)===null||I===void 0?void 0:I.sctpCapabilities,deviceInfo:this._deviceInfo,debugMode:this._debugMode,autoConsume:this._autoConsume,metaData:this._metaData,mode:this._mode});case 8:$e=ht.sent,ot=$e.peers,Je=$e.poll,qe=$e.messages,Fe.dispatch(Qs("connected")),(Z=this._openTelemetry)===null||Z===void 0||Z.traceAutoComplete({spanName:"Meeting is in JOINED State.",span:this._joinSpan,status:1}),this._eventEmitter.emit("MEETING_JOINED",{peers:ot,poll:Je,messages:qe,baseUrl:this._baseUrl}),Fe.dispatch(zs()),Fe.dispatch(Er({text:"You are in the room!",timeout:3e3})),Ct=Ya(ot);try{for(Ct.s();!(gt=Ct.n()).done;)Et=gt.value,it=Rn(Zr(Zr({},Et),{},{consumers:[],dataConsumers:[]})),Fe.dispatch(it),this._eventEmitter.emit(it.type,it.payload)}catch(Zt){Ct.e(Zt)}finally{Ct.f()}this._produce&&(Fe.dispatch(vo({canSendMic:this._mediasoupDevice.canProduce("audio"),canSendWebcam:this._mediasoupDevice.canProduce("video")})),this._micEnabled?this.enableMic(this.customMicrophoneAudioTrack,this._joinSpan):this.customMicrophoneAudioTrack&&((Pt=this._openTelemetry)===null||Pt===void 0||Pt.traceAutoComplete({spanName:"Disposing Audio Track",span:this._joinSpan,status:2}),this.customMicrophoneAudioTrack.getTracks().forEach(function(Zt){Zt.stop()})),pt=Zn(),this._webcamEnabled&&(!pt||pt.webcamEnabled||this._externalVideo)?this.enableWebcam(this.customCameraVideoTrack,this._joinSpan):this.customCameraVideoTrack&&((Ge=this._openTelemetry)===null||Ge===void 0||Ge.traceAutoComplete({spanName:"Disposing Video Track",span:this._joinSpan,status:2}),this.customCameraVideoTrack.getTracks().forEach(function(Zt){Zt.stop()})),this.enableChatDataProducer()),window.SHOW_INFO&&(At=Fe.getState(),cr=At.me,Fe.dispatch(Ti(cr.id))),(ee=this._openTelemetry)===null||ee===void 0||ee.completeSpan({span:this._joinSpan,status:1,message:"Meeting Joined"}),ht.next=10;break;case 9:ht.prev=9,Gt=ht.catch(1),Te.error("joinRoom() failed:%o",Gt),(qt=this._videosdkLogs)===null||qt===void 0||qt.pushLogs({logText:"Error Could not join the room",logType:"ERROR",attributes:{error:Gt.message}}),routerSpan&&this._openTelemetry.completeSpan({span:routerSpan,status:2,message:"Failed to load device capabilities: ".concat(Gt.message)}),(Jt=this._openTelemetry)===null||Jt===void 0||Jt.completeSpan({span:this._joinSpan,status:2,message:"Could not join the room ".concat(Gt.message)}),Fe.dispatch(Er({type:"error",text:"Could not join the room: ".concat(Gt.message)})),this.close({sendLeft:!0,meetingLeftReason:"".concat(we.t.JOIN_ROOM_FAILED.message,". Error : ").concat(Gt.message),code:we.t.JOIN_ROOM_FAILED.code});case 10:case"end":return ht.stop()}},v,this,[[1,9]])}));function u(){return o.apply(this,arguments)}return u})()},{key:"switchingRoom",value:(function(){var o=(0,n.A)(h().mark(function v(s){var l,A,O,I,Z,ee,te,fe,Me,ke,$e,ot,Je,qe,Ct,gt,Et,it,Pt,pt;return h().wrap(function(Ge){for(;;)switch(Ge.prev=Ge.next){case 0:return A=(l=this._openTelemetry)===null||l===void 0?void 0:l.trace({spanName:"Switching room",attributes:{"room.id":s,"peer.id":this._peerId,display_name:this._displayName}}),Ge.prev=1,O=(I=this._openTelemetry)===null||I===void 0?void 0:I.trace({spanName:"Requesting to join switched room",span:A}),Ge.next=2,this._socketRequest("join",{displayName:this._displayName,device:this._device,secret:this._secret,rtpCapabilities:(Z=this._mediasoupDevice)===null||Z===void 0?void 0:Z.rtpCapabilities,sctpCapabilities:(ee=this._mediasoupDevice)===null||ee===void 0?void 0:ee.sctpCapabilities,deviceInfo:this._deviceInfo,debugMode:this._debugMode,autoConsume:this._autoConsume,metaData:this._metaData,switchingRoom:!0,mode:this._mode});case 2:Me=Ge.sent,ke=Me.peers,$e=Me.poll,ot=Me.messages,(te=this._openTelemetry)===null||te===void 0||te.completeSpan({span:O,status:1,message:"Requested to join switched room successfully"}),Fe.dispatch(Qs("connected")),this._openTelemetry.traceAutoComplete({spanName:"Emitted MEETING_JOINED Event",span:A}),this._eventEmitter.emit("MEETING_JOINED",{switchRoomId:s,peers:ke,poll:$e,messages:ot,baseUrl:this._baseUrl}),Fe.dispatch(zs()),Fe.dispatch(Er({text:"You are in the room!",timeout:3e3})),Je=Ya(ke);try{for(Je.s();!(qe=Je.n()).done;)Ct=qe.value,gt=Rn(Zr(Zr({},Ct),{},{consumers:[],dataConsumers:[]})),Fe.dispatch(gt),this._eventEmitter.emit(gt.type,gt.payload)}catch(At){Je.e(At)}finally{Je.f()}(fe=this._openTelemetry)===null||fe===void 0||fe.completeSpan({span:A,status:1,message:"Requested room switch completed successfully"}),Ge.next=4;break;case 3:Ge.prev=3,pt=Ge.catch(1),Te.error("joinRoom() failed:%o",pt),(Et=this._videosdkLogs)===null||Et===void 0||Et.pushLogs({logText:"Failed to request joining the switched room",logType:"ERROR",attributes:{error:pt.message}}),(it=this._openTelemetry)===null||it===void 0||it.completeSpan({span:O,status:2,message:"Request to switch room failed: ".concat(pt.message)}),(Pt=this._openTelemetry)===null||Pt===void 0||Pt.completeSpan({span:A,status:2,message:"Request to switch room failed: ".concat(pt.message)}),Fe.dispatch(Er({type:"error",text:"Failed to request joining the switched room: ".concat(pt)})),this.close({sendLeft:!0,meetingLeftReason:"".concat(we.t.SWITCH_ROOM_FAILED.message,". Error : ").concat(pt.message),code:we.t.SWITCH_ROOM_FAILED.code});case 4:case"end":return Ge.stop()}},v,this,[[1,3]])}));function u(v){return o.apply(this,arguments)}return u})()},{key:"_updateMics",value:(function(){var o=(0,n.A)(h().mark(function v(){var s,l,A,O,I,Z,ee,te,fe,Me,ke,$e,ot,Je,qe=arguments,Ct;return h().wrap(function(gt){for(;;)switch(gt.prev=gt.next){case 0:return l=qe.length>0&&qe[0]!==void 0?qe[0]:void 0,this._mics=new Map,Te.debug("_updateMics() |"),A=(s=this._openTelemetry)===null||s===void 0?void 0:s.trace({spanName:"Fetching System Microphone list",span:l||null}),gt.prev=1,gt.next=2,navigator.mediaDevices.enumerateDevices();case 2:I=gt.sent,I.filter(function(Et){return Et.kind==="audioinput"}).length>0&&I.find(function(Et){return Et.kind==="audioinput"}),Z=Ya(I);try{for(Z.s();!(ee=Z.n()).done;)te=ee.value,te.kind=="audioinput"&&this._mics.set(te.deviceId,te)}catch(Et){Z.e(Et)}finally{Z.f()}fe=Array.from(this._mics.values()),Me=fe.length,ke=this._mic.device?this._mic.device.deviceId:void 0,Me===0?this._mic.device=null:this._mics.has(ke)||(this._mic.device=fe[0]),(O=this._openTelemetry)===null||O===void 0||O.completeSpan({message:"Microphone List fetched Successfully",span:A,status:1,attributes:{micList:I?JSON.stringify(I):"No mic devices found"}}),gt.next=5;break;case 3:if(gt.prev=3,Ct=gt.catch(1),!(Ct instanceof TypeError)){gt.next=5;break}if(Ct.name!=="TypeError"){gt.next=4;break}throw ot=xe.q.ERROR_MICROPHONE_ACCESS_UNAVAILABLE,this._emitError(ot),($e=this._openTelemetry)===null||$e===void 0||$e.completeSpan({span:A,status:2,message:"Error in updateMics() :: ".concat(ot.message)}),new Error(ot.message);case 4:throw(Je=this._openTelemetry)===null||Je===void 0||Je.completeSpan({span:A,status:2,message:"Error in updateMics() :: ".concat(Ct.message)}),new Error(Ct.message);case 5:case"end":return gt.stop()}},v,this,[[1,3]])}));function u(){return o.apply(this,arguments)}return u})()},{key:"_updateWebcams",value:(function(){var o=(0,n.A)(h().mark(function v(){var s,l=this,A,O,I,Z,ee,te,fe,Me,ke,$e,ot,Je,qe,Ct,gt,Et,it=arguments,Pt,pt;return h().wrap(function(Ge){for(;;)switch(Ge.prev=Ge.next){case 0:return A=it.length>0&&it[0]!==void 0?it[0]:void 0,Te.debug("_updateWebcams()"),this._webcams=new Map,Te.debug("_updateWebcams() | calling enumerateDevices()"),O=(s=this._openTelemetry)===null||s===void 0?void 0:s.trace({spanName:"Fetching System Webcam list",span:A||null}),Ge.prev=1,Ge.next=2,navigator.mediaDevices.enumerateDevices();case 2:Z=Ge.sent,ee=this._deviceInfo.sdkType==="react-native",Z.filter(function(At){return At.kind==="videoinput"}).length>0&&Z.find(function(At){return At.kind==="videoinput"}),te=Ya(Z),Ge.prev=3,te.s();case 4:if((fe=te.n()).done){Ge.next=7;break}if(Me=fe.value,Me.kind==="videoinput"){Ge.next=5;break}return Ge.abrupt("continue",6);case 5:this._webcams.set(Me.deviceId,Me);case 6:Ge.next=4;break;case 7:Ge.next=9;break;case 8:Ge.prev=8,Pt=Ge.catch(3),te.e(Pt);case 9:return Ge.prev=9,te.f(),Ge.finish(9);case 10:ke=Array.from(this._webcams.values()),$e=ke.length,ot=this._webcam.device?this._webcam.device.deviceId:void 0,ot&&(this._defaultCameraIndex=ot),Te.debug("_updateWebcams() [webcams:%o]",ke),$e===0?this._webcam.device=null:ee?(ot==null||!this._webcams.has(ot))&&(qe=(Je=ke.find(function(At){return At.facing===l._defaultCamera}))!==null&&Je!==void 0?Je:ke[0],this._webcam.device=qe):this._webcams.has(ot)||(this._webcam.device=ke[0]),(I=this._openTelemetry)===null||I===void 0||I.completeSpan({span:O,status:1,message:"Webcam List fetched Successfully",attributes:{webcamList:Z?JSON.stringify(Z):"No webcam devices found"}}),Fe.dispatch(xo(this._webcams.size>1)),Ge.next=13;break;case 11:if(Ge.prev=11,pt=Ge.catch(1),!(pt instanceof TypeError)){Ge.next=13;break}if(pt.name!=="TypeError"){Ge.next=12;break}throw gt=xe.q.ERROR_CAMERA_ACCESS_UNAVAILABLE,this._emitError(gt),(Ct=this._openTelemetry)===null||Ct===void 0||Ct.completeSpan({span:O,status:2,message:"Error in updateWebcams() :: ".concat(gt.message)}),new Error(gt.message);case 12:throw(Et=this._openTelemetry)===null||Et===void 0||Et.completeSpan({span:O,status:2,message:"Error in updateWebcams() :: ".concat(pt.message)}),new Error(pt.message);case 13:case"end":return Ge.stop()}},v,this,[[1,11],[3,8,9,10]])}));function u(){return o.apply(this,arguments)}return u})()},{key:"_getWebcamType",value:function(u){return/(back|rear)/i.test(u.label)?(Te.debug("_getWebcamType() | it seems to be a back camera"),"back"):(Te.debug("_getWebcamType() | it seems to be a front camera"),"front")}},{key:"_pauseConsumer",value:(function(){var o=(0,n.A)(h().mark(function v(s){var l,A;return h().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:if(!s.paused){O.next=1;break}return O.abrupt("return");case 1:return O.prev=1,O.next=2,this._socketRequest("pauseConsumer",{consumerId:s.id});case 2:s.pause(),Fe.dispatch(ss(s.id,"local")),O.next=4;break;case 3:O.prev=3,A=O.catch(1),Te.error("_pauseConsumer() | failed:%o",A),(l=this._videosdkLogs)===null||l===void 0||l.pushLogs({logText:"Error pausing Consumer",logType:"ERROR",attributes:{error:A.message}}),Fe.dispatch(Er({type:"error",text:"Error pausing Consumer: ".concat(A)}));case 4:case"end":return O.stop()}},v,this,[[1,3]])}));function u(v){return o.apply(this,arguments)}return u})()},{key:"_resumeConsumer",value:(function(){var o=(0,n.A)(h().mark(function v(s){var l,A;return h().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:if(s.paused){O.next=1;break}return O.abrupt("return");case 1:return O.prev=1,O.next=2,this._socketRequest("resumeConsumer",{consumerId:s.id});case 2:s.resume(),Fe.dispatch(_o(s.id,"local")),O.next=4;break;case 3:O.prev=3,A=O.catch(1),Te.error("_resumeConsumer() | failed:%o",A),(l=this._videosdkLogs)===null||l===void 0||l.pushLogs({logText:"Error resuming Consumer",logType:"ERROR",attributes:{error:A.message}}),Fe.dispatch(Er({type:"error",text:"Error resuming Consumer: ".concat(A)}));case 4:case"end":return O.stop()}},v,this,[[1,3]])}));function u(v){return o.apply(this,arguments)}return u})()},{key:"_getExternalVideoStream",value:(function(){var o=(0,n.A)(h().mark(function v(){var s=this;return h().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(!this._externalVideoStream){l.next=1;break}return l.abrupt("return",this._externalVideoStream);case 1:if(!(this._externalVideo.readyState<3)){l.next=2;break}return l.next=2,new Promise(function(A){return s._externalVideo.addEventListener("canplay",A)});case 2:if(!this._externalVideo.captureStream){l.next=3;break}this._externalVideoStream=this._externalVideo.captureStream(),l.next=5;break;case 3:if(!this._externalVideo.mozCaptureStream){l.next=4;break}this._externalVideoStream=this._externalVideo.mozCaptureStream(),l.next=5;break;case 4:throw new Error("video.captureStream() not supported");case 5:return l.abrupt("return",this._externalVideoStream);case 6:case"end":return l.stop()}},v,this)}));function u(){return o.apply(this,arguments)}return u})()},{key:"toggleE2EEEnabled",value:(function(){var o=(0,n.A)(h().mark(function v(s){var l,A,O,I;return h().wrap(function(Z){for(;;)switch(Z.prev=Z.next){case 0:if(A=(l=this._openTelemetry)===null||l===void 0?void 0:l.trace({spanName:s?"Enabling End-to-End Encryption":"Disabling End-to-End Encryption"}),!this.e2eeManager){Z.next=1;break}this._peerId&&this.e2eeManager.setParticipantCryptorEnabled(s,this._peerId),this.isE2EEEnabled=s,(O=this._openTelemetry)===null||O===void 0||O.completeSpan({message:"End-to-End Encryption ".concat(s?"enabled":"disabled"," successfully"),status:1,span:A}),Z.next=2;break;case 1:throw(I=this._openTelemetry)===null||I===void 0||I.completeSpan({message:"Failed to ".concat(s?"enable":"disable"," End-to-End Encryption as it is not configured"),status:2,span:A}),Error("e2ee not configured, please set e2ee settings within the room options");case 2:case"end":return Z.stop()}},v,this)}));function u(v){return o.apply(this,arguments)}return u})()},{key:"_emitError",value:function(u){this._eventEmitter.emit("ERROR",u)}}],[{key:"init",value:(function(u){Fe=u.store})}])})();function ao(F){return bc.apply(this,arguments)}function bc(){return bc=(0,n.A)(h().mark(function F(o){var u,v=this,s,l,A,O,I,Z,ee;return h().wrap(function(te){for(;;)switch(te.prev=te.next){case 0:if(s=(u=this._openTelemetry)===null||u===void 0?void 0:u.trace({spanName:"Setting up End-to-End Encryption",attributes:{keyProvider:JSON.stringify(o)}}),te.prev=1,this.e2eeManager){te.next=3;break}return A=Zc,O=o,te.next=2,ml();case 2:I=te.sent,Z={keyProvider:O,worker:I},this.e2eeManager=new A(Z),this.e2eeManager.on(Wn.KS.ParticipantEncryptionStatusChanged,function(fe){v.isE2EEEnabled=fe}),this.e2eeManager.on(Wn.KS.E2EEStateChange,function(fe){v._eventEmitter.emit("E2EE_STATE_CHANGE",fe)}),(l=this.e2eeManager)===null||l===void 0||l.setup(this),this.toggleE2EEEnabled(!0);case 3:this._openTelemetry.completeSpan({span:s,message:"E2EE Enabled successfully",status:1}),te.next=5;break;case 4:throw te.prev=4,ee=te.catch(1),console.error("Error setting up E2EE: ",ee),this._openTelemetry.completeSpan({span:s,message:"Error setting up E2EE : ".concat(ee.message),status:2}),new Error("Error setting up E2EE: "+ee.message);case 5:case"end":return te.stop()}},F,this,[[1,4]])})),bc.apply(this,arguments)}}),9792:((oe,Y,S)=>{Object.defineProperty(Y,"__esModule",{value:!0}),Y.Producer=void 0;const x=S(2994),C=S(3953),T=S(4893),b=new x.Logger("Producer");class J extends C.EnhancedEventEmitter{_id;_localId;_closed=!1;_rtpSender;_track;_kind;_rtpParameters;_paused;_maxSpatialLayer;_stopTracks;_disableTrackOnPause;_zeroRtpOnPause;_appData;_observer=new C.EnhancedEventEmitter;constructor({id:n,localId:f,rtpSender:U,track:q,rtpParameters:g,stopTracks:h,disableTrackOnPause:k,zeroRtpOnPause:W,appData:j}){super(),b.debug("constructor()"),this._id=n,this._localId=f,this._rtpSender=U,this._track=q,this._kind=q.kind,this._rtpParameters=g,this._paused=k?!q.enabled:!1,this._maxSpatialLayer=void 0,this._stopTracks=h,this._disableTrackOnPause=k,this._zeroRtpOnPause=W,this._appData=j??{},this.onTrackEnded=this.onTrackEnded.bind(this),this.handleTrack()}get id(){return this._id}get localId(){return this._localId}get closed(){return this._closed}get kind(){return this._kind}get rtpSender(){return this._rtpSender}get track(){return this._track}get rtpParameters(){return this._rtpParameters}get paused(){return this._paused}get maxSpatialLayer(){return this._maxSpatialLayer}get appData(){return this._appData}set appData(n){this._appData=n}get observer(){return this._observer}close(){this._closed||(b.debug("close()"),this._closed=!0,this.destroyTrack(),this.emit("@close"),this._observer.safeEmit("close"),super.close(),this._observer.close())}transportClosed(){this._closed||(b.debug("transportClosed()"),this._closed=!0,this.destroyTrack(),this.safeEmit("transportclose"),this._observer.safeEmit("close"))}async getStats(){if(this._closed)throw new T.InvalidStateError("closed");return new Promise((n,f)=>{this.safeEmit("@getstats",n,f)})}pause(){if(b.debug("pause()"),this._closed){b.error("pause() | Producer closed");return}this._paused=!0,this._track&&this._disableTrackOnPause&&(this._track.enabled=!1),this._zeroRtpOnPause&&new Promise((n,f)=>{this.safeEmit("@pause",n,f)}).catch(()=>{}),this._observer.safeEmit("pause")}resume(){if(b.debug("resume()"),this._closed){b.error("resume() | Producer closed");return}this._paused=!1,this._track&&this._disableTrackOnPause&&(this._track.enabled=!0),this._zeroRtpOnPause&&new Promise((n,f)=>{this.safeEmit("@resume",n,f)}).catch(()=>{}),this._observer.safeEmit("resume")}async replaceTrack({track:n}){if(b.debug("replaceTrack() [track:%o]",n),this._closed){if(n&&this._stopTracks)try{n.stop()}catch{}throw new T.InvalidStateError("closed")}else if(n&&n.readyState==="ended")throw new T.InvalidStateError("track ended");if(n===this._track){b.debug("replaceTrack() | same track, ignored");return}await new Promise((f,U)=>{this.safeEmit("@replacetrack",n,f,U)}),this.destroyTrack(),this._track=n,this._track&&this._disableTrackOnPause&&(this._paused?this._paused&&(this._track.enabled=!1):this._track.enabled=!0),this.handleTrack()}async setMaxSpatialLayer(n){if(this._closed)throw new T.InvalidStateError("closed");if(this._kind!=="video")throw new T.UnsupportedError("not a video Producer");if(typeof n!="number")throw new TypeError("invalid spatialLayer");n!==this._maxSpatialLayer&&(await new Promise((f,U)=>{this.safeEmit("@setmaxspatiallayer",n,f,U)}).catch(()=>{}),this._maxSpatialLayer=n)}async setRtpEncodingParameters(n){if(this._closed)throw new T.InvalidStateError("closed");if(typeof n!="object")throw new TypeError("invalid params");await new Promise((f,U)=>{this.safeEmit("@setrtpencodingparameters",n,f,U)})}onTrackEnded(){b.debug('track "ended" event'),this.safeEmit("trackended"),this._observer.safeEmit("trackended")}handleTrack(){this._track&&this._track.addEventListener("ended",this.onTrackEnded)}destroyTrack(){if(this._track)try{this._track.removeEventListener("ended",this.onTrackEnded),this._stopTracks&&this._track.stop()}catch{}}}Y.Producer=J})},wt={};function at(oe){var Y=wt[oe];if(Y!==void 0)return Y.exports;var S=wt[oe]={exports:{}};return Ee[oe].call(S.exports,S,S.exports,at),S.exports}at.amdO={},at.n=oe=>{var Y=oe&&oe.__esModule?(()=>oe.default):(()=>oe);return at.d(Y,{a:Y}),Y},at.d=(oe,Y)=>{for(var S in Y)at.o(Y,S)&&!at.o(oe,S)&&Object.defineProperty(oe,S,{enumerable:!0,get:Y[S]})},at.g=(function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}})(),at.o=(oe,Y)=>Object.prototype.hasOwnProperty.call(oe,Y),at.r=oe=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(oe,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(oe,"__esModule",{value:!0})};var Ft=at(3115);return Ft})())})(lp)),lp.exports}var hl=Pm();function id(){return id=Object.assign?Object.assign.bind():function(Ae){for(var Nt=1;Nt<arguments.length;Nt++){var ct=arguments[Nt];for(var Ee in ct)({}).hasOwnProperty.call(ct,Ee)&&(Ae[Ee]=ct[Ee])}return Ae},id.apply(null,arguments)}var Fr="videosdk-live-react-sdk",Qe={"participant-joined":Fr+"-participant-joined","participant-left":Fr+"-participant-left","speaker-changed":Fr+"-speaker-changed","presenter-changed":Fr+"-presenter-changed","main-participant-changed":Fr+"-main-participant-changed","entry-requested":Fr+"-entry-requested","entry-responded":Fr+"-entry-responded","recording-started":Fr+"-recording-started","recording-stopped":Fr+"-recording-stopped",data:Fr+"-data","meeting-joined":Fr+"-meeting-joined","meeting-left":Fr+"-meeting-left","live-stream-started":Fr+"-live-stream-started","live-stream-stopped":Fr+"-live-stream-stopped","video-state-changed":Fr+"-video-state-changed","video-seeked":Fr+"-video-seeked","webcam-requested":Fr+"-webcam-requested","mic-requested":Fr+"-mic-requested","pin-state-changed":Fr+"-pin-state-changed","connection-open":Fr+"-connection-open","connection-close":Fr+"-connection-close","switch-meeting":Fr+"-switch-meeting",error:Fr+"-error","hls-started":Fr+"-hls-started","hls-stopped":Fr+"-hls-stopped","hls-state-changed":Fr+"-hls-state-changed","recording-state-changed":Fr+"-recording-state-changed","livestream-state-changed":Fr+"-livestream-state-changed","meeting-state-changed":Fr+"-meeting-state-changed","participant-mode-changed":Fr+"-participant-mode-changed","transcription-state-changed":Fr+"-transcription-state-changed","transcription-text":Fr+"-transcription-text","translation-state-changed":Fr+"-translation-state-changed","translation-language-changed":Fr+"-translation-language-changed","translation-text":Fr+"-translation-text","character-joined":Fr+"-character-joined","character-left":Fr+"-character-left","whiteboard-started":Fr+"-whiteboard-started","whiteboard-stopped":Fr+"-whiteboard-stopped","paused-all-streams":Fr+"-paused-all-streams","resumed-all-streams":Fr+"-resumed-all-streams","media-relay-started":Fr+"-media-relay-started","media-relay-stopped":Fr+"-media-relay-stopped","media-relay-error":Fr+"-media-relay-error","media-relay-request-response":Fr+"-media-relay-request-response","media-relay-request-received":Fr+"-media-relay-request-received","quality-limitation":Fr+"-quality-limitation"},Ye=new Dm;Ye.setMaxListeners(9999);var hf=St.createContext(),ff=function(Nt){var ct=Nt===void 0?{}:Nt,Ee=ct.onParticipantJoined,wt=Ee===void 0?function(){}:Ee,at=ct.onParticipantLeft,Ft=at===void 0?function(){}:at,oe=ct.onSpeakerChanged,Y=oe===void 0?function(){}:oe,S=ct.onPresenterChanged,x=S===void 0?function(){}:S,C=ct.onMainParticipantChanged,T=C===void 0?function(){}:C,b=ct.onEntryRequested,J=b===void 0?function(){}:b,w=ct.onEntryResponded,n=w===void 0?function(){}:w,f=ct.onPausedAllStreams,U=f===void 0?function(){}:f,q=ct.onResumedAllStreams,g=q===void 0?function(){}:q,h=ct.onRecordingStarted,k=h===void 0?function(){}:h,W=ct.onRecordingStopped,j=W===void 0?function(){}:W,y=ct.onData,d=y===void 0?function(){}:y,R=ct.onMeetingJoined,m=R===void 0?function(){}:R,P=ct.onMeetingLeft,H=P===void 0?function(){}:P,B=ct.onLiveStreamStarted,$=B===void 0?function(){}:B,L=ct.onLiveStreamStopped,z=L===void 0?function(){}:L,V=ct.onVideoStateChanged,X=V===void 0?function(){}:V,G=ct.onVideoSeeked,ae=G===void 0?function(){}:G,Q=ct.onWebcamRequested,le=Q===void 0?function(){}:Q,pe=ct.onMicRequested,ue=pe===void 0?function(){}:pe,ne=ct.onPinStateChanged,Oe=ne===void 0?function(){}:ne,ye=ct.onConnectionOpen,_e=ye===void 0?function(){}:ye,Se=ct.onConnetionClose,ze=Se===void 0?function(){}:Se,Vt=ct.onSwitchMeeting,tr=Vt===void 0?function(){}:Vt,gr=ct.onError,jt=gr===void 0?function(){}:gr,Pr=ct.onHlsStarted,qa=Pr===void 0?function(){}:Pr,Ua=ct.onHlsStopped,br=Ua===void 0?function(){}:Ua,zr=ct.onHlsStateChanged,ar=zr===void 0?function(){}:zr,Wa=ct.onRecordingStateChanged,Gr=Wa===void 0?function(){}:Wa,pn=ct.onLivestreamStateChanged,nt=pn===void 0?function(){}:pn,et=ct.onMeetingStateChanged,ir=et===void 0?function(){}:et,Lr=ct.onParticipantModeChanged,pa=Lr===void 0?function(){}:Lr,za=ct.onCharacterJoined,Za=za===void 0?function(){}:za,zt=ct.onCharacterLeft,He=zt===void 0?function(){}:zt,yt=ct.onMediaRelayStarted,Xe=yt===void 0?function(){}:yt,kt=ct.onMediaRelayStopped,Or=kt===void 0?function(){}:kt,Ce=ct.onMediaRelayError,fr=Ce===void 0?function(){}:Ce,Sr=ct.onMediaRelayRequestResponse,Rt=Sr===void 0?function(){}:Sr,Rr=ct.onMediaRelayRequestReceived,aa=Rr===void 0?function(){}:Rr,Ke=ct.onQualityLimitation,Xt=Ke===void 0?function(){}:Ke;return St.useEffect(function(){return Ye.on(Qe["participant-joined"],wt),Ye.on(Qe["participant-left"],Ft),Ye.on(Qe["speaker-changed"],Y),Ye.on(Qe["presenter-changed"],x),Ye.on(Qe["main-participant-changed"],T),Ye.on(Qe["entry-requested"],J),Ye.on(Qe["entry-responded"],n),Ye.on(Qe["paused-all-streams"],U),Ye.on(Qe["resumed-all-streams"],g),Ye.on(Qe["recording-started"],k),Ye.on(Qe["recording-stopped"],j),Ye.on(Qe.data,d),Ye.on(Qe["meeting-joined"],m),Ye.on(Qe["meeting-left"],H),Ye.on(Qe["live-stream-started"],$),Ye.on(Qe["live-stream-stopped"],z),Ye.on(Qe["video-state-changed"],X),Ye.on(Qe["video-seeked"],ae),Ye.on(Qe["webcam-requested"],le),Ye.on(Qe["mic-requested"],ue),Ye.on(Qe["pin-state-changed"],Oe),Ye.on(Qe["connection-open"],_e),Ye.on(Qe["connection-close"],ze),Ye.on(Qe["switch-meeting"],tr),Ye.on(Qe.error,jt),Ye.on(Qe["hls-started"],qa),Ye.on(Qe["hls-stopped"],br),Ye.on(Qe["hls-state-changed"],ar),Ye.on(Qe["recording-state-changed"],Gr),Ye.on(Qe["livestream-state-changed"],nt),Ye.on(Qe["meeting-state-changed"],ir),Ye.on(Qe["participant-mode-changed"],pa),Ye.on(Qe["character-joined"],Za),Ye.on(Qe["character-left"],He),Ye.on(Qe["media-relay-started"],Xe),Ye.on(Qe["media-relay-stopped"],Or),Ye.on(Qe["media-relay-error"],fr),Ye.on(Qe["media-relay-request-response"],Rt),Ye.on(Qe["media-relay-request-received"],aa),Ye.on(Qe["quality-limitation"],Xt),function(){Ye.off(Qe["meeting-state-changed"],ir),Ye.off(Qe["participant-joined"],wt),Ye.off(Qe["participant-left"],Ft),Ye.off(Qe["speaker-changed"],Y),Ye.off(Qe["presenter-changed"],x),Ye.off(Qe["main-participant-changed"],T),Ye.off(Qe["entry-requested"],J),Ye.off(Qe["entry-responded"],n),Ye.off(Qe["paused-all-streams"],U),Ye.off(Qe["resumed-all-streams"],g),Ye.off(Qe["recording-started"],k),Ye.off(Qe["recording-stopped"],j),Ye.off(Qe.data,d),Ye.off(Qe["meeting-joined"],m),Ye.off(Qe["meeting-left"],H),Ye.off(Qe["live-stream-started"],$),Ye.off(Qe["live-stream-stopped"],z),Ye.off(Qe["video-state-changed"],X),Ye.off(Qe["video-seeked"],ae),Ye.off(Qe["webcam-requested"],le),Ye.off(Qe["mic-requested"],ue),Ye.off(Qe["pin-state-changed"],Oe),Ye.off(Qe["connection-open"],_e),Ye.off(Qe["connection-close"],ze),Ye.off(Qe["switch-meeting"],tr),Ye.off(Qe.error,jt),Ye.off(Qe["hls-started"],qa),Ye.off(Qe["hls-stopped"],br),Ye.off(Qe["hls-state-changed"],ar),Ye.off(Qe["recording-state-changed"],Gr),Ye.off(Qe["livestream-state-changed"],nt),Ye.off(Qe["participant-mode-changed"],pa),Ye.off(Qe["character-joined"],Za),Ye.off(Qe["character-left"],He),Ye.off(Qe["media-relay-started"],Xe),Ye.off(Qe["media-relay-stopped"],Or),Ye.off(Qe["media-relay-error"],fr),Ye.off(Qe["media-relay-request-response"],Rt),Ye.off(Qe["media-relay-request-received"],aa),Ye.off(Qe["quality-limitation"],Xt)}},[]),St.useContext(hf)},Lm="0.6.4",Nm=function(Nt){var ct=Nt.children,Ee=Nt.config,wt=Nt.token,at=Nt.joinWithoutUserInteraction,Ft=Nt.reinitialiseMeetingOnConfigChange,oe=Nt.deviceInfo,Y=Nt.keyProvider,S=St.useState(null),x=S[0],C=S[1],T=St.useState(null),b=T[0],J=T[1],w=St.useState(null),n=w[0],f=w[1],U=St.useState(null),q=U[0],g=U[1],h=St.useState(null),k=h[0],W=h[1],j=St.useState(!1),y=j[0],d=j[1],R=St.useState(!1),m=R[0],P=R[1],H=St.useState(!1),B=H[0],$=H[1],L=St.useState(!1),z=L[0],V=L[1],X=St.useState([]),G=X[0],ae=X[1],Q=St.useState(new Map),le=Q[0],pe=Q[1],ue=St.useState(new Map),ne=ue[0],Oe=ue[1],ye=St.useState(new Map),_e=ye[0],Se=ye[1],ze=St.useState(!1),Vt=ze[0],tr=ze[1],gr=St.useState(new Map),jt=gr[0],Pr=gr[1],qa=St.useState(!1),Ua=qa[0],br=qa[1],zr=St.useState(!1),ar=zr[0],Wa=zr[1],Gr=St.useState("RECORDING_STOPPED"),pn=Gr[0],nt=Gr[1],et=St.useState("LIVESTREAM_STOPPED"),ir=et[0],Lr=et[1],pa=St.useState("HLS_STOPPED"),za=pa[0],Za=pa[1],zt=St.useState({downstreamUrl:null,playbackHlsUrl:null,livestreamUrl:null}),He=zt[0],yt=zt[1],Xe=St.useState("TRANSCRIPTION_STOPPED"),kt=Xe[0],Or=Xe[1],Ce=St.useState("TRANSLATION_STOPPED"),fr=Ce[0],Sr=Ce[1],Rt=St.useRef(),Rr=St.useRef(),aa=St.useRef(),Ke=St.useRef(),Xt=St.useRef(),Ht=St.useRef(Y),Qt=St.useRef(Ee),rt=St.useRef(wt),Tt=St.useRef(!1),yr=St.useRef(),ur=St.useMemo(function(){return Ft},[]);St.useEffect(function(){Rt.current=x},[x]),St.useEffect(function(){Rr.current=y},[y]),St.useEffect(function(){aa.current=m},[m]),St.useEffect(function(){Ke.current=B},[B]),St.useEffect(function(){Xt.current=z},[z]),St.useEffect(function(){Qt.current=Ee},[Ee]),St.useEffect(function(){rt.current=wt},[wt]),St.useEffect(function(){yr.current=ar},[ar]);var wr=function(){C(null),J(null),f(null),g(null),W(null),d(!1),P(!1),$(!1),V(!1),ae([]),tr(!1),pe(new Map),Oe(new Map),Se(new Map),Pr(new Map),br(!1),Wa(!1),nt("RECORDING_STOPPED"),Lr("LIVESTREAM_STOPPED"),Za("HLS_STOPPED"),Or("TRANSCRIPTION_STOPPED"),Sr("TRANSLATION_STOPPED"),yt({downstreamUrl:null,playbackHlsUrl:null,livestreamUrl:null})},$r=function(se){pe(function(we){we.set(se.id,se);var nr=new Map(we);return nr}),Ye.emit(Qe["participant-joined"],se)},Ha=function(se,we){pe(function(nr){nr.delete(se.id);var Jr=new Map(nr);return Jr}),Ye.emit(Qe["participant-left"],se,we)},nn=function(se){var we,nr;W(se),$(se===(Rt==null||(we=Rt.current)===null||we===void 0||(nr=we.localParticipant)===null||nr===void 0?void 0:nr.id)),Ye.emit(Qe["presenter-changed"],se)},qn=function(se){f(se),Ye.emit(Qe["main-participant-changed"],se)},hn=function(se){g(se),Ye.emit(Qe["speaker-changed"],se)},ca=function(se){ae(function(we){return[].concat(we,[se])}),Ye.emit(Qe.data,se)},Kr=function(se){Ye.emit(Qe["entry-requested"],se)},Oa=function(se,we){Ye.emit(Qe["entry-responded"],se,we)},jn=function(){V(!0),Ye.emit(Qe["recording-started"])},Qn=function(){V(!1),Ye.emit(Qe["recording-stopped"])},di=function(se){se.track.readyState==="live"&&(se.kind==="video"?P(!0):se.kind==="audio"&&d(!0))},qi=function(se){se.kind==="video"?P(!1):se.kind==="audio"&&d(!1)},sn=function(se){tr(!0),Ye.emit(Qe["live-stream-started"],se)},Wi=function(){tr(!1),Ye.emit(Qe["live-stream-stopped"])},Xn=function(se){Wa(!0),Ye.emit(Qe["hls-started"],se)},Ei=function(){Wa(!1),Ye.emit(Qe["hls-stopped"])},Pi=function(se){Ye.emit(Qe["video-state-changed"],se)},Tr=function(se){Ye.emit(Qe["video-seeked"],se)},Va=function(se){Ye.emit(Qe["webcam-requested"],se)},Li=function(se){Ye.emit(Qe["mic-requested"],se)},Jn=function(se){se.switchRoomId?(ae(function(we){return[].concat(we,se.messages)}),Ye.emit(Qe["meeting-joined"],se)):(Tt.current=!0,ae(function(we){return[].concat(we,se.messages)}),Ye.emit(Qe["meeting-joined"],se),br(!0))},ha=function(se){Ye.emit(Qe["meeting-left"],se);var we=Rt.current;if(we){var nr;typeof we?.off=="function"&&(we.off("meeting-state-changed",Nr),we.off("participant-joined",$r),we.off("participant-left",Ha),we.off("presenter-changed",nn),we.off("main-participant-changed",qn),we.off("speaker-changed",hn),we.off("entry-requested",Kr),we.off("entry-responded",Oa),we.off("data",ca),we.off("recording-started",jn),we.off("recording-stopped",Qn),we.off("meeting-joined",Jn),we.off("meeting-left",ha),we.off("livestream-started",sn),we.off("livestream-stopped",Wi),we.off("video-state-changed",Pi),we.off("video-seeked",Tr),we.off("webcam-requested",Va),we.off("mic-requested",Li),we.off("pin-state-changed",Ga),we.off("paused-all-streams",ts),we.off("resumed-all-streams",We),we.off("connection-open",_t),we.off("connection-close",Mt),we.off("switch-meeting",$t),we.off("error",Br),we.off("hls-started",Xn),we.off("hls-stopped",Ei),we.off("recording-state-changed",jr),we.off("livestream-state-changed",Dt),we.off("hls-state-changed",Xr),we.off("participant-mode-changed",ys),we.off("whiteboard-stopped",gs),we.off("whiteboard-started",pi),we.off("transcription-state-changed",Ca),we.off("transcription-text",Ka),we.off("translation-state-changed",Un),we.off("translation-text",ni),we.off("translation-language-changed",Ln),we.off("character-joined",Gi),we.off("character-left",wi),we.off("media-relay-started",rs),we.off("media-relay-stopped",Ri),we.off("media-relay-error",as),we.off("media-relay-request-response",xs),we.off("media-relay-request-received",Zn),we.off("quality-limitation",Ys)),typeof(we==null||(nr=we.localParticipant)===null||nr===void 0?void 0:nr.off)=="function"&&(we.localParticipant.off("stream-enabled",di),we.localParticipant.off("stream-disabled",qi)),wr()}},Ga=function(se){var we=se.participantId,nr=se.state,Jr=se.pinnedBy;Se(function(_n){!nr.cam&&!nr.share?_n.delete(we):_n.set(we,nr);var Bi=new Map(_n);return Bi}),Ye.emit(Qe["pin-state-changed"],{participantId:we,state:nr,pinnedBy:Jr})},ts=function(se){var we=se.kind;Ye.emit(Qe["paused-all-streams"],{kind:we})},We=function(se){var we=se.kind;Ye.emit(Qe["resumed-all-streams"],{kind:we})},_t=function(se){Pr(function(we){we.set(se.id,se);var nr=new Map(we);return nr}),Ye.emit(Qe["connection-open"],se)},Mt=function(se){Pr(function(we){we.delete(se);var nr=new Map(we);return nr}),Ye.emit(Qe["connection-close"],se)},$t=function(se){Ye.emit(Qe["switch-meeting"],se)},Br=function(se){Ye.emit(Qe.error,se)},jr=function(se){nt(se?.status),Ye.emit(Qe["recording-state-changed"],se)},Dt=function(se){Lr(se?.status),Ye.emit(Qe["livestream-state-changed"],se)},Xr=function(se){Za(se?.status),se?.status=="HLS_PLAYABLE"?yt({downstreamUrl:se?.downstreamUrl,playbackHlsUrl:se?.playbackHlsUrl,livestreamUrl:se?.livestreamUrl}):se?.status=="HLS_STOPPED"&&yt({downstreamUrl:null,playbackHlsUrl:null,livestreamUrl:null}),Ye.emit(Qe["hls-state-changed"],se)},Nr=function(se){Ye.emit(Qe["meeting-state-changed"],se),se?.state=="RECONNECTING"&&br(!1)},Ca=function(se){Or(se?.status),Ye.emit(Qe["transcription-state-changed"],se)},Ka=function(se){Ye.emit(Qe["transcription-text"],se)},Un=function(se){Sr(se?.status),Ye.emit(Qe["translation-state-changed"],se)},ni=function(se){Ye.emit(Qe["translation-text"],se)},Ln=function(se){Ye.emit(Qe["translation-language-changed"],se)},pi=function(se){Ye.emit(Qe["whiteboard-started"],se)},gs=function(se){Ye.emit(Qe["whiteboard-stopped"],se)},Gi=function(se){Oe(function(we){we.set(se.id,se);var nr=new Map(we);return nr}),Ye.emit(Qe["character-joined"],se)},wi=function(se){Oe(function(we){we.delete(se.id);var nr=new Map(we);return nr}),Ye.emit(Qe["character-left"],se)},ys=function(se){var we,nr;pe(function(Jr){var _n=Jr.get(se.participantId);_n.mode=se.mode,Jr.set(_n.id,_n);var Bi=new Map(Jr);return Bi}),se.participantId===(Rt==null||(we=Rt.current)===null||we===void 0||(nr=we.localParticipant)===null||nr===void 0?void 0:nr.id)&&J(function(Jr){return Jr.mode=se.mode,Jr}),Ye.emit(Qe["participant-mode-changed"],se)},rs=function(se){Ye.emit(Qe["media-relay-started"],se)},Ri=function(se){Ye.emit(Qe["media-relay-stopped"],se)},as=function(se){Ye.emit(Qe["media-relay-error"],se)},xs=function(se){Ye.emit(Qe["media-relay-request-response"],se)},Zn=function(se){Ye.emit(Qe["media-relay-request-received"],se)},Ys=function(se){Ye.emit(Qe["quality-limitation"],se)},fo=function(){var se=hl.VideoSDK&&hl.VideoSDK.initMeeting(Qt.current);C(se);var we=se.localParticipant,nr=se.participants,Jr=se.characters;nr.set(we.id,we),pe(nr),Oe(Jr),J(we),se.on("meeting-state-changed",Nr),se.on("participant-joined",$r),se.on("participant-left",Ha),se.on("presenter-changed",nn),se.on("main-participant-changed",qn),se.on("speaker-changed",hn),se.on("entry-requested",Kr),se.on("entry-responded",Oa),se.on("data",ca),se.on("recording-started",jn),se.on("recording-stopped",Qn),se.on("meeting-joined",Jn),se.on("meeting-left",ha),se.on("livestream-started",sn),se.on("livestream-stopped",Wi),se.on("video-state-changed",Pi),se.on("video-seeked",Tr),se.on("webcam-requested",Va),se.on("mic-requested",Li),se.on("pin-state-changed",Ga),se.on("paused-all-streams",ts),se.on("resumed-all-streams",We),se.on("connection-open",_t),se.on("connection-close",Mt),se.on("switch-meeting",$t),se.on("error",Br),se.on("hls-started",Xn),se.on("hls-stopped",Ei),se.on("recording-state-changed",jr),se.on("livestream-state-changed",Dt),se.on("hls-state-changed",Xr),se.on("participant-mode-changed",ys),se.on("transcription-state-changed",Ca),se.on("transcription-text",Ka),se.on("translation-state-changed",Un),se.on("translation-text",ni),se.on("translation-language-changed",Ln),se.on("whiteboard-started",pi),se.on("whiteboard-stopped",gs),se.on("character-joined",Gi),se.on("character-left",wi),se.on("media-relay-started",rs),se.on("media-relay-stopped",Ri),se.on("media-relay-error",as),se.on("media-relay-request-response",xs),se.on("media-relay-request-received",Zn),se.on("quality-limitation",Ys),se.localParticipant.on("stream-enabled",di),se.localParticipant.on("stream-disabled",qi),se.join()},Qs=function(){var se=Rt.current;se&&se.leave()},mo=function(){var se=Rt.current;se&&se.end()},Ti=function(se){var we=Rt.current;we&&we.pauseAllStreams(se)},vo=function(se){var we=Rt.current;we&&we.resumeAllStreams(se)},xo=function(se,we,nr,Jr){var _n=Rt.current;_n&&_n.startRecording(se,we,nr,Jr)},ns=function(){var se=Rt.current;if(se){var we=Xt.current;we&&se.stopRecording()}},Ni=function(se){se===void 0&&(se=void 0);var we=Rt.current;we&&we.unmuteMic(se)},_s=function(){var se=Rt.current;se&&se.muteMic()},Bs=function(se){se===void 0&&(se=void 0);var we=Rr.current;we?_s():Ni(se)},js=function(){var se=Rt.current;se&&se.disableWebcam()},hi=function(se){se===void 0&&(se=void 0);var we=Rt.current;we&&we.enableWebcam(se)},Nn=function(se){se===void 0&&(se=void 0);var we=aa.current;we?js():hi(se)},Bo=function(se){var we=se.meetingId,nr=se.token,Jr=Rt.current;Jr&&Jr.switchTo({meetingId:we,token:nr})},is=function(){var se=Rt.current;se&&se.disableScreenShare()},Ii=function(se){se===void 0&&(se=void 0);var we=Rt.current;we&&we.enableScreenShare(se)},Us=function(se){se===void 0&&(se=void 0);var we=Ke.current;we?is():Ii(se)},Xs=function(se){var we=Rt.current;we&&we.changeMode(se)},go=function(se,we){we===void 0&&(we={reliability:"RELIABLE"});try{var nr=Rt.current;return Promise.resolve((function(){if(nr)return Promise.resolve(nr.send(se,we))})())}catch(Jr){return Promise.reject(Jr)}},bs=function(se,we){var nr=Rt.current;nr&&nr.respondEntry(se,we)},Rn=function(){try{var se=Rt.current;return Promise.resolve((function(){if(se)return Promise.resolve(se.getMics())})())}catch(we){return Promise.reject(we)}},yo=function(){try{var se=Rt.current;return Promise.resolve((function(){if(se)return Promise.resolve(se.getWebcams())})())}catch(we){return Promise.reject(we)}},Tn=function(se){var we=Rt.current;we&&we.changeWebcam(se)},xi=function(se){var we=Rt.current;we&&we.replaceWebcamStream(se)},Ss=function(se){var we=Rt.current;we&&we.changeMic(se)},ss=function(se){var we=se.link,nr=Rt.current;nr&&nr.startVideo({link:we})},_o=function(){var se=Rt.current;se&&se.stopVideo()},Js=function(){var se=Rt.current;se&&se.resumeVideo()},Zs=function(se){var we=se.currentTime,nr=Rt.current;nr&&nr.pauseVideo({currentTime:we})},Es=function(){var se=Rt.current;se&&se.enableAdaptiveSubscription()},Ci=function(){var se=Rt.current;se&&se.disableAdaptiveSubscription()},bo=function(se){var we=se.destinationMeetingId,nr=se.token,Jr=se.kinds,_n=Rt.current;_n&&_n.requestMediaRelay({destinationMeetingId:we,token:nr,kinds:Jr})},jo=function(se){var we=Rt.current;we&&we.stopMediaRelay(se)},Uo=function(se){var we=se.currentTime,nr=Rt.current;nr&&nr.seekVideo({currentTime:we})},zo=function(se,we){var nr=Rt.current;nr&&nr.startLivestream(se,we)},zs=function(){var se=Rt.current;se&&se.stopLivestream()},Er=function(se){var we=se.meetingId,nr=se.payload;try{var Jr=Rt.current,_n=(function(){if(Jr)return Promise.resolve(Jr.connectTo({meetingId:we,payload:nr})).then(function(){})})();return Promise.resolve(_n&&_n.then?_n.then(function(){}):void 0)}catch(Bi){return Promise.reject(Bi)}},So=function(se,we){var nr=Rt.current;nr&&nr.startHls(se,we)},Eo=function(){var se=Rt.current;se&&se.stopHls()},Hs=function(){hl.VideoSDK.config(rt.current),Ht.current&&hl.VideoSDK.setKeyProvider(Ht.current),oe?hl.VideoSDK.analytics(oe):hl.VideoSDK.analytics({sdkType:"react-web",sdkVersion:Lm}),at&&fo()};return St.useEffect(function(){Hs()},[]),St.useEffect(function(){ur&&Tt.current&&(Qs(),Hs(),!at&&fo())},[Ee.meetingId,wt,ur]),Ks.createElement(hf.Provider,{value:{meetingId:x?.id,meeting:x,baseUrl:x?.baseUrl,localParticipant:b,mainParticipant:n,activeSpeakerId:q,participants:le,characters:ne,presenterId:k,localMicOn:y,localWebcamOn:m,localScreenShareOn:B,messages:G,isRecording:z,isLiveStreaming:Vt,pinnedParticipants:_e,connections:jt,isHls:ar,recordingState:pn,livestreamState:ir,hlsState:za,hlsUrls:He,transcriptionState:kt,translationState:fr,isMeetingJoined:Ua,selectedCameraDevice:x?.selectedCameraDevice,selectedMicrophoneDevice:x?.selectedMicrophoneDevice,join:fo,leave:Qs,end:mo,pauseAllStreams:Ti,resumeAllStreams:vo,startRecording:xo,stopRecording:ns,send:go,respondEntry:bs,muteMic:_s,unmuteMic:Ni,toggleMic:Bs,disableWebcam:js,enableWebcam:hi,toggleWebcam:Nn,disableScreenShare:is,enableScreenShare:Ii,toggleScreenShare:Us,switchTo:Bo,getMics:Rn,getWebcams:yo,changeWebcam:Tn,replaceWebcamStream:xi,changeMic:Ss,changeMode:Xs,startVideo:ss,stopVideo:_o,resumeVideo:Js,pauseVideo:Zs,seekVideo:Uo,startLivestream:zo,stopLivestream:zs,connectTo:Er,startHls:So,stopHls:Eo,enableAdaptiveSubscription:Es,disableAdaptiveSubscription:Ci,requestMediaRelay:bo,stopMediaRelay:jo}},ct)},mf=function(Nt,ct){var Ee={},wt=Ee.onStreamEnabled,at=wt===void 0?function(){}:wt,Ft=Ee.onStreamDisabled,oe=Ft===void 0?function(){}:Ft,Y=Ee.onMediaStatusChanged,S=Y===void 0?function(){}:Y,x=Ee.onVideoQualityChanged,C=x===void 0?function(){}:x,T=Ee.onStreamPaused,b=T===void 0?function(){}:T,J=Ee.onStreamResumed,w=J===void 0?function(){}:J,n=Ee.onProducerAdded,f=n===void 0?function(){}:n,U=Ee.onProducerRemoved,q=U===void 0?function(){}:U,g=Ee.onConsumerAdded,h=g===void 0?function(){}:g,k=Ee.onConsumerRemoved,W=k===void 0?function(){}:k,j=St.useState(null),y=j[0],d=j[1],R=St.useState(null),m=R[0],P=R[1],H=St.useState(null),B=H[0],$=H[1],L=St.useState(null),z=L[0],V=L[1],X=ff(),G=St.useMemo(function(){var rt,Tt=X?.participants,yr=X?.localParticipant,ur=X?.activeSpeakerId,wr=X?.mainParticipant,$r=(X==null||(rt=X.pinnedParticipants)===null||rt===void 0?void 0:rt.get(Nt))||{cam:!1,share:!1};return{participants:Tt,localParticipant:yr,activeSpeakerId:ur,mainParticipant:wr,pinState:$r}},[X]),ae=G.participants,Q=G.localParticipant,le=G.activeSpeakerId,pe=G.mainParticipant,ue=G.pinState,ne=ae?.get(Nt),Oe=St.useState(ne?.webcamOn),ye=Oe[0],_e=Oe[1],Se=St.useState(ne?.micOn),ze=Se[0],Vt=Se[1],tr=St.useState(ne?.mode),gr=tr[0],jt=tr[1],Pr=function(Tt){if(Tt.track.readyState==="live")switch(Tt.kind){case"video":y!=null&&d(null),d(Tt);break;case"audio":m!=null&&P(null),P(Tt);break;case"share":B!=null&&$(null),$(Tt);break;case"shareAudio":z!=null&&V(null),V(Tt);break}},qa=function(Tt){switch(Tt.kind){case"video":d(null);break;case"audio":P(null);break;case"share":$(null);break;case"shareAudio":V(null);break}},Ua=function(Tt){Pr(Tt),at(Tt)},br=function(Tt){b(Tt)},zr=function(Tt){w(Tt)},ar=function(Tt){Nt===Tt.participantId&&jt(Tt.mode)},Wa=function(Tt){qa(Tt),oe(Tt)},Gr=function(Tt){var yr=Tt.peerId,ur=Tt.prevQuality,wr=Tt.currentQuality;C({peerId:yr,prevQuality:ur,currentQuality:wr})},pn=function(Tt){var yr=Tt.kind,ur=Tt.peerId,wr=Tt.newStatus;yr=="audio"?Vt(wr):yr=="video"&&_e(wr),S({kind:yr,peerId:ur,newStatus:wr})},nt=function(Tt){f(Tt)},et=function(Tt){q(Tt)},ir=function(Tt){h(Tt)},Lr=function(Tt){W(Tt)},pa=function(Tt){ne?.setQuality(Tt)},za=function(Tt,yr){ne?.setViewPort(Tt,yr)},Za=function(Tt){ne?.setScreenShareQuality(Tt)},zt=function(){ne?.enableMic()},He=function(){ne?.disableMic()},yt=function(){ne?.enableWebcam()},Xe=function(){ne?.disableWebcam()},kt=function(Tt){ne?.pin(Tt)},Or=function(Tt){ne?.unpin(Tt)},Ce=function(){ne?.remove()},fr=function(Tt){var yr=Tt===void 0?{}:Tt,ur=yr.height,wr=yr.width;return Promise.resolve(ne?.captureImage({height:ur,width:wr}))},Sr=function(){return Promise.resolve(ne?.getAudioStats())},Rt=function(){return Promise.resolve(ne?.getVideoStats())},Rr=function(){return Promise.resolve(ne?.getShareStats())},aa=function(){return Promise.resolve(ne?.getShareAudioStats())},Ke=function(){ne?.consumeWebcamStreams()},Xt=function(){ne?.consumeMicStreams()},Ht=function(){ne?.stopConsumingWebcamStreams()},Qt=function(){ne?.stopConsumingMicStreams()};return St.useEffect(function(){var rt=ne?.streams;return rt&&rt.forEach(function(Tt){Pr(Tt)}),ne!=null&&ne.micOn&&Vt(ze),ne!=null&&ne.webcamOn&&_e(ye),ne?.on("stream-enabled",Ua),ne?.on("stream-disabled",Wa),ne?.on("stream-paused",br),ne?.on("stream-resumed",zr),ne?.on("media-status-changed",pn),ne?.on("video-quality-changed",Gr),ne?.on("producer-added",nt),ne?.on("producer-removed",et),ne?.on("consumer-added",ir),ne?.on("consumer-removed",Lr),Ye.on(Qe["participant-mode-changed"],ar),function(){ne?.off("stream-enabled",Ua),ne?.off("stream-disabled",Wa),ne?.off("stream-paused",br),ne?.off("stream-resumed",zr),ne?.off("media-status-changed",pn),ne?.off("video-quality-changed",Gr),ne?.off("producer-added",nt),ne?.off("producer-removed",et),ne?.off("consumer-added",ir),ne?.off("consumer-removed",Lr),Ye.off(Qe["participant-mode-changed"],ar)}},[ne]),{displayName:ne?.displayName,participant:ne,webcamStream:y,micStream:m,screenShareStream:B,screenShareAudioStream:z,webcamOn:ye||!!y,micOn:ze||!!m,mode:gr,metaData:ne?.metaData,screenShareOn:!!B,isLocal:Q?.id===Nt,isActiveSpeaker:le===Nt,isMainParticipant:pe?.id===Nt,pinState:ue,consumeMicStreams:Xt,consumeWebcamStreams:Ke,stopConsumingMicStreams:Qt,stopConsumingWebcamStreams:Ht,setQuality:pa,setScreenShareQuality:Za,setViewPort:za,enableMic:zt,disableMic:He,enableWebcam:yt,disableWebcam:Xe,captureImage:fr,pin:kt,unpin:Or,remove:Ce,getAudioStats:Sr,getVideoStats:Rt,getShareStats:Rr,getShareAudioStats:aa}};typeof Symbol<"u"&&(Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator")));typeof Symbol<"u"&&(Symbol.asyncIterator||(Symbol.asyncIterator=Symbol("Symbol.asyncIterator")));hl.VideoSDK.Constants;St.forwardRef(function(Ae,Nt){var ct=Ae.participantId,Ee=Ae.type,wt=Ee===void 0?"video":Ee,at=Ae.containerStyle,Ft=at===void 0?{}:at,oe=Ae.className,Y=oe===void 0?"":oe,S=Ae.classNameVideo,x=S===void 0?"":S,C=Ae.videoStyle,T=C===void 0?{}:C,b=Ae.videoRef,J=mf(ct),w=J.webcamOn,n=J.webcamStream,f=J.isLocal,U=J.screenShareStream,q=J.screenShareOn,g=St.useRef(null),h=b||g;return St.useEffect(function(){var k=wt==="share"?U:n,W=wt==="share"?q:w;if(h.current)if(W&&k){var j=new MediaStream;j.addTrack(k.track),h.current.setAttribute("muted",""),h.current.srcObject=j,h.current.setAttribute("playsinline",""),h.current.setAttribute("x5-playsinline",""),h.current.setAttribute("webkit-playsinline",""),h.current.play().catch(function(y){return console.error("finalVideoRef.current.play() failed",y)})}else h.current.srcObject=null},[wt].concat(wt==="share"?[q,U]:wt==="video"?[w,n]:[])),Ks.createElement("div",{ref:Nt,className:"video-container participant-video-"+ct+" "+(Y||""),style:id({objectFit:wt==="share"?"contain":"none",height:"100%"},Ft)},Ks.createElement("video",{width:"100%",height:"100%",ref:h,autoPlay:!0,className:x,muted:!0,style:f&&wt!=="share"?id({transform:"scaleX(-1)",WebkitTransform:"scaleX(-1)"},T):T}))});const Im="https://api.videosdk.live/v2",xm=async({token:Ae})=>{const Nt=await fetch(`${Im}/rooms`,{method:"POST",headers:{authorization:`${Ae}`,"Content-Type":"application/json"},body:JSON.stringify({})}),{roomId:ct}=await Nt.json();return ct},Bm=({onJoinRoom:Ae})=>{const[Nt,ct]=St.useState(""),[Ee,wt]=St.useState(""),[at,Ft]=St.useState(!1),[oe,Y]=St.useState(""),S=async()=>{if(!Ee.trim()){Y("Please enter your name");return}{Y("Please configure your VideoSDK token in .env file");return}},x=()=>{if(!Ee.trim()){Y("Please enter your name");return}if(!Nt.trim()){Y("Please enter a room ID");return}{Y("Please configure your VideoSDK token in .env file");return}};return je.jsx("div",{className:"min-h-screen flex items-center justify-center p-4",children:je.jsxs("div",{className:"w-full max-w-md",children:[je.jsxs("div",{className:"text-center mb-8 animate-float",children:[je.jsx("h1",{className:"text-5xl font-bold mb-4 text-gradient",children:"VideoSDK Room Switch"}),je.jsx("p",{className:"text-white/70 text-lg",children:"Experience seamless room switching with Media Relay"})]}),je.jsxs("div",{className:"card space-y-6",children:[je.jsxs("div",{children:[je.jsx("label",{className:"block text-sm font-medium mb-2 text-white/90",children:"Your Name"}),je.jsx("input",{type:"text",placeholder:"Enter your name",value:Ee,onChange:C=>wt(C.target.value),className:"input-field",onKeyPress:C=>C.key==="Enter"&&S()})]}),je.jsxs("div",{className:"relative",children:[je.jsx("div",{className:"absolute inset-0 flex items-center",children:je.jsx("div",{className:"w-full border-t border-white/20"})}),je.jsx("div",{className:"relative flex justify-center text-sm",children:je.jsx("span",{className:"px-4 bg-transparent text-white/50 font-semibold",children:"CREATE NEW ROOM"})})]}),je.jsx("button",{onClick:S,disabled:at,className:"btn-primary w-full",children:at?je.jsxs("span",{className:"flex items-center justify-center",children:[je.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[je.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),je.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Creating Room..."]}):"Create New Room"}),je.jsxs("div",{className:"relative",children:[je.jsx("div",{className:"absolute inset-0 flex items-center",children:je.jsx("div",{className:"w-full border-t border-white/20"})}),je.jsx("div",{className:"relative flex justify-center text-sm",children:je.jsx("span",{className:"px-4 bg-transparent text-white/50 font-semibold",children:"OR JOIN EXISTING"})})]}),je.jsxs("div",{children:[je.jsx("label",{className:"block text-sm font-medium mb-2 text-white/90",children:"Room ID"}),je.jsx("input",{type:"text",placeholder:"Enter room ID",value:Nt,onChange:C=>ct(C.target.value),className:"input-field",onKeyPress:C=>C.key==="Enter"&&x()})]}),je.jsx("button",{onClick:x,className:"btn-secondary w-full",children:"Join Existing Room"}),oe&&je.jsx("div",{className:"p-4 bg-red-500/20 border border-red-500/50 rounded-lg",children:je.jsx("p",{className:"text-red-300 text-sm",children:oe})}),je.jsxs("div",{className:"mt-6 p-4 bg-blue-500/10 border border-blue-500/30 rounded-lg",children:[je.jsx("h3",{className:"text-sm font-semibold text-blue-300 mb-2",children:" Quick Setup"}),je.jsxs("ol",{className:"text-xs text-white/70 space-y-1 list-decimal list-inside",children:[je.jsxs("li",{children:["Get your token from ",je.jsx("a",{href:"https://app.videosdk.live/api-keys",target:"_blank",rel:"noopener noreferrer",className:"text-blue-400 hover:underline",children:"VideoSDK Dashboard"})]}),je.jsxs("li",{children:["Create a ",je.jsx("code",{className:"bg-white/10 px-1 rounded",children:".env"})," file with ",je.jsx("code",{className:"bg-white/10 px-1 rounded",children:"VITE_VIDEOSDK_TOKEN"})]}),je.jsx("li",{children:"Restart the dev server"})]})]})]}),je.jsxs("div",{className:"mt-8 grid grid-cols-3 gap-4",children:[je.jsxs("div",{className:"text-center",children:[je.jsx("div",{className:"text-3xl mb-2",children:""}),je.jsx("p",{className:"text-xs text-white/60",children:"HD Video"})]}),je.jsxs("div",{className:"text-center",children:[je.jsx("div",{className:"text-3xl mb-2",children:""}),je.jsx("p",{className:"text-xs text-white/60",children:"Room Switch"})]}),je.jsxs("div",{className:"text-center",children:[je.jsx("div",{className:"text-3xl mb-2",children:""}),je.jsx("p",{className:"text-xs text-white/60",children:"Media Relay"})]})]})]})})},jm="modulepreload",Um=function(Ae){return"/"+Ae},of={},Io=function(Nt,ct,Ee){let wt=Promise.resolve();if(ct&&ct.length>0){let Y=function(S){return Promise.all(S.map(x=>Promise.resolve(x).then(C=>({status:"fulfilled",value:C}),C=>({status:"rejected",reason:C}))))};document.getElementsByTagName("link");const Ft=document.querySelector("meta[property=csp-nonce]"),oe=Ft?.nonce||Ft?.getAttribute("nonce");wt=Y(ct.map(S=>{if(S=Um(S),S in of)return;of[S]=!0;const x=S.endsWith(".css"),C=x?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${S}"]${C}`))return;const T=document.createElement("link");if(T.rel=x?"stylesheet":jm,x||(T.as="script"),T.crossOrigin="",T.href=S,oe&&T.setAttribute("nonce",oe),document.head.appendChild(T),x)return new Promise((b,J)=>{T.addEventListener("load",b),T.addEventListener("error",()=>J(new Error(`Unable to preload CSS for ${S}`)))})}))}function at(Ft){const oe=new Event("vite:preloadError",{cancelable:!0});if(oe.payload=Ft,window.dispatchEvent(oe),!oe.defaultPrevented)throw Ft}return wt.then(Ft=>{for(const oe of Ft||[])oe.status==="rejected"&&at(oe.reason);return Nt().catch(at)})},vf=/\.(m4a|m4b|mp4a|mpga|mp2|mp2a|mp3|m2a|m3a|wav|weba|aac|oga|spx)($|\?)/i,cf=/\.(mp4|og[gv]|webm|mov|m4v)(#t=[,\d+]+)?($|\?)/i,lf=/\.(m3u8)($|\?)/i,zm=/\.(mpd)($|\?)/i,Hm=/stream\.mux\.com\/(?!\w+\.m3u8)(\w+)/,Vm=/(?:youtu\.be\/|youtube(?:-nocookie|education)?\.com\/(?:embed\/|v\/|watch\/|watch\?v=|watch\?.+&v=|shorts\/|live\/))((\w|-){11})|youtube\.com\/playlist\?list=|youtube\.com\/user\//,Fm=/vimeo\.com\/(?!progressive_redirect).+/,$m=/(?:wistia\.(?:com|net)|wi\.st)\/(?:medias|embed)\/(?:iframe\/)?([^?]+)/,qm=/open\.spotify\.com\/(\w+)\/(\w+)/i,Wm=/(?:www\.|go\.)?twitch\.tv\/([a-zA-Z0-9_]+|(videos?\/|\?video=)\d+)($|\?)/,Gm=/tiktok\.com\/(?:player\/v1\/|share\/video\/|@[^/]+\/video\/)([0-9]+)/,vu=(Ae,Nt)=>{if(Array.isArray(Ae)){for(const ct of Ae)if(typeof ct=="string"&&vu(ct,Nt)||vu(ct.src,Nt))return!0;return!1}return Nt(Ae)},No={html:Ae=>vu(Ae,Nt=>vf.test(Nt)||cf.test(Nt)),hls:Ae=>vu(Ae,Nt=>lf.test(Nt)),dash:Ae=>vu(Ae,Nt=>zm.test(Nt)),mux:Ae=>Hm.test(Ae),youtube:Ae=>Vm.test(Ae),vimeo:Ae=>Fm.test(Ae)&&!cf.test(Ae)&&!lf.test(Ae),wistia:Ae=>$m.test(Ae),spotify:Ae=>qm.test(Ae),twitch:Ae=>Wm.test(Ae),tiktok:Ae=>Gm.test(Ae)},Km=Ks.forwardRef((Ae,Nt)=>{const ct=vf.test(`${Ae.src}`)?"audio":"video";return Ks.createElement(ct,{...Ae,ref:Nt},Ae.children)});var Ym=Km;const Qm=[{key:"hls",name:"hls.js",canPlay:No.hls,canEnablePIP:()=>!0,player:St.lazy(()=>Io(()=>import("./react-DwN-bxcz.js"),__vite__mapDeps([0,1,2])))},{key:"dash",name:"dash.js",canPlay:No.dash,canEnablePIP:()=>!0,player:St.lazy(()=>Io(()=>import("./react-ChWG-e-6.js"),__vite__mapDeps([3,1])))},{key:"mux",name:"Mux",canPlay:No.mux,canEnablePIP:()=>!0,player:St.lazy(()=>Io(()=>import("./index-BWz97y3Q.js"),__vite__mapDeps([4,2,1])))},{key:"youtube",name:"YouTube",canPlay:No.youtube,player:St.lazy(()=>Io(()=>import("./react-B2v9Xgva.js"),[]))},{key:"vimeo",name:"Vimeo",canPlay:No.vimeo,player:St.lazy(()=>Io(()=>import("./react-DfJbGDv4.js"),[]))},{key:"wistia",name:"Wistia",canPlay:No.wistia,canEnablePIP:()=>!0,player:St.lazy(()=>Io(()=>import("./react-BW7wDk8j.js"),[]))},{key:"spotify",name:"Spotify",canPlay:No.spotify,canEnablePIP:()=>!1,player:St.lazy(()=>Io(()=>import("./react-Dm4Gl1mt.js"),[]))},{key:"twitch",name:"Twitch",canPlay:No.twitch,canEnablePIP:()=>!1,player:St.lazy(()=>Io(()=>import("./react-R7jJAt7p.js"),[]))},{key:"tiktok",name:"TikTok",canPlay:No.tiktok,canEnablePIP:()=>!1,player:St.lazy(()=>Io(()=>import("./react-C6jETe49.js"),[]))},{key:"html",name:"html",canPlay:No.html,canEnablePIP:()=>!0,player:Ym}];var up=Qm;const Xm={width:"320px",height:"180px",volume:1,playbackRate:1,previewTabIndex:0,previewAriaLabel:"",oEmbedUrl:"https://noembed.com/embed?url={url}"},gf=Ks.forwardRef((Ae,Nt)=>{const{playing:ct,pip:Ee}=Ae,wt=Ae.activePlayer,at=St.useRef(null),Ft=St.useRef(!0);St.useEffect(()=>{var C,T;at.current&&(at.current.paused&&ct===!0&&at.current.play(),!at.current.paused&&ct===!1&&at.current.pause(),at.current.playbackRate=(C=Ae.playbackRate)!=null?C:1,at.current.volume=(T=Ae.volume)!=null?T:1)}),St.useEffect(()=>{var C,T,b,J,w;if(!(!at.current||!globalThis.document)){if(Ee&&!document.pictureInPictureElement)try{(T=(C=at.current).requestPictureInPicture)==null||T.call(C)}catch{}if(!Ee&&document.pictureInPictureElement)try{(J=(b=at.current).exitPictureInPicture)==null||J.call(b),(w=document.exitPictureInPicture)==null||w.call(document)}catch{}}},[Ee]);const oe=C=>{var T,b;Ft.current=!0,(T=Ae.onReady)==null||T.call(Ae),(b=Ae.onLoadStart)==null||b.call(Ae,C)},Y=C=>{var T,b;Ft.current&&(Ft.current=!1,(T=Ae.onStart)==null||T.call(Ae,C)),(b=Ae.onPlay)==null||b.call(Ae,C)};if(!wt)return null;const S={},x=["onReady","onStart"];for(const C in Ae)C.startsWith("on")&&!x.includes(C)&&(S[C]=Ae[C]);return Ks.createElement(wt,{...S,style:Ae.style,className:Ae.className,slot:Ae.slot,ref:St.useCallback(C=>{at.current=C,typeof Nt=="function"?Nt(C):Nt!==null&&(Nt.current=C)},[Nt]),src:Ae.src,crossOrigin:Ae.crossOrigin,preload:Ae.preload,controls:Ae.controls,muted:Ae.muted,autoPlay:Ae.autoPlay,loop:Ae.loop,playsInline:Ae.playsInline,disableRemotePlayback:Ae.disableRemotePlayback,config:Ae.config,onLoadStart:oe,onPlay:Y},Ae.children)});gf.displayName="Player";var Jm=gf;const Zm=St.lazy(()=>Io(()=>import("./Preview-DPRm_iPk.js"),[])),mu=[],ev=(Ae,Nt)=>{const ct=wt=>{for(const at of[...mu,...Ae])if(wt&&at.canPlay(wt))return at;return Nt||null},Ee=Ks.forwardRef((wt,at)=>{const Ft={...Xm,...wt},{src:oe,slot:Y,className:S,style:x,width:C,height:T,fallback:b,wrapper:J}=Ft,[w,n]=St.useState(!!Ft.light);St.useEffect(()=>{Ft.light?n(!0):n(!1)},[Ft.light]);const f=k=>{var W;n(!1),(W=Ft.onClickPreview)==null||W.call(Ft,k)},U=k=>{if(!k)return null;const{light:W,playIcon:j,previewTabIndex:y,oEmbedUrl:d,previewAriaLabel:R}=Ft;return Ks.createElement(Zm,{src:k,light:W,playIcon:j,previewTabIndex:y,previewAriaLabel:R,oEmbedUrl:d,onClickPreview:f})},q=k=>{var W,j;const y=ct(k);if(!y)return null;const{style:d,width:R,height:m,wrapper:P}=Ft,H=(W=Ft.config)==null?void 0:W[y.key];return Ks.createElement(Jm,{...Ft,ref:at,activePlayer:(j=y.player)!=null?j:y,slot:P?void 0:Y,className:P?void 0:S,style:P?{display:"block",width:"100%",height:"100%"}:{display:"block",width:R,height:m,...d},config:H})},g=J??uf,h=b===!1?uf:St.Suspense;return Ks.createElement(g,{slot:Y,className:S,style:{width:C,height:T,...x}},Ks.createElement(h,{fallback:b},w?U(oe):q(oe)))});return Ee.displayName="ReactPlayer",Ee.addCustomPlayer=wt=>{mu.push(wt)},Ee.removeCustomPlayers=()=>{mu.length=0},Ee.canPlay=wt=>{if(wt){for(const at of[...mu,...Ae])if(at.canPlay(wt))return!0}return!1},Ee.canEnablePIP=wt=>{var at;if(wt){for(const Ft of[...mu,...Ae])if(Ft.canPlay(wt)&&((at=Ft.canEnablePIP)!=null&&at.call(Ft)))return!0}return!1},Ee},uf=({children:Ae})=>Ae,tv=up[up.length-1];var rv=ev(up,tv);const df=({participantId:Ae,isLocal:Nt=!1})=>{const ct=St.useRef(null),{webcamStream:Ee,micStream:wt,webcamOn:at,micOn:Ft,isActiveSpeaker:oe,displayName:Y}=mf(Ae),S=St.useMemo(()=>{if(at&&Ee){const C=new MediaStream;return C.addTrack(Ee.track),C}},[Ee,at]),x=St.useMemo(()=>{if(Ft&&wt){const C=new MediaStream;return C.addTrack(wt.track),C}},[wt,Ft]);return St.useEffect(()=>{if(ct.current)if(Ft&&x){const C=new MediaStream;C.addTrack(x.track),ct.current.srcObject=C,ct.current.play().catch(T=>console.error("videoElem.current.play() failed",T))}else ct.current.srcObject=null},[wt,Ft,x]),je.jsx("div",{className:`participant-tile ${oe?"ring-4 ring-green-500":""}`,children:je.jsxs("div",{className:"video-container aspect-video",children:[at?je.jsx(rv,{playsinline:!0,pip:!1,light:!1,controls:!1,muted:!0,playing:!0,url:S,height:"100%",width:"100%",onError:C=>{console.log(C,"participant video error")}}):je.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gradient-to-br from-purple-900 to-blue-900",children:je.jsxs("div",{className:"text-center",children:[je.jsx("div",{className:"w-20 h-20 rounded-full bg-white/20 flex items-center justify-center mx-auto mb-3",children:je.jsx("span",{className:"text-3xl font-bold",children:Y?.charAt(0).toUpperCase()||"U"})}),je.jsx("p",{className:"text-sm text-white/70",children:"Camera Off"})]})}),!Nt&&je.jsx("audio",{ref:ct,autoPlay:!0,playsInline:!0,muted:!1}),je.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/80 to-transparent p-3",children:je.jsxs("div",{className:"flex items-center justify-between",children:[je.jsxs("div",{className:"flex items-center space-x-2",children:[je.jsxs("span",{className:"font-semibold text-sm",children:[Y||"Participant"," ",Nt&&"(You)"]}),oe&&je.jsxs("span",{className:"flex h-2 w-2",children:[je.jsx("span",{className:"animate-ping absolute inline-flex h-2 w-2 rounded-full bg-green-400 opacity-75"}),je.jsx("span",{className:"relative inline-flex rounded-full h-2 w-2 bg-green-500"})]})]}),je.jsxs("div",{className:"flex items-center space-x-2",children:[Ft?je.jsx("svg",{className:"w-4 h-4 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:je.jsx("path",{fillRule:"evenodd",d:"M7 4a3 3 0 016 0v4a3 3 0 11-6 0V4zm4 10.93A7.001 7.001 0 0017 8a1 1 0 10-2 0A5 5 0 015 8a1 1 0 00-2 0 7.001 7.001 0 006 6.93V17H6a1 1 0 100 2h8a1 1 0 100-2h-3v-2.07z",clipRule:"evenodd"})}):je.jsx("svg",{className:"w-4 h-4 text-red-400",fill:"currentColor",viewBox:"0 0 20 20",children:je.jsx("path",{fillRule:"evenodd",d:"M13.477 14.89A6 6 0 015.11 6.524l8.367 8.368zm1.414-1.414L6.524 5.11a6 6 0 018.367 8.367zM18 10a8 8 0 11-16 0 8 8 0 0116 0z",clipRule:"evenodd"})}),at?je.jsx("svg",{className:"w-4 h-4 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:je.jsx("path",{d:"M2 6a2 2 0 012-2h6a2 2 0 012 2v8a2 2 0 01-2 2H4a2 2 0 01-2-2V6zM14.553 7.106A1 1 0 0014 8v4a1 1 0 00.553.894l2 1A1 1 0 0018 13V7a1 1 0 00-1.447-.894l-2 1z"})}):je.jsx("svg",{className:"w-4 h-4 text-red-400",fill:"currentColor",viewBox:"0 0 20 20",children:je.jsx("path",{fillRule:"evenodd",d:"M13.477 14.89A6 6 0 015.11 6.524l8.367 8.368zm1.414-1.414L6.524 5.11a6 6 0 018.367 8.367zM18 10a8 8 0 11-16 0 8 8 0 0116 0z",clipRule:"evenodd"})})]})]})})]})})},av=({onLeave:Ae,token:Nt,initialRoomId:ct,participantName:Ee})=>{const[wt,at]=St.useState(ct),[Ft,oe]=St.useState(""),[Y,S]=St.useState(!1),[x,C]=St.useState("normal"),[T,b]=St.useState(""),[J,w]=St.useState(ct),[n,f]=St.useState(""),[U,q]=St.useState(!1),{join:g,leave:h,toggleMic:k,toggleWebcam:W,participants:j,localParticipant:y,startHls:d,stopHls:R}=ff({onMeetingJoined:()=>{console.log("Meeting Joined"),S(!1)},onMeetingLeft:()=>{console.log("Meeting Left"),Ae()},onParticipantJoined:L=>{console.log("Participant Joined",L)},onParticipantLeft:L=>{console.log("Participant Left",L)}}),m=[...j.keys()];St.useEffect(()=>{g()},[]);const P=async()=>{q(!0);try{const L=await xm({token:Nt});f(L),oe(L)}catch(L){console.error("Error creating Room B:",L),alert("Failed to create Room B")}finally{q(!1)}},H=async()=>{if(!Ft){alert("Please create or enter Room B ID");return}S(!0),C("normal");try{h(),setTimeout(()=>{window.location.reload()},1e3)}catch(L){console.error("Error during normal switch:",L),S(!1)}},B=async()=>{if(!Ft){alert("Please create or enter Room B ID");return}S(!0),C("relay"),b("Starting media relay...");try{b("Media relay active - Streaming to Room B"),d&&(await d({layout:{type:"GRID",priority:"SPEAKER",gridSize:4}}),b("HLS started - Media being relayed")),setTimeout(()=>{b("Media relay demonstration complete"),S(!1)},3e3)}catch(L){console.error("Error during media relay:",L),b("Media relay failed"),S(!1)}},$=()=>{h()};return je.jsx("div",{className:"min-h-screen p-4",children:je.jsxs("div",{className:"max-w-7xl mx-auto",children:[je.jsx("div",{className:"card mb-6",children:je.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[je.jsxs("div",{children:[je.jsx("h1",{className:"text-2xl font-bold text-gradient mb-1",children:"Video Conference"}),je.jsxs("div",{className:"flex items-center space-x-3",children:[je.jsxs("span",{className:"status-active",children:["Room: ",wt]}),je.jsxs("span",{className:"text-white/60 text-sm",children:[m.length," participant(s)"]})]})]}),je.jsx("button",{onClick:$,className:"btn-danger",children:"Leave Meeting"})]})}),je.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[je.jsxs("div",{className:"lg:col-span-2 space-y-4",children:[je.jsxs("div",{children:[je.jsx("h3",{className:"text-sm font-semibold text-white/70 mb-2 uppercase tracking-wide",children:"You"}),y&&je.jsx(df,{participantId:y.id,isLocal:!0})]}),m.length>0&&je.jsxs("div",{children:[je.jsxs("h3",{className:"text-sm font-semibold text-white/70 mb-2 uppercase tracking-wide",children:["Other Participants (",m.length,")"]}),je.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:m.map(L=>je.jsx(df,{participantId:L,isLocal:!1},L))})]})]}),je.jsxs("div",{className:"space-y-4",children:[je.jsxs("div",{className:"card",children:[je.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Media Controls"}),je.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[je.jsxs("button",{onClick:()=>k(),className:"btn-secondary flex items-center justify-center space-x-2",children:[je.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:je.jsx("path",{fillRule:"evenodd",d:"M7 4a3 3 0 016 0v4a3 3 0 11-6 0V4zm4 10.93A7.001 7.001 0 0017 8a1 1 0 10-2 0A5 5 0 015 8a1 1 0 00-2 0 7.001 7.001 0 006 6.93V17H6a1 1 0 100 2h8a1 1 0 100-2h-3v-2.07z",clipRule:"evenodd"})}),je.jsx("span",{children:"Mic"})]}),je.jsxs("button",{onClick:()=>W(),className:"btn-secondary flex items-center justify-center space-x-2",children:[je.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:je.jsx("path",{d:"M2 6a2 2 0 012-2h6a2 2 0 012 2v8a2 2 0 01-2 2H4a2 2 0 01-2-2V6zM14.553 7.106A1 1 0 0014 8v4a1 1 0 00.553.894l2 1A1 1 0 0018 13V7a1 1 0 00-1.447-.894l-2 1z"})}),je.jsx("span",{children:"Camera"})]})]})]}),je.jsxs("div",{className:"card",children:[je.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center",children:[je.jsx("span",{className:"text-2xl mr-2",children:""}),"Room Switch"]}),je.jsxs("div",{className:"space-y-4",children:[je.jsxs("div",{className:"p-3 bg-green-500/10 border border-green-500/30 rounded-lg",children:[je.jsx("div",{className:"text-xs text-green-300 font-semibold mb-1",children:"ROOM A (Current)"}),je.jsx("div",{className:"text-sm font-mono text-white/90 break-all",children:J})]}),n?je.jsxs("div",{className:"p-3 bg-blue-500/10 border border-blue-500/30 rounded-lg",children:[je.jsx("div",{className:"text-xs text-blue-300 font-semibold mb-1",children:"ROOM B (Target)"}),je.jsx("div",{className:"text-sm font-mono text-white/90 break-all",children:n})]}):je.jsx("button",{onClick:P,disabled:U,className:"btn-primary w-full",children:U?"Creating Room B...":"Create Room B"}),je.jsxs("div",{children:[je.jsx("label",{className:"block text-xs font-medium mb-2 text-white/70",children:"Or enter existing Room B ID:"}),je.jsx("input",{type:"text",placeholder:"Enter Room B ID",value:Ft,onChange:L=>oe(L.target.value),className:"input-field text-sm",disabled:Y})]}),je.jsxs("div",{className:"space-y-2",children:[je.jsx("div",{className:"text-xs font-semibold text-white/70 uppercase tracking-wide",children:"Switch Method:"}),je.jsx("button",{onClick:H,disabled:Y||!Ft,className:"btn-primary w-full text-sm",children:Y&&x==="normal"?"Switching...":"Normal Switch (Leave & Join)"}),je.jsx("button",{onClick:B,disabled:Y||!Ft,className:"btn-secondary w-full text-sm",children:Y&&x==="relay"?"Relaying...":"Media Relay Switch"})]}),T&&je.jsx("div",{className:"p-3 bg-yellow-500/10 border border-yellow-500/30 rounded-lg",children:je.jsx("div",{className:"text-xs text-yellow-300",children:T})})]})]}),je.jsxs("div",{className:"card bg-purple-500/10 border-purple-500/30",children:[je.jsxs("h3",{className:"text-sm font-semibold mb-3 flex items-center text-purple-300",children:[je.jsx("span",{className:"text-xl mr-2",children:""}),"How It Works"]}),je.jsxs("div",{className:"space-y-3 text-xs text-white/70",children:[je.jsxs("div",{children:[je.jsx("div",{className:"font-semibold text-white/90 mb-1",children:"Normal Switch:"}),je.jsx("p",{children:"Leaves current room and joins the new room. Brief disconnection occurs."})]}),je.jsxs("div",{children:[je.jsx("div",{className:"font-semibold text-white/90 mb-1",children:"Media Relay:"}),je.jsx("p",{children:"Streams your media to the new room while staying in the current room. Requires HLS/RTMP setup."})]})]})]})]})]})]})})};function nv(){const[Ae,Nt]=St.useState(null),ct=({roomId:wt,participantName:at,token:Ft})=>{Nt({meetingId:wt,micEnabled:!0,webcamEnabled:!0,name:at,token:Ft})},Ee=()=>{Nt(null)};return je.jsx("div",{className:"App",children:Ae?je.jsx(Nm,{config:{meetingId:Ae.meetingId,micEnabled:Ae.micEnabled,webcamEnabled:Ae.webcamEnabled,name:Ae.name},token:Ae.token,children:je.jsx(av,{onLeave:Ee,token:Ae.token,initialRoomId:Ae.meetingId,participantName:Ae.name})}):je.jsx(Bm,{onJoinRoom:ct})})}km.createRoot(document.getElementById("root")).render(je.jsx(St.StrictMode,{children:je.jsx(nv,{})}));export{Ks as R,Io as _,St as r};
